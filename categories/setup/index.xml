<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Pigsty – Setup</title>
    <link>/categories/setup/</link>
    <description>Recent content in Setup on Pigsty</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en</language>
    
	  <atom:link href="/categories/setup/index.xml" rel="self" type="application/rss+xml" />
    
    
      
        
      
    
    
    <item>
      <title>Docs: Installation</title>
      <link>/docs/setup/install/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/docs/setup/install/</guid>
      <description>
        
        
        &lt;p&gt;Install Pigsty with 4 steps: &lt;a href=&#34;/docs/setup/install/#prepare&#34;&gt;&lt;strong&gt;Prepare&lt;/strong&gt;&lt;/a&gt;, &lt;a href=&#34;/docs/setup/install/#download&#34;&gt;&lt;strong&gt;Download&lt;/strong&gt;&lt;/a&gt;, &lt;a href=&#34;/docs/setup/install/#configure&#34;&gt;&lt;strong&gt;Configure&lt;/strong&gt;&lt;/a&gt; and &lt;a href=&#34;/docs/setup/install/#install&#34;&gt;&lt;strong&gt;Install&lt;/strong&gt;&lt;/a&gt;. Also check &lt;a href=&#34;/docs/setup/offline/&#34;&gt;offline&lt;/a&gt; if you don&amp;rsquo;t have internet access.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;short-version&#34;&gt;Short Version&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://pigsty.io/docs/pgsql&#34;&gt;&lt;img alt=&#34;Postgres: 17.2&#34; src=&#34;https://img.shields.io/badge/PostgreSQL-17.2-%233E668F?style=flat&amp;logo=postgresql&amp;labelColor=3E668F&amp;logoColor=white&#34;&gt;&lt;/a&gt;
&lt;a href=&#34;https://pigsty.io/docs/node&#34;&gt;&lt;img alt=&#34;Linux&#34; src=&#34;https://img.shields.io/badge/Linux-%23FCC624?style=flat&amp;logo=linux&amp;labelColor=FCC624&amp;logoColor=black&#34;&gt;&lt;/a&gt;
&lt;a href=&#34;https://pigsty.io/docs/reference/compatibility/&#34;&gt;&lt;img alt=&#34;EL Support: 7/8/9&#34; src=&#34;https://img.shields.io/badge/EL-7/8/9-red?style=flat&amp;logo=redhat&amp;logoColor=red&#34;&gt;&lt;/a&gt;
&lt;a href=&#34;https://pigsty.io/docs/reference/compatibility/&#34;&gt;&lt;img alt=&#34;Debian Support: 11/12&#34; src=&#34;https://img.shields.io/badge/Debian-11/12-%23A81D33?style=flat&amp;logo=debian&amp;logoColor=%23A81D33&#34;&gt;&lt;/a&gt;
&lt;a href=&#34;https://pigsty.io/docs/pgext/list/deb/&#34;&gt;&lt;img alt=&#34;Ubuntu Support: 20/22/24&#34; src=&#34;https://img.shields.io/badge/Ubuntu-20/22/24-%23E95420?style=flat&amp;logo=ubuntu&amp;logoColor=%23E95420&#34;&gt;&lt;/a&gt;
&lt;a href=&#34;https://almalinux.org/&#34;&gt;&lt;img alt=&#34;Alma&#34; src=&#34;https://img.shields.io/badge/Alma-slategray?style=flat&amp;logo=almalinux&amp;logoColor=black&#34;&gt;&lt;/a&gt;
&lt;a href=&#34;https://almalinux.org/&#34;&gt;&lt;img alt=&#34;Rocky&#34; src=&#34;https://img.shields.io/badge/Rocky-slategray?style=flat&amp;logo=rockylinux&amp;logoColor=%2310B981&#34;&gt;&lt;/a&gt;
&lt;a href=&#34;https://almalinux.org/&#34;&gt;&lt;img alt=&#34;CentOS&#34; src=&#34;https://img.shields.io/badge/CentOS-slategray?style=flat&amp;logo=centos&amp;logoColor=%23262577&#34;&gt;&lt;/a&gt;
&lt;a href=&#34;https://almalinux.org/&#34;&gt;&lt;img alt=&#34;OracleLinux&#34; src=&#34;https://img.shields.io/badge/Oracle-slategray?style=flat&amp;logo=oracle&amp;logoColor=%23F80000&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;/docs/setup/install/#prepare&#34;&gt;&lt;strong&gt;Prepare&lt;/strong&gt;&lt;/a&gt; a fresh &lt;strong&gt;x86_64/aarch64&lt;/strong&gt; node that runs any &lt;a href=&#34;/docs/reference/compatibility/&#34;&gt;&lt;strong&gt;compatible&lt;/strong&gt;&lt;/a&gt; &lt;strong&gt;Linux&lt;/strong&gt; OS Distros, then &lt;a href=&#34;/docs/setup/install/#download&#34;&gt;&lt;strong&gt;Download&lt;/strong&gt;&lt;/a&gt; &lt;strong&gt;Pigsty&lt;/strong&gt; with:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;curl -fsSL https://repo.pigsty.io/get &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt; bash&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;;&lt;/span&gt; &lt;span style=&#34;color:#204a87&#34;&gt;cd&lt;/span&gt; ~/pigsty&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;You can run the optional &lt;a href=&#34;/docs/setup/offline/#bootstrap&#34;&gt;&lt;strong&gt;bootstrap&lt;/strong&gt;&lt;/a&gt; and &lt;a href=&#34;/docs/setup/install/#configure&#34;&gt;&lt;strong&gt;configure&lt;/strong&gt;&lt;/a&gt; to install &lt;code&gt;ansible&lt;/code&gt; and generate &lt;code&gt;pigsty.yml&lt;/code&gt; config file.&lt;/p&gt;
&lt;p&gt;Next, run the &lt;a href=&#34;/docs/setup/install/#install&#34;&gt;&lt;strong&gt;&lt;code&gt;install.yml&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; playbook with an &lt;a href=&#34;/docs/setup/prepare/#admin-user&#34;&gt;&lt;strong&gt;admin user&lt;/strong&gt;&lt;/a&gt; (&lt;strong&gt;nopass&lt;/strong&gt; &lt;code&gt;ssh&lt;/code&gt; &amp;amp; &lt;code&gt;sudo&lt;/code&gt;):&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./bootstrap&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;;&lt;/span&gt; ./configure&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;;&lt;/span&gt; ./install.yml&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;/docs/setup/offline/#bootstrap&#34;&gt;&lt;strong&gt;bootstrap&lt;/strong&gt;&lt;/a&gt;: &lt;strong&gt;OPTIONAL&lt;/strong&gt;, make sure &lt;code&gt;ansible&lt;/code&gt; is installed, and use offline package &lt;code&gt;/tmp/pkg.tgz&lt;/code&gt; if applicable&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;/docs/setup/install/#configure&#34;&gt;&lt;strong&gt;configure&lt;/strong&gt;&lt;/a&gt;: &lt;strong&gt;OPTIONAL&lt;/strong&gt;, recommend &amp;amp; generate &lt;code&gt;pigsty.yml&lt;/code&gt; config according to your env.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;/docs/setup/install/#install&#34;&gt;&lt;strong&gt;install.yml&lt;/strong&gt;&lt;/a&gt;: &lt;strong&gt;REQUIRED&lt;/strong&gt;, install Pigsty modules according to your config file.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;It may take several minutes to complete the installation according to your network speed and hardware spec.&lt;/p&gt;
&lt;p&gt;After that, you will get a pigsty singleton node &lt;a href=&#34;/docs/setup/install/#interface&#34;&gt;&lt;strong&gt;ready&lt;/strong&gt;&lt;/a&gt;, with Web service on port &lt;code&gt;80/443&lt;/code&gt; and Postgres on port &lt;code&gt;5432&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;BTW: If you feel Pigsty is too complicated, you can consider the &lt;a href=&#34;/docs/setup/slim/&#34;&gt;&lt;strong&gt;Slim Installation&lt;/strong&gt;&lt;/a&gt;, which only installs the necessary components for HA PostgreSQL clusters.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;Example: Singleton Installation on RockyLinux 9.3:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://asciinema.org/a/673459&#34;&gt;&lt;img alt=&#34;asciicast&#34; src=&#34;https://asciinema.org/a/673459.svg&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;use-the-pig-cli&#34;&gt;Use the pig CLI&lt;/h2&gt;
&lt;p&gt;Pigsty has a built-in CLI tool: &lt;a href=&#34;https://github.com/pgsty/pig&#34;&gt;&lt;code&gt;pig&lt;/code&gt;&lt;/a&gt;, which is a package manager for PostgreSQL &amp;amp; extensions, and a cli for Pigsty.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;curl https://repo.pigsty.io/pig &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt; bash
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;It will install the &lt;code&gt;pig&lt;/code&gt; cli tool, you can install pigsty with &lt;code&gt;pig sty&lt;/code&gt; sub command:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;pig sty init     &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# extract the embed src to ~/pigsty &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;pig sty boot     &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# run bootstrap to install ansible &amp;amp; deps&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;pig sty conf     &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# run configure to generate pigsty.yml conf&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;pig sty install  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# run install.yml to complete the installation&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;prepare&#34;&gt;Prepare&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Check &lt;a href=&#34;/docs/setup/prepare/&#34;&gt;Preparation&lt;/a&gt; for a complete guide of resource preparation.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Pigsty support the &lt;code&gt;Linux&lt;/code&gt; kernel and &lt;code&gt;x86_64/aarch64&lt;/code&gt; arch. It can run on any nodes: physical machine, bare metal, virtual machines, or VM-like containers, but a &lt;strong&gt;static&lt;/strong&gt; IPv4 address is required.
The minimum spec is &lt;code&gt;1C1G&lt;/code&gt;. It is recommended to use bare metals or VMs with at least &lt;code&gt;2C4G&lt;/code&gt;. There&amp;rsquo;s no upper limit, and node param will be auto-tuned.&lt;/p&gt;
&lt;p&gt;We recommend using fresh &lt;strong&gt;RockyLinux 8.10 / 9.4&lt;/strong&gt; or &lt;strong&gt;Ubuntu 22.04&lt;/strong&gt; as underlying operating systems.
For a complete list of supported operating systems, please refer to &lt;a href=&#34;/docs/reference/compatibility/&#34;&gt;&lt;strong&gt;Compatibility&lt;/strong&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Public key &lt;code&gt;ssh&lt;/code&gt; access to localhost and NOPASSWD &lt;code&gt;sudo&lt;/code&gt; privilege is required to perform the installation, Try not using the &lt;code&gt;root&lt;/code&gt; user.
If you wish to manage more nodes, these nodes needs to be &lt;code&gt;ssh&lt;/code&gt; / &lt;code&gt;sudo&lt;/code&gt; accessible via your current admin node &amp;amp; admin user.&lt;/p&gt;


&lt;div class=&#34;alert alert-danger&#34; role=&#34;alert&#34;&gt;
&lt;h4 class=&#34;alert-heading&#34;&gt;DO NOT use the root user&lt;/h4&gt;

    While it is possible to install Pigsty as the &lt;code&gt;root&lt;/code&gt; user, It would be much safer using a dedicate admin user (&lt;code&gt;dba&lt;/code&gt;, &lt;code&gt;admin&lt;/code&gt;, &amp;hellip;). due to &lt;a href=&#34;/docs/setup/security/&#34;&gt;&lt;strong&gt;security&lt;/strong&gt;&lt;/a&gt; consideration
which has to be different from &lt;code&gt;root&lt;/code&gt; and dbsu (&lt;code&gt;postgres&lt;/code&gt;). Pigsty will create an optional admin user &lt;code&gt;dba&lt;/code&gt; according to the config by default.

&lt;/div&gt;

&lt;p&gt;Pigsty relies on Ansible to execute playbooks. you have to install &lt;code&gt;ansible&lt;/code&gt; and &lt;code&gt;jmespath&lt;/code&gt; packages fist before &lt;a href=&#34;/docs/setup/install/#install&#34;&gt;&lt;strong&gt;install&lt;/strong&gt;&lt;/a&gt; procedure.
This can be done with the following command, or through the &lt;a href=&#34;/docs/setup/offline/#bootstrap&#34;&gt;&lt;strong&gt;&lt;code&gt;bootstrap&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; procedure, especially when you don&amp;rsquo;t have internet access.&lt;/p&gt;






&lt;ul class=&#34;nav nav-tabs&#34; id=&#34;tabs-1&#34; role=&#34;tablist&#34;&gt;
  &lt;li class=&#34;nav-item&#34;&gt;
      &lt;button class=&#34;nav-link disabled&#34;
          id=&#34;tabs-01-00-tab&#34; data-bs-toggle=&#34;tab&#34; data-bs-target=&#34;#tabs-01-00&#34; role=&#34;tab&#34;
          aria-controls=&#34;tabs-01-00&#34; aria-selected=&#34;false&#34;&gt;
        Install Ansible
      &lt;/button&gt;
    &lt;/li&gt;&lt;li class=&#34;nav-item&#34;&gt;
      &lt;button class=&#34;nav-link active&#34;
          id=&#34;tabs-01-01-tab&#34; data-bs-toggle=&#34;tab&#34; data-bs-target=&#34;#tabs-01-01&#34; role=&#34;tab&#34;
          aria-controls=&#34;tabs-01-01&#34; aria-selected=&#34;true&#34;&gt;
        EL 8 / 9
      &lt;/button&gt;
    &lt;/li&gt;&lt;li class=&#34;nav-item&#34;&gt;
      &lt;button class=&#34;nav-link&#34;
          id=&#34;tabs-01-02-tab&#34; data-bs-toggle=&#34;tab&#34; data-bs-target=&#34;#tabs-01-02&#34; role=&#34;tab&#34;
          aria-controls=&#34;tabs-01-02&#34; aria-selected=&#34;false&#34;&gt;
        EL 7
      &lt;/button&gt;
    &lt;/li&gt;&lt;li class=&#34;nav-item&#34;&gt;
      &lt;button class=&#34;nav-link&#34;
          id=&#34;tabs-01-03-tab&#34; data-bs-toggle=&#34;tab&#34; data-bs-target=&#34;#tabs-01-03&#34; role=&#34;tab&#34;
          aria-controls=&#34;tabs-01-03&#34; aria-selected=&#34;false&#34;&gt;
        Debian / Ubuntu
      &lt;/button&gt;
    &lt;/li&gt;&lt;li class=&#34;nav-item&#34;&gt;
      &lt;button class=&#34;nav-link&#34;
          id=&#34;tabs-01-04-tab&#34; data-bs-toggle=&#34;tab&#34; data-bs-target=&#34;#tabs-01-04&#34; role=&#34;tab&#34;
          aria-controls=&#34;tabs-01-04&#34; aria-selected=&#34;false&#34;&gt;
        MacOS
      &lt;/button&gt;
    &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&#34;tab-content&#34; id=&#34;tabs-1-content&#34;&gt;
    &lt;div class=&#34;tab-pane fade&#34;
        id=&#34;tabs-01-00&#34; role=&#34;tabpanel&#34; aria-labelled-by=&#34;tabs-01-00-tab&#34; tabindex=&#34;1&#34;&gt;
        &lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&#34;tab-pane fade show active&#34;
        id=&#34;tabs-01-01&#34; role=&#34;tabpanel&#34; aria-labelled-by=&#34;tabs-01-01-tab&#34; tabindex=&#34;1&#34;&gt;
        &lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Bash&#34; data-lang=&#34;Bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo dnf install -y ansible python3.12-jmespath python3-cryptography&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&#34;tab-pane fade&#34;
        id=&#34;tabs-01-02&#34; role=&#34;tabpanel&#34; aria-labelled-by=&#34;tabs-01-02-tab&#34; tabindex=&#34;1&#34;&gt;
        &lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Bash&#34; data-lang=&#34;Bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo yum install -y ansible   &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# EL7 does not need to install jmespath explicitly&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&#34;tab-pane fade&#34;
        id=&#34;tabs-01-03&#34; role=&#34;tabpanel&#34; aria-labelled-by=&#34;tabs-01-03-tab&#34; tabindex=&#34;1&#34;&gt;
        &lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Bash&#34; data-lang=&#34;Bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo apt install -y ansible python3-jmespath&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&#34;tab-pane fade&#34;
        id=&#34;tabs-01-04&#34; role=&#34;tabpanel&#34; aria-labelled-by=&#34;tabs-01-04-tab&#34; tabindex=&#34;1&#34;&gt;
        &lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Bash&#34; data-lang=&#34;Bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;brew install ansible&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;hr&gt;
&lt;h2 id=&#34;download&#34;&gt;Download&lt;/h2&gt;
&lt;p&gt;You can get &amp;amp; extract pigsty source via the following command:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;curl -fsSL https://repo.pigsty.io/get &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt; bash&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;;&lt;/span&gt; &lt;span style=&#34;color:#204a87&#34;&gt;cd&lt;/span&gt; ~/pigsty
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;details&gt;&lt;summary&gt;Install with get script&lt;/summary&gt;&lt;br&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ curl -fsSL https://repo.pigsty.io/get &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt; bash
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;v3.2.0&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;===========================================&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ curl -fsSL https://repo.pigsty.io/get &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt; bash
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;Site&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; https://pigsty.io
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;Demo&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; https://demo.pigsty.cc
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;Repo&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; https://github.com/Vonng/pigsty
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;Docs&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; https://pigsty.io/docs/setup/install
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;Download&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;===========================================&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;version&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; v3.2.0 &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;(&lt;/span&gt;from default&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;curl -fSL https://repo.pigsty.io/src/pigsty-v3.2.0.tgz -o /tmp/pigsty-v3.2.0.tgz
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;######################################################################## 100.0%&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;md5sums&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; 01b4acbe8983c1324652ae68b4f3c56f  /tmp/pigsty-v3.2.0.tgz
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;Install&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;===========================================&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;WARN&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; os &lt;span style=&#34;color:#000&#34;&gt;user&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; root , it&lt;span style=&#34;color:#a40000&#34;&gt;&amp;#39;&lt;/span&gt;s recommended to install as a sudo-able admin
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;install&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; /root/pigsty, from /tmp/pigsty-v3.2.0.tgz
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;TodoList&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;===========================================&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87&#34;&gt;cd&lt;/span&gt; /root/pigsty
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./bootstrap      &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# [OPTIONAL] install ansible &amp;amp; use offline package&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./configure      &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# [OPTIONAL] preflight-check and config generation&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./install.yml    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# install pigsty modules according to your config.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;Complete&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;===========================================&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/details&gt;
&lt;p&gt;To install a specific version, pass the version string as the first parameter:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;curl -fsSL https://repo.pigsty.io/get &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt; bash -s v3.2.0&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;;&lt;/span&gt; &lt;span style=&#34;color:#204a87&#34;&gt;cd&lt;/span&gt; ~/pigsty
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;You can also use &lt;code&gt;git&lt;/code&gt; to download the Pigsty source. Please make sure to &lt;strong&gt;check out a specific version&lt;/strong&gt; before using.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;git clone https://github.com/Vonng/pigsty&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;;&lt;/span&gt; &lt;span style=&#34;color:#204a87&#34;&gt;cd&lt;/span&gt; pigsty&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;;&lt;/span&gt; git checkout v3.2.0
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&#34;alert alert-danger&#34; role=&#34;alert&#34;&gt;
&lt;h4 class=&#34;alert-heading&#34;&gt;Checkout a specific version&lt;/h4&gt;

    The &lt;code&gt;main&lt;/code&gt; branch may in an unstable development status.
Always checkout a version when using &lt;code&gt;git&lt;/code&gt;, check &lt;a href=&#34;/docs/releasenote/&#34;&gt;Release Notes&lt;/a&gt; for available versions.

&lt;/div&gt;

&lt;hr&gt;
&lt;h2 id=&#34;configure&#34;&gt;Configure&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;/docs/setup/config/&#34;&gt;&lt;code&gt;configure&lt;/code&gt;&lt;/a&gt; will create a &lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/pigsty.yml&#34;&gt;&lt;code&gt;pigsty.yml&lt;/code&gt;&lt;/a&gt; &lt;a href=&#34;/docs/setup/config/&#34;&gt;config&lt;/a&gt; file according to your env.
This procedure is &lt;strong&gt;OPTIONAL&lt;/strong&gt; if you know how to &lt;a href=&#34;/docs/setup/config/&#34;&gt;configure&lt;/a&gt; pigsty manually. There are many &lt;a href=&#34;/docs/conf/overview/&#34;&gt;&lt;strong&gt;config tempalte&lt;/strong&gt;&lt;/a&gt; for your reference.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./configure &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# interactive-wizard, ask for IP address&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./configure &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;-i&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt;--ip &amp;lt;ipaddr&amp;gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;                     &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# give primary IP &amp;amp; config mode&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;-c&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt;--conf &amp;lt;conf&amp;gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;                     &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# specify config template (relative to conf/ dir without .yml suffix)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;-v&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt;--version &amp;lt;ver&amp;gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;                   &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# specify PostgreSQL major version (13,14,15,16,17)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;-r&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt;--region &amp;lt;default&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt;china&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt;europe&amp;gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;   &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# choose upstream repo region&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;-n&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt;--non-interactive&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;                 &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# skip interactive wizard&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;-x&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt;--proxy&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;                           &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# write proxy env to config &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;details&gt;&lt;summary&gt;Configure Example Output&lt;/summary&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ ./configure
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;configure pigsty v3.2.0 begin
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;region&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; china
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;kernel&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; Linux
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;machine&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; x86_64
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; rpm,yum
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;vendor&lt;/span&gt;  &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; centos &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;(&lt;/span&gt;CentOS Linux&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;version&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;7&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;(&lt;/span&gt;7&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;sudo&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; vagrant ok
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;ssh&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; vagrant@127.0.0.1 ok
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;WARN&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; Multiple IP address candidates found:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;(&lt;/span&gt;1&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;)&lt;/span&gt; 192.168.121.110	    inet 192.168.121.110/24 brd 192.168.121.255 scope global noprefixroute dynamic eth0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;(&lt;/span&gt;2&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;)&lt;/span&gt; 10.10.10.10	    inet 10.10.10.10/24 brd 10.10.10.255 scope global noprefixroute eth1
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;primary_ip&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; 10.10.10.10 &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;(&lt;/span&gt;from demo&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;admin&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; vagrant@10.10.10.10 ok
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;WARN&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;mode&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; el7, CentOS 7.9 EOL @ 2024-06-30, deprecated, consider using el8 or el9 instead
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; configure pigsty &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;done&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;proceed with ./install.yml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/details&gt;&lt;br&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-i|--ip&lt;/code&gt;: Replace IP address placeholder &lt;code&gt;10.10.10.10&lt;/code&gt; with your primary ipv4 address of current node.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-c|--conf&lt;/code&gt;: Generate config from &lt;a href=&#34;/docs/conf/overview/&#34;&gt;config templates&lt;/a&gt; according to this parameter&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-v|--version&lt;/code&gt;: Specify PostgreSQL major version (&lt;code&gt;13|14|15|16|17&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-r|--region&lt;/code&gt;: Set upstream repo mirror according to &lt;code&gt;region&lt;/code&gt; (&lt;code&gt;default|china|europe&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-n|--non-interactive&lt;/code&gt;: skip interactive wizard and using default/arg values&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-x|--proxy&lt;/code&gt;: write current proxy env to the config &lt;a href=&#34;/docs/reference/param/#proxy_env&#34;&gt;&lt;code&gt;proxy_env&lt;/code&gt;&lt;/a&gt; (&lt;code&gt;http_proxy&lt;/code&gt;/&lt;code&gt;HTTP_PROXY&lt;/code&gt;,  &lt;code&gt;HTTPS_PROXY&lt;/code&gt;,  &lt;code&gt;ALL_PROXY&lt;/code&gt;,  &lt;code&gt;NO_PROXY&lt;/code&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;When &lt;code&gt;-n|--non-interactive&lt;/code&gt; is specified, you have to specify a primary IP address with &lt;code&gt;-i|--ip &amp;lt;ipaddr&amp;gt;&lt;/code&gt; in case of multiple IP address,
since there&amp;rsquo;s no default value for primary IP address in this case.&lt;/p&gt;
&lt;p&gt;If your machine&amp;rsquo;s network interface have multiple IP addresses, you&amp;rsquo;ll need to explicitly specify a &lt;strong&gt;primary&lt;/strong&gt; IP address for the current node using &lt;code&gt;-i|--ip &amp;lt;ipaddr&amp;gt;&lt;/code&gt;, or provide it during interactive inquiry. The address should be a static IP address, and you should avoid using any public IP addresses.&lt;/p&gt;
&lt;p&gt;You can check and modify the generated config file &lt;code&gt;~/pigsty/pigsty.yml&lt;/code&gt; before installation.&lt;/p&gt;


&lt;div class=&#34;alert alert-danger&#34; role=&#34;alert&#34;&gt;
&lt;h4 class=&#34;alert-heading&#34;&gt;Change the default passwords!&lt;/h4&gt;

    PLEASE CHANGE THE DEFAULT PASSWORDs in the config file before installation, check &lt;a href=&#34;/docs/setup/security/#passwords&#34;&gt;secure password&lt;/a&gt; for details.

&lt;/div&gt;

&lt;hr&gt;
&lt;h2 id=&#34;install&#34;&gt;Install&lt;/h2&gt;
&lt;p&gt;Run the &lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/pigsty.yml&#34;&gt;&lt;code&gt;install.yml&lt;/code&gt;&lt;/a&gt; playbook to perform a full installation on current node&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./install.yml    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# install everything in one-pass&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;details&gt;&lt;summary&gt;Installation Output Example&lt;/summary&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;vagrant@meta pigsty&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;$ ./install.yml
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;PLAY &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;IDENTITY&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; ********************************************************************************************************************************
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;TASK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;node_id : get node fact&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; *****************************************************************************************************************
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;changed: &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;10.10.10.10&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;PLAY RECAP **************************************************************************************************************************************************************************
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;10.10.10.10                : &lt;span style=&#34;color:#000&#34;&gt;ok&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;288&lt;/span&gt;  &lt;span style=&#34;color:#000&#34;&gt;changed&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;215&lt;/span&gt;  &lt;span style=&#34;color:#000&#34;&gt;unreachable&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;0&lt;/span&gt;    &lt;span style=&#34;color:#000&#34;&gt;failed&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;0&lt;/span&gt;    &lt;span style=&#34;color:#000&#34;&gt;skipped&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;64&lt;/span&gt;   &lt;span style=&#34;color:#000&#34;&gt;rescued&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;0&lt;/span&gt;    &lt;span style=&#34;color:#000&#34;&gt;ignored&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;localhost                  : &lt;span style=&#34;color:#000&#34;&gt;ok&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;3&lt;/span&gt;    &lt;span style=&#34;color:#000&#34;&gt;changed&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;0&lt;/span&gt;    &lt;span style=&#34;color:#000&#34;&gt;unreachable&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;0&lt;/span&gt;    &lt;span style=&#34;color:#000&#34;&gt;failed&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;0&lt;/span&gt;    &lt;span style=&#34;color:#000&#34;&gt;skipped&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;4&lt;/span&gt;    &lt;span style=&#34;color:#000&#34;&gt;rescued&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;0&lt;/span&gt;    &lt;span style=&#34;color:#000&#34;&gt;ignored&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/details&gt;&lt;br&gt;
&lt;p&gt;It&amp;rsquo;s a standard ansible &lt;a href=&#34;/docs/setup/playbook/&#34;&gt;&lt;strong&gt;playbook&lt;/strong&gt;&lt;/a&gt;, you can have fine-grained control with ansible options:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-l&lt;/code&gt;: limit execution targets&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-t&lt;/code&gt;: limit execution tasks&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-e&lt;/code&gt;: passing extra args&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-i&lt;/code&gt;: use another config&lt;/li&gt;
&lt;li&gt;&amp;hellip;&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&#34;alert alert-danger&#34; role=&#34;alert&#34;&gt;
&lt;h4 class=&#34;alert-heading&#34;&gt;DON&#39;T EVER RUN THIS PLAYBOOK AGAIN!&lt;/h4&gt;

    &lt;p&gt;It&amp;rsquo;s very DANGEROUS to re-run &lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/install.yml&#34;&gt;&lt;strong&gt;&lt;code&gt;install.yml&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; on existing deployment!&lt;/p&gt;
&lt;p&gt;It may nuke your entire deployment!!! Only do this when you know what you are doing.&lt;/p&gt;
&lt;p&gt;Otherwise, consider &lt;code&gt;rm install.yml&lt;/code&gt; or &lt;code&gt;chmod a-x install.yml&lt;/code&gt; to avoid accidental execution.&lt;/p&gt;


&lt;/div&gt;

&lt;hr&gt;
&lt;h2 id=&#34;interface&#34;&gt;Interface&lt;/h2&gt;
&lt;p&gt;Once installed, you&amp;rsquo;ll have four &lt;a href=&#34;/docs/about/module/#core-modules&#34;&gt;core modules&lt;/a&gt; &lt;a href=&#34;/docs/pgsql/&#34;&gt;&lt;strong&gt;&lt;code&gt;PGSQL&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;, &lt;a href=&#34;/docs/infra/&#34;&gt;&lt;strong&gt;&lt;code&gt;INFRA&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;, &lt;a href=&#34;/docs/node/&#34;&gt;&lt;strong&gt;&lt;code&gt;NODE&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;, and &lt;a href=&#34;/docs/etcd/&#34;&gt;&lt;strong&gt;&lt;code&gt;ETCD&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; the current node.&lt;/p&gt;
&lt;p&gt;The &lt;a href=&#34;/docs/pgsql/&#34;&gt;&lt;strong&gt;PGSQL&lt;/strong&gt;&lt;/a&gt; provides a PostgreSQL singleton which can be &lt;a href=&#34;/docs/concept/svc/#personal-user&#34;&gt;accessed&lt;/a&gt; via:&lt;/p&gt;





&lt;ul class=&#34;nav nav-tabs&#34; id=&#34;tabs-5&#34; role=&#34;tablist&#34;&gt;
  &lt;li class=&#34;nav-item&#34;&gt;
      &lt;button class=&#34;nav-link disabled&#34;
          id=&#34;tabs-05-00-tab&#34; data-bs-toggle=&#34;tab&#34; data-bs-target=&#34;#tabs-05-00&#34; role=&#34;tab&#34;
          aria-controls=&#34;tabs-05-00&#34; aria-selected=&#34;false&#34;&gt;
        Default Users
      &lt;/button&gt;
    &lt;/li&gt;&lt;li class=&#34;nav-item&#34;&gt;
      &lt;button class=&#34;nav-link active&#34;
          id=&#34;tabs-05-01-tab&#34; data-bs-toggle=&#34;tab&#34; data-bs-target=&#34;#tabs-05-01&#34; role=&#34;tab&#34;
          aria-controls=&#34;tabs-05-01&#34; aria-selected=&#34;true&#34;&gt;
        dbuser_dba
      &lt;/button&gt;
    &lt;/li&gt;&lt;li class=&#34;nav-item&#34;&gt;
      &lt;button class=&#34;nav-link&#34;
          id=&#34;tabs-05-02-tab&#34; data-bs-toggle=&#34;tab&#34; data-bs-target=&#34;#tabs-05-02&#34; role=&#34;tab&#34;
          aria-controls=&#34;tabs-05-02&#34; aria-selected=&#34;false&#34;&gt;
        dbuser_meta
      &lt;/button&gt;
    &lt;/li&gt;&lt;li class=&#34;nav-item&#34;&gt;
      &lt;button class=&#34;nav-link&#34;
          id=&#34;tabs-05-03-tab&#34; data-bs-toggle=&#34;tab&#34; data-bs-target=&#34;#tabs-05-03&#34; role=&#34;tab&#34;
          aria-controls=&#34;tabs-05-03&#34; aria-selected=&#34;false&#34;&gt;
        dbuser_view
      &lt;/button&gt;
    &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&#34;tab-content&#34; id=&#34;tabs-5-content&#34;&gt;
    &lt;div class=&#34;tab-pane fade&#34;
        id=&#34;tabs-05-00&#34; role=&#34;tabpanel&#34; aria-labelled-by=&#34;tabs-05-00-tab&#34; tabindex=&#34;5&#34;&gt;
        &lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&#34;tab-pane fade show active&#34;
        id=&#34;tabs-05-01&#34; role=&#34;tabpanel&#34; aria-labelled-by=&#34;tabs-05-01-tab&#34; tabindex=&#34;5&#34;&gt;
        &lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Bash&#34; data-lang=&#34;Bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;psql postgres://dbuser_dba:DBUser.DBA@10.10.10.10/meta     &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# DBA / superuser (via IP)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&#34;tab-pane fade&#34;
        id=&#34;tabs-05-02&#34; role=&#34;tabpanel&#34; aria-labelled-by=&#34;tabs-05-02-tab&#34; tabindex=&#34;5&#34;&gt;
        &lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Bash&#34; data-lang=&#34;Bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;psql postgres://dbuser_meta:DBUser.Meta@10.10.10.10/meta   &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# business admin, read / write / ddl&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&#34;tab-pane fade&#34;
        id=&#34;tabs-05-03&#34; role=&#34;tabpanel&#34; aria-labelled-by=&#34;tabs-05-03-tab&#34; tabindex=&#34;5&#34;&gt;
        &lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Bash&#34; data-lang=&#34;Bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;psql postgres://dbuser_view:DBUser.View@pg-meta/meta       &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# read-only user&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;The &lt;a href=&#34;/docs/infra/&#34;&gt;&lt;strong&gt;INFRA&lt;/strong&gt;&lt;/a&gt; module gives you an entire modern observability stack, exposed by Nginx on (&lt;code&gt;80&lt;/code&gt; / &lt;code&gt;443&lt;/code&gt;):&lt;/p&gt;
&lt;p&gt;There are several services are exposed by Nginx (configured by &lt;a href=&#34;/docs/reference/param/#infra_portal&#34;&gt;&lt;code&gt;infra_portal&lt;/code&gt;&lt;/a&gt;):&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:center&#34;&gt;Component&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;Port&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;Domain&lt;/th&gt;
&lt;th&gt;Comment&lt;/th&gt;
&lt;th&gt;Public Demo&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;strong&gt;Nginx&lt;/strong&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;strong&gt;80/443&lt;/strong&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;code&gt;h.pigsty&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Web Service Portal, Repo&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;http://home.pigsty.cc&#34;&gt;&lt;code&gt;home.pigsty.cc&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;AlertManager&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;9093&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;code&gt;a.pigsty&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Alter Aggregator&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;http://a.pigsty.cc&#34;&gt;&lt;code&gt;a.pigsty.cc&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;strong&gt;Grafana&lt;/strong&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;strong&gt;3000&lt;/strong&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;code&gt;g.pigsty&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Grafana Dashboard Home&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;https://demo.pigsty.cc&#34;&gt;&lt;code&gt;demo.pigsty.cc&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Prometheus&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;9090&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;code&gt;p.pigsty&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Prometheus Web UI&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;http://p.pigsty.cc&#34;&gt;&lt;code&gt;p.pigsty.cc&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;Grafana Dashboards (g.pigsty, port 3000) credentials, user: &lt;code&gt;admin&lt;/code&gt; / pass: &lt;code&gt;pigsty&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&#34;https://demo.pigsty.cc&#34;&gt;&lt;img alt=&#34;pigsty-home.jpg&#34; src=&#34;/img/pigsty/home.jpg&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;You can access these web UI directly via IP + port. While the common best practice would be access them through Nginx and distinguish via domain names. You&amp;rsquo;ll need configure DNS records, or use the local static records (&lt;code&gt;/etc/hosts&lt;/code&gt;) for that.&lt;/p&gt;
&lt;br&gt;
&lt;details&gt;&lt;summary&gt;How to access Pigsty Web UI by domain name?&lt;/summary&gt;&lt;br&gt;
&lt;p&gt;There are several options:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Resolve internet domain names through a DNS service provider, suitable for systems accessible from the public internet.&lt;/li&gt;
&lt;li&gt;Configure internal network DNS server resolution records for internal domain name resolution.&lt;/li&gt;
&lt;li&gt;Modify the local machine&amp;rsquo;s &lt;code&gt;/etc/hosts&lt;/code&gt; file to add static resolution records. (For Windows, it&amp;rsquo;s located at:)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;We recommend the third method for common users. On the machine (which runs the browser), add the following record into &lt;code&gt;/etc/hosts&lt;/code&gt; (sudo required) or &lt;code&gt;C:\Windows\System32\drivers\etc\hosts&lt;/code&gt; in Windows:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-ini&#34; data-lang=&#34;ini&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#c4a000&#34;&gt;&amp;lt;your_public_ip_address&amp;gt;  h.pigsty a.pigsty p.pigsty g.pigsty&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;You have to use the &lt;strong&gt;external&lt;/strong&gt; IP address of the node here.&lt;/p&gt;
&lt;/details&gt;&lt;br&gt;
&lt;details&gt;&lt;summary&gt;How to configure server side domain names?&lt;/summary&gt;&lt;br&gt;
&lt;p&gt;The server-side domain name is configured with Nginx. If you want to replace the default domain name, simply enter the domain you wish to use in the parameter &lt;a href=&#34;/docs/reference/param/#infra_portal&#34;&gt;&lt;code&gt;infra_portal&lt;/code&gt;&lt;/a&gt;. When you access the Grafana monitoring homepage via &lt;code&gt;http://g.pigsty&lt;/code&gt;, it is actually accessed through the Nginx proxy to Grafana&amp;rsquo;s WebUI:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;http://g.pigsty ️-&amp;gt; http://10.10.10.10:80 &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;(&lt;/span&gt;nginx&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;)&lt;/span&gt; -&amp;gt; http://10.10.10.10:3000 &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;(&lt;/span&gt;grafana&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;If &lt;a href=&#34;/docs/reference/param/#nginx_sslmode&#34;&gt;&lt;code&gt;nginx_sslmode&lt;/code&gt;&lt;/a&gt; is set to &lt;code&gt;enabled&lt;/code&gt; or &lt;code&gt;enforced&lt;/code&gt;, you can trust self-signed ca: &lt;code&gt;files/pki/ca/ca.crt&lt;/code&gt; to use &lt;code&gt;https&lt;/code&gt; in your browser.&lt;/p&gt;
&lt;/details&gt;&lt;br&gt;
&lt;details&gt;&lt;summary&gt;How to use HTTPS in Pigsty WebUI?&lt;/summary&gt;&lt;br&gt;
&lt;p&gt;Pigsty will generate self-signed certs for Nginx, if you wish to access via HTTPS without &amp;ldquo;Warning&amp;rdquo;, here are some options:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Apply &amp;amp; add real certs from trusted CA: such as Let&amp;rsquo;s Encrypt&lt;/li&gt;
&lt;li&gt;Trust your generated CA crt as root ca in your OS and browser&lt;/li&gt;
&lt;li&gt;Type &lt;code&gt;thisisunsafe&lt;/code&gt; in Chrome will supress the warning&lt;/li&gt;
&lt;/ul&gt;
&lt;/details&gt;
&lt;hr&gt;
&lt;h2 id=&#34;more&#34;&gt;More&lt;/h2&gt;
&lt;p&gt;You can deploy &amp;amp; monitor more clusters with pigsty: add more nodes to &lt;code&gt;pigsty.yml&lt;/code&gt; and run corresponding playbooks:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;bin/node-add   pg-test      &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# init 3 nodes of cluster pg-test&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;bin/pgsql-add  pg-test      &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# init HA PGSQL Cluster pg-test&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;bin/redis-add  redis-ms     &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# init redis cluster redis-ms&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Remember that most modules require the &lt;a href=&#34;/docs/node/&#34;&gt;&lt;code&gt;NODE&lt;/code&gt;&lt;/a&gt; module installed first. Check &lt;a href=&#34;/docs/about/module/&#34;&gt;&lt;strong&gt;modules&lt;/strong&gt;&lt;/a&gt; for detail&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;/docs/pgsql/&#34;&gt;&lt;strong&gt;&lt;code&gt;PGSQL&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;, &lt;a href=&#34;/docs/infra/&#34;&gt;&lt;strong&gt;&lt;code&gt;INFRA&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;, &lt;a href=&#34;/docs/node/&#34;&gt;&lt;strong&gt;&lt;code&gt;NODE&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;, &lt;a href=&#34;/docs/etcd/&#34;&gt;&lt;strong&gt;&lt;code&gt;ETCD&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;, &lt;a href=&#34;/docs/minio/&#34;&gt;&lt;strong&gt;&lt;code&gt;MINIO&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;, &lt;a href=&#34;/docs/redis/&#34;&gt;&lt;strong&gt;&lt;code&gt;REDIS&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;, &lt;a href=&#34;/docs/ferret/&#34;&gt;&lt;strong&gt;&lt;code&gt;FERRET&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;, &lt;a href=&#34;/docs/node/&#34;&gt;&lt;strong&gt;&lt;code&gt;DOCKER&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt;, ……&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;/docs/kernel/babelfish/&#34;&gt;&lt;img alt=&#34;BABELFISH&#34; src=&#34;https://img.shields.io/badge/WILTONDB-%2388A3CA?style=flat&amp;logo=postgresql&amp;labelColor=88A3CA&amp;logoColor=black&#34;&gt;&lt;/a&gt;
&lt;a href=&#34;/docs/kernel/polardb/&#34;&gt;&lt;img alt=&#34;POLARDB PG&#34; src=&#34;https://img.shields.io/badge/POLARDB_PG-%23DF6F2E?style=flat&amp;logo=postgresql&amp;labelColor=DF6F2E&amp;logoColor=black&#34;&gt;&lt;/a&gt;
&lt;a href=&#34;/docs/kernel/polardb-o/&#34;&gt;&lt;img alt=&#34;POLARDB ORACLE&#34; src=&#34;https://img.shields.io/badge/POLARDB_ORACLE-%23DF6F2E?style=flat&amp;logo=postgresql&amp;labelColor=DF6F2E&amp;logoColor=black&#34;&gt;&lt;/a&gt;
&lt;a href=&#34;/docs/kernel/ivorysql/&#34;&gt;&lt;img alt=&#34;IVORYSQL&#34; src=&#34;https://img.shields.io/badge/IVORYSQL-%23E8AC52?style=flat&amp;logo=postgresql&amp;labelColor=E8AC52&amp;logoColor=black&#34;&gt;&lt;/a&gt;
&lt;a href=&#34;/docs/kernel/greenplum/&#34;&gt;&lt;img alt=&#34;GREENPLUM&#34; src=&#34;https://img.shields.io/badge/GREENPLUM-%23578B09?style=flat&amp;logo=postgresql&amp;labelColor=578B09&amp;logoColor=black&#34;&gt;&lt;/a&gt;
&lt;a href=&#34;/docs/kernel/cloudberry/&#34;&gt;&lt;img alt=&#34;CLOUDBERRY&#34; src=&#34;https://img.shields.io/badge/CLOUDBERRY-orange?style=flat&amp;logo=postgresql&amp;labelColor=orange&amp;logoColor=black&#34;&gt;&lt;/a&gt;
&lt;a href=&#34;/docs/kernel/neon/&#34;&gt;&lt;img alt=&#34;NEON&#34; src=&#34;https://img.shields.io/badge/NEON-%2366D9C6?style=flat&amp;logo=postgresql&amp;labelColor=66D9C6&amp;logoColor=black&#34;&gt;&lt;/a&gt;
&lt;a href=&#34;/docs/kernel/supabase/&#34;&gt;&lt;img alt=&#34;SUPABASE&#34; src=&#34;https://img.shields.io/badge/SUPABASE-%233FCF8E?style=flat&amp;logo=supabase&amp;labelColor=3FCF8E&amp;logoColor=white&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;/docs/pro/kafka/&#34;&gt;&lt;img alt=&#34;KAFKA&#34; src=&#34;https://img.shields.io/badge/KAFKA-%23231F20?style=flat&amp;logo=apachekafka&amp;labelColor=231F20&amp;logoColor=white&#34;&gt;&lt;/a&gt;
&lt;a href=&#34;/docs/pro/kafka/&#34;&gt;&lt;img alt=&#34;MYSQL&#34; src=&#34;https://img.shields.io/badge/MYSQL-%234479A1?style=flat&amp;logo=mysql&amp;labelColor=4479A1&amp;logoColor=white&#34;&gt;&lt;/a&gt;
&lt;a href=&#34;/docs/pro/duckdb/&#34;&gt;&lt;img alt=&#34;DUCKDB&#34; src=&#34;https://img.shields.io/badge/DUCKDB-%23FFF000?style=flat&amp;logo=duckdb&amp;labelColor=FFF000&amp;logoColor=white&#34;&gt;&lt;/a&gt;
&lt;a href=&#34;/docs/pro/tigerbeetle/&#34;&gt;&lt;img alt=&#34;TIGERBEETLE&#34; src=&#34;https://img.shields.io/badge/TIGERBEETLE-%231919191?style=flat&amp;logo=openbugbounty&amp;labelColor=1919191&amp;logoColor=white&#34;&gt;&lt;/a&gt;
&lt;a href=&#34;/docs/pro/victoria/&#34;&gt;&lt;img alt=&#34;VICTORIA&#34; src=&#34;https://img.shields.io/badge/VICTORIA-%23621773?style=flat&amp;logo=victoriametrics&amp;labelColor=621773&amp;logoColor=white&#34;&gt;&lt;/a&gt;
&lt;a href=&#34;/docs/pro/kube/&#34;&gt;&lt;img alt=&#34;KUBERNETES&#34; src=&#34;https://img.shields.io/badge/KUBERNETES-%23326CE5?style=flat&amp;logo=kubernetes&amp;labelColor=326CE5&amp;logoColor=white&#34;&gt;&lt;/a&gt;
&lt;a href=&#34;/docs/pro/consul/&#34;&gt;&lt;img alt=&#34;CONSUL&#34; src=&#34;https://img.shields.io/badge/CONSUL-%23F24C53?style=flat&amp;logo=consul&amp;labelColor=F24C53&amp;logoColor=white&#34;&gt;&lt;/a&gt;
&lt;a href=&#34;/docs/pro/jupyter/&#34;&gt;&lt;img alt=&#34;JUPYTER&#34; src=&#34;https://img.shields.io/badge/JUPYTER-%23F37626?style=flat&amp;logo=jupyter&amp;labelColor=F37626&amp;logoColor=white&#34;&gt;&lt;/a&gt;
&lt;a href=&#34;/docs/pro/&#34;&gt;&lt;img alt=&#34;COCKROACH&#34; src=&#34;https://img.shields.io/badge/COCKROACH-%236933FF?style=flat&amp;logo=cockroachlabs&amp;labelColor=6933FF&amp;logoColor=white&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;br&gt;
&lt;br&gt;
&lt;hr&gt;
&lt;br&gt;
&lt;br&gt;

      </description>
    </item>
    
    <item>
      <title>Docs: Offline Install</title>
      <link>/docs/setup/offline/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/docs/setup/offline/</guid>
      <description>
        
        
        &lt;p&gt;Pigsty&amp;rsquo;s &lt;a href=&#34;/docs/setup/install/&#34;&gt;&lt;strong&gt;Installation&lt;/strong&gt;&lt;/a&gt; procedure requires Internet access, but production database servers are often isolated from the Internet.&lt;/p&gt;
&lt;p&gt;To address this issue, Pigsty supports offline installation from &lt;a href=&#34;/docs/setup/offline/#offline-package&#34;&gt;&lt;strong&gt;offline packages&lt;/strong&gt;&lt;/a&gt;, which can help you install Pigsty in an environment without Internet access, and increase the certainty, reliability, speed and consistency of the installation process.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;/docs/setup/offline/#build-local-repo&#34;&gt;Build Local Repo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;/docs/setup/offline/#make-offline-pacakge&#34;&gt;Make Offline Pacakge&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;/docs/setup/offline/#use-offline-pacakge&#34;&gt;Use Offline Package&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;/docs/setup/offline/#compatibility-notes&#34;&gt;Compatibility Notes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;/docs/setup/offline/#download-pre-made-package&#34;&gt;Download Pre-made Package&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;/docs/setup/offline/#bootstrap&#34;&gt;Bootstrap&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;build-local-repo&#34;&gt;Build Local Repo&lt;/h2&gt;
&lt;p&gt;Pigsty&amp;rsquo;s &lt;a href=&#34;/docs/setup/install/&#34;&gt;&lt;strong&gt;install&lt;/strong&gt;&lt;/a&gt; procedure will download all the required rpm/deb packages and all its dependencies from the upstream yum/apt repo, and build a local repo before installing the software.&lt;/p&gt;
&lt;p&gt;The repo is served by Nginx and is available to all nodes in the deployment environment, including itself. All the installation will go through this local repo without further internet access.&lt;/p&gt;
&lt;p&gt;There are certain benefits to using a local repo:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;It can avoid repetitive download requests and traffic consumption, significantly speeding up the installation and improving its reliability.&lt;/li&gt;
&lt;li&gt;It will take a &lt;strong&gt;snapshot&lt;/strong&gt; of current software versions, ensuring the consistency of the software versions installed across nodes in the environment.&lt;/li&gt;
&lt;li&gt;The snapshot contains all the deps, so it can avoid upstream dependency changes that may cause installation failures. One successful node can ensure all nodes in the same env.&lt;/li&gt;
&lt;li&gt;The built local software repo can be packaged as a whole tarball and copied to an isolated environment with the same operating system for &lt;strong&gt;offline installation&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;The default location for local repo is &lt;code&gt;/www/pigsty&lt;/code&gt; (customizable by &lt;a href=&#34;/docs/reference/param/#nginx_home&#34;&gt;&lt;code&gt;nginx_home&lt;/code&gt;&lt;/a&gt; &amp;amp; &lt;a href=&#34;/docs/reference/param/#repo_name&#34;&gt;&lt;code&gt;repo_name&lt;/code&gt;&lt;/a&gt;).
The repo will be created by &lt;code&gt;createrepo_c&lt;/code&gt; or &lt;code&gt;dpkg_dev&lt;/code&gt; according to the OS distro, and referenced by all nodes in the environment through &lt;a href=&#34;/docs/reference/param/#repo_upstream&#34;&gt;&lt;strong&gt;&lt;code&gt;repo_upstream&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; entry with &lt;code&gt;module=local&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;You can perform install on one node with the exact same OS version, then copy the local repo directory to another node with the same OS version for offline installation.&lt;/p&gt;
&lt;p&gt;A more common practice is to package the local software repo directory into an &lt;a href=&#34;/docs/setup/offline/#make-offline-pacakge&#34;&gt;&lt;strong&gt;offline package&lt;/strong&gt;&lt;/a&gt; and copy it to the isolated node for installation.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;make-offline-pacakge&#34;&gt;Make Offline Pacakge&lt;/h2&gt;
&lt;p&gt;Pigsty offers a &lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/cache.yml&#34;&gt;&lt;strong&gt;&lt;code&gt;cache.yml&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; playbook to make offline package.
For example, the following command will take the local software repo on the infra node &lt;code&gt;/www/pigsty&lt;/code&gt; and package it into an offline package, and retrieve it to the local &lt;code&gt;dist/${version}&lt;/code&gt; directory.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./cache.yml -l infra  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;You can customize the output directory and name of the offline package with the &lt;code&gt;cache_pkg_dir&lt;/code&gt; and &lt;code&gt;cache_pkg_name&lt;/code&gt; parameters.
For example, the following command will fetch the made offline package to &lt;code&gt;files/pkg.tgz&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./cache.yml -l 10.10.10.10 -e &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;{&amp;#34;cache_pkg_dir&amp;#34;:&amp;#34;files&amp;#34;,&amp;#34;cache_pkg_name&amp;#34;:&amp;#34;pkg.tgz&amp;#34;}&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;use-offline-pacakge&#34;&gt;Use Offline Pacakge&lt;/h2&gt;
&lt;p&gt;The offline package is a tarball made by &lt;code&gt;gzip&lt;/code&gt; and &lt;code&gt;tar&lt;/code&gt;, and extract to &lt;code&gt;/www/pigsty&lt;/code&gt; for use.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo rm -rf /www/pigsty ； sudo tar -xf /tmp/pkg.tgz -C /www 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The simpler way is to copy the offline package to &lt;code&gt;/tmp/pkg.tgz&lt;/code&gt; on the isolated node to be installed, and Pigsty will automatically unpack it during the &lt;a href=&#34;/docs/setup/offline/#bootstrap&#34;&gt;&lt;strong&gt;&lt;code&gt;bootstrap&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; process and install from it.&lt;/p&gt;
&lt;p&gt;When building the local software repo, Pigsty will generate a marker file &lt;code&gt;repo_complete&lt;/code&gt; to mark it as a finished Pigsty local software repo.
When Pigsty &lt;a href=&#34;/docs/setup/install/#install&#34;&gt;&lt;strong&gt;install.yml&lt;/strong&gt;&lt;/a&gt; playbook finds that the local software repo already exists, it will enter offline install mode.&lt;/p&gt;
&lt;p&gt;In offline install mode, pigsty will no longer download software from the internet, but install from the local software repo directly.&lt;/p&gt;


&lt;div class=&#34;alert alert-secondary&#34; role=&#34;alert&#34;&gt;
&lt;h4 class=&#34;alert-heading&#34;&gt;Criteria for Offline Install Mode&lt;/h4&gt;

     &lt;br&gt;
&lt;p&gt;The criteria for the existence of a local repo is the &lt;strong&gt;presence&lt;/strong&gt; of a marker file located by default at &lt;code&gt;/www/pigsty/repo_complete&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;This marker file is automatically generated after the download is complete during the standard installation procedure, indicating a usable local software repo is done.&lt;/p&gt;
&lt;p&gt;Deleting the &lt;code&gt;repo_complete&lt;/code&gt; marker file of the local repo will mark the procedure for re-download &lt;strong&gt;missing&lt;/strong&gt; packages from upstream.&lt;/p&gt;


&lt;/div&gt;

&lt;hr&gt;
&lt;h2 id=&#34;compatibility-notes&#34;&gt;Compatibility Notes&lt;/h2&gt;
&lt;p&gt;The software packages (rpm/deb) can be roughly divided into 3 categories:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;/docs/infra/&#34;&gt;&lt;strong&gt;INFRA&lt;/strong&gt;&lt;/a&gt; Packages such as Prometheus &amp;amp; Grafana stacks and monitoring agents, which are OS distro/version &lt;strong&gt;independent&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;/docs/pgsql/&#34;&gt;&lt;strong&gt;PGSQL&lt;/strong&gt;&lt;/a&gt; Packages such as pgsql kernel &amp;amp; extensions, which are optionally bound to the Linux distro &lt;strong&gt;major&lt;/strong&gt; version.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;/docs/node/&#34;&gt;&lt;strong&gt;NODE&lt;/strong&gt;&lt;/a&gt; Packages such as so libs, utils, deps, which are bound to the Linux distro &lt;strong&gt;major &amp;amp; minor&lt;/strong&gt; version.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Therefore, the compatibility of offline packages depends on the &lt;strong&gt;OS major version&lt;/strong&gt; and &lt;strong&gt;minor version&lt;/strong&gt; because it contains all three types of packages.&lt;/p&gt;
&lt;p&gt;Usually, offline packages can be used in an environment with the exact same OS major/minor version.
If the major version does not match, INFRA packages can usually be installed successfully, while PGSQL and NODE packages may have missing or conflicting dependencies.
If the minor version does not match, INFRA and PGSQL packages can usually be installed successfully, while NODE packages have a chance of success and a chance of failure.&lt;/p&gt;
&lt;p&gt;For example, offline packages made on RockLinux 8.9 &lt;strong&gt;may&lt;/strong&gt; have a greater chance of success when offline installed on RockyLinux 8.10 environment.
While offline packages made on Ubuntu 22.04.3 is most likely to fail on Ubuntu 22.04.4.
(Yes the minor version here in &lt;a href=&#34;https://wiki.ubuntu.com/Releases&#34;&gt;&lt;strong&gt;Ubuntu&lt;/strong&gt;&lt;/a&gt; is final &lt;code&gt;.3&lt;/code&gt; rather than &lt;code&gt;.04&lt;/code&gt;, and the major version is &lt;code&gt;22.04|jammy&lt;/code&gt;)&lt;/p&gt;
&lt;p&gt;If the OS minor version is not exactly matched, you can use a hybrid strategy to install, that is, after the &lt;a href=&#34;/docs/setup/offline/#bootstrap&#34;&gt;&lt;strong&gt;bootstrap&lt;/strong&gt;&lt;/a&gt; process,
remove the &lt;code&gt;/www/pigsty/repo_complete&lt;/code&gt; marker file, so that Pigsty will re-download the &lt;strong&gt;missing&lt;/strong&gt; NODE packages and related dependencies during the installation process.
Which can effectively solve the dependency conflict problem when using offline packages, and don&amp;rsquo;t lose the benefits of offline installation.&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;download-pre-made-package&#34;&gt;Download Pre-made Package&lt;/h3&gt;
&lt;p&gt;Pigsty does not offer pre-made offline packages for download starting from Pigsty v3.0.0.&lt;/p&gt;
&lt;p&gt;It will use online installation by default, since it can download the exact NODE packages from the official repo to avoid dependency conflicts.
Besides, there are too much maintenance overhead to keep the offline packages for so many OS distros / major / minor version combinations.&lt;/p&gt;
&lt;p&gt;BUT, we do offer pre-made offline packages for the following precise OS versions, which include Docker and pljava/jdbc_fw components, ready to use with a fair price.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;RockyLinux 8.9&lt;/li&gt;
&lt;li&gt;RockyLinux 9.3&lt;/li&gt;
&lt;li&gt;Ubuntu 22.04.3&lt;/li&gt;
&lt;li&gt;Debian 12.4&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;All the integration tests of Pigsty are based on the pre-made offline package snapshot before release,
Using these can effectively reduce the delivery risk caused by upstream dependency changes, save you the trouble and waiting time.
And show your support for the open-source cause, with a fair price of &lt;strong&gt;$99&lt;/strong&gt;, please contact @Vonng (&lt;a href=&#34;mailto:rh@vonng.com&#34;&gt;rh@vonng.com&lt;/a&gt;) to get the download link.&lt;/p&gt;
&lt;p&gt;We use offline package to deliver our &lt;strong&gt;pro&lt;/strong&gt; version, which is precisely matched to your specific OS distro major/minor version and has been tested after integration.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;offline-package&#34;&gt;Offline Package&lt;/h2&gt;
&lt;p&gt;Therefore, Pigsty offers an offline installation feature, allowing you to complete the installation and deployment in an environment without internet access.&lt;/p&gt;
&lt;p&gt;If you have internet access, downloading the pre-made &lt;a href=&#34;/docs/setup/offline/#offline-package&#34;&gt;&lt;strong&gt;Offline Package&lt;/strong&gt;&lt;/a&gt; in advance can help speed up the installation process and enhance the certainty and reliability of the installation.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Pigsty will no longer provide offline software packages for download starting from v3.0.0&lt;/p&gt;
&lt;p&gt;You can make your own with the &lt;code&gt;bin/cache&lt;/code&gt; script after the standard installation process.&lt;/p&gt;
&lt;p&gt;Pigsty &lt;a href=&#34;/docs/about/service/&#34;&gt;&lt;strong&gt;Pro&lt;/strong&gt;&lt;/a&gt; offers pre-made offline packages for various OS distros.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2 id=&#34;bootstrap&#34;&gt;Bootstrap&lt;/h2&gt;
&lt;p&gt;Pigsty needs &lt;code&gt;ansible&lt;/code&gt; to run the &lt;a href=&#34;/docs/setup/playbook/&#34;&gt;&lt;strong&gt;playbooks&lt;/strong&gt;&lt;/a&gt;, so it is not suitable to install Ansible through playbooks.
The Bootstrap script is used to solve this problem: it will try its best to ensure that Ansible is installed on the node before the real installation.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./bootstrap       &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# make suare ansible installed (if offline package available, setup &amp;amp; use offline install)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;If you are &lt;a href=&#34;/docs/setup/offline/#use-offline-pacakge&#34;&gt;&lt;strong&gt;using offline package&lt;/strong&gt;&lt;/a&gt;, the Bootstrap script will automatically recognize and process the offline package located at &lt;code&gt;/tmp/pkg.tgz&lt;/code&gt;, and install Ansible from it if applicable.
Otherwise, if you have internet access, Bootstrap will automatically add the upstrema yum/apt repo of the corresponding OS/region and install Ansible from it.
If neither internet nor offline package is available, Bootstrap will leave it to the user to handle this issue, and the user needs to ensure that the repo configured on the node contains a usable Ansible.&lt;/p&gt;
&lt;p&gt;There are some optional parameters for the Bootstrap script, you can use the &lt;code&gt;-p|--path&lt;/code&gt; parameter to specify a different offline package location other than &lt;code&gt;/tmp/pkg.tgz&lt;/code&gt;. or designate a region with the &lt;code&gt;-r|--region&lt;/code&gt; parameter:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./boostrap
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;-r&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt;--region &amp;lt;region&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;   &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;default,china,europe&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;-p&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt;--path &amp;lt;path&amp;gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;      specify another offline pkg path
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;-k&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt;--keep&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;             keep existing upstream repo during bootstrap
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And bootstrap will automatically backup and remove the current repo (&lt;code&gt;/etc/yum.repos.d/backup&lt;/code&gt; / &lt;code&gt;/etc/apt/source.list.d/backup&lt;/code&gt;) of the node during the process to avoid software source conflicts. If this is not the behavior you expected, or you have already configured a local software repo, you can use the &lt;code&gt;-k|--keep&lt;/code&gt; parameter to keep the existing software repo.&lt;/p&gt;
&lt;details&gt;&lt;summary&gt;Example: Use offline package (EL8)&lt;/summary&gt;&lt;br&gt;
&lt;p&gt;Bootstrap with offline package on a RockyLinux 8.9 node:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;vagrant@el8 pigsty&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;$ ls -alh /tmp/pkg.tgz
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;-rw-r--r--. &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;1&lt;/span&gt; vagrant vagrant 1.4G Sep  &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;1&lt;/span&gt; 10:20 /tmp/pkg.tgz
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;vagrant@el8 pigsty&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;$ ./bootstrap
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;bootstrap pigsty v3.2.0 begin
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;region&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; china
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;kernel&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; Linux
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;machine&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; x86_64
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; rpm,dnf
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;vendor&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; rocky &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;(&lt;/span&gt;Rocky Linux&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;version&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;8&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;(&lt;/span&gt;8.9&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;sudo&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; vagrant ok
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;ssh&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; vagrant@127.0.0.1 ok
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;cache&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; /tmp/pkg.tgz exists
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;repo&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; extract from /tmp/pkg.tgz
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;WARN&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; old &lt;span style=&#34;color:#000&#34;&gt;repos&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; moved to /etc/yum.repos.d/backup
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; repo &lt;span style=&#34;color:#000&#34;&gt;file&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; use /etc/yum.repos.d/pigsty-local.repo
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;WARN&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; rpm &lt;span style=&#34;color:#000&#34;&gt;cache&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; updating, may take a &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;while&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;pigsty &lt;span style=&#34;color:#204a87&#34;&gt;local&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;8&lt;/span&gt; - x86_64                                                                                                                               &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;49&lt;/span&gt; MB/s &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt; 1.3 MB     00:00
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Metadata cache created.
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; repo &lt;span style=&#34;color:#000&#34;&gt;cache&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; created
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; install el8 utils
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;........ yum install output
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Installed:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  createrepo_c-0.17.7-6.el8.x86_64        createrepo_c-libs-0.17.7-6.el8.x86_64 drpm-0.4.1-3.el8.x86_64   modulemd-tools-0.7-8.el8.noarch python3-createrepo_c-0.17.7-6.el8.x86_64
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  python3-libmodulemd-2.13.0-1.el8.x86_64 python3-pyyaml-3.12-12.el8.x86_64     sshpass-1.09-4.el8.x86_64 unzip-6.0-46.el8.x86_64
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  ansible-9.2.0-1.el8.noarch                 ansible-core-2.16.3-2.el8.x86_64              git-core-2.43.5-1.el8_10.x86_64                 mpdecimal-2.5.1-3.el8.x86_64
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  python3-cffi-1.11.5-6.el8.x86_64           python3-cryptography-3.2.1-7.el8_9.x86_64     python3-jmespath-0.9.0-11.el8.noarch            python3-pycparser-2.14-14.el8.noarch
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  python3.12-3.12.3-2.el8_10.x86_64          python3.12-cffi-1.16.0-2.el8.x86_64           python3.12-cryptography-41.0.7-1.el8.x86_64     python3.12-jmespath-1.0.1-1.el8.noarch
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  python3.12-libs-3.12.3-2.el8_10.x86_64     python3.12-pip-wheel-23.2.1-4.el8.noarch      python3.12-ply-3.11-2.el8.noarch                python3.12-pycparser-2.20-2.el8.noarch
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  python3.12-pyyaml-6.0.1-2.el8.x86_64
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Complete!
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;ansible&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; ansible &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;core 2.16.3&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; boostrap pigsty &lt;span style=&#34;color:#204a87&#34;&gt;complete&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;proceed with ./configure
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/details&gt;&lt;br&gt;
&lt;details&gt;&lt;summary&gt;Example: Bootstrap from Internet without offline Package (Debian 12)&lt;/summary&gt;&lt;br&gt;
&lt;p&gt;On a debian 12 node with internet access, Pigsty add the upstream repo and install &lt;code&gt;ansible&lt;/code&gt; and its dependencies using apt:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;vagrant@d12:~/pigsty$ ./bootstrap
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;bootstrap pigsty v3.2.0 begin
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;region&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; china
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;kernel&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; Linux
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;machine&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; x86_64
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; deb,apt
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;vendor&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; debian &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;(&lt;/span&gt;Debian GNU/Linux&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;version&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;12&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;(&lt;/span&gt;12&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;sudo&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; vagrant ok
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;ssh&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; vagrant@127.0.0.1 ok
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;WARN&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; old &lt;span style=&#34;color:#000&#34;&gt;repos&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; moved to /etc/apt/backup
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; repo &lt;span style=&#34;color:#000&#34;&gt;file&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; add debian bookworm china upstream
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;WARN&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; apt &lt;span style=&#34;color:#000&#34;&gt;cache&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; updating, may take a &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;while&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;....... apt install output
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;ansible&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; ansible &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;core 2.14.16&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; boostrap pigsty &lt;span style=&#34;color:#204a87&#34;&gt;complete&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;proceed with ./configure
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/details&gt;&lt;br&gt;
&lt;details&gt;&lt;summary&gt;Example: Bootstrap from the Default (Ubuntu 20.04)&lt;/summary&gt;&lt;br&gt;
&lt;p&gt;One an Ubuntu 20.04 node without internet access &amp;amp; offline package, Pigsty will assume you already have resolved this issue with your own way:
Such as a local software repo / mirror / CDROM / intranet repo, etc&amp;hellip;&lt;/p&gt;
&lt;p&gt;You can explicitly keep the current repo config with the &lt;code&gt;-k&lt;/code&gt; parameter, or Pigsty will keep it by default if it detects no internet access and no offline package.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;vagrant@ubuntu20:~/pigsty$ ./bootstrap -k
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;bootstrap pigsty v3.2.0 begin
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;region&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; china
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;kernel&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; Linux
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;machine&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; x86_64
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; deb,apt
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;vendor&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; ubuntu &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;(&lt;/span&gt;Ubuntu&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;version&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;20&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;(&lt;/span&gt;20.04&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;sudo&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; vagrant ok
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;WARN&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; ubuntu &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;20&lt;/span&gt; focal does not have corresponding offline package, use online install
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;WARN&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;cache&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; missing and skip download
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;WARN&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;repo&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; skip &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;(&lt;/span&gt;/tmp/pkg.tgz not exists&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; repo &lt;span style=&#34;color:#000&#34;&gt;file&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; add ubuntu focal china upstream
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;WARN&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; apt &lt;span style=&#34;color:#000&#34;&gt;cache&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; updating, make take a &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;while&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;...&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;(&lt;/span&gt;apt update/install output&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;ansible&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; ansible 2.10.8
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt; OK &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; boostrap pigsty &lt;span style=&#34;color:#204a87&#34;&gt;complete&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;proceed with ./configure
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/details&gt;&lt;br&gt;

      </description>
    </item>
    
    <item>
      <title>Docs: Slim Installation</title>
      <link>/docs/setup/slim/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/docs/setup/slim/</guid>
      <description>
        
        
        &lt;p&gt;Pigsty has an entire infrastructure stack as an enclosure of HA PostgreSQL clusters, BUT it is viable to install only the PostgreSQL components without the rest of the stack. This is called a slim installation.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;overview&#34;&gt;Overview&lt;/h2&gt;
&lt;p&gt;The slim installation focus on Pure HA-PostgreSQL Cluster, and it only installs essential components for this purpose.&lt;/p&gt;
&lt;p&gt;There&amp;rsquo;s NO &lt;a href=&#34;/docs/infra/&#34;&gt;&lt;strong&gt;&lt;code&gt;Infra&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; modules, No monitoring, No &lt;a href=&#34;/docs/setup/offline/#build-local-repo&#34;&gt;&lt;strong&gt;local repo&lt;/strong&gt;&lt;/a&gt; Just partial of &lt;a href=&#34;/docs/node/&#34;&gt;&lt;strong&gt;&lt;code&gt;NODE&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; module, along with &lt;a href=&#34;/docs/etcd/&#34;&gt;&lt;strong&gt;&lt;code&gt;ETCD&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; &amp;amp; &lt;a href=&#34;/docs/pgsql/&#34;&gt;&lt;strong&gt;&lt;code&gt;PGSQL&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; modules&lt;/p&gt;
&lt;p&gt;Systemd Service Installed in this mode:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;patroni: &lt;strong&gt;REQUIRED&lt;/strong&gt;, bootstrap HA PostgreSQL cluster&lt;/li&gt;
&lt;li&gt;etcd: &lt;strong&gt;REQUIRED&lt;/strong&gt;, DCS for patroni&lt;/li&gt;
&lt;li&gt;pgbouncer: &lt;strong&gt;OPTIONAL&lt;/strong&gt;, connection pooler for postgres&lt;/li&gt;
&lt;li&gt;vip-manager: &lt;strong&gt;OPTIONAL&lt;/strong&gt;, if you want to use a L2 VIP bind to primary&lt;/li&gt;
&lt;li&gt;haproxy: &lt;strong&gt;OPTIONAL&lt;/strong&gt;, if you wish to auto-routing &lt;a href=&#34;/docs/concept/svc/&#34;&gt;&lt;strong&gt;service&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;chronyd: &lt;strong&gt;OPTIONAL&lt;/strong&gt;, if you wish to sync time with NTP server&lt;/li&gt;
&lt;li&gt;tuned: &lt;strong&gt;OPTIONAL&lt;/strong&gt;, manage node template and kernel parameters&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You can turn off the optional components, the only two essential components are &lt;code&gt;patroni&lt;/code&gt; and &lt;code&gt;etcd&lt;/code&gt;.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;configure&#34;&gt;Configure&lt;/h2&gt;
&lt;p&gt;To perform a slim installation, you need to disable some switches in the &lt;code&gt;pigsty.yml&lt;/code&gt; config file:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;all&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;children&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# actually not used&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;infra&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;hosts&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;10.10.10.10&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;infra_seq&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# etcd cluster for ha postgres, still required in minimal installation&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;etcd&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;hosts&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;10.10.10.10&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;etcd_seq: 1 } }, vars&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;etcd_cluster&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;etcd } }&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# postgres cluster &amp;#39;pg-meta&amp;#39; with 2 instances&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;pg-meta&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;hosts&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;        &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;10.10.10.10&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;pg_seq: 1, pg_role&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;primary }&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;        &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;10.10.10.11&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;pg_seq: 2, pg_role&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;replica }&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;vars&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;        &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;pg_cluster&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg-meta&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;        &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;pg_databases&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: meta ,baseline: cmdb.sql ,comment: pigsty meta database ,schemas: [ pigsty ] ,extensions&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;vector }] } ]&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;        &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;pg_users&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;          &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: dbuser_meta ,password: DBUser.Meta   ,pgbouncer: true ,roles: [ dbrole_admin ]    ,comment&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pigsty admin user }&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;          &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: dbuser_view ,password: DBUser.Viewer ,pgbouncer: true ,roles: [ dbrole_readonly ] ,comment&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;read-only viewer for meta database }&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;        &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;node_crontab&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;00 01 * * * postgres /pg/bin/pg-backup full&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;]&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# make a full backup every 1am&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;vars&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;                               &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# global parameters&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;version&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;v3.2.0                  &lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# pigsty version string&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;admin_ip&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;10.10.10.10&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;             &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# admin node ip address&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;region: default                   # upstream mirror region&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;default,china,europe&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;node_tune: oltp                   # node tuning specs&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;oltp,olap,tiny,crit&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;pg_conf: oltp.yml                 # pgsql tuning specs&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#000&#34;&gt;oltp,olap,tiny,crit}.yml&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# slim installation setup&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;nginx_enabled&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;false&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;              &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# nginx not exists&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;dns_enabled&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;false&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;                &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# dnsmasq not exists&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;prometheus_enabled&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;false&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;         &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# prometheus not exists&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;grafana_enabled&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;false&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;            &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# grafana not exists&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;pg_exporter_enabled&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;false&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;        &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# disable pg_exporter&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;pgbouncer_exporter_enabled&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;false&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;pg_vip_enabled&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;false&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#----------------------------------#&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Repo, Node, Packages&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#----------------------------------#&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;node_repo_modules&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;node,infra,pgsql&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# use node_repo_modules instead of repo_modules&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;node_repo_remove&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;true&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;            &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# remove existing node repo for node managed by pigsty?&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;repo_packages&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;                  &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# default packages to be downloaded (if `repo_packages` is not explicitly set)&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;node-bootstrap, infra-package, infra-addons, node-package1, node-package2, pgsql-common&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#,docker&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;]&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;repo_extra_packages&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;            &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# default postgres packages to be downloaded&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pgsql-main&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#,pgsql-core,pgsql-time,pgsql-gis,pgsql-rag,pgsql-fts,pgsql-olap,pgsql-feat,pgsql-lang,pgsql-type,pgsql-func,pgsql-admin,pgsql-stat,pgsql-sec,pgsql-fdw,pgsql-sim,pgsql-etl,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#,pg17-core,pg17-time,pg17-gis,pg17-rag,pg17-fts,pg17-olap,pg17-feat,pg17-lang,pg17-type,pg17-func,pg17-admin,pg17-stat,pg17-sec,pg17-fdw,pg17-sim,pg17-etl,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;#,pg16-core,pg16-time,pg16-gis,pg16-rag,pg16-fts,pg16-olap,pg16-feat,pg16-lang,pg16-type,pg16-func,pg16-admin,pg16-stat,pg16-sec,pg16-fdw,pg16-sim,pg16-etl,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;]&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;And use the &lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/slim.yml&#34;&gt;&lt;code&gt;slim.yml&lt;/code&gt;&lt;/a&gt; instead of the &lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/install.yml&#34;&gt;&lt;code&gt;install.yml&lt;/code&gt;&lt;/a&gt; playbook:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./slim.yml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
      </description>
    </item>
    
    <item>
      <title>Docs: Configuration</title>
      <link>/docs/setup/config/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/docs/setup/config/</guid>
      <description>
        
        
        &lt;p&gt;&lt;strong&gt;Pigsty treats Infra &amp;amp; Database as Code.&lt;/strong&gt; You can describe the infrastructure &amp;amp; database clusters through a declarative interface. All your essential work is to describe your need in the &lt;a href=&#34;/docs/setup/config/#inventory&#34;&gt;inventory&lt;/a&gt;, then materialize it with a simple idempotent playbook.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;inventory&#34;&gt;Inventory&lt;/h2&gt;
&lt;p&gt;Each pigsty deployment has a corresponding config &lt;strong&gt;inventory&lt;/strong&gt;. It could be stored in a local git-managed file in &lt;a href=&#34;https://docs.ansible.com/ansible/2.9/user_guide/playbooks_variables.html&#34;&gt;YAML&lt;/a&gt; format or dynamically generated from &lt;a href=&#34;https://docs.ansible.com/ansible/2.9/user_guide/intro_dynamic_inventory.html&#34;&gt;CMDB&lt;/a&gt; or any ansible compatible format. Pigsty uses a monolith YAML config file as the default config inventory, which is &lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/pigsty.yml&#34;&gt;&lt;code&gt;pigsty.yml&lt;/code&gt;&lt;/a&gt;,  &lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/ansible.cfg#L3&#34;&gt;located&lt;/a&gt; in the pigsty home directory.&lt;/p&gt;
&lt;p&gt;The inventory consists of two parts: &lt;strong&gt;global vars&lt;/strong&gt; &amp;amp; multiple &lt;strong&gt;group definitions&lt;/strong&gt;. You can define new clusters with inventory groups: &lt;code&gt;all.children&lt;/code&gt;. And describe infra and set global default parameters for clusters with global vars: &lt;code&gt;all.vars&lt;/code&gt;. Which may look like this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;all:                  # Top-level object&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;all&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;vars&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#000&#34;&gt;...}        &lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Global Parameters&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;children&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;           &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Group Definitions&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;infra:            # Group Definition&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;infra&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;hosts&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;...}        # Group Membership&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;infra&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;vars&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;{&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;...}        # Group Parameters&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;infra&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;etcd&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;{&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;...}    # Group Definition&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;etcd&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;pg-meta&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;...}    # Group Definition&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;pg-meta&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;pg-test&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;...}    # Group Definition&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;pg-test&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;redis-test&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;...} # Group Definition&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;redis-test&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# ...&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;There are lots of config examples under &lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/conf/README.md&#34;&gt;&lt;code&gt;conf/&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;cluster&#34;&gt;Cluster&lt;/h2&gt;
&lt;p&gt;Each group may represent a cluster, which could be a Node cluster, PostgreSQL cluster, Redis cluster, Etcd cluster, or Minio cluster, etc&amp;hellip; They all use the same format: &lt;strong&gt;group vars&lt;/strong&gt; &amp;amp; &lt;strong&gt;hosts&lt;/strong&gt;. You can define cluster members with &lt;code&gt;all.children.&amp;lt;cls&amp;gt;.hosts&lt;/code&gt; and describe cluster with cluster parameters in &lt;code&gt;all.children.&amp;lt;cls&amp;gt;.vars&lt;/code&gt;. Here is an example of 3 nodes PostgreSQL HA cluster named &lt;code&gt;pg-test&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;pg-test&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;   &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Group Name&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;vars&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Group Vars (Cluster Parameters)&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;pg_cluster&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg-test&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;hosts&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;   &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Group Host (Cluster Membership)&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;10.10.10.11&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;pg_seq: 1, pg_role&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;primary }&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Host1&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;10.10.10.12&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;pg_seq: 2, pg_role&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;replica }&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Host2&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;10.10.10.13&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;pg_seq: 3, pg_role&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;offline }&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Host3&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;You can also define parameters for a specific host, as known as &lt;strong&gt;host vars&lt;/strong&gt;. It will override group vars and global vars. Which is usually used for assigning identities to nodes &amp;amp; database instances.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;parameter&#34;&gt;Parameter&lt;/h2&gt;
&lt;p&gt;Global vars, Group vars, and Host vars are dict objects consisting of a series of K-V pairs. Each pair is a named &lt;strong&gt;Parameter&lt;/strong&gt; consisting of a string name as the key and a value of one of five types:  boolean, string, number, array, or object. Check parameter reference for detailed syntax &amp;amp; semantics.&lt;/p&gt;
&lt;p&gt;Every parameter has a proper default value except for mandatory &lt;strong&gt;IDENTITY PARAMETERS&lt;/strong&gt;; they are used as identifiers and must be set explicitly, such as &lt;a href=&#34;/docs/reference/param/#pg_cluster&#34;&gt;&lt;code&gt;pg_cluster&lt;/code&gt;&lt;/a&gt;, &lt;a href=&#34;/docs/reference/param/#pg_role&#34;&gt;&lt;code&gt;pg_role&lt;/code&gt;&lt;/a&gt;, and &lt;a href=&#34;/docs/reference/param/#pg_seq&#34;&gt;&lt;code&gt;pg_seq&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Parameters can be specified &amp;amp; overridden with the following precedence.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Playbook Args  &amp;gt;  Host Vars  &amp;gt;  Group Vars  &amp;gt;  Global Vars  &amp;gt;  Defaults
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;For examples:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Force removing existing databases with Playbook CLI Args &lt;code&gt;-e pg_clean=true&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Override an instance role with Instance Level Parameter &lt;code&gt;pg_role&lt;/code&gt; on Host Vars&lt;/li&gt;
&lt;li&gt;Override a cluster name with Cluster Level Parameter &lt;code&gt;pg_cluster&lt;/code&gt; on Group Vars.&lt;/li&gt;
&lt;li&gt;Specify global NTP servers with Global Parameter &lt;code&gt;node_ntp_servers&lt;/code&gt; on Global Vars&lt;/li&gt;
&lt;li&gt;If no &lt;code&gt;pg_version&lt;/code&gt; is set, it will use the default value from role implementation (16 by default)&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;template&#34;&gt;Template&lt;/h2&gt;
&lt;p&gt;There are numerous preset config templates for different scenarios under the &lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/conf&#34;&gt;&lt;code&gt;conf/&lt;/code&gt;&lt;/a&gt; directory.&lt;/p&gt;
&lt;p&gt;During &lt;a href=&#34;/docs/setup/install/#configure&#34;&gt;&lt;code&gt;configure&lt;/code&gt;&lt;/a&gt;  process, you can specify a template using the -c parameter.
Otherwise, the single-node installation config template will be automatically selected based on your OS distribution.&lt;/p&gt;
&lt;p&gt;Details about this built-in configuration files can be found @ &lt;a href=&#34;/docs/conf/&#34;&gt;&lt;strong&gt;Configuration&lt;/strong&gt;&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;switch-config-inventory&#34;&gt;Switch Config Inventory&lt;/h2&gt;
&lt;p&gt;To use a different config inventory, you can copy &amp;amp; paste the content into the &lt;code&gt;pigsty.yml&lt;/code&gt; file in the home dir as needed.&lt;/p&gt;
&lt;p&gt;You can also explicitly specify the config inventory file to use when executing Ansible playbooks by using the &lt;code&gt;-i&lt;/code&gt; command-line parameter, for example:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./node.yml -i files/pigsty/rpmbuild.yml    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# use another file as config inventory, rather than the default pigsty.yml&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;If you want to modify the &lt;strong&gt;default&lt;/strong&gt; config inventory filename, you can change the &lt;code&gt;inventory&lt;/code&gt; parameter in the &lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/ansible.cfg#L6&#34;&gt;&lt;code&gt;ansible.cfg&lt;/code&gt;&lt;/a&gt; file in the home dir to point to your own inventory file path.
This allows you to run the &lt;code&gt;ansible-playbook&lt;/code&gt; command without explicitly specifying the &lt;code&gt;-i&lt;/code&gt; parameter.&lt;/p&gt;
&lt;p&gt;Pigsty allows you to use a database (CMDB) as a dynamic configuration source instead of a static configuration file. Pigsty provides three convenient scripts:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/bin/inventory_load&#34;&gt;&lt;code&gt;bin/inventory_load&lt;/code&gt;&lt;/a&gt;: Loads the content of the &lt;code&gt;pigsty.yml&lt;/code&gt; into the local PostgreSQL database (&lt;code&gt;meta&lt;/code&gt;.&lt;code&gt;pigsty&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/bin/inventory_cmdb&#34;&gt;&lt;code&gt;bin/inventory_cmdb&lt;/code&gt;&lt;/a&gt;: Switches the configuration source to the local PostgreSQL database (&lt;code&gt;meta&lt;/code&gt;.&lt;code&gt;pigsty&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/bin/inventory_cmdb&#34;&gt;&lt;code&gt;bin/inventory_conf&lt;/code&gt;&lt;/a&gt;: Switches the configuration source to the local static configuration file &lt;code&gt;pigsty.yml&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;reference&#34;&gt;Reference&lt;/h2&gt;
&lt;p&gt;Pigsty have 280+ parameters, check &lt;a href=&#34;/docs/reference/param/&#34;&gt;Parameter&lt;/a&gt; for details.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:center&#34;&gt;Module&lt;/th&gt;
&lt;th&gt;Section&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;th&gt;Count&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;/docs/reference/param/#infra&#34;&gt;&lt;code&gt;INFRA&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;/docs/reference/param/#meta&#34;&gt;&lt;code&gt;META&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Pigsty Metadata&lt;/td&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;/docs/reference/param/#infra&#34;&gt;&lt;code&gt;INFRA&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;/docs/reference/param/#ca&#34;&gt;&lt;code&gt;CA&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Self-Signed CA&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;/docs/reference/param/#infra&#34;&gt;&lt;code&gt;INFRA&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;/docs/reference/param/#infra_id&#34;&gt;&lt;code&gt;INFRA_ID&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Infra Portals &amp;amp; Identity&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;/docs/reference/param/#infra&#34;&gt;&lt;code&gt;INFRA&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;/docs/reference/param/#repo&#34;&gt;&lt;code&gt;REPO&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Local Software Repo&lt;/td&gt;
&lt;td&gt;9&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;/docs/reference/param/#infra&#34;&gt;&lt;code&gt;INFRA&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;/docs/reference/param/#infra_package&#34;&gt;&lt;code&gt;INFRA_PACKAGE&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Infra Packages&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;/docs/reference/param/#infra&#34;&gt;&lt;code&gt;INFRA&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;/docs/reference/param/#nginx&#34;&gt;&lt;code&gt;NGINX&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Nginx Web Server&lt;/td&gt;
&lt;td&gt;7&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;/docs/reference/param/#infra&#34;&gt;&lt;code&gt;INFRA&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;/docs/reference/param/#dns&#34;&gt;&lt;code&gt;DNS&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;DNSMASQ Nameserver&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;/docs/reference/param/#infra&#34;&gt;&lt;code&gt;INFRA&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;/docs/reference/param/#prometheus&#34;&gt;&lt;code&gt;PROMETHEUS&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Prometheus Stack&lt;/td&gt;
&lt;td&gt;18&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;/docs/reference/param/#infra&#34;&gt;&lt;code&gt;INFRA&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;/docs/reference/param/#grafana&#34;&gt;&lt;code&gt;GRAFANA&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Grafana Stack&lt;/td&gt;
&lt;td&gt;6&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;/docs/reference/param/#infra&#34;&gt;&lt;code&gt;INFRA&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;/docs/reference/param/#loki&#34;&gt;&lt;code&gt;LOKI&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Loki Logging Service&lt;/td&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;/docs/reference/param/#node&#34;&gt;&lt;code&gt;NODE&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;/docs/reference/param/#node_id&#34;&gt;&lt;code&gt;NODE_ID&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Node Identity Parameters&lt;/td&gt;
&lt;td&gt;5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;/docs/reference/param/#node&#34;&gt;&lt;code&gt;NODE&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;/docs/reference/param/#node_dns&#34;&gt;&lt;code&gt;NODE_DNS&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Node domain names &amp;amp; resolver&lt;/td&gt;
&lt;td&gt;6&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;/docs/reference/param/#node&#34;&gt;&lt;code&gt;NODE&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;/docs/reference/param/#node_package&#34;&gt;&lt;code&gt;NODE_PACKAGE&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Node Repo &amp;amp; Packages&lt;/td&gt;
&lt;td&gt;5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;/docs/reference/param/#node&#34;&gt;&lt;code&gt;NODE&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;/docs/reference/param/#node_tune&#34;&gt;&lt;code&gt;NODE_TUNE&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Node Tuning &amp;amp; Kernel features&lt;/td&gt;
&lt;td&gt;10&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;/docs/reference/param/#node&#34;&gt;&lt;code&gt;NODE&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;/docs/reference/param/#node_admin&#34;&gt;&lt;code&gt;NODE_ADMIN&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Admin User &amp;amp; Credentials&lt;/td&gt;
&lt;td&gt;7&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;/docs/reference/param/#node&#34;&gt;&lt;code&gt;NODE&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;/docs/reference/param/#node_time&#34;&gt;&lt;code&gt;NODE_TIME&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Node Timezone, NTP, Crontabs&lt;/td&gt;
&lt;td&gt;5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;/docs/reference/param/#node&#34;&gt;&lt;code&gt;NODE&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;/docs/reference/param/#node_vip&#34;&gt;&lt;code&gt;NODE_VIP&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Node Keepalived L2 VIP&lt;/td&gt;
&lt;td&gt;8&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;/docs/reference/param/#node&#34;&gt;&lt;code&gt;NODE&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;/docs/reference/param/#haproxy&#34;&gt;&lt;code&gt;HAPROXY&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;HAProxy the load balancer&lt;/td&gt;
&lt;td&gt;10&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;/docs/reference/param/#node&#34;&gt;&lt;code&gt;NODE&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;/docs/reference/param/#node_exporter&#34;&gt;&lt;code&gt;NODE_EXPORTER&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Node Monitoring Agent&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;/docs/reference/param/#node&#34;&gt;&lt;code&gt;NODE&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;/docs/reference/param/#promtail&#34;&gt;&lt;code&gt;PROMTAIL&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Promtail logging Agent&lt;/td&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;/docs/reference/param/#docker&#34;&gt;&lt;code&gt;DOCKER&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;/docs/reference/param/#docker&#34;&gt;&lt;code&gt;DOCKER&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Docker Daemon&lt;/td&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;/docs/reference/param/#etcd&#34;&gt;&lt;code&gt;ETCD&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;/docs/reference/param/#etcd&#34;&gt;&lt;code&gt;ETCD&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;ETCD DCS Cluster&lt;/td&gt;
&lt;td&gt;10&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;/docs/reference/param/#minio&#34;&gt;&lt;code&gt;MINIO&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;/docs/reference/param/#minio&#34;&gt;&lt;code&gt;MINIO&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;MINIO S3 Object Storage&lt;/td&gt;
&lt;td&gt;15&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;/docs/reference/param/#redis&#34;&gt;&lt;code&gt;REDIS&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;/docs/reference/param/#redis&#34;&gt;&lt;code&gt;REDIS&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Redis the key-value NoSQL cache&lt;/td&gt;
&lt;td&gt;20&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;/docs/reference/param/#pgsql&#34;&gt;&lt;code&gt;PGSQL&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;/docs/reference/param/#pg_id&#34;&gt;&lt;code&gt;PG_ID&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;PG Identity Parameters&lt;/td&gt;
&lt;td&gt;11&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;/docs/reference/param/#pgsql&#34;&gt;&lt;code&gt;PGSQL&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;/docs/reference/param/#pg_business&#34;&gt;&lt;code&gt;PG_BUSINESS&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;PG Business Object Definition&lt;/td&gt;
&lt;td&gt;12&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;/docs/reference/param/#pgsql&#34;&gt;&lt;code&gt;PGSQL&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;/docs/reference/param/#pg_install&#34;&gt;&lt;code&gt;PG_INSTALL&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Install PG Packages &amp;amp; Extensions&lt;/td&gt;
&lt;td&gt;10&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;/docs/reference/param/#pgsql&#34;&gt;&lt;code&gt;PGSQL&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;/docs/reference/param/#pg_bootstrap&#34;&gt;&lt;code&gt;PG_BOOTSTRAP&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Init HA PG Cluster with Patroni&lt;/td&gt;
&lt;td&gt;39&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;/docs/reference/param/#pgsql&#34;&gt;&lt;code&gt;PGSQL&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;/docs/reference/param/#pg_provision&#34;&gt;&lt;code&gt;PG_PROVISION&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Create in-database objects&lt;/td&gt;
&lt;td&gt;9&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;/docs/reference/param/#pgsql&#34;&gt;&lt;code&gt;PGSQL&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;/docs/reference/param/#pg_backup&#34;&gt;&lt;code&gt;PG_BACKUP&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Set Backup Repo with pgBackRest&lt;/td&gt;
&lt;td&gt;5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;/docs/reference/param/#pgsql&#34;&gt;&lt;code&gt;PGSQL&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;/docs/reference/param/#pg_service&#34;&gt;&lt;code&gt;PG_SERVICE&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Exposing service, bind vip, dns&lt;/td&gt;
&lt;td&gt;9&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;/docs/reference/param/#pgsql&#34;&gt;&lt;code&gt;PGSQL&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&#34;/docs/reference/param/#pg_exporter&#34;&gt;&lt;code&gt;PG_EXPORTER&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;PG Monitor agent for Prometheus&lt;/td&gt;
&lt;td&gt;15&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

      </description>
    </item>
    
    <item>
      <title>Docs: Preparation</title>
      <link>/docs/setup/prepare/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/docs/setup/prepare/</guid>
      <description>
        
        
        &lt;hr&gt;
&lt;h2 id=&#34;node&#34;&gt;Node&lt;/h2&gt;
&lt;p&gt;Pigsty supports the &lt;code&gt;Linux&lt;/code&gt; kernel and &lt;code&gt;x86_64/aarch64&lt;/code&gt; arch, applicable to any node.&lt;/p&gt;
&lt;p&gt;A &amp;ldquo;node&amp;rdquo; refers to a resource that is SSH accessible and offers a bare OS environment, such as a physical machine, a virtual machine, or an OS container equipped with &lt;code&gt;systemd&lt;/code&gt; and &lt;code&gt;sshd&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Deploying Pigsty requires at least 1 node. The minimum spec requirement is &lt;code&gt;1C1G&lt;/code&gt;, but it is recommended to use at least &lt;code&gt;2C4G&lt;/code&gt;, with no upper limit: parameters will automatically optimize and adapt.&lt;/p&gt;
&lt;p&gt;For demos, personal sites, devbox, or standalone monitoring infra, &lt;strong&gt;1-2&lt;/strong&gt; nodes are recommended, while at least 3 nodes are suggested for an HA PostgreSQL cluster. For critical scenarios, &lt;strong&gt;4-5&lt;/strong&gt; nodes are advisable.&lt;/p&gt;


&lt;div class=&#34;alert alert-success&#34; role=&#34;alert&#34;&gt;
&lt;h4 class=&#34;alert-heading&#34;&gt;Leverage IaC Tools for chores&lt;/h4&gt;

    &lt;p&gt;Managing a large-scale prod env could be tedious and error-prone. We recommend using Infrastructure as Code (IaC) tools to address these issues.&lt;/p&gt;
&lt;p&gt;You can use the &lt;a href=&#34;/docs/setup/provision/#terraform&#34;&gt;&lt;strong&gt;Terraform&lt;/strong&gt;&lt;/a&gt; and &lt;a href=&#34;/docs/setup/provision/#vagrant&#34;&gt;&lt;strong&gt;Vagrant&lt;/strong&gt;&lt;/a&gt; templates provided by Pigsty,
to create the required node environment with just one command through IaC, provisioning network, OS image, admin user, privileges, etc&amp;hellip;&lt;/p&gt;


&lt;/div&gt;

&lt;hr&gt;
&lt;h2 id=&#34;network&#34;&gt;Network&lt;/h2&gt;
&lt;p&gt;Pigsty requires nodes to use &lt;strong&gt;static IPv4 addresses&lt;/strong&gt;, which means you should explicitly assign your nodes a specific fixed IP address rather than using DHCP-assigned addresses.&lt;/p&gt;
&lt;p&gt;The IP address used by a node should be the primary IP address for internal network communications and will serve as the node&amp;rsquo;s unique identifier.&lt;/p&gt;
&lt;p&gt;If you wish to use the optional Node VIP and PG VIP features, ensure all nodes are located within an L2 network.&lt;/p&gt;
&lt;p&gt;Your firewall policy should ensure the required ports are open between nodes. For a detailed list of ports required by different modules, refer to &lt;a href=&#34;/docs/node/&#34;&gt;&lt;strong&gt;Node: Ports&lt;/strong&gt;&lt;/a&gt;.&lt;/p&gt;


&lt;div class=&#34;alert alert-warning&#34; role=&#34;alert&#34;&gt;
&lt;h4 class=&#34;alert-heading&#34;&gt;Which Ports Should Be Exposed?&lt;/h4&gt;

    &lt;p&gt;For beginners or those who are just trying it out, you can just open ports &lt;code&gt;5432&lt;/code&gt; (PostgreSQL database) and &lt;code&gt;3000&lt;/code&gt; (Grafana visualization interface) to the world.&lt;/p&gt;
&lt;p&gt;For a serious prod env, you should only expose the necessary ports to the exterior, such as &lt;code&gt;80/443&lt;/code&gt; for web services, open to the office network (or the entire Internet).&lt;/p&gt;
&lt;p&gt;Exposing database service ports directly to the Internet is not advisable. If you need to do this, consider consulting &lt;a href=&#34;/docs/setup/security/&#34;&gt;Security Best Practices&lt;/a&gt; and proceed cautiously.&lt;/p&gt;
&lt;p&gt;The method for exposing ports depends on your network implementation, such as security group policies, local iptables records, firewall configurations, etc.&lt;/p&gt;


&lt;/div&gt;

&lt;hr&gt;
&lt;h2 id=&#34;operating-system&#34;&gt;Operating System&lt;/h2&gt;
&lt;p&gt;Pigsty supports various Linux OS. We recommend using &lt;strong&gt;RockyLinux 9.4&lt;/strong&gt; or &lt;strong&gt;Ubuntu 22.04.5&lt;/strong&gt; as the default OS for installing Pigsty.&lt;/p&gt;
&lt;p&gt;Pigsty supports RHEL (7,8,9), Debian (11,12), Ubuntu (20,22,24), and many other compatible OS distros. Check &lt;a href=&#34;/docs/reference/compatibility/&#34;&gt;&lt;strong&gt;Compatibility&lt;/strong&gt;&lt;/a&gt; For a complete list of compatible OS distros.&lt;/p&gt;
&lt;p&gt;When deploying on multiple nodes, we &lt;strong&gt;strongly recommend&lt;/strong&gt; using the &lt;strong&gt;same version&lt;/strong&gt; of the OS distro and the Linux kernel on all nodes.&lt;/p&gt;
&lt;p&gt;We &lt;strong&gt;strongly recommend&lt;/strong&gt; using a clean, minimally installed OS environment with &lt;code&gt;en_US&lt;/code&gt; set as the primary language.&lt;/p&gt;


&lt;div class=&#34;alert alert-success&#34; role=&#34;alert&#34;&gt;
&lt;h4 class=&#34;alert-heading&#34;&gt;How to enable en_US locale?&lt;/h4&gt;

    &lt;p&gt;To ensure the &lt;code&gt;en_US&lt;/code&gt; locale is available when using other primary language:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;yum install -y glibc-locale-source glibc-langpack-en
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;localedef -i en_US -f UTF-8 en_US.UTF-8
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;localectl set-locale &lt;span style=&#34;color:#000&#34;&gt;LANG&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;en_US.UTF-8
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Note: The PostgreSQL cluster deployed by Pigsty defaults to the &lt;code&gt;C.UTF8&lt;/code&gt; locale, but character set definitions use &lt;code&gt;en_US&lt;/code&gt; to ensure the &lt;code&gt;pg_trgm&lt;/code&gt; extension functions properly.
If you do not need this feature, you can configure the value of &lt;a href=&#34;/docs/reference/param/#pg_lc_ctype&#34;&gt;&lt;strong&gt;&lt;code&gt;pg_lc_ctype&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; to &lt;code&gt;C.UTF8&lt;/code&gt; to avoid this issue when en locale is missing.&lt;/p&gt;


&lt;/div&gt;

&lt;hr&gt;
&lt;h2 id=&#34;admin-user&#34;&gt;Admin User&lt;/h2&gt;
&lt;p&gt;You&amp;rsquo;ll need an &amp;ldquo;&lt;strong&gt;admin user&lt;/strong&gt;&amp;rdquo; on all nodes where Pigsty is meant to be deployed — an OS user with nopass &lt;code&gt;ssh&lt;/code&gt; login and nopass &lt;code&gt;sudo&lt;/code&gt; permissions.&lt;/p&gt;
&lt;p&gt;On the nodes where Pigsty is installed, you need an &amp;ldquo;&lt;strong&gt;administrative user&lt;/strong&gt;&amp;rdquo; who has nopass &lt;code&gt;ssh&lt;/code&gt; login and nopass &lt;code&gt;sudo&lt;/code&gt; permissions.&lt;/p&gt;
&lt;p&gt;No password &lt;code&gt;sudo&lt;/code&gt; is required to execute commands during the installation process, such as installing packages, configuring system settings, etc.&lt;/p&gt;


&lt;div class=&#34;alert alert-success&#34; role=&#34;alert&#34;&gt;
&lt;h4 class=&#34;alert-heading&#34;&gt;How to configure nopass sudo for admin user?&lt;/h4&gt;

    &lt;p&gt;Assuming your admin username is &lt;code&gt;vagrant&lt;/code&gt;, you can create a file in &lt;code&gt;/etc/sudoers.d/vagrant&lt;/code&gt; and add the following content:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;%vagrant &lt;span style=&#34;color:#000&#34;&gt;ALL&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=(&lt;/span&gt;ALL&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;)&lt;/span&gt; NOPASSWD: ALL
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This will allow the &lt;code&gt;vagrant&lt;/code&gt; user to execute all commands without a sudo password. If your username is not &lt;code&gt;vagrant&lt;/code&gt;, replace &lt;code&gt;vagrant&lt;/code&gt; in the above steps with your username.&lt;/p&gt;


&lt;/div&gt;



&lt;div class=&#34;alert alert-danger&#34; role=&#34;alert&#34;&gt;
&lt;h4 class=&#34;alert-heading&#34;&gt;Avoid using the root user&lt;/h4&gt;

    &lt;p&gt;While it is possible to install Pigsty using the &lt;code&gt;root&lt;/code&gt; user, we do not recommend it.&lt;/p&gt;
&lt;p&gt;We recommend using a dedicated admin user, such as &lt;code&gt;dba&lt;/code&gt;, different from the root user (&lt;code&gt;root&lt;/code&gt;) and the database superuser (&lt;code&gt;postgres&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;There is a dedicated playbook subtask that can use an existing admin user (e.g., &lt;code&gt;root&lt;/code&gt;) with ssh/sudo password input to &lt;a href=&#34;/docs/node/#create-admin&#34;&gt;create&lt;/a&gt; a dedicated admin user.&lt;/p&gt;


&lt;/div&gt;

&lt;hr&gt;
&lt;h2 id=&#34;ssh-permission&#34;&gt;SSH Permission&lt;/h2&gt;
&lt;p&gt;In addition to nopass &lt;code&gt;sudo&lt;/code&gt; privilege, Pigsty also requires the admin user to have nopass &lt;code&gt;ssh&lt;/code&gt; login privilege (login via ssh key).&lt;/p&gt;
&lt;p&gt;For &lt;a href=&#34;/docs/concept/arch/#singleton-meta&#34;&gt;single-host installations&lt;/a&gt; setup, this means the admin user on the local node should be able to log in to the host itself via ssh without a password.&lt;/p&gt;
&lt;p&gt;If your Pigsty deployment involves multiple nodes, this means the admin user on the &lt;a href=&#34;/docs/node/#admin-node&#34;&gt;admin node&lt;/a&gt; should be able to log in to all nodes managed by Pigsty (including the local node) via ssh without a password, and execute &lt;code&gt;sudo&lt;/code&gt; commands without a password as well.&lt;/p&gt;
&lt;p&gt;During the &lt;a href=&#34;/docs/setup/install/#configuration&#34;&gt;&lt;strong&gt;&lt;code&gt;configure&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; procedure, if your current admin user does not have any SSH key, it will attempt to address this issue by generating a new &lt;code&gt;id_rsa&lt;/code&gt; key pair and adding it to the local &lt;code&gt;~/.ssh/authorized_keys&lt;/code&gt; file to ensure local SSH login capability for the local admin user.&lt;/p&gt;
&lt;p&gt;By default, Pigsty creates an admin user &lt;code&gt;dba&lt;/code&gt; (&lt;code&gt;uid=88&lt;/code&gt;) on all managed nodes. If you are already using this user, we recommend that you change the &lt;a href=&#34;/docs/reference/param/#node_admin_username&#34;&gt;&lt;code&gt;node_admin_username&lt;/code&gt;&lt;/a&gt; to a new username with a different uid, or disable it using the &lt;a href=&#34;/docs/reference/param/#node_admin_enabled&#34;&gt;&lt;code&gt;node_admin_enabled&lt;/code&gt;&lt;/a&gt; parameter.&lt;/p&gt;


&lt;div class=&#34;alert alert-success&#34; role=&#34;alert&#34;&gt;
&lt;h4 class=&#34;alert-heading&#34;&gt;How to configure nopass SSH login for admin user?&lt;/h4&gt;

    &lt;p&gt;Assuming your admin username is &lt;code&gt;vagrant&lt;/code&gt;, execute the following command as the &lt;code&gt;vagrant&lt;/code&gt; user will generate a public/private key pair for login. If a key pair already exists, there is no need to generate a new one.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ssh-keygen -t rsa -b &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;2048&lt;/span&gt; -N &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt; -f ~/.ssh/id_rsa -q
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;The generated public key is by default located at: &lt;code&gt;/home/vagrant/.ssh/id_rsa.pub&lt;/code&gt;, and the private key at: &lt;code&gt;/home/vagrant/.ssh/id_rsa&lt;/code&gt;. If your OS username is not &lt;code&gt;vagrant&lt;/code&gt;, replace &lt;code&gt;vagrant&lt;/code&gt; in the above commands with your username.&lt;/p&gt;
&lt;p&gt;You should append the public key file (&lt;code&gt;id_rsa.pub&lt;/code&gt;) to the &lt;code&gt;authorized_keys&lt;/code&gt; file of the user you need to log into: &lt;code&gt;/home/vagrant/.ssh/authorized_keys&lt;/code&gt;. If you already have password access to the remote machine, you can use &lt;code&gt;ssh-copy-id&lt;/code&gt; to copy the public key:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ssh-copy-id &amp;lt;ip&amp;gt;                        &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Enter password to complete public key copying&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sshpass -p &amp;lt;password&amp;gt; ssh-copy-id &amp;lt;ip&amp;gt;  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Or: you can embed the password directly in the command to avoid interactive password entry (cautious!)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Pigsty recommends provisioning the admin user during node provisioning and making it viable by default.&lt;/p&gt;


&lt;/div&gt;

&lt;hr&gt;
&lt;h2 id=&#34;ssh-accessibility&#34;&gt;SSH Accessibility&lt;/h2&gt;
&lt;p&gt;If your environment has some restrictions on SSH access, such as a bastion server or ad hoc firewall rules that prevent simple SSH access via &lt;code&gt;ssh &amp;lt;ip&amp;gt;&lt;/code&gt;, consider using SSH aliases.&lt;/p&gt;
&lt;p&gt;For example, if there&amp;rsquo;s a node with IP &lt;code&gt;10.10.10.10&lt;/code&gt; that can not be accessed directly via ssh but can be accessed via an ssh alias &lt;code&gt;meta&lt;/code&gt; defined in &lt;code&gt;~/.ssh/config&lt;/code&gt;,
then you can configure the &lt;code&gt;ansible_host&lt;/code&gt; parameter for that node in the &lt;a href=&#34;/docs/setup/config/#inventory&#34;&gt;&lt;strong&gt;inventory&lt;/strong&gt;&lt;/a&gt; to specify the SSH Alias on the host level:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;nodes&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;hosts&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 10.10.10.10 can not be accessed directly via ssh, but can be accessed via ssh alias &amp;#39;meta&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;10.10.10.10&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;ansible_host&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;meta }&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;If the ssh alias does not meet your requirement, there are a plethora of custom &lt;a href=&#34;https://docs.ansible.com/archive/ansible/2.4/intro_inventory.html#list-of-behavioral-inventory-parameters&#34;&gt;&lt;strong&gt;ssh connection parameters&lt;/strong&gt;&lt;/a&gt; that can bring fine-grained control over SSH connection behavior.&lt;/p&gt;
&lt;p&gt;If the following cmd can be successfully executed on the admin node by the admin user, it means that the target node&amp;rsquo;s admin user is properly configured.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ssh &amp;lt;ip&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt;alias&amp;gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;sudo ls&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;software&#34;&gt;Software&lt;/h2&gt;
&lt;p&gt;On the &lt;a href=&#34;/docs/node/#admin-node&#34;&gt;&lt;strong&gt;admin node&lt;/strong&gt;&lt;/a&gt;, Pigsty requires &lt;a href=&#34;/docs/setup/playbook/#ansible&#34;&gt;&lt;strong&gt;&lt;code&gt;ansible&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; to initiate control.
If you are using the singleton meta installation, Ansible is required on this node. It is not required for common nodes.&lt;/p&gt;
&lt;p&gt;The &lt;a href=&#34;/docs/setup/offline/#bootstrap&#34;&gt;&lt;strong&gt;&lt;code&gt;bootstrap&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; procedure will make every effort to do this for you.
But you can always choose to install Ansible manually. The process of manually installing Ansible varies with different OS distros / major versions (usually involving an additional weak dependency &lt;code&gt;jmespath&lt;/code&gt;):&lt;/p&gt;






&lt;ul class=&#34;nav nav-tabs&#34; id=&#34;tabs-6&#34; role=&#34;tablist&#34;&gt;
  &lt;li class=&#34;nav-item&#34;&gt;
      &lt;button class=&#34;nav-link disabled&#34;
          id=&#34;tabs-06-00-tab&#34; data-bs-toggle=&#34;tab&#34; data-bs-target=&#34;#tabs-06-00&#34; role=&#34;tab&#34;
          aria-controls=&#34;tabs-06-00&#34; aria-selected=&#34;false&#34;&gt;
        Install Ansible
      &lt;/button&gt;
    &lt;/li&gt;&lt;li class=&#34;nav-item&#34;&gt;
      &lt;button class=&#34;nav-link active&#34;
          id=&#34;tabs-06-01-tab&#34; data-bs-toggle=&#34;tab&#34; data-bs-target=&#34;#tabs-06-01&#34; role=&#34;tab&#34;
          aria-controls=&#34;tabs-06-01&#34; aria-selected=&#34;true&#34;&gt;
        EL 8 / 9
      &lt;/button&gt;
    &lt;/li&gt;&lt;li class=&#34;nav-item&#34;&gt;
      &lt;button class=&#34;nav-link&#34;
          id=&#34;tabs-06-02-tab&#34; data-bs-toggle=&#34;tab&#34; data-bs-target=&#34;#tabs-06-02&#34; role=&#34;tab&#34;
          aria-controls=&#34;tabs-06-02&#34; aria-selected=&#34;false&#34;&gt;
        EL 7
      &lt;/button&gt;
    &lt;/li&gt;&lt;li class=&#34;nav-item&#34;&gt;
      &lt;button class=&#34;nav-link&#34;
          id=&#34;tabs-06-03-tab&#34; data-bs-toggle=&#34;tab&#34; data-bs-target=&#34;#tabs-06-03&#34; role=&#34;tab&#34;
          aria-controls=&#34;tabs-06-03&#34; aria-selected=&#34;false&#34;&gt;
        Debian / Ubuntu
      &lt;/button&gt;
    &lt;/li&gt;&lt;li class=&#34;nav-item&#34;&gt;
      &lt;button class=&#34;nav-link&#34;
          id=&#34;tabs-06-04-tab&#34; data-bs-toggle=&#34;tab&#34; data-bs-target=&#34;#tabs-06-04&#34; role=&#34;tab&#34;
          aria-controls=&#34;tabs-06-04&#34; aria-selected=&#34;false&#34;&gt;
        MacOS
      &lt;/button&gt;
    &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&#34;tab-content&#34; id=&#34;tabs-6-content&#34;&gt;
    &lt;div class=&#34;tab-pane fade&#34;
        id=&#34;tabs-06-00&#34; role=&#34;tabpanel&#34; aria-labelled-by=&#34;tabs-06-00-tab&#34; tabindex=&#34;6&#34;&gt;
        &lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&#34;tab-pane fade show active&#34;
        id=&#34;tabs-06-01&#34; role=&#34;tabpanel&#34; aria-labelled-by=&#34;tabs-06-01-tab&#34; tabindex=&#34;6&#34;&gt;
        &lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Bash&#34; data-lang=&#34;Bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo dnf install -y ansible python3.12-jmespath&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&#34;tab-pane fade&#34;
        id=&#34;tabs-06-02&#34; role=&#34;tabpanel&#34; aria-labelled-by=&#34;tabs-06-02-tab&#34; tabindex=&#34;6&#34;&gt;
        &lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Bash&#34; data-lang=&#34;Bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo yum install -y ansible   &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# EL7 does not need to install jmespath explicitly&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&#34;tab-pane fade&#34;
        id=&#34;tabs-06-03&#34; role=&#34;tabpanel&#34; aria-labelled-by=&#34;tabs-06-03-tab&#34; tabindex=&#34;6&#34;&gt;
        &lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Bash&#34; data-lang=&#34;Bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo apt install -y ansible python3-jmespath&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&#34;tab-pane fade&#34;
        id=&#34;tabs-06-04&#34; role=&#34;tabpanel&#34; aria-labelled-by=&#34;tabs-06-04-tab&#34; tabindex=&#34;6&#34;&gt;
        &lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Bash&#34; data-lang=&#34;Bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;brew install ansible&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;To install Pigsty, you also need to prepare the Pigsty source package. You can directly download a specific version from the &lt;a href=&#34;https://github.com/Vonng/pigsty/releases/&#34;&gt;GitHub Release&lt;/a&gt; page or use the following command to obtain the latest stable version:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;curl -fsSL https://repo.pigsty.io/get &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt; bash
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;If your env does not have Internet access, consider using the &lt;a href=&#34;/docs/setup/offline/#offline-packages&#34;&gt;&lt;strong&gt;offline packages&lt;/strong&gt;&lt;/a&gt;, which are pre-packed for different OS distros, and can be downloaded from the GitHub Release page.&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>Docs: Playbooks</title>
      <link>/docs/setup/playbook/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/docs/setup/playbook/</guid>
      <description>
        
        
        &lt;p&gt;Playbooks are used in Pigsty to install &lt;a href=&#34;/docs/concept/arch/#modules&#34;&gt;modules&lt;/a&gt; on nodes.&lt;/p&gt;
&lt;p&gt;To run playbooks, just treat them as executables. e.g. run with &lt;code&gt;./install.yml&lt;/code&gt;.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;playbooks&#34;&gt;Playbooks&lt;/h2&gt;
&lt;p&gt;Here are default playbooks included in Pigsty.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Playbook&lt;/th&gt;
&lt;th&gt;Function&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/install.yml&#34;&gt;&lt;code&gt;install.yml&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Install Pigsty on current node in one-pass&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/infra.yml&#34;&gt;&lt;code&gt;infra.yml&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Init pigsty infrastructure on infra nodes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/infra-rm.yml&#34;&gt;&lt;code&gt;infra-rm.yml&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Remove infrastructure components from infra nodes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/node.yml&#34;&gt;&lt;code&gt;node.yml&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Init node for pigsty, tune node into desired status&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/node-rm.yml&#34;&gt;&lt;code&gt;node-rm.yml&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Remove node from pigsty&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/pgsql.yml&#34;&gt;&lt;code&gt;pgsql.yml&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Init HA PostgreSQL clusters, or adding new replicas&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/pgsql-rm.yml&#34;&gt;&lt;code&gt;pgsql-rm.yml&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Remove PostgreSQL cluster, or remove replicas&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/pgsql-user.yml&#34;&gt;&lt;code&gt;pgsql-user.yml&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Add new business user to existing PostgreSQL cluster&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/pgsql-db.yml&#34;&gt;&lt;code&gt;pgsql-db.yml&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Add new business database to existing PostgreSQL cluster&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/pgsql-monitor.yml&#34;&gt;&lt;code&gt;pgsql-monitor.yml&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Monitor remote postgres instance with local exporters&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/pgsql-migration.yml&#34;&gt;&lt;code&gt;pgsql-migration.yml&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Generate Migration manual &amp;amp; scripts for existing PostgreSQL&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/redis.yml&#34;&gt;&lt;code&gt;redis.yml&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Init redis cluster/node/instance&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/redis-rm.yml&#34;&gt;&lt;code&gt;redis-rm.yml&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Remove redis cluster/node/instance&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/etcd.yml&#34;&gt;&lt;code&gt;etcd.yml&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Init etcd cluster (required for patroni HA DCS)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/minio.yml&#34;&gt;&lt;code&gt;minio.yml&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Init minio cluster (optional for pgbackrest repo)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/docker.yml&#34;&gt;&lt;code&gt;docker.yml&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Install docker on nodes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/mongo.yml&#34;&gt;&lt;code&gt;mongo.yml&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Install Mongo/FerretDB on nodes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/cert.yml&#34;&gt;&lt;code&gt;cert.yml&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Issue cert with pigsty self-signed CA (e.g. for pg clients)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/cache.yml&#34;&gt;&lt;code&gt;cache.yml&lt;/code&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Make offline install packages from target node&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;One-Pass Install&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The special playbook &lt;code&gt;install.yml&lt;/code&gt; is actually a composed playbook that install everything on current environment.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  playbook  / &lt;span style=&#34;color:#204a87&#34;&gt;command&lt;/span&gt; / group         infra           nodes    etcd     minio     pgsql
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;infra.yml&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; ./infra.yml &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;-l infra&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;   &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;+infra&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;][&lt;/span&gt;+node&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;node.yml&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;  ./node.yml                               &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;+node&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;  &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;+node&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;  &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;+node&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;   &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;+node&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;etcd.yml&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;  ./etcd.yml  &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;-l etcd &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;                            &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;+etcd&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;minio.yml&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; ./minio.yml &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;-l minio&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;                                     &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;+minio&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;pgsql.yml&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; ./pgsql.yml                                                          &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;+pgsql&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Note that there&amp;rsquo;s a circular dependency between &lt;a href=&#34;/docs/node/&#34;&gt;&lt;code&gt;NODE&lt;/code&gt;&lt;/a&gt; and &lt;a href=&#34;/docs/infra/&#34;&gt;&lt;code&gt;INFRA&lt;/code&gt;&lt;/a&gt;:
to register a NODE to INFRA, the INFRA should already exist, while the INFRA module relies on NODE to work.&lt;/p&gt;
&lt;p&gt;The solution is that &lt;code&gt;INFRA&lt;/code&gt; playbook will also install &lt;a href=&#34;/docs/node/&#34;&gt;&lt;code&gt;NODE&lt;/code&gt;&lt;/a&gt; module in addition to &lt;a href=&#34;/docs/infra/&#34;&gt;&lt;code&gt;INFRA&lt;/code&gt;&lt;/a&gt; on infra nodes.
Make sure that infra nodes are init first. If you really want to init all nodes including infra in one-pass, &lt;code&gt;install.yml&lt;/code&gt; is the way to go.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;ansible&#34;&gt;Ansible&lt;/h2&gt;
&lt;p&gt;Playbooks require &lt;code&gt;ansible-playbook&lt;/code&gt; executable to run, playbooks which is included in &lt;code&gt;ansible&lt;/code&gt; rpm / deb package.&lt;/p&gt;
&lt;p&gt;Pigsty will try it&amp;rsquo;s best to install ansible on admin node during &lt;a href=&#34;/docs/setup/install/#bootstrap&#34;&gt;bootstrap&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;You can install it by yourself with &lt;code&gt;yum|apt|brew&lt;/code&gt; &lt;code&gt;install ansible&lt;/code&gt;, it is included in default OS repo.&lt;/p&gt;
&lt;p&gt;Knowledge about ansible is good but not required. Only four parameters needs your attention:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-l|--limit &amp;lt;pattern&amp;gt;&lt;/code&gt; : Limit execution target on specific group/host/pattern (Where)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-t|--tags &amp;lt;tags&amp;gt;&lt;/code&gt;: Only run tasks with specific tags (What)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-e|--extra-vars &amp;lt;vars&amp;gt;&lt;/code&gt;: Extra command line arguments (How)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-i|--inventory &amp;lt;path&amp;gt;&lt;/code&gt;: Using another inventory file (Conf)&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;designate-inventory&#34;&gt;Designate Inventory&lt;/h2&gt;
&lt;p&gt;To use a different config inventory, you can copy &amp;amp; paste the content into the &lt;code&gt;pigsty.yml&lt;/code&gt; file in the home dir as needed.&lt;/p&gt;
&lt;p&gt;The active inventory file can be specified with the &lt;code&gt;-i|--inventory &amp;lt;path&amp;gt;&lt;/code&gt; parameter when running Ansible playbooks.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./node.yml  -i files/pigsty/rpmbuild.yml    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# use another file as config inventory, rather than the default pigsty.yml&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql.yml -i files/pigsty/rpm.yml         &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# install pgsql module on machine define in files/pigsty/rpm.yml&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./redis.yml -i files/pigsty/redis.yml       &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# install redis module on machine define in files/pigsty/redis.yml&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;If you wish to permanently modify the &lt;strong&gt;default&lt;/strong&gt; config inventory filename, you can change the &lt;code&gt;inventory&lt;/code&gt; parameter in the &lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/ansible.cfg#L6&#34;&gt;&lt;code&gt;ansible.cfg&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;limit-host&#34;&gt;Limit Host&lt;/h2&gt;
&lt;p&gt;The target of playbook can be limited with &lt;code&gt;-l|-limit &amp;lt;selector&amp;gt;&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Missing this value could be dangerous since most playbooks will execute on &lt;code&gt;all&lt;/code&gt; host, DO USE WITH CAUTION.&lt;/p&gt;
&lt;p&gt;Here are some examples of host limit:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql.yml                 &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# run on all hosts (very dangerous!)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql.yml -l pg-test      &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# run on pg-test cluster&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql.yml -l 10.10.10.10  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# run on single host 10.10.10.10&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql.yml -l pg-*         &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# run on host/group matching glob pattern `pg-*`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql.yml -l &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;10.10.10.11,&amp;amp;pg-test&amp;#39;&lt;/span&gt;     &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# run on 10.10.10.10 of group pg-test&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/pgsql-rm.yml -l &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;pg-test,!10.10.10.11&amp;#39;&lt;/span&gt;   &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# run on pg-test, except 10.10.10.11&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql.yml -l pg-test      &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Execute the pgsql playbook against the hosts in the pg-test cluster&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;limit-tags&#34;&gt;Limit Tags&lt;/h2&gt;
&lt;p&gt;You can execute a subset of playbook with &lt;code&gt;-t|--tags &amp;lt;tags&amp;gt;&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;You can specify multiple tags in comma separated list, e.g. &lt;code&gt;-t tag1,tag2&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;If specified, tasks with given tags will be executed instead of entire playbook.&lt;/p&gt;
&lt;p&gt;Here are some examples of task limit:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql.yml -t pg_clean    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# cleanup existing postgres if necessary&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql.yml -t pg_dbsu     &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# setup os user sudo for postgres dbsu&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql.yml -t pg_install  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# install postgres packages &amp;amp; extensions&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql.yml -t pg_dir      &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# create postgres directories and setup fhs&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql.yml -t pg_util     &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# copy utils scripts, setup alias and env&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql.yml -t patroni     &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# bootstrap postgres with patroni&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql.yml -t pg_user     &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# provision postgres business users&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql.yml -t pg_db       &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# provision postgres business databases&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql.yml -t pg_backup   &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# init pgbackrest repo &amp;amp; basebackup&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql.yml -t pgbouncer   &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# deploy a pgbouncer sidecar with postgres&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql.yml -t pg_vip      &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# bind vip to pgsql primary with vip-manager&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql.yml -t pg_dns      &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# register dns name to infra dnsmasq&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql.yml -t pg_service  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# expose pgsql service with haproxy&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql.yml -t pg_exporter &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# expose pgsql service with haproxy&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql.yml -t pg_register &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# register postgres to pigsty infrastructure&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# run multiple tasks: reload postgres &amp;amp; pgbouncer hba rules&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql.yml -t pg_hba,pg_reload,pgbouncer_hba,pgbouncer_reload
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# run multiple tasks: refresh haproxy config &amp;amp; reload it&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./node.yml -t haproxy_config,haproxy_reload
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;extra-vars&#34;&gt;Extra Vars&lt;/h2&gt;
&lt;p&gt;Extra command-line args can be passing via &lt;code&gt;-e|-extra-vars KEY=VALUE&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;It has the highest precedence over all other definition.&lt;/p&gt;
&lt;p&gt;Here are some examples of extra vars&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./node.yml -e &lt;span style=&#34;color:#000&#34;&gt;ansible_user&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;admin -k -K   &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# run playbook as another user (with admin sudo password)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql.yml -e &lt;span style=&#34;color:#000&#34;&gt;pg_clean&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#204a87&#34;&gt;true&lt;/span&gt;             &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# force purging existing postgres when init a pgsql instance&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql-rm.yml -e &lt;span style=&#34;color:#000&#34;&gt;pg_uninstall&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#204a87&#34;&gt;true&lt;/span&gt;      &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# explicitly uninstall rpm after postgres instance is removed&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./redis.yml -l 10.10.10.10 -e &lt;span style=&#34;color:#000&#34;&gt;redis_port&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;6379&lt;/span&gt; -t redis  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# init a specific redis instance: 10.10.10.11:6379&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./redis-rm.yml -l 10.10.10.13 -e &lt;span style=&#34;color:#000&#34;&gt;redis_port&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;6379&lt;/span&gt;        &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# remove a specific redis instance: 10.10.10.11:6379&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;You can also passing complex parameters like array and object via JSON:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# install duckdb packages on node with specified upstream repo module&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./node.yml -t node_repo,node_pkg  -e &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;{&amp;#34;node_repo_modules&amp;#34;:&amp;#34;infra&amp;#34;,&amp;#34;node_default_packages&amp;#34;:[&amp;#34;duckdb&amp;#34;]}&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Most playbooks are idempotent, meaning that some deployment playbooks may erase existing databases and create new ones without the protection option turned on.&lt;/p&gt;
&lt;p&gt;Please read the documentation carefully, proofread the commands several times, and operate with caution. The author is not responsible for any loss of databases due to misuse.&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>Docs: Provisioning</title>
      <link>/docs/setup/provision/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/docs/setup/provision/</guid>
      <description>
        
        
        &lt;p&gt;Pigsty runs on nodes, which are Bare Metals or Virtual Machines. You can prepare them manually, or using terraform &amp;amp; vagrant for provisioning.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;sandbox&#34;&gt;Sandbox&lt;/h2&gt;
&lt;p&gt;Pigsty has a sandbox, which is a 4-node deployment with fixed IP addresses and other identifiers.
Check &lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/conf/sandbox/full.yml&#34;&gt;&lt;code&gt;full.yml&lt;/code&gt;&lt;/a&gt; for details.&lt;/p&gt;
&lt;p&gt;The sandbox consists of 4 nodes with fixed IP addresses: &lt;code&gt;10.10.10.10&lt;/code&gt;, &lt;code&gt;10.10.10.11&lt;/code&gt;, &lt;code&gt;10.10.10.12&lt;/code&gt;, &lt;code&gt;10.10.10.13&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;There&amp;rsquo;s a primary singleton PostgreSQL cluster: &lt;code&gt;pg-meta&lt;/code&gt; on the &lt;code&gt;meta&lt;/code&gt; node, which can be used alone if you don&amp;rsquo;t care about PostgreSQL high availability.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;meta    10.10.10.10  pg-meta pg-meta-1&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;There are 3 additional nodes in the sandbox, form a 3-instance PostgreSQL HA cluster &lt;code&gt;pg-test&lt;/code&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;node-1  10.10.10.11  pg-test.pg-test-1&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;node-2  10.10.10.12  pg-test.pg-test-2&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;node-3  10.10.10.13  pg-test.pg-test-3&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Two optional L2 VIP are bind on primary instances of cluster &lt;code&gt;pg-meta&lt;/code&gt;  and &lt;code&gt;pg-test&lt;/code&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;10.10.10.2  pg-meta&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;10.10.10.3  pg-test&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;There&amp;rsquo;s also a 1-instance &lt;code&gt;etcd&lt;/code&gt; cluster, and 1-instance &lt;code&gt;minio&lt;/code&gt; cluster on the &lt;code&gt;meta&lt;/code&gt; node, too.&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;pigsty-sandbox.jpg&#34; src=&#34;/img/pigsty/sandbox.jpg&#34;&gt;&lt;/p&gt;
&lt;p&gt;You can run sandbox on local VMs or cloud VMs. Pigsty offers a local sandbox based on &lt;a href=&#34;/docs/setup/provision/#vagrant&#34;&gt;Vagrant&lt;/a&gt; (pulling up local VMs using Virtualbox or libvirt), and a cloud sandbox based on Terraform (creating VMs using the cloud vendor API).&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Local sandbox can be run on your Mac/PC for free.  Your Mac/PC should have at least 4C/8G to run the full 4-node sandbox.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Cloud sandbox can be easily created and shared. You will have to create a cloud account for that. VMs are created on-demand and can be destroyed with one command, which is also very cheap for a quick glance.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;vagrant&#34;&gt;Vagrant&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://www.vagrantup.com/&#34;&gt;Vagrant&lt;/a&gt; can create local VMs according to specs in a declarative way.
Check &lt;a href=&#34;https://github.com/Vonng/pigsty/tree/master/vagrant/README.md&#34;&gt;Vagrant Templates Intro&lt;/a&gt; for details&lt;/p&gt;
&lt;p&gt;Vagrant use  &lt;a href=&#34;https://www.virtualbox.org/&#34;&gt;VirtualBox&lt;/a&gt; as the default VM provider.
however libvirt, docker, parallel desktop and vmware can also be used.
We will use VirtualBox in this guide.&lt;/p&gt;
&lt;h3 id=&#34;installation&#34;&gt;Installation&lt;/h3&gt;
&lt;p&gt;Make sure &lt;a href=&#34;https://www.vagrantup.com/&#34;&gt;Vagrant&lt;/a&gt; and &lt;a href=&#34;https://www.virtualbox.org/&#34;&gt;Virtualbox&lt;/a&gt; are installed and available on your OS.&lt;/p&gt;
&lt;p&gt;If you are using macOS, You can use &lt;code&gt;homebrew&lt;/code&gt; to install both of them with one command (reboot required). You can also use &lt;a href=&#34;https://vagrant-libvirt.github.io/vagrant-libvirt/&#34;&gt;vagrant-libvirt&lt;/a&gt; on Linux.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/bin/bash -c &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;$(&lt;/span&gt;curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;brew install vagrant virtualbox ansible   &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# Run on MacOS with one command, but only works on x86_64 Intel chips&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;configuration&#34;&gt;Configuration&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;Vagranfile&lt;/code&gt; is a ruby script file describing VM nodes. Here are some default specs of Pigsty.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:center&#34;&gt;Templates&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;Nodes&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;Spec&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;Comment&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;Alias&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;spec/meta.rb&#34;&gt;meta.rb&lt;/a&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;1 node&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;2c4g x 1&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Single Node Meta&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Devbox&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;spec/dual.rb&#34;&gt;dual.rb&lt;/a&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;2 node&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;1c2g x 2&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Dual Nodes&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;spec/trio.rb&#34;&gt;trio.rb&lt;/a&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;3 node&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;1c2G x 3&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Three Nodes&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;spec/full.rb&#34;&gt;full.rb&lt;/a&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;4 node&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;2c4g + 1c2g x 3&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Full-Featured 4 Node&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Sandbox&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;spec/prod.rb&#34;&gt;prod.rb&lt;/a&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;36 node&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;misc&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Prod Env Simulation&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Simubox&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;spec/oss.rb&#34;&gt;build.rb&lt;/a&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;5 node&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;1c2g x 4&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;4-Node Building Env&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Buildbox&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;spec/rpm.rb&#34;&gt;rpm.rb&lt;/a&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;3 node&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;1c2G x 3&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;3-Node EL Building Env&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;spec/deb.rb&#34;&gt;deb.rb&lt;/a&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;5 node&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;1c2G x 5&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;5-Node Deb Building Env&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;a href=&#34;spec/all.rb&#34;&gt;all.rb&lt;/a&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;7 node&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;1c2G x 7&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;7-Node All Building Env&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Each spec file contains a &lt;code&gt;Specs&lt;/code&gt; variable describe VM nodes. For example, the &lt;a href=&#34;spec/full.rb&#34;&gt;&lt;code&gt;full.rb&lt;/code&gt;&lt;/a&gt; contains:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# full: pigsty full-featured 4-node sandbox for HA-testing &amp;amp; tutorial &amp;amp; practices&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000&#34;&gt;Specs&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;meta&amp;#34;&lt;/span&gt;   &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;ip&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;10.10.10.10&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;  &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;cpu&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;2&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;  &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;mem&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;4096&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;  &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;image&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;generic/rocky8&amp;#34;&lt;/span&gt;  &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;node-1&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;ip&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;10.10.10.11&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;  &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;cpu&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;1&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;  &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;mem&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;2048&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;  &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;image&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;generic/rocky8&amp;#34;&lt;/span&gt;  &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;node-2&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;ip&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;10.10.10.12&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;  &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;cpu&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;1&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;  &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;mem&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;2048&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;  &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;image&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;generic/rocky8&amp;#34;&lt;/span&gt;  &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;node-3&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;ip&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;10.10.10.13&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;  &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;cpu&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;1&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;  &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;mem&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;2048&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;  &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;image&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;generic/rocky8&amp;#34;&lt;/span&gt;  &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;You can use specs with the &lt;a href=&#34;/docs/setup/config/&#34;&gt;&lt;code&gt;config&lt;/code&gt;&lt;/a&gt; script, it will render the final &lt;code&gt;Vagrantfile&lt;/code&gt; according to the spec and other options&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87&#34;&gt;cd&lt;/span&gt; ~/pigsty
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;vagrant/config &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;spec&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;image&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;scale&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;provider&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;vagrant/config meta                &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# use the 1-node spec, default el8 image&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;vagrant/config dual el9            &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# use the 2-node spec, use el9 image instead &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;vagrant/config trio d12 &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;2&lt;/span&gt;          &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# use the 3-node spec, use debian12 image, double the cpu/mem resource&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;vagrant/config full u22 &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;4&lt;/span&gt;          &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# use the 4-node spec, use ubuntu22 image instead, use 4x cpu/mem resource         &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;vagrant/config prod u20 &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;1&lt;/span&gt; libvirt  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# use the 43-node spec, use ubuntu20 image instead, use libvirt as provider instead of virtualbox &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;You can scale the resource unit with environment variable &lt;code&gt;VM_SCALE&lt;/code&gt;, the default value is &lt;code&gt;1&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;For example, if you use &lt;code&gt;VM_SCALE=2&lt;/code&gt; with &lt;code&gt;vagrant/config meta&lt;/code&gt;, it will double the cpu / mem resources of the meta node.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# pigsty singleton-meta environment (4C8G)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000&#34;&gt;Specs&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;{&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&amp;gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;meta&amp;#34;&lt;/span&gt;          , &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;ip&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&amp;gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;10.10.10.10&amp;#34;&lt;/span&gt;   , &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;cpu&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&amp;gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;8&amp;#34;&lt;/span&gt;    , &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;mem&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&amp;gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;16384&amp;#34;&lt;/span&gt;    , &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;image&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&amp;gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;generic/rocky8&amp;#34;&lt;/span&gt;   &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;}&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;shortcuts&#34;&gt;Shortcuts&lt;/h3&gt;
&lt;p&gt;Create pre-configured environment with &lt;code&gt;make&lt;/code&gt; shortcuts:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;make meta       &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 1-node devbox for quick start, dev, test &amp;amp; playground&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;make full       &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 4-node sandbox for HA-testing &amp;amp; feature demonstration&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;make prod       &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 43-node simubox for production environment simulation&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# seldom used templates:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;make dual       &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 2-node env&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;make trio       &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 3-node env&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;You can use variant alias to create environment with different base image:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;make meta9      &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# create singleton-meta node with generic/rocky9 image&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;make full22     &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# create 4-node sandbox with generic/ubuntu22 image&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;make prod12     &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# create 43-node production env simubox with generic/debian12 image&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;...             &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# available suffix: 7,8,9,11,12,20,22,24&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;You can also launch pigsty building env with these alias, base image will not be substituted:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;make build      &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 4-node building environment &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;make rpm        &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 3-node el7/8/9 building env&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;make deb        &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 5-node debian11/12 ubuntu20/22/24&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;make all        &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 7-node building env with all base images&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;management&#34;&gt;Management&lt;/h3&gt;
&lt;p&gt;After describing the VM nodes with specs and generate the &lt;code&gt;vagrant/Vagrantfile&lt;/code&gt;. you can create the VMs with &lt;code&gt;vagrant up&lt;/code&gt; command.&lt;/p&gt;
&lt;p&gt;Pigsty templates will use your &lt;code&gt;~/.ssh/id_rsa[.pub]&lt;/code&gt; as the default ssh key for vagrant provisioning.&lt;/p&gt;
&lt;p&gt;Make sure you have a valid ssh key pair before you start, you can generate one by: &lt;code&gt;ssh-keygen -t rsa -b 2048&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;There are some makefile shortcuts that wrap the vagrant commands, you can use them to manage the VMs.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;make         &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# = make start&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;make new     &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# destroy existing vm and create new ones&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;make ssh     &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# write VM ssh config to ~/.ssh/     (required)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;make dns     &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# write VM DNS records to /etc/hosts (optional)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;make start   &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# launch VMs and write ssh config    (up + ssh) &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;make up      &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# launch VMs with vagrant up&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;make halt    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# shutdown VMs (down,dw)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;make clean   &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# destroy VMs (clean/del/destroy)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;make status  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# show VM status (st)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;make pause   &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# pause VMs (suspend,pause)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;make resume  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# pause VMs (resume)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;make nuke    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# destroy all vm &amp;amp; volumes with virsh (if using libvirt) &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;caveat&#34;&gt;Caveat&lt;/h3&gt;
&lt;p&gt;If you are using virtualbox, you have to add &lt;code&gt;10.0.0.0/8&lt;/code&gt; to &lt;code&gt;/etc/vbox/networks.conf&lt;/code&gt; first to use 10.x.x.x in host-only networks.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# /etc/vbox/networks.conf&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;* 10.0.0.0/8
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Reference: &lt;a href=&#34;https://discuss.hashicorp.com/t/vagran-can-not-assign-ip-address-to-virtualbox-machine/30930/3&#34;&gt;https://discuss.hashicorp.com/t/vagran-can-not-assign-ip-address-to-virtualbox-machine/30930/3&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;terraform&#34;&gt;Terraform&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://www.terraform.io/&#34;&gt;Terraform&lt;/a&gt; is an open-source tool to practice &amp;lsquo;Infra as Code&amp;rsquo;. Describe the cloud resource you want and create them with one command.&lt;/p&gt;
&lt;p&gt;Pigsty has Terraform templates for AWS, Aliyun, and Tencent Cloud, you can use them to create VMs on the cloud for Pigsty Demo.&lt;/p&gt;
&lt;p&gt;Terraform can be easily installed with homebrew, too: &lt;code&gt;brew install terraform&lt;/code&gt;. You will have to create a cloud account to obtain AccessKey and AccessSecret credentials to proceed.&lt;/p&gt;
&lt;h3 id=&#34;quick-start&#34;&gt;Quick Start&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;brew install terraform    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# install via homebrew&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;terraform init            &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# install terraform provider: aliyun , aws, only required for the first time&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;terraform apply           &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# plan and apply: create VMs, etc...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Print public IP Address:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;terraform output &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;|&lt;/span&gt; grep -Eo &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;specifications&#34;&gt;Specifications&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/Vonng/pigsty/tree/main/terraform/spec/aliyun-meta.tf&#34;&gt;spec/aliyun-meta.tf&lt;/a&gt; : Aliyun 1 meta node template for all distro &amp;amp; amd/arm (default)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/Vonng/pigsty/tree/main/terraform/spec/aliyun-full.tf&#34;&gt;spec/aliyun-full.tf&lt;/a&gt; : Aliyun 4-node sandbox template for all distro &amp;amp; amd/arm.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/Vonng/pigsty/tree/main/terraform/spec/aliyun-oss.tf&#34;&gt;spec/aliyun-oss.tf&lt;/a&gt; : Aliyun 5-node building template for all distro &amp;amp; amd/arm.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/Vonng/pigsty/tree/main/terraform/spec/aws-cn.tf&#34;&gt;spec/aws-cn.tf&lt;/a&gt; : AWS 4 node CentOS7 environment&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/Vonng/pigsty/tree/main/terraform/spec/tencentcloud.tf&#34;&gt;spec/tencentcloud.tf&lt;/a&gt; : QCloud 4 node CentOS7 environment&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;aliyun-credential&#34;&gt;Aliyun Credential&lt;/h3&gt;
&lt;p&gt;You can add your aliyun credentials to the environment file, such as &lt;code&gt;~/.bash_profile&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87&#34;&gt;export&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;ALICLOUD_ACCESS_KEY&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&amp;lt;your_access_key&amp;gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87&#34;&gt;export&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;ALICLOUD_SECRET_KEY&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&amp;lt;your_secret_key&amp;gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87&#34;&gt;export&lt;/span&gt; &lt;span style=&#34;color:#000&#34;&gt;ALICLOUD_REGION&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;cn-beijing&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;aws-credential&#34;&gt;AWS Credential&lt;/h3&gt;
&lt;p&gt;You have to set up aws config &amp;amp; credential to use AWS provider.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# ~/.aws&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# ~/.aws/config&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;default&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000&#34;&gt;region&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; cn-northwest-1
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# ~/.aws/credentials&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;default&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000&#34;&gt;aws_access_key_id&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &amp;lt;YOUR_AWS_ACCESS_KEY&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#000&#34;&gt;aws_secret_access_key&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;  &amp;lt;AWS_ACCESS_SECRET&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# ~/.aws/pigsty-key&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# ~/.aws/pigsty-key.pub&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
      </description>
    </item>
    
    <item>
      <title>Docs: Security</title>
      <link>/docs/setup/security/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/docs/setup/security/</guid>
      <description>
        
        
        &lt;p&gt;Pigsty already provides a secure-by-default &lt;a href=&#34;/docs/pgsql/hba/&#34;&gt;authentication&lt;/a&gt; and &lt;a href=&#34;/docs/pgsql/acl/&#34;&gt;access control&lt;/a&gt; model, which is sufficient for most scenarios.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;/docs/pgsql/acl/&#34;&gt;&lt;img alt=&#34;pigsty-acl.jpg&#34; src=&#34;/img/pigsty/acl.jpg&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;But if you want to further strengthen the security of the system, the following suggestions are for your reference:&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;confidentiality&#34;&gt;Confidentiality&lt;/h2&gt;
&lt;h3 id=&#34;important-files&#34;&gt;Important Files&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Secure your pigsty config inventory&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;pigsty.yml&lt;/code&gt; has highly sensitive information, including passwords, certificates, and keys.&lt;/li&gt;
&lt;li&gt;You should limit access to admin/infra nodes, only accessible by the admin/dba users&lt;/li&gt;
&lt;li&gt;Limit access to the git repo, if you are using git to manage your pigsty source.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Secure your CA private key and other certs&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;These files are very important, and will be generated under &lt;code&gt;files/pki&lt;/code&gt; under pigsty source dir by default.&lt;/li&gt;
&lt;li&gt;You should secure &amp;amp; backup them in a safe place periodically.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id=&#34;passwords&#34;&gt;Passwords&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Always change these passwords, DO NOT USE THE DEFAULT VALUES:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;/docs/reference/param/#grafana_admin_password&#34;&gt;&lt;code&gt;grafana_admin_password&lt;/code&gt;&lt;/a&gt;   : &lt;code&gt;pigsty&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;/docs/reference/param/#pg_admin_password&#34;&gt;&lt;code&gt;pg_admin_password&lt;/code&gt;&lt;/a&gt;             : &lt;code&gt;DBUser.DBA&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;/docs/reference/param/#pg_monitor_password&#34;&gt;&lt;code&gt;pg_monitor_password&lt;/code&gt;&lt;/a&gt;         : &lt;code&gt;DBUser.Monitor&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;/docs/reference/param/#pg_replication_password&#34;&gt;&lt;code&gt;pg_replication_password&lt;/code&gt;&lt;/a&gt; : &lt;code&gt;DBUser.Replicator&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;/docs/reference/param/#patroni_password&#34;&gt;&lt;code&gt;patroni_password&lt;/code&gt;&lt;/a&gt;               : &lt;code&gt;Patroni.API&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;/docs/reference/param/#haproxy_admin_password&#34;&gt;&lt;code&gt;haproxy_admin_password&lt;/code&gt;&lt;/a&gt;   : &lt;code&gt;pigsty&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;/docs/reference/param/#minio_secret_key&#34;&gt;&lt;code&gt;minio_secret_key&lt;/code&gt;&lt;/a&gt;               : &lt;code&gt;minioadmin&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Please change MinIO user secret key and pgbackrest_repo references&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Please change the password for &lt;a href=&#34;/docs/reference/param/#minio_users&#34;&gt;&lt;code&gt;minio_users&lt;/code&gt;.&lt;code&gt;[pgbacrest]&lt;/code&gt;.&lt;code&gt;secret_key&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Please change pgbackrest references: &lt;a href=&#34;/docs/reference/param/#pgbackrest_repo&#34;&gt;&lt;code&gt;pgbackrest_repo&lt;/code&gt;.&lt;code&gt;minio&lt;/code&gt;.&lt;code&gt;s3_key_secret&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;If you are using remote backup method, secure backup with distinct passwords&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Use &lt;code&gt;aes-256-cbc&lt;/code&gt; for &lt;a href=&#34;/docs/reference/param/#pgbackrest_repo&#34;&gt;&lt;code&gt;pgbackrest_repo&lt;/code&gt;.&lt;code&gt;*&lt;/code&gt;.&lt;code&gt;cipher_type&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;When setting a password, you can use &lt;code&gt;${pg_cluster}&lt;/code&gt; placeholder as part of the password to avoid using the same password.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Use advanced password encryption method for PostgreSQL&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;use &lt;a href=&#34;/docs/reference/param/#pg_pwd_enc&#34;&gt;&lt;code&gt;pg_pwd_enc&lt;/code&gt;&lt;/a&gt; default &lt;code&gt;scram-sha-256&lt;/code&gt; instead of legacy &lt;code&gt;md5&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Enforce a strong pg password with the &lt;code&gt;passwordcheck&lt;/code&gt; extension.&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;add &lt;code&gt;$lib/passwordcheck&lt;/code&gt; to &lt;a href=&#34;/docs/reference/param/#pg_libs&#34;&gt;&lt;code&gt;pg_libs&lt;/code&gt;&lt;/a&gt; to enforce password policy.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Encrypt remote backup with an encryption algorithm&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;check &lt;a href=&#34;/docs/reference/param/#pgbackrest_repo&#34;&gt;&lt;code&gt;pgbackrest_repo&lt;/code&gt;&lt;/a&gt; definition &lt;code&gt;repo_cipher_type&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Add an expiration date to biz user passwords.&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;You can set an expiry date for each user for compliance purposes.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Don&amp;rsquo;t forget to refresh these passwords periodically.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: dbuser_meta , password: Pleas3-ChangeThisPwd ,expire_in: 7300 ,pgbouncer: true ,roles: [ dbrole_admin ]    ,comment&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pigsty admin user }&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: dbuser_view , password: Make.3ure-Compl1ance  ,expire_in: 7300 ,pgbouncer: true ,roles: [ dbrole_readonly ] ,comment&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;read-only viewer for meta database }&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: postgres     ,superuser: true  ,expire_in: 7300                        ,comment&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;system superuser }&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: replicator ,replication: true  ,expire_in: 7300 ,roles: [pg_monitor, dbrole_readonly]   ,comment&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;system replicator }&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: dbuser_dba   ,superuser: true  ,expire_in: 7300 ,roles: [dbrole_admin]  ,pgbouncer: true ,pool_mode: session, pool_connlimit: 16 , comment&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pgsql admin user }&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: dbuser_monitor ,roles: [pg_monitor] ,expire_in: 7300 ,pgbouncer: true ,parameters&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;log_min_duration_statement: 1000 } ,pool_mode: session ,pool_connlimit: 8 ,comment&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pgsql monitor user }&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Do not log changing password statement into postgres log.&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;SET log_statement TO &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;none&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ALTER USER &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;{{ user.name }}&amp;#34;&lt;/span&gt; PASSWORD &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;{{ user.password }}&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;SET log_statement TO DEFAULT&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h3 id=&#34;ip-addresses&#34;&gt;IP Addresses&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Bind to specific IP addresses rather than all addresses for postgres/pgbouncer/patroni&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The default &lt;a href=&#34;/docs/reference/param/#pg_listen&#34;&gt;&lt;code&gt;pg_listen&lt;/code&gt;&lt;/a&gt; address is &lt;code&gt;0.0.0.0&lt;/code&gt;, which is all IPv4 addresses.&lt;/li&gt;
&lt;li&gt;consider using &lt;code&gt;pg_listen: &#39;${ip},${vip},${lo}&#39;&lt;/code&gt; to bind to specific addresses for better security.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Do not expose any port to the Internet; except 80/443, the infra portal&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Grafana/Prometheus are bind to &lt;strong&gt;all&lt;/strong&gt; IP address by default for convenience.&lt;/li&gt;
&lt;li&gt;You can modify their bind configuration to listen on localhost/intranet IP and expose by Nginx.&lt;/li&gt;
&lt;li&gt;Redis server are bind to &lt;strong&gt;all&lt;/strong&gt; IP address by default for convenience. You can change &lt;a href=&#34;/docs/reference/param/#redis_bind_address&#34;&gt;&lt;code&gt;redis_bind_address&lt;/code&gt;&lt;/a&gt; to listen on intranet IP.&lt;/li&gt;
&lt;li&gt;You can also implement it with the security group or firewall rules.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Limit postgres client access with &lt;a href=&#34;/docs/pgsql/hba/&#34;&gt;HBA&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;There&amp;rsquo;s a security enhance config template: &lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/conf/demo/security.yml&#34;&gt;&lt;code&gt;security.yml&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Limit patroni admin access from the infra/admin node.&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;This is restricted by default with &lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/roles/pgsql/templates/oltp.yml#L109&#34;&gt;&lt;code&gt;restapi.allowlist&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id=&#34;network-traffic&#34;&gt;Network Traffic&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Access Nginx with SSL and domain names&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Nginx SSL is controlled by &lt;a href=&#34;/docs/reference/param/#nginx_sslmode&#34;&gt;&lt;code&gt;nginx_sslmode&lt;/code&gt;&lt;/a&gt;, which is &lt;code&gt;enable&lt;/code&gt; by default.&lt;/li&gt;
&lt;li&gt;Nginx Domain names are specified by &lt;a href=&#34;/docs/reference/param/#infra_portal&#34;&gt;&lt;code&gt;infra_portal.&amp;lt;value&amp;gt;.domain&lt;/code&gt;&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Secure Patroni REST API with SSL&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;/docs/reference/param/#patroni_ssl_enabled&#34;&gt;&lt;code&gt;patroni_ssl_enabled&lt;/code&gt;&lt;/a&gt; is disabled by default&lt;/li&gt;
&lt;li&gt;Since it affects health checks and API invocation.&lt;/li&gt;
&lt;li&gt;Note this is a global option, and you have to decide before deployment.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Secure Pgbouncer Client Traffic with SSL&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;/docs/reference/param/#pgbouncer_sslmode&#34;&gt;&lt;code&gt;pgbouncer_sslmode&lt;/code&gt;&lt;/a&gt; is &lt;code&gt;disable&lt;/code&gt; by default&lt;/li&gt;
&lt;li&gt;Since it has a significant performance impact.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;integrity&#34;&gt;Integrity&lt;/h2&gt;
&lt;hr&gt;
&lt;h3 id=&#34;consistency&#34;&gt;Consistency&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Use consistency-first mode for PostgreSQL.&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Use &lt;code&gt;crit.yml&lt;/code&gt; templates for &lt;a href=&#34;/docs/reference/param/#pg_conf&#34;&gt;&lt;code&gt;pg_conf&lt;/code&gt;&lt;/a&gt; will trade some availability for the best consistency.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Use node crit tuned template for better consistency&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;set &lt;a href=&#34;/docs/reference/param/#node_tune&#34;&gt;&lt;code&gt;node_tune&lt;/code&gt;&lt;/a&gt; to &lt;code&gt;crit&lt;/code&gt; to reduce dirty page ratio.&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;Enable data checksum to detect silent data corruption.
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;/docs/reference/param/#pg_checksum&#34;&gt;&lt;code&gt;pg_checksum&lt;/code&gt;&lt;/a&gt; is disabled by default, and enabled for &lt;code&gt;crit.yml&lt;/code&gt; by default&lt;/li&gt;
&lt;li&gt;This can be enabled later, which requires a full cluster scan/stop.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id=&#34;audit&#34;&gt;Audit&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Enable &lt;code&gt;log_connections&lt;/code&gt; and &lt;code&gt;log_disconnections&lt;/code&gt; after the pg cluster bootstrap.
&lt;ul&gt;
&lt;li&gt;Audit incoming sessions; this is enabled in &lt;code&gt;crit.yml&lt;/code&gt; by default.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;availability&#34;&gt;Availability&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Do not access the database directly via a fixed IP address; use VIP, DNS, HAProxy, or their combination.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Haproxy will handle the traffic control for the clients in case of failover/switchover.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Use enough nodes for serious production deployment.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;You need at least three nodes (tolerate one node failure) to achieve production-grade high availability.&lt;/li&gt;
&lt;li&gt;If you only have two nodes, you can tolerate the failure of the specific standby node.&lt;/li&gt;
&lt;li&gt;If you have one node, use an external S3/MinIO for cold backup &amp;amp; wal archive storage.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Trade off between availability and consistency for PostgreSQL.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;/docs/reference/param/#pg_rpo&#34;&gt;&lt;code&gt;pg_rpo&lt;/code&gt;&lt;/a&gt; : &lt;strong&gt;trade-off between Availability and Consistency&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;/docs/reference/param/#pg_rto&#34;&gt;&lt;code&gt;pg_rto&lt;/code&gt;&lt;/a&gt; : &lt;strong&gt;trade-off between failure chance and impact&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Use multiple infra nodes in serious production deployment (e.g., 1~3)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Usually, 2 ~ 3 is enough for a large production deployment.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Use enough etcd members and use even numbers (1,3,5,7).&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Check &lt;a href=&#34;/docs/etcd/#administration&#34;&gt;ETCD Administration&lt;/a&gt; for details.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;

      </description>
    </item>
    
    <item>
      <title>Docs: FAQ</title>
      <link>/docs/docker/faq/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/docs/docker/faq/</guid>
      <description>
        
        
        &lt;hr&gt;
&lt;h2 id=&#34;how-to-install-docker-&#34;&gt;How to install Docker ？&lt;/h2&gt;
&lt;p&gt;Install with the &lt;a href=&#34;/docs/docker/#dockeryml&#34;&gt;&lt;code&gt;docker.yml&lt;/code&gt;&lt;/a&gt; playbook, targeting at any node managed by Pigsty.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./docker.yml -l &amp;lt;selector&amp;gt;    
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
      </description>
    </item>
    
    <item>
      <title>Docs: FAQ</title>
      <link>/docs/etcd/faq/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/docs/etcd/faq/</guid>
      <description>
        
        
        &lt;hr&gt;
&lt;h2 id=&#34;what-is-the-role-of-the-etcd-in-pigsty&#34;&gt;What is the role of the etcd in pigsty?&lt;/h2&gt;
&lt;p&gt;etcd is a distributed, reliable key-value store used to store the most critical config / consensus data in the deployment.
Pigsty uses etcd as the DCS (Distributed Configuration Store) service for Patroni, which will store the high availability status information of the PostgreSQL cluster.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;how-many-etcd-instance-should-i-choose&#34;&gt;How many etcd instance should I choose?&lt;/h2&gt;
&lt;p&gt;If more than (include) half of the etcd instances are down, the etcd cluster and its service will be unavailable.&lt;/p&gt;
&lt;p&gt;For example, a 3-node etcd cluster can tolerate at most one node failure, and the other two nodes can still work normally; while a 5-node etcd cluster can tolerate 2 node failures.&lt;/p&gt;
&lt;p&gt;Beware that the &lt;strong&gt;learner&lt;/strong&gt; instances in the etcd cluster do not count in the member number, so in a 3-node etcd cluster, if there is a learner instance, the actual member count is 2, so no node failure can be tolerated.&lt;/p&gt;
&lt;p&gt;It is advisable to choose an odd number of etcd instances to avoid split-brain scenarios. It is recommended to use 3 or 5 nodes for the production environment.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;what-is-the-impact-of-etcd-failure&#34;&gt;What is the impact of etcd failure?&lt;/h2&gt;
&lt;p&gt;If etcd cluster is unavailable, it will affect the control plane of Pigsty, but not the data plane - the existing PostgreSQL cluster will continue to serve, but admin operations through Patroni will not work.&lt;/p&gt;
&lt;p&gt;During etcd failure, PostgreSQL HA is unable to perform automatic failover, and most of the Patroni operations will be blocked, such as edit-config, restart, switchover, etc&amp;hellip;
Admin tasks through Ansible playbooks are usually not affected by etcd failure, such as create database, create user, reload HBA and Service, etc&amp;hellip;, And you can always operate the PostgreSQL cluster directly to achieve most of the patroni functions.&lt;/p&gt;
&lt;p&gt;Beware that the above description is only applicable to newer versions of Patroni (&amp;gt;=3.0, Pigsty &amp;gt;= 2.0). If you are using an older version of Patroni (&amp;lt;3.0, corresponding to Pigsty version 1.x), etcd / consul failure will cause a serious impact:
All PostgreSQL clusters will be demoted and reject write requests, and etcd failure will be amplified as a global PostgreSQL failure. After Patroni 3.0&amp;rsquo;s DCS Failsafe feature, this situation has been significantly improved.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;what-data-is-stored-in-the-etcd-cluster&#34;&gt;What data is stored in the etcd cluster?&lt;/h2&gt;
&lt;p&gt;etcd is only used for PostgreSQL HA consensus in Pigsty, no other data is stored in etcd by default.&lt;/p&gt;
&lt;p&gt;These consensus data are managed by Patroni, and when these data are lost in etcd, Patroni will automatically rebuild them.&lt;/p&gt;
&lt;p&gt;Thus, by default, the &lt;strong&gt;etcd&lt;/strong&gt; in Pigsty can be regarded as a &amp;ldquo;stateless service&amp;rdquo; that is disposable, which brings great convenience to maintenance work.&lt;/p&gt;
&lt;p&gt;If you use etcd for other purposes, such as storing metadata for Kubernetes, or storing other data, you need to back up the etcd data yourself and restore the data after the etcd cluster is restored.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;how-to-recover-from-etcd-failure&#34;&gt;How to recover from etcd failure?&lt;/h2&gt;
&lt;p&gt;Since etcd is disposable in Pigsty, you can quickly stop the bleeding by &amp;ldquo;restarting&amp;rdquo; or &amp;ldquo;redeploying&amp;rdquo; etcd in case of failure.&lt;/p&gt;
&lt;p&gt;To &lt;strong&gt;Restart&lt;/strong&gt; the etcd cluster, you can use the following Ansible command (or &lt;code&gt;systemctl restart etcd&lt;/code&gt;):&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./etcd.yml -t etcd_launch
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;To &lt;strong&gt;Reset&lt;/strong&gt; the etcd cluster, you can run this playbook, it will &lt;strong&gt;nuke&lt;/strong&gt; the etcd cluster and redeploy it:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./etcd.yml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Beware that if you use etcd to store other data, don&amp;rsquo;t forget to backup etcd data before nuking the etcd cluster.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;is-any-maintenance-work-for-etcd-cluster&#34;&gt;Is any maintenance work for etcd cluster?&lt;/h2&gt;
&lt;p&gt;In short: do not use all the &lt;strong&gt;quota&lt;/strong&gt; of etcd.&lt;/p&gt;
&lt;p&gt;etcd has a default quota for database size of 2GB, if your etcd database size exceeds this limit, etcd will reject write requests.
Meanwhile, as etcd&amp;rsquo;s &lt;a href=&#34;https://etcd.io/docs/v3.5/learning/data_model/&#34;&gt;data model&lt;/a&gt; illustrates, each write will generate a new version (a.k.a. revision),
so if your etcd cluster writes frequently, even with very few keys, the etcd database size may continue to grow, and may fail when it reaches the quota limit.&lt;/p&gt;
&lt;p&gt;You can achieve this by &lt;strong&gt;Auto Compact&lt;/strong&gt;, &lt;strong&gt;Manual Compact&lt;/strong&gt;, &lt;strong&gt;Defragmentation&lt;/strong&gt;, and &lt;strong&gt;Quota Increase&lt;/strong&gt;, etc., please refer to the etcd &lt;a href=&#34;https://etcd.io/docs/v3.5/op-guide/maintenance/&#34;&gt;official maintenance guide&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Pigsty has auto compact enabled by default since v2.6, so you usually don&amp;rsquo;t have to worry about etcd full.
For versions before v2.6, we &lt;strong&gt;strongly recommend&lt;/strong&gt; enabling etcd&amp;rsquo;s auto compact feature in the production environment.&lt;/p&gt;


&lt;div class=&#34;alert alert-danger&#34; role=&#34;alert&#34;&gt;
&lt;h4 class=&#34;alert-heading&#34;&gt;Fill etcd may lead to PostgreSQL failure!&lt;/h4&gt;

    For Pigsty v2.0 - v2.5 users, we strongly recommend upgrading to a newer version, or following the instructions below to enable etcd auto compaction!

&lt;/div&gt;

&lt;hr&gt;
&lt;h2 id=&#34;how-to-enable-etcd-auto-compaction&#34;&gt;How to enable etcd auto compaction?&lt;/h2&gt;
&lt;p&gt;If you are using an earlier version of Pigsty (v2.0 - v2.5), we strongly recommend that you enable etcd&amp;rsquo;s auto compaction feature in the production environment.&lt;/p&gt;
&lt;p&gt;Edit the etcd config template in &lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/roles/etcd/templates/etcd.conf.j2#L30&#34;&gt;&lt;code&gt;roles/etcd/templates/etcd.conf.j2&lt;/code&gt;&lt;/a&gt; with these 3 new lines:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;auto-compaction-mode&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;periodic&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;auto-compaction-retention&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;24h&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;quota-backend-bytes&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;17179869184&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;You can set all the PostgreSQL cluster to &lt;strong&gt;maintenance mode&lt;/strong&gt; and then redeploy the etcd cluster with &lt;code&gt;./etcd.yml&lt;/code&gt; to apply the these changes.&lt;/p&gt;
&lt;p&gt;It will increase the etcd default quota from 2 GiB to 16 GiB, and ensure that only the most recent day&amp;rsquo;s write history is retained, avoiding the infinite growth of the etcd database size.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;where-does-the-postgresql-ha-data-stored-in-etcd&#34;&gt;Where does the PostgreSQL HA data stored in etcd?&lt;/h2&gt;
&lt;p&gt;Patroni will use the &lt;a href=&#34;/docs/reference/param/#pg_namespace&#34;&gt;&lt;strong&gt;&lt;code&gt;pg_namespace&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; (default is &lt;code&gt;/pg&lt;/code&gt;) as the prefix for all metadata keys in etcd, followed by the PostgreSQL cluster name.&lt;/p&gt;
&lt;p&gt;For example, a PG cluster named &lt;code&gt;pg-meta&lt;/code&gt;, its metadata keys will be stored under &lt;code&gt;/pg/pg-meta&lt;/code&gt;, which may look like this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/pg/pg-meta/config
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;ttl&amp;#34;&lt;/span&gt;:30,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;loop_wait&amp;#34;&lt;/span&gt;:10,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;retry_timeout&amp;#34;&lt;/span&gt;:10,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;primary_start_timeout&amp;#34;&lt;/span&gt;:10,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;maximum_lag_on_failover&amp;#34;&lt;/span&gt;:1048576,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;maximum_lag_on_syncnode&amp;#34;&lt;/span&gt;:-1,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;primary_stop_timeout&amp;#34;&lt;/span&gt;:30,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;synchronous_mode&amp;#34;&lt;/span&gt;:false,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;synchronous_mode_strict&amp;#34;&lt;/span&gt;:false,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;failsafe_mode&amp;#34;&lt;/span&gt;:true,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;pg_version&amp;#34;&lt;/span&gt;:16,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;pg_cluster&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;pg-meta&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;pg_shard&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;pg-meta&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;pg_group&amp;#34;&lt;/span&gt;:0,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;postgresql&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;use_slots&amp;#34;&lt;/span&gt;:true,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;use_pg_rewind&amp;#34;&lt;/span&gt;:true,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;remove_data_directory_on_rewind_failure&amp;#34;&lt;/span&gt;:true,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;parameters&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;max_connections&amp;#34;&lt;/span&gt;:100,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;superuser_reserved_connections&amp;#34;&lt;/span&gt;:10,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;max_locks_per_transaction&amp;#34;&lt;/span&gt;:200,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;max_prepared_transactions&amp;#34;&lt;/span&gt;:0,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;track_commit_timestamp&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;on&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;wal_level&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;logical&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;wal_log_hints&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;on&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;max_worker_processes&amp;#34;&lt;/span&gt;:16,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;max_wal_senders&amp;#34;&lt;/span&gt;:50,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;max_replication_slots&amp;#34;&lt;/span&gt;:50,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;password_encryption&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;scram-sha-256&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;ssl&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;on&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;ssl_cert_file&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;/pg/cert/server.crt&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;ssl_key_file&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;/pg/cert/server.key&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;ssl_ca_file&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;/pg/cert/ca.crt&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;shared_buffers&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;7969MB&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;maintenance_work_mem&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;1993MB&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;work_mem&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;79MB&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;max_parallel_workers&amp;#34;&lt;/span&gt;:8,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;max_parallel_maintenance_workers&amp;#34;&lt;/span&gt;:2,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;max_parallel_workers_per_gather&amp;#34;&lt;/span&gt;:0,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;hash_mem_multiplier&amp;#34;&lt;/span&gt;:8.0,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;huge_pages&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;try&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;temp_file_limit&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;7GB&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;vacuum_cost_delay&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;20ms&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;vacuum_cost_limit&amp;#34;&lt;/span&gt;:2000,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;bgwriter_delay&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;10ms&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;bgwriter_lru_maxpages&amp;#34;&lt;/span&gt;:800,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;bgwriter_lru_multiplier&amp;#34;&lt;/span&gt;:5.0,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;min_wal_size&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;7GB&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;max_wal_size&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;28GB&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;max_slot_wal_keep_size&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;42GB&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;wal_buffers&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;16MB&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;wal_writer_delay&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;20ms&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;wal_writer_flush_after&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;1MB&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;commit_delay&amp;#34;&lt;/span&gt;:20,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;commit_siblings&amp;#34;&lt;/span&gt;:10,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;checkpoint_timeout&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;15min&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;checkpoint_completion_target&amp;#34;&lt;/span&gt;:0.8,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;archive_mode&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;on&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;archive_timeout&amp;#34;&lt;/span&gt;:300,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;archive_command&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;pgbackrest --stanza=pg-meta archive-push %p&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;max_standby_archive_delay&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;10min&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;max_standby_streaming_delay&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;3min&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;wal_receiver_status_interval&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;1s&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;hot_standby_feedback&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;on&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;wal_receiver_timeout&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;60s&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;max_logical_replication_workers&amp;#34;&lt;/span&gt;:8,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;max_sync_workers_per_subscription&amp;#34;&lt;/span&gt;:6,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;random_page_cost&amp;#34;&lt;/span&gt;:1.1,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;effective_io_concurrency&amp;#34;&lt;/span&gt;:1000,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;effective_cache_size&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;23907MB&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;default_statistics_target&amp;#34;&lt;/span&gt;:200,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;log_destination&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;csvlog&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;logging_collector&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;on&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;log_directory&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;/pg/log/postgres&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;log_filename&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;postgresql-%Y-%m-%d.log&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;log_checkpoints&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;on&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;log_lock_waits&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;on&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;log_replication_commands&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;on&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;log_statement&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;ddl&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;log_min_duration_statement&amp;#34;&lt;/span&gt;:100,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;track_io_timing&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;on&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;track_functions&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;all&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;track_activity_query_size&amp;#34;&lt;/span&gt;:8192,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;log_autovacuum_min_duration&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;1s&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;autovacuum_max_workers&amp;#34;&lt;/span&gt;:2,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;autovacuum_naptime&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;1min&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;autovacuum_vacuum_cost_delay&amp;#34;&lt;/span&gt;:-1,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;autovacuum_vacuum_cost_limit&amp;#34;&lt;/span&gt;:-1,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;autovacuum_freeze_max_age&amp;#34;&lt;/span&gt;:1000000000,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;deadlock_timeout&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;50ms&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;idle_in_transaction_session_timeout&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;10min&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;shared_preload_libraries&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;timescaledb, pg_stat_statements, auto_explain&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;auto_explain.log_min_duration&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;1s&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;auto_explain.log_analyze&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;on&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;auto_explain.log_verbose&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;on&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;auto_explain.log_timing&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;on&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;auto_explain.log_nested_statements&amp;#34;&lt;/span&gt;:true,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;pg_stat_statements.max&amp;#34;&lt;/span&gt;:5000,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;pg_stat_statements.track&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;all&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;pg_stat_statements.track_utility&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;off&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;pg_stat_statements.track_planning&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;off&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;timescaledb.telemetry_level&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;off&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;timescaledb.max_background_workers&amp;#34;&lt;/span&gt;:8,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;citus.node_conninfo&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;sslm
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;ode=prefer&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;}}}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/pg/pg-meta/failsafe
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;pg-meta-2&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;http://10.10.10.11:8008/patroni&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;pg-meta-1&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;http://10.10.10.10:8008/patroni&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/pg/pg-meta/initialize
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;7418384210787662172&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/pg/pg-meta/leader
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;pg-meta-1
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/pg/pg-meta/members/pg-meta-1
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;conn_url&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;postgres://10.10.10.10:5432/postgres&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;api_url&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;http://10.10.10.10:8008/patroni&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;state&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;running&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;role&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;primary&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;version&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;4.0.1&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;tags&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;clonefrom&amp;#34;&lt;/span&gt;:true,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;version&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;16&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;spec&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;8C.32G.125G&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;conf&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;tiny.yml&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;}&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;xlog_location&amp;#34;&lt;/span&gt;:184549376,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;timeline&amp;#34;&lt;/span&gt;:1&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/pg/pg-meta/members/pg-meta-2
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;conn_url&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;postgres://10.10.10.11:5432/postgres&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;api_url&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;http://10.10.10.11:8008/patroni&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;state&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;running&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;role&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;replica&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;version&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;4.0.1&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;tags&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;clonefrom&amp;#34;&lt;/span&gt;:true,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;version&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;16&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;spec&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;8C.32G.125G&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;conf&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;tiny.yml&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;}&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;xlog_location&amp;#34;&lt;/span&gt;:184549376,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;replication_state&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;streaming&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;timeline&amp;#34;&lt;/span&gt;:1&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/pg/pg-meta/status
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;optime&amp;#34;&lt;/span&gt;:184549376,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;slots&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;pg_meta_2&amp;#34;&lt;/span&gt;:184549376,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;pg_meta_1&amp;#34;&lt;/span&gt;:184549376&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;}&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;retain_slots&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;pg_meta_1&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;pg_meta_2&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;how-to-use-existing-external-etcd-cluster&#34;&gt;How to use existing external etcd cluster?&lt;/h2&gt;
&lt;p&gt;The hard-coded group, &lt;code&gt;etcd&lt;/code&gt;, will be used as DCS servers for PGSQL. You can initialize them with &lt;code&gt;etcd.yml&lt;/code&gt; or assume it is an existing external etcd cluster.&lt;/p&gt;
&lt;p&gt;To use an existing external etcd cluster, define them as usual and make sure your current etcd cluster certificate is signed by the same CA as your self-signed CA for PGSQL.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;how-to-add-a-new-member-to-the-existing-etcd-cluster&#34;&gt;How to add a new member to the existing etcd cluster?&lt;/h2&gt;
&lt;p&gt;Check &lt;a href=&#34;/docs/etcd/#add-member&#34;&gt;Add a member to etcd cluster&lt;/a&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;etcdctl member add &amp;lt;etcd-?&amp;gt; --learner&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#204a87&#34;&gt;true&lt;/span&gt; --peer-urls&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;https://&amp;lt;new_ins_ip&amp;gt;:2380 &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# on admin node&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./etcd.yml -l &amp;lt;new_ins_ip&amp;gt; -e &lt;span style=&#34;color:#000&#34;&gt;etcd_init&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;existing                                 &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# init new etcd member&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;etcdctl member promote &amp;lt;new_ins_server_id&amp;gt;                                       &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# on admin node&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;how-to-remove-a-member-from-an-existing-etcd-cluster&#34;&gt;How to remove a member from an existing etcd cluster?&lt;/h2&gt;
&lt;p&gt;Check &lt;a href=&#34;/docs/etcd/#remove-member&#34;&gt;Remove member from etcd cluster&lt;/a&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;etcdctl member remove &amp;lt;etcd_server_id&amp;gt;   &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# kick member out of the cluster (on admin node)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./etcd.yml -l &amp;lt;ins_ip&amp;gt; -t etcd_purge     &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# purge etcd instance&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
      </description>
    </item>
    
    <item>
      <title>Docs: FAQ</title>
      <link>/docs/ferret/faq/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/docs/ferret/faq/</guid>
      <description>
        
        
        &lt;hr&gt;
&lt;h2 id=&#34;install-mongosh&#34;&gt;Install mongosh&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cat &amp;gt; /etc/yum.repos.d/mongo.repo &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;lt;&amp;lt;EOF
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;[mongodb-org-7.0]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;name=MongoDB Repository
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;baseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/7.0/x86_64/
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;gpgcheck=0
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;enabled=1
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;EOF&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;yum install -y mongodb-mongosh
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# or just install via rpm &amp;amp; links&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;rpm -ivh https://mirrors.tuna.tsinghua.edu.cn/mongodb/yum/el7/RPMS/mongodb-mongosh-1.9.1.x86_64.rpm
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
      </description>
    </item>
    
    <item>
      <title>Docs: FAQ</title>
      <link>/docs/infra/faq/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/docs/infra/faq/</guid>
      <description>
        
        
        &lt;hr&gt;
&lt;h2 id=&#34;which-components-are-included-in-infra&#34;&gt;Which components are included in INFRA&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Ansible for automation, deployment, and administration;&lt;/li&gt;
&lt;li&gt;Nginx for exposing any WebUI service and serving the yum/apt repo;&lt;/li&gt;
&lt;li&gt;Self-Signed CA for SSL/TLS certificates;&lt;/li&gt;
&lt;li&gt;Prometheus for monitoring metrics&lt;/li&gt;
&lt;li&gt;Grafana for monitoring/visualization&lt;/li&gt;
&lt;li&gt;Loki for logging collection&lt;/li&gt;
&lt;li&gt;AlertManager for alerts aggregation&lt;/li&gt;
&lt;li&gt;Chronyd for NTP time sync on the admin node.&lt;/li&gt;
&lt;li&gt;DNSMasq for DNS registration and resolution.&lt;/li&gt;
&lt;li&gt;ETCD as DCS for PGSQL HA; (dedicated module)&lt;/li&gt;
&lt;li&gt;PostgreSQL on meta nodes as CMDB; (optional)&lt;/li&gt;
&lt;li&gt;Docker for stateless applications &amp;amp; tools (optional)&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;how-to-restore-prometheus-targets&#34;&gt;How to restore Prometheus targets&lt;/h2&gt;
&lt;p&gt;If you accidentally deleted the Prometheus targets dir, you can register monitoring targets to Prometheus again with the:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./infra.yml -t register_prometheus  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# register all infra targets to prometheus on infra nodes&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./node.yml  -t register_prometheus  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# register all node  targets to prometheus on infra nodes&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./etcd.yml  -t register_prometheus  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# register all etcd targets to prometheus on infra nodes&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./minio.yml -t register_prometheus  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# register all minio targets to prometheus on infra nodes&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql.yml -t register_prometheus  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# register all pgsql targets to prometheus on infra nodes&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;how-to-restore-grafana-datasource&#34;&gt;How to restore Grafana datasource&lt;/h2&gt;
&lt;p&gt;PGSQL Databases in &lt;a href=&#34;/docs/reference/param/#pg_databases&#34;&gt;&lt;code&gt;pg_databases&lt;/code&gt;&lt;/a&gt; are registered as Grafana datasource by default.&lt;/p&gt;
&lt;p&gt;If you accidentally deleted the registered postgres datasource in Grafana, you can register them again with&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql.yml -t register_grafana  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# register all pgsql database (in pg_databases) as grafana datasource&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;how-to-restore-the-haproxy-admin-page-proxy&#34;&gt;How to restore the HAProxy admin page proxy&lt;/h2&gt;
&lt;p&gt;The haproxy admin page is proxied by Nginx under the default server.&lt;/p&gt;
&lt;p&gt;If you accidentally deleted the registered haproxy proxy settings in &lt;code&gt;/etc/nginx/conf.d/haproxy&lt;/code&gt;, you can restore them again with&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./node.yml -t register_nginx     &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# register all haproxy admin page proxy settings to nginx on infra nodes&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;how-to-restore-the-dns-registration&#34;&gt;How to restore the DNS registration&lt;/h2&gt;
&lt;p&gt;PGSQL cluster/instance domain names are registered to &lt;code&gt;/etc/hosts.d/&amp;lt;name&amp;gt;&lt;/code&gt; on infra nodes by default.&lt;/p&gt;
&lt;p&gt;You can restore them again with the following:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql.yml -t pg_dns   &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# register pg DNS names to dnsmasq on infra nodes&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;how-to-expose-new-nginx-upstream-service&#34;&gt;How to expose new Nginx upstream service&lt;/h2&gt;
&lt;p&gt;If you wish to expose a new WebUI service via the Nginx portal, you can add the service definition to the &lt;a href=&#34;/docs/reference/param/#infra_portal&#34;&gt;&lt;code&gt;infra_portal&lt;/code&gt;&lt;/a&gt; parameter.&lt;/p&gt;
&lt;p&gt;And re-run &lt;code&gt;./infra.yml -t nginx_config,nginx_launch&lt;/code&gt; to update &amp;amp; apply the Nginx configuration.&lt;/p&gt;
&lt;p&gt;If you wish to access with HTTPS, you must remove &lt;code&gt;files/pki/csr/pigsty.csr&lt;/code&gt;, &lt;code&gt;files/pki/nginx/pigsty.{key,crt}&lt;/code&gt; to force re-generating the Nginx SSL/TLS certificate to include the new upstream&amp;rsquo;s domain name.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;how-to-expose-web-service-through-nginx&#34;&gt;How to expose web service through Nginx?&lt;/h2&gt;
&lt;p&gt;While you can directly access services via IP:Port, we still recommend consolidating access points by using domain names and uniformly accessing various web-based services through the Nginx portal.
This approach helps centralize access, reduce the number of exposed ports, and facilitates access control and auditing.&lt;/p&gt;
&lt;p&gt;If you wish to expose a new WebUI service through the Nginx portal, you can add the service definition to the  &lt;a href=&#34;/docs/reference/param/#infra_portal&#34;&gt;&lt;code&gt;infra_portal&lt;/code&gt;&lt;/a&gt; parameter.
For example, here is the config used by the public demo site, which exposes several additional web services:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;infra_portal&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;home         &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;domain&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;home.pigsty.cc }&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;grafana      &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;domain: demo.pigsty.cc ,endpoint&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;${admin_ip}:3000&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;,websocket&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;true&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;prometheus   &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;domain: p.pigsty.cc ,endpoint&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;${admin_ip}:9090&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;alertmanager &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;domain: a.pigsty.cc ,endpoint&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;${admin_ip}:9093&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;blackbox     &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;endpoint&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;${admin_ip}:9115&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;loki         &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;endpoint&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;${admin_ip}:3100&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 新增的 Web 门户&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;minio        &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;domain: sss.pigsty  ,endpoint&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;${admin_ip}:9001&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;,scheme: https ,websocket&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;true&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;postgrest    &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;domain: api.pigsty.cc  ,endpoint&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;127.0.0.1:8884&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;   &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;pgadmin      &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;domain: adm.pigsty.cc  ,endpoint&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;127.0.0.1:8885&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;   &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;pgweb        &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;domain: cli.pigsty.cc  ,endpoint&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;127.0.0.1:8886&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;   &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;bytebase     &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;domain: ddl.pigsty.cc  ,endpoint&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;127.0.0.1:8887&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;   &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;gitea        &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;domain: git.pigsty.cc  ,endpoint&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;127.0.0.1:8889&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;   &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;wiki         &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;domain: wiki.pigsty.cc ,endpoint&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;127.0.0.1:9002&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;   &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;noco         &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;domain: noco.pigsty.cc ,endpoint&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;127.0.0.1:9003&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;   &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;supa         &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;domain: supa.pigsty.cc ,endpoint&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;127.0.0.1:8000&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;, websocket&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;true&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;After completing the Nginx upstream service definition, use the following configuration and command to register the new service with Nginx.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./infra.yml -t nginx_config           &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# regenerate Nginx config&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./infra.yml -t nginx_launch           &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# update and apply nginx config&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# you can reload nginx with ansible&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ansible infra -b -a &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;nginx -s reload&amp;#39;&lt;/span&gt;  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# reload nginx with ansible&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;If you wish to access via HTTPS, you must delete &lt;code&gt;files/pki/csr/pigsty.csr&lt;/code&gt; and &lt;code&gt;files/pki/nginx/pigsty.{key,crt}&lt;/code&gt; to force the regeneration of the Nginx SSL/TLS certificate to include the new upstream domain names. If you prefer to use an SSL certificate issued by an authoritative organization instead of a certificate issued by Pigsty&amp;rsquo;s self-signed CA, you can place it in the &lt;code&gt;/etc/nginx/conf.d/cert/&lt;/code&gt; directory and modify the corresponding configuration: &lt;code&gt;/etc/nginx/conf.d/&amp;lt;name&amp;gt;.conf&lt;/code&gt;.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;how-to-manually-add-upstream-repo-files&#34;&gt;How to manually add upstream repo files&lt;/h2&gt;
&lt;p&gt;Pigsty has a built-in wrap script &lt;code&gt;bin/repo-add&lt;/code&gt;, which will invoke ansible playbook &lt;code&gt;node.yml&lt;/code&gt; to adding repo files to corresponding nodes.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;bin/repo-add &amp;lt;selector&amp;gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;modules&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;bin/repo-add 10.10.10.10           &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# add node repos for node 10.10.10.10&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;bin/repo-add infra   node,infra    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# add node and infra repos for group infra&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;bin/repo-add infra   node,local    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# add node repos and local pigsty repo&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;bin/repo-add pg-test node,pgsql    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# add node &amp;amp; pgsql repos for group pg-test&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
      </description>
    </item>
    
    <item>
      <title>Docs: FAQ</title>
      <link>/docs/minio/faq/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/docs/minio/faq/</guid>
      <description>
        
        
        &lt;hr&gt;
&lt;h2 id=&#34;fail-to-launch-multi-node--multi-driver-minio-cluster&#34;&gt;Fail to launch multi-node / multi-driver MinIO cluster.&lt;/h2&gt;
&lt;p&gt;In &lt;a href=&#34;/docs/minio/#single-node-multi-drive&#34;&gt;Multi-Driver&lt;/a&gt; or &lt;a href=&#34;/docs/minio/#multi-node-multi-drive&#34;&gt;Multi-Node&lt;/a&gt; mode, MinIO will refuse to start if the data dir is not a valid mount point.&lt;/p&gt;
&lt;p&gt;Use mounted disks for MinIO data dir rather than some regular directory. You can use the regular directory only in the &lt;a href=&#34;/docs/minio/#single-node-single-drive&#34;&gt;single node, single drive&lt;/a&gt; mode.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;how-to-deploy-a-multi-node-multi-drive-minio-cluster&#34;&gt;How to deploy a multi-node multi-drive MinIO cluster?&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Check &lt;a href=&#34;/docs/minio/#multi-node-multi-drive&#34;&gt;Create Multi-Node Multi-Driver MinIO Cluster&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2 id=&#34;how-to-add-a-member-to-the-existing-minio-cluster&#34;&gt;How to add a member to the existing MinIO cluster?&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;You&amp;rsquo;d better plan the MinIO cluster before deployment&amp;hellip; Since this requires a global restart&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Check this: &lt;a href=&#34;https://min.io/docs/minio/linux/operations/install-deploy-manage/expand-minio-deployment.html&#34;&gt;Expand MinIO Deployment&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;how-to-use-a-ha-minio-deployment-for-pgsql&#34;&gt;How to use a HA MinIO deployment for PGSQL?&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Access the HA MinIO cluster with an optional load balancer and different ports.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Here is an example: &lt;a href=&#34;/docs/minio/#access-service&#34;&gt;Access MinIO Service&lt;/a&gt;&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>Docs: FAQ</title>
      <link>/docs/node/faq/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/docs/node/faq/</guid>
      <description>
        
        
        &lt;hr&gt;
&lt;h2 id=&#34;how-to-configure-ntp-service&#34;&gt;How to configure NTP service?&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;If NTP is not configured, use a public NTP service or sync time with the admin node.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;If your nodes already have NTP configured, you can leave it there by setting &lt;code&gt;node_ntp_enabled&lt;/code&gt; to &lt;code&gt;false&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Otherwise, if you have Internet access, you can use public NTP services such as &lt;code&gt;pool.ntp.org&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;If you don&amp;rsquo;t have Internet access, at least you can sync time with the admin node with the following:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;node_ntp_servers:                 &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# NTP servers in /etc/chrony.conf&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - pool cn.pool.ntp.org iburst
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - pool &lt;span style=&#34;color:#4e9a06&#34;&gt;${&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;admin_ip&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;}&lt;/span&gt; iburst       &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# assume non-admin nodes do not have internet access&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;how-to-force-sync-time-on-nodes&#34;&gt;How to force sync time on nodes?&lt;/h2&gt;
&lt;p&gt;Use &lt;code&gt;chronyc&lt;/code&gt; to sync time. You have to configure the NTP service first.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ansible all -b -a &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;chronyc -a makestep&amp;#39;&lt;/span&gt;     &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# sync time&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;You can replace &lt;code&gt;all&lt;/code&gt; with any group or host IP address to limit execution scope.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;remote-nodes-are-not-accessible-via-ssh-commands&#34;&gt;Remote nodes are not accessible via SSH commands.&lt;/h2&gt;
&lt;p&gt;Consider using &lt;a href=&#34;https://docs.ansible.com/ansible/latest/inventory_guide/connection_details.html&#34;&gt;&lt;strong&gt;Ansible connection parameters&lt;/strong&gt;&lt;/a&gt; if the target machine is hidden behind an SSH springboard machine,
or if some customizations have been made that cannot be accessed directly using &lt;code&gt;ssh ip&lt;/code&gt;.
Additional SSH ports can be specified with &lt;code&gt;ansible_port&lt;/code&gt; or &lt;code&gt;ansible_host&lt;/code&gt; for SSH Alias.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;pg-test:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  vars: &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;{&lt;/span&gt; pg_cluster: pg-test &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  hosts:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    10.10.10.11: &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;{&lt;/span&gt;pg_seq: 1, pg_role: primary, ansible_host: node-1 &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    10.10.10.12: &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;{&lt;/span&gt;pg_seq: 2, pg_role: replica, ansible_port: 22223, ansible_user: admin &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    10.10.10.13: &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;{&lt;/span&gt;pg_seq: 3, pg_role: offline, ansible_port: &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;22224&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;password-required-for-remote-node-ssh-and-sudo&#34;&gt;Password required for remote node SSH and SUDO&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;When performing deployments and changes&lt;/strong&gt;, the admin user used &lt;strong&gt;must&lt;/strong&gt; have &lt;code&gt;ssh&lt;/code&gt; and &lt;code&gt;sudo&lt;/code&gt; privileges for all nodes. Password-free is not required.&lt;/p&gt;
&lt;p&gt;You can pass in ssh and sudo passwords via the &lt;code&gt;-k|-K&lt;/code&gt; parameter when executing the playbook or even use another user to run the playbook via &lt;code&gt;-e&lt;/code&gt;&lt;a href=&#34;/docs/reference/param/#connect&#34;&gt;&lt;code&gt;ansible_host&lt;/code&gt;&lt;/a&gt;&lt;code&gt;=&amp;lt;another_user&amp;gt;&lt;/code&gt;.
However, Pigsty strongly recommends configuring SSH &lt;strong&gt;passwordless login&lt;/strong&gt; with passwordless &lt;code&gt;sudo&lt;/code&gt; for the admin user.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;create-an-admin-user-with-the-existing-admin-user&#34;&gt;Create an admin user with the existing admin user.&lt;/h2&gt;
&lt;p&gt;This will create an admin user specified by &lt;a href=&#34;/docs/reference/param/#node_admin_username&#34;&gt;&lt;code&gt;node_admin_username&lt;/code&gt;&lt;/a&gt; with the existing one on that node.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./node.yml -k -K -e ansible_user=&amp;lt;another_admin&amp;gt; -t node_admin`
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;exposing-node-services-with-haproxy&#34;&gt;Exposing node services with HAProxy&lt;/h2&gt;
&lt;p&gt;You can expose service with &lt;a href=&#34;/docs/reference/param/#haproxy_services&#34;&gt;&lt;code&gt;haproxy_services&lt;/code&gt;&lt;/a&gt; in &lt;code&gt;node.yml&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;And here&amp;rsquo;s an example of exposing MinIO service with it: &lt;a href=&#34;/docs/minio/#expose-service&#34;&gt;Expose MinIO Service&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;why-my-nodes-etcyumreposd-are-nuked&#34;&gt;Why my nodes /etc/yum.repos.d/* are nuked?&lt;/h2&gt;
&lt;p&gt;Pigsty will try to include all dependencies in the local yum repo on infra nodes. This repo file will be added according to &lt;a href=&#34;/docs/reference/param/#node_repo_modules&#34;&gt;&lt;code&gt;node_repo_modules&lt;/code&gt;&lt;/a&gt;.
And existing repo files will be removed by default according to the default value of &lt;a href=&#34;/docs/reference/param/#node_repo_remove&#34;&gt;&lt;code&gt;node_repo_remove&lt;/code&gt;&lt;/a&gt;. This will prevent the node from using the Internet repo or some stupid issues.&lt;/p&gt;
&lt;p&gt;If you want to keep existing repo files during node init, just set &lt;a href=&#34;/docs/reference/param/#node_repo_remove&#34;&gt;&lt;code&gt;node_repo_remove&lt;/code&gt;&lt;/a&gt; to &lt;code&gt;false&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;If you want to keep existing repo files during infra node local repo bootstrap, just set &lt;a href=&#34;/docs/reference/param/#repo_remove&#34;&gt;&lt;code&gt;repo_remove&lt;/code&gt;&lt;/a&gt; to &lt;code&gt;false&lt;/code&gt;.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;why-my-shell-prompt-change-and-how-to-restore-it&#34;&gt;Why my shell prompt change and how to restore it?&lt;/h2&gt;
&lt;p&gt;The pigsty prompt is defined with the environment variable &lt;code&gt;PS1&lt;/code&gt; in &lt;code&gt;/etc/profile.d/node.sh&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;To restore your existing prompt, just remove that file and login again.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;tencent-opencloudos-compatibility-issue&#34;&gt;Tencent OpenCloudOS Compatibility Issue&lt;/h2&gt;
&lt;p&gt;OpenCloudOS does not have softdog module, overwrite &lt;code&gt;node_kernel_modules&lt;/code&gt; on global vars:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;node_kernel_modules&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;br_netfilter, ip_vs, ip_vs_rr, ip_vs_wrr, ip_vs_sh ]&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
      </description>
    </item>
    
    <item>
      <title>Docs: FAQ</title>
      <link>/docs/redis/faq/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/docs/redis/faq/</guid>
      <description>
        
        
        &lt;hr&gt;
&lt;h2 id=&#34;abort-due-to-existing-redis-instance&#34;&gt;ABORT due to existing redis instance&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;use &lt;code&gt;redis_clean = true&lt;/code&gt; and &lt;code&gt;redis_safeguard = false&lt;/code&gt; to force clean redis data&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This happens when you run &lt;code&gt;redis.yml&lt;/code&gt; to init a redis instance that is already running, and &lt;a href=&#34;/docs/reference/param/#redis_clean&#34;&gt;&lt;code&gt;redis_clean&lt;/code&gt;&lt;/a&gt; is set to &lt;code&gt;false&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;If &lt;code&gt;redis_clean&lt;/code&gt; is set to &lt;code&gt;true&lt;/code&gt; (and the &lt;code&gt;redis_safeguard&lt;/code&gt; is set to &lt;code&gt;false&lt;/code&gt;, too), the &lt;code&gt;redis.yml&lt;/code&gt; playbook will remove the existing redis instance and re-init it as a new one, which makes the &lt;code&gt;redis.yml&lt;/code&gt; playbook fully idempotent.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;abort-due-to-redis_safeguard-enabled&#34;&gt;ABORT due to redis_safeguard enabled&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;This happens when removing a redis instance with &lt;a href=&#34;/docs/reference/param/#redis_safeguard&#34;&gt;&lt;code&gt;redis_safeguard&lt;/code&gt;&lt;/a&gt; set to &lt;code&gt;true&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;You can disable &lt;a href=&#34;/docs/reference/param/#redis_safeguard&#34;&gt;&lt;code&gt;redis_safeguard&lt;/code&gt;&lt;/a&gt; to remove the Redis instance. This is redis_safeguard is what it is for.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;how-to-add-a-single-new-redis-instance-on-this-node&#34;&gt;How to add a single new redis instance on this node?&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Use &lt;code&gt;bin/redis-add &amp;lt;ip&amp;gt; &amp;lt;port&amp;gt;&lt;/code&gt; to deploy a new redis instance on node.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2 id=&#34;how-to-remove-a-single-redis-instance-from-the-node&#34;&gt;How to remove a single redis instance from the node?&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;bin/redis-rm &amp;lt;ip&amp;gt; &amp;lt;port&amp;gt;&lt;/code&gt; to remove a single redis instance from node&lt;/p&gt;
&lt;/blockquote&gt;

      </description>
    </item>
    
    <item>
      <title>Docs: FAQ</title>
      <link>/docs/setup/faq/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/docs/setup/faq/</guid>
      <description>
        
        
        &lt;blockquote&gt;
&lt;p&gt;If you have any unlisted questions or suggestions, please create an &lt;a href=&#34;https://github.com/Vonng/pigsty/issues/new&#34;&gt;Issue&lt;/a&gt; or ask the &lt;a href=&#34;/docs/overview#about&#34;&gt;community&lt;/a&gt; for help.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2 id=&#34;how-to-get-the-pigsty-source-package&#34;&gt;How to Get the Pigsty Source Package?&lt;/h2&gt;
&lt;p&gt;Use the following command to install Pigsty with one click: &lt;code&gt;curl -fsSL https://repo.pigsty.io/get | bash&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;This command will automatically download the latest stable version &lt;code&gt;pigsty.tgz&lt;/code&gt; and extract it to the &lt;code&gt;~/pigsty&lt;/code&gt; directory. You can also manually download a specific version of the Pigsty source code from the following locations.&lt;/p&gt;
&lt;p&gt;If you need to install it in an environment without internet access, you can download it in advance in a networked environment and transfer it to the production server via scp/sftp or CDROM/USB.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;how-to-speed-up-rpm-downloads-from-upstream-repositories&#34;&gt;How to Speed Up RPM Downloads from Upstream Repositories?&lt;/h2&gt;
&lt;p&gt;Consider using a local repository mirror, which can be configured with the &lt;a href=&#34;/docs/reference/param/#repo_upstream&#34;&gt;&lt;code&gt;repo_upstream&lt;/code&gt;&lt;/a&gt; parameter. You can choose &lt;a href=&#34;/docs/reference/param/#region&#34;&gt;&lt;code&gt;region&lt;/code&gt;&lt;/a&gt; to use different mirror sites.&lt;/p&gt;
&lt;p&gt;For example, you can set &lt;code&gt;region&lt;/code&gt; = &lt;code&gt;china&lt;/code&gt;, which will use the URL with the key &lt;code&gt;china&lt;/code&gt; in the &lt;code&gt;baseurl&lt;/code&gt; instead of &lt;code&gt;default&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;If some repositories are blocked by a firewall or the GFW, consider using &lt;a href=&#34;/docs/reference/param/#proxy_env&#34;&gt;&lt;code&gt;proxy_env&lt;/code&gt;&lt;/a&gt; to bypass it.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;how-to-resolve-node-package-conflict&#34;&gt;How to resolve node package conflict?&lt;/h2&gt;
&lt;p&gt;Beware that Pigsty&amp;rsquo;s pre-built &lt;a href=&#34;/docs/setup/offline/&#34;&gt;&lt;strong&gt;offline packages&lt;/strong&gt;&lt;/a&gt; are tailored for &lt;a href=&#34;/docs/reference/compatibility/#vagrant-boxes&#34;&gt;&lt;strong&gt;specific minor versions OS Distors&lt;/strong&gt;&lt;/a&gt;.
Therefore, if the &lt;code&gt;major.minor&lt;/code&gt; version of your OS distro does not precisely align, we advise against using the offline installation packages.
Instead, following the default installation procedure and download the package directly from upstream repo through the Internet, which will acquire the versions that exactly match your OS version.&lt;/p&gt;
&lt;p&gt;If online installation doesn&amp;rsquo;t work for you, you can first try modifying the upstream software sources used by Pigsty.
For example, in EL family operating systems, Pigsty&amp;rsquo;s default upstream sources use a major version placeholder &lt;code&gt;$releasever&lt;/code&gt;, which resolves to specific major versions like 7, 8, 9.
However, many operating system distributions offer a Vault, allowing you to use a package mirror for a specific version.
Therefore, you could replace the front part of the &lt;code&gt;repo_upstream&lt;/code&gt; parameter&amp;rsquo;s BaseURL with a specific Vault minor version repository, such as:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;https://dl.rockylinux.org/pub/rocky/$releasever&lt;/code&gt; (Original BaseURL prefix, without &lt;code&gt;vault&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;https://vault.centos.org/7.6.1810/&lt;/code&gt; (Using 7.6 instead of the default 7.9)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;https://dl.rockylinux.org/vault/rocky/8.6/&lt;/code&gt; (Using 8.6 instead of the default 8.9)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;https://dl.rockylinux.org/vault/rocky/9.2/&lt;/code&gt; (Using 9.2 instead of the default 9.3)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Make sure the vault URL path exists &amp;amp; valid before replacing the old values. Beware that some repo like &lt;code&gt;epel&lt;/code&gt; do not offer specific minor version subdirs.
Upstream repo that support this approach include: &lt;code&gt;base&lt;/code&gt;, &lt;code&gt;updates&lt;/code&gt;, &lt;code&gt;extras&lt;/code&gt;, &lt;code&gt;centos-sclo&lt;/code&gt;, &lt;code&gt;centos-sclo-rh&lt;/code&gt;, &lt;code&gt;baseos&lt;/code&gt;, &lt;code&gt;appstream&lt;/code&gt;, &lt;code&gt;extras&lt;/code&gt;, &lt;code&gt;crb&lt;/code&gt;, &lt;code&gt;powertools&lt;/code&gt;, &lt;code&gt;pgdg-common&lt;/code&gt;, &lt;code&gt;pgdg1*&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;repo_upstream&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: pigsty-local   ,description: &amp;#39;Pigsty Local&amp;#39;      ,module: local ,releases: [7,8,9] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;http://${admin_ip}/pigsty&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# used by intranet nodes&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: pigsty-infra   ,description: &amp;#39;Pigsty INFRA&amp;#39;      ,module: infra ,releases: [7,8,9] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;https://repo.pigsty.io/rpm/infra/$basearch&amp;#39; ,china&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://repo.pigsty.cc/rpm/infra/$basearch&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: pigsty-pgsql   ,description: &amp;#39;Pigsty PGSQL&amp;#39;      ,module: pgsql ,releases: [7,8,9] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;https://repo.pigsty.io/rpm/pgsql/el$releasever.$basearch&amp;#39; ,china&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://repo.pigsty.cc/rpm/pgsql/el$releasever.$basearch&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: nginx          ,description: &amp;#39;Nginx Repo&amp;#39;        ,module: infra ,releases: [7,8,9] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://nginx.org/packages/centos/$releasever/$basearch/&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: docker-ce      ,description: &amp;#39;Docker CE&amp;#39;         ,module: infra ,releases: [7,8,9] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;https://download.docker.com/linux/centos/$releasever/$basearch/stable&amp;#39;        ,china: &amp;#39;https://mirrors.aliyun.com/docker-ce/linux/centos/$releasever/$basearch/stable&amp;#39;  ,europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/docker-ce/linux/centos/$releasever/$basearch/stable&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: base           ,description: &amp;#39;EL 7 Base&amp;#39;         ,module: node  ,releases: [7    ] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;http://mirror.centos.org/centos/$releasever/os/$basearch/&amp;#39;                    ,china: &amp;#39;https://mirrors.tuna.tsinghua.edu.cn/centos/$releasever/os/$basearch/&amp;#39;           ,europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/centos/$releasever/os/$basearch/&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;           &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: updates        ,description: &amp;#39;EL 7 Updates&amp;#39;      ,module: node  ,releases: [7    ] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;http://mirror.centos.org/centos/$releasever/updates/$basearch/&amp;#39;               ,china: &amp;#39;https://mirrors.tuna.tsinghua.edu.cn/centos/$releasever/updates/$basearch/&amp;#39;      ,europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/centos/$releasever/updates/$basearch/&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;      &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: extras         ,description: &amp;#39;EL 7 Extras&amp;#39;       ,module: node  ,releases: [7    ] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;http://mirror.centos.org/centos/$releasever/extras/$basearch/&amp;#39;                ,china: &amp;#39;https://mirrors.tuna.tsinghua.edu.cn/centos/$releasever/extras/$basearch/&amp;#39;       ,europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/centos/$releasever/extras/$basearch/&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;       &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: epel           ,description: &amp;#39;EL 7 EPEL&amp;#39;         ,module: node  ,releases: [7    ] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;http://download.fedoraproject.org/pub/epel/$releasever/$basearch/&amp;#39;            ,china: &amp;#39;https://mirrors.tuna.tsinghua.edu.cn/epel/$releasever/$basearch/&amp;#39;                ,europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/epel/$releasever/$basearch/&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;                &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: centos-sclo    ,description: &amp;#39;EL 7 SCLo&amp;#39;         ,module: node  ,releases: [7    ] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;http://mirror.centos.org/centos/$releasever/sclo/$basearch/sclo/&amp;#39;             ,china: &amp;#39;https://mirrors.aliyun.com/centos/$releasever/sclo/$basearch/sclo/&amp;#39;              ,europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/centos/$releasever/sclo/$basearch/sclo/&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: centos-sclo-rh ,description: &amp;#39;EL 7 SCLo rh&amp;#39;      ,module: node  ,releases: [7    ] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;http://mirror.centos.org/centos/$releasever/sclo/$basearch/rh/&amp;#39;               ,china: &amp;#39;https://mirrors.aliyun.com/centos/$releasever/sclo/$basearch/rh/&amp;#39;                ,europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/centos/$releasever/sclo/$basearch/rh/&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;      &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: baseos         ,description: &amp;#39;EL 8+ BaseOS&amp;#39;      ,module: node  ,releases: [  8,9] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;https://dl.rockylinux.org/pub/rocky/$releasever/BaseOS/$basearch/os/&amp;#39;         ,china: &amp;#39;https://mirrors.aliyun.com/rockylinux/$releasever/BaseOS/$basearch/os/&amp;#39;          ,europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/rocky/$releasever/BaseOS/$basearch/os/&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;     &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: appstream      ,description: &amp;#39;EL 8+ AppStream&amp;#39;   ,module: node  ,releases: [  8,9] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;https://dl.rockylinux.org/pub/rocky/$releasever/AppStream/$basearch/os/&amp;#39;      ,china: &amp;#39;https://mirrors.aliyun.com/rockylinux/$releasever/AppStream/$basearch/os/&amp;#39;       ,europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/rocky/$releasever/AppStream/$basearch/os/&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: extras         ,description: &amp;#39;EL 8+ Extras&amp;#39;      ,module: node  ,releases: [  8,9] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;https://dl.rockylinux.org/pub/rocky/$releasever/extras/$basearch/os/&amp;#39;         ,china: &amp;#39;https://mirrors.aliyun.com/rockylinux/$releasever/extras/$basearch/os/&amp;#39;          ,europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/rocky/$releasever/extras/$basearch/os/&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;     &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: crb            ,description: &amp;#39;EL 9 CRB&amp;#39;          ,module: node  ,releases: [    9] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;https://dl.rockylinux.org/pub/rocky/$releasever/CRB/$basearch/os/&amp;#39;            ,china: &amp;#39;https://mirrors.aliyun.com/rockylinux/$releasever/CRB/$basearch/os/&amp;#39;             ,europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/rocky/$releasever/CRB/$basearch/os/&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;        &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: powertools     ,description: &amp;#39;EL 8 PowerTools&amp;#39;   ,module: node  ,releases: [  8  ] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;https://dl.rockylinux.org/pub/rocky/$releasever/PowerTools/$basearch/os/&amp;#39;     ,china: &amp;#39;https://mirrors.aliyun.com/rockylinux/$releasever/PowerTools/$basearch/os/&amp;#39;      ,europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/rocky/$releasever/PowerTools/$basearch/os/&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: epel           ,description: &amp;#39;EL 8+ EPEL&amp;#39;        ,module: node  ,releases: [  8,9] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;http://download.fedoraproject.org/pub/epel/$releasever/Everything/$basearch/&amp;#39; ,china: &amp;#39;https://mirrors.tuna.tsinghua.edu.cn/epel/$releasever/Everything/$basearch/&amp;#39;     ,europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/epel/$releasever/Everything/$basearch/&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;     &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: pgdg-common    ,description: &amp;#39;PostgreSQL Common&amp;#39; ,module: pgsql ,releases: [7,8,9] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;https://download.postgresql.org/pub/repos/yum/common/redhat/rhel-$releasever-$basearch&amp;#39; ,china: &amp;#39;https://mirrors.tuna.tsinghua.edu.cn/postgresql/repos/yum/common/redhat/rhel-$releasever-$basearch&amp;#39; , europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/postgresql/repos/yum/common/redhat/rhel-$releasever-$basearch&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: pgdg-extras    ,description: &amp;#39;PostgreSQL Extra&amp;#39;  ,module: pgsql ,releases: [7,8,9] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;https://download.postgresql.org/pub/repos/yum/common/pgdg-rhel$releasever-extras/redhat/rhel-$releasever-$basearch&amp;#39; ,china: &amp;#39;https://mirrors.tuna.tsinghua.edu.cn/postgresql/repos/yum/common/pgdg-rhel$releasever-extras/redhat/rhel-$releasever-$basearch&amp;#39; , europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/postgresql/repos/yum/common/pgdg-rhel$releasever-extras/redhat/rhel-$releasever-$basearch&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: pgdg-el8fix    ,description: &amp;#39;PostgreSQL EL8FIX&amp;#39; ,module: pgsql ,releases: [  8  ] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;https://download.postgresql.org/pub/repos/yum/common/pgdg-centos8-sysupdates/redhat/rhel-8-x86_64/&amp;#39; ,china: &amp;#39;https://mirrors.tuna.tsinghua.edu.cn/postgresql/repos/yum/common/pgdg-centos8-sysupdates/redhat/rhel-8-x86_64/&amp;#39; , europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/postgresql/repos/yum/common/pgdg-centos8-sysupdates/redhat/rhel-8-x86_64/&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: pgdg-el9fix    ,description: &amp;#39;PostgreSQL EL9FIX&amp;#39; ,module: pgsql ,releases: [    9] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;https://download.postgresql.org/pub/repos/yum/common/pgdg-rocky9-sysupdates/redhat/rhel-9-x86_64/&amp;#39;  ,china: &amp;#39;https://mirrors.tuna.tsinghua.edu.cn/postgresql/repos/yum/common/pgdg-rocky9-sysupdates/redhat/rhel-9-x86_64/&amp;#39; , europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/postgresql/repos/yum/common/pgdg-rocky9-sysupdates/redhat/rhel-9-x86_64/&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: pgdg15         ,description: &amp;#39;PostgreSQL 15&amp;#39;     ,module: pgsql ,releases: [7    ] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;https://download.postgresql.org/pub/repos/yum/15/redhat/rhel-$releasever-$basearch&amp;#39; ,china: &amp;#39;https://mirrors.tuna.tsinghua.edu.cn/postgresql/repos/yum/15/redhat/rhel-$releasever-$basearch&amp;#39; ,europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/postgresql/repos/yum/15/redhat/rhel-$releasever-$basearch&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: pgdg16         ,description: &amp;#39;PostgreSQL 16&amp;#39;     ,module: pgsql ,releases: [  8,9] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;https://download.postgresql.org/pub/repos/yum/16/redhat/rhel-$releasever-$basearch&amp;#39; ,china: &amp;#39;https://mirrors.tuna.tsinghua.edu.cn/postgresql/repos/yum/16/redhat/rhel-$releasever-$basearch&amp;#39; ,europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/postgresql/repos/yum/16/redhat/rhel-$releasever-$basearch&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: timescaledb    ,description: &amp;#39;TimescaleDB&amp;#39;       ,module: pgsql ,releases: [7,8,9] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://packagecloud.io/timescale/timescaledb/el/$releasever/$basearch&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;After explicitly defining and overriding the &lt;code&gt;repo_upstream&lt;/code&gt; in the Pigsty configuration file, (you may clear the &lt;code&gt;/www/pigsty/repo_complete&lt;/code&gt; flag) try the installation again.
If the upstream software source and the mirror source software do not solve the problem, you might consider replacing them with the operating system&amp;rsquo;s built-in software sources and attempt a direct installation from upstream once more.&lt;/p&gt;
&lt;p&gt;Finally, if the above methods do not resolve the issue, consider removing conflicting packages from &lt;code&gt;node_packages&lt;/code&gt;, &lt;code&gt;infra_packages&lt;/code&gt;, &lt;code&gt;pg_packages&lt;/code&gt;, &lt;code&gt;pg_extensions&lt;/code&gt;, or remove or upgrade the conflicting packages on the existing system.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;what-does-bootstrap-do&#34;&gt;What does &lt;code&gt;bootstrap&lt;/code&gt; do?&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Check the environment, ask for downloading offline packages, and make sure the essential tool &lt;code&gt;ansible&lt;/code&gt; is installed.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;It will make sure the essential tool &lt;code&gt;ansible&lt;/code&gt; is installed by various means.&lt;/p&gt;
&lt;p&gt;When you download the Pigsty source code, you can enter the directory and execute the &lt;a href=&#34;/docs/setup/install/#bootstrap&#34;&gt;&lt;code&gt;bootstrap&lt;/code&gt;&lt;/a&gt; script.
It will check if your node environment is ready, and if it does not find offline packages, it will ask if you want to download them from the internet if applicable.&lt;/p&gt;
&lt;p&gt;You can choose &lt;code&gt;y&lt;/code&gt; to use offline packages, which will make the installation procedure faster.
You can also choose &lt;code&gt;n&lt;/code&gt; to skip and download directly from the internet during the installation process,
which will download the latest software versions and reduce the chance of RPM conflicts.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;what-does-configure-do&#34;&gt;What does &lt;code&gt;configure&lt;/code&gt; do?&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Detect the environment, generate the configuration, enable the offline package (optional), and install the essential tool Ansible.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;After downloading the Pigsty source package and unpacking it, you may have to execute &lt;code&gt;./configure&lt;/code&gt; to complete the environment &lt;a href=&#34;/docs/setup/install/#configure&#34;&gt;configuration&lt;/a&gt;. This is optional if you already know how to configure Pigsty properly.&lt;/p&gt;
&lt;p&gt;The &lt;strong&gt;configure&lt;/strong&gt; procedure will detect your node environment and generate a pigsty config file: &lt;code&gt;pigsty.yml&lt;/code&gt; for you.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;what-is-the-pigsty-config-file&#34;&gt;What is the Pigsty config file?&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;pigsty.yml&lt;/code&gt; under the pigsty home dir is the default config file.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Pigsty uses a single config file &lt;code&gt;pigsty.yml,&lt;/code&gt; to describe the entire environment, and you can define everything there. There are many config examples in &lt;a href=&#34;https://github.com/Vonng/pigsty/tree/master/files/pigsty&#34;&gt;&lt;code&gt;files/pigsty&lt;/code&gt;&lt;/a&gt; for your reference.&lt;/p&gt;
&lt;p&gt;You can pass the &lt;code&gt;-i &amp;lt;path&amp;gt;&lt;/code&gt; to playbooks to use other configuration files. For example, you want to install redis according to another config: &lt;code&gt;redis.yml&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./redis.yml -i files/pigsty/redis.yml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;how-to-use-the-cmdb-as-config-inventory&#34;&gt;How to use the CMDB as config inventory&lt;/h2&gt;
&lt;p&gt;The default config file path is specified in &lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/ansible.cfg&#34;&gt;&lt;code&gt;ansible.cfg&lt;/code&gt;&lt;/a&gt;: &lt;code&gt;inventory = pigsty.yml&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;You can switch to a dynamic CMDB inventory with &lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/bin/inventory_cmdb&#34;&gt;&lt;code&gt;bin/inventory_cmdb&lt;/code&gt;&lt;/a&gt;, and switch back to the local config file with &lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/bin/inventory_conf&#34;&gt;&lt;code&gt;bin/inventory_conf&lt;/code&gt;&lt;/a&gt;. You must also load the current config file inventory to CMDB with &lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/bin/inventory_load&#34;&gt;&lt;code&gt;bin/inventory_load&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;If CMDB is used, you must edit the inventory config from the database rather than the config file.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;what-is-the-ip-address-placeholder-in-the-config-file&#34;&gt;What is the IP address placeholder in the config file?&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Pigsty uses &lt;code&gt;10.10.10.10&lt;/code&gt; as a placeholder for the current node IP, which will be replaced with the primary IP of the current node during the configuration.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;When the &lt;code&gt;configure&lt;/code&gt; detects multiple NICs with multiple IPs on the current node, the config wizard will prompt for the &lt;strong&gt;primary&lt;/strong&gt; IP to be used, i.e., &lt;strong&gt;the IP used by the user to access the node from the internal network&lt;/strong&gt;. Note that please do not use the public IP.&lt;/p&gt;
&lt;p&gt;This IP will be used to replace &lt;code&gt;10.10.10.10&lt;/code&gt; in the config file template.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;which-parameters-need-your-attention&#34;&gt;Which parameters need your attention?&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Usually, in a singleton installation, there is no need to make any adjustments to the config files.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Pigsty provides 265 config parameters to customize the entire infra/node/etcd/minio/pgsql.  However, there are a few parameters that can be adjusted in advance if needed:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;When accessing web service components, the domain name is &lt;a href=&#34;/docs/reference/param/#infra_portal&#34;&gt;&lt;code&gt;infra_portal&lt;/code&gt;&lt;/a&gt; (some services can only be accessed using the domain name through the Nginx proxy).&lt;/li&gt;
&lt;li&gt;Pigsty assumes that a &lt;code&gt;/data&lt;/code&gt; dir exists to hold all data; you can adjust these paths if the data disk mount point differs from this.&lt;/li&gt;
&lt;li&gt;Don&amp;rsquo;t forget to change those &lt;strong&gt;passwords&lt;/strong&gt; in the config file for your production deployment.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;installation&#34;&gt;Installation&lt;/h2&gt;
&lt;hr&gt;
&lt;h2 id=&#34;what-was-executed-during-installation&#34;&gt;What was executed during installation?&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;When running &lt;code&gt;make install&lt;/code&gt;, the ansible-playbook &lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/install.yml&#34;&gt;&lt;code&gt;install.yml&lt;/code&gt;&lt;/a&gt; will be invoked to install everything on all nodes&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Which will:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Install &lt;code&gt;INFRA&lt;/code&gt; module on the current node.&lt;/li&gt;
&lt;li&gt;Install &lt;code&gt;NODE&lt;/code&gt; module on the current node.&lt;/li&gt;
&lt;li&gt;Install &lt;code&gt;ETCD&lt;/code&gt; module on the current node.&lt;/li&gt;
&lt;li&gt;The &lt;code&gt;MinIO&lt;/code&gt; module is optional, and will not be installed by default.&lt;/li&gt;
&lt;li&gt;Install &lt;code&gt;PGSQL&lt;/code&gt; module on the current node.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;how-to-resolve-rpm-conflict&#34;&gt;How to resolve RPM conflict?&lt;/h2&gt;
&lt;p&gt;There may have a slight chance that rpm conflict occurs during node/infra/pgsql packages installation.&lt;/p&gt;
&lt;p&gt;The simplest way to resolve this is to install without offline packages, which will download directly from the upstream repo.&lt;/p&gt;
&lt;p&gt;If there are only a few problematic RPM/DEB pakages, you can use a trick to fix the yum/apt repo quickly:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;rm -rf /www/pigsty/repo_complete    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# delete the repo_complete flag file to mark this repo incomplete&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;rm -rf SomeBrokenPackages           &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# delete problematic RPM/DEB packages&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./infra.yml -t repo_upstream        &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# write upstream repos. you can also use /etc/yum.repos.d/backup/*&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./infra.yml -t repo_pkg             &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# download rpms according to your current OS&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;how-to-create-local-vms-with-vagrant&#34;&gt;How to create local VMs with vagrant&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;The first time you use Vagrant to pull up a particular OS repo, it will download the corresponding BOX.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Pigsty sandbox uses &lt;code&gt;generic/rocky9&lt;/code&gt; image box by default, and Vagrant will download the &lt;code&gt;rocky/9&lt;/code&gt; box for the first time the VM is started.&lt;/p&gt;
&lt;p&gt;Using a proxy may increase the download speed. Box only needs to be downloaded once, and will be reused when recreating the sandbox.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;rpms-error-on-aliyun-centos-79&#34;&gt;RPMs error on Aliyun CentOS 7.9&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Aliyun CentOS 7.9 server has DNS caching service &lt;code&gt;nscd&lt;/code&gt; installed by default. Just remove it.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Aliyun&amp;rsquo;s CentOS 7.9 repo has &lt;code&gt;nscd&lt;/code&gt; installed by default, locking out the glibc version, which can cause RPM dependency errors during installation.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;Error: Package: nscd-2.17-307.el7.1.x86_64 (@base)&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Run &lt;code&gt;yum remove -y nscd&lt;/code&gt; on all nodes to resolve this issue, and with Ansible, you can batch.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ansible all -b -a &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;yum remove -y nscd&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;rpms-error-on-tencent-qcloud-rocky-91&#34;&gt;RPMs error on Tencent Qcloud Rocky 9.1&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Tencent Qcloud Rocky 9.1 require extra &lt;code&gt;annobin&lt;/code&gt; packages&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./infra.yml -t repo_upstream      &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# add upstream repos&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87&#34;&gt;cd&lt;/span&gt; /www/pigsty&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;;&lt;/span&gt;                   &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# download missing packages&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;repotrack annobin gcc-plugin-annobin libuser
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./infra.yml -t repo_create        &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# create repo&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;ansible-command-timeout-timeout-waiting-for-xxx&#34;&gt;Ansible command timeout (Timeout waiting for xxx)&lt;/h2&gt;
&lt;p&gt;The default ssh timeout for ansible command is 10 seconds, some commands may take longer than that due to network latency or other reasons.&lt;/p&gt;
&lt;p&gt;You can increase the timeout parameter in the ansible config file &lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/ansible.cfg&#34;&gt;&lt;code&gt;ansible.cfg&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-ini&#34; data-lang=&#34;ini&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;[defaults]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#c4a000&#34;&gt;timeout&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;10 # change to 60,120 or more&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
      </description>
    </item>
    
  </channel>
</rss>
