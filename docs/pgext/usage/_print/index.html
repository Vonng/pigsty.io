<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="canonical" type="text/html" href="/docs/pgext/usage/">
<link rel="alternate" type="application/rss&#43;xml" href="/docs/pgext/usage/index.xml">
<meta name="robots" content="noindex, nofollow">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Use Extension | Pigsty</title>
<meta name="description" content="How to install, load, create, update, remove PostgreSQL extensions in Pigsty?">
<meta property="og:title" content="Use Extension" />
<meta property="og:description" content="How to install, load, create, update, remove PostgreSQL extensions in Pigsty?" />
<meta property="og:type" content="website" />
<meta property="og:url" content="/docs/pgext/usage/" />

<meta itemprop="name" content="Use Extension">
<meta itemprop="description" content="How to install, load, create, update, remove PostgreSQL extensions in Pigsty?"><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Use Extension"/>
<meta name="twitter:description" content="How to install, load, create, update, remove PostgreSQL extensions in Pigsty?"/>




<link rel="preload" href="/scss/main.min.194607c777ee31a481a26dfc3d1c65134dfc8eb296a0aae9d353b3bd5be6a683.css" as="style">
<link href="/scss/main.min.194607c777ee31a481a26dfc3d1c65134dfc8eb296a0aae9d353b3bd5be6a683.css" rel="stylesheet" integrity="">

<script
  src="/js/jquery-3.6.3.min.js"
  integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ=="
  crossorigin="anonymous"></script>
<script defer
  src="/js/lunr.min.js"
  integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli"
  crossorigin="anonymous"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LG1V9WTKGE"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-LG1V9WTKGE');
}
</script>
  </head>
  <body class="td-section">
    <header>
      <nav class="td-navbar navbar-dark js-navbar-scroll">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xl="http://www.w3.org/1999/xlink" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 24 24" width="24" height="24"><defs/><g id="32" fill="none" stroke-dasharray="none" fill-opacity="1" stroke-opacity="1" stroke="none"><title>32</title><g id="32_图层_2"><title>图层 2</title><g id="Group_17"><g id="Graphic_16"/><g id="Graphic_15"><path d="M7.666187 11.971335l2.165064-3.75H14.16138l2.165065 3.75-2.165065 3.75H9.831251z" fill="#bbb" fill-opacity=".9526367"/><path d="M7.666187 11.971335l2.165064-3.75H14.16138l2.165065 3.75-2.165065 3.75H9.831251z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_14"><path d="M7.666187 19.474806l2.165064-3.75H14.16138l2.165065 3.75-2.165065 3.75H9.831251z" fill="#de372c" fill-opacity=".8545852"/><path d="M7.666187 19.474806l2.165064-3.75H14.16138l2.165065 3.75-2.165065 3.75H9.831251z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_13"><path d="M14.161476 15.751202l2.165064-3.75h4.33013l2.165064 3.75-2.165064 3.75H16.32654z" fill="#424242" fill-opacity=".9016462"/><path d="M14.161476 15.751202l2.165064-3.75h4.33013l2.165064 3.75-2.165064 3.75H16.32654z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_12"><path d="M14.161476 8.226008 16.32654 4.4760076h4.33013L22.821734 8.226008l-2.165064 3.75H16.32654z" fill="#ffa269" fill-opacity=".8975772"/><path d="M14.161476 8.226008 16.32654 4.4760076h4.33013L22.821734 8.226008l-2.165064 3.75H16.32654z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_11"><path d="M7.666187 4.5 9.831251.75H14.16138L16.326445 4.5 14.16138 8.25H9.831251z" fill="#419edb" fill-opacity=".8979957"/><path d="M7.666187 4.5 9.831251.75H14.16138L16.326445 4.5 14.16138 8.25H9.831251z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_10"><path d="M1.1491742 8.226008 3.3142388 4.4760076H7.644368L9.809432 8.226008l-2.165064 3.75H3.3142388z" fill="#2f6793" fill-opacity=".9002511"/><path d="M1.1491742 8.226008 3.3142388 4.4760076H7.644368L9.809432 8.226008l-2.165064 3.75H3.3142388z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_9"><path d="M1.182071 15.741036l2.1650645-3.75h4.330129l2.1650645 3.75-2.1650645 3.75H3.3471355z" fill="#53ac79" fill-opacity=".9"/><path d="M1.182071 15.741036l2.1650645-3.75h4.330129l2.1650645 3.75-2.1650645 3.75H3.3471355z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g></g></g></g></svg></span><span class="navbar-brand__name">Pigsty</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link active" href="/docs/"><i class='fa-solid fa-book'></i><span>Docs</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/blog/"><i class="fas fa-blog"></i><span>Blog</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="https://github.com/Vonng/pigsty/" target="_blank" rel="noopener"><i class='fab fa-github'></i><span>GitHub</span></a>
      </li>
      <li class="nav-item dropdown d-none d-lg-block">
        <div class="dropdown">
  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <i class="fa-solid fa-language"></i>English</a>
  <ul class="dropdown-menu">
    <li><a class="dropdown-item" href="/zh/docs/pgext/usage/">中文</a></li>
    </ul>
</div>
</li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/offline-search-index.42238637d8004b63aa9375df6dfa94d7.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This is the multi-page printable view of this section.
<a href="#" onclick="print();return false;">Click here to print</a>.
</p><p>
<a href="/docs/pgext/usage/">Return to the regular view of this page</a>.
</p>
</div>



<h1 class="title">Use Extension</h1>
<div class="lead">How to install, load, create, update, remove PostgreSQL extensions in Pigsty?</div>




    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-e40ff1617ea9efefed35a854f611319f">Get Started</a></li>


    
  
    
    
	
<li>2: <a href="#pg-c433589c26820559447d608cbf714e1d">Download Extension</a></li>


    
  
    
    
	
<li>3: <a href="#pg-07b66e859c34f3782e2010cea8d3721e">Extension Repo</a></li>


    
  
    
    
	
<li>4: <a href="#pg-76461c68ca809aefb9616ca07b648d6c">Install Extension</a></li>


    
  
    
    
	
<li>5: <a href="#pg-c12d714b40237f738ff22c7b61498055">Load Extension</a></li>


    
  
    
    
	
<li>6: <a href="#pg-64ad4b73770d32d506c29117aae8e444">Create Extension</a></li>


    
  
    
    
	
<li>7: <a href="#pg-78965704f6925349ce2731a811ea1f57">Update Extension</a></li>


    
  
    
    
	
<li>8: <a href="#pg-5a92a7d28a5b010ba05ac12a6a7c7a4f">Remove Extension</a></li>


    
  
    
    
	
<li>9: <a href="#pg-c72b4718241a8b952d499a2e110ac0a6">Pre-defined Stacks</a></li>


    
  

    </ul>


<div class="content">
      
</div>
</div>


  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-e40ff1617ea9efefed35a854f611319f">1 - Get Started</h1>
    <div class="lead">How to use PostgreSQL extension in an out-of-the-box manner with Pigsty!</div>
	<p>Pigsty allows you to manage <a href="/docs/pgsql/"><strong>PostgreSQL</strong></a> extension in a declarative way</p>
<hr>
<h2 id="overview">Overview</h2>
<p>To use an extension in Pigsty managed PostgreSQL cluster, you need to deal with four issues: <a href="/docs/pgext/usage/download/"><strong>download</strong></a>, <a href="/docs/pgext/usage/install/"><strong>install</strong></a>, <a href="/docs/pgext/usage/load/"><strong>load</strong></a>, and <a href="/docs/pgext/usage/create/"><strong>create</strong></a>:</p>
<ul>
<li>
<p><a href="/docs/pgext/usage/download/"><strong>How to Download?</strong></a>: <a href="/docs/reference/param/#repo_upstream"><strong><code>repo_upstream</code></strong></a> &amp; <a href="/docs/reference/param/#repo_pacakges"><strong><code>repo_packages</code></strong></a></p>
<p>When performing the default online installation in Pigsty, all available extensions for the current primary PostgreSQL version (16) are automatically downloaded.
If you do not need additional or niche extensions, you don&rsquo;t need to worry about <code>repo_upstream</code>, <code>repo_packages</code>, or any issues related to extension downloads.</p>
</li>
<li>
<p><a href="/docs/pgext/usage/install/"><strong>How to Install?</strong></a>: <a href="/docs/reference/param/#pg_extensions"><strong><code>pg_extensions</code></strong></a> &amp; <a href="/docs/reference/param/#pg_packages"><strong><code>pg_packages</code></strong></a></p>
<p>In the config template, a complete list of available extension alias is already included.
To <strong>install</strong> additional extensions, simply add/uncomment them to <code>pg_packages</code> and <code>pg_extensions</code>.</p>
</li>
<li>
<p><a href="/docs/pgext/usage/load/"><strong>How to Load?</strong></a>: <a href="/docs/reference/param/#pg_libs"><strong><code>pg_libs</code></strong></a> &amp; <a href="/docs/reference/param/#pg_parameters"><code>pg_parameters</code></a></p>
<p>A small number of extensions that utilize PostgreSQL HOOKs need to be dynamically loaded and will only take effect after restarting the database server.</p>
</li>
<li>
<p>You should add these extensions to <code>pg_libs</code>, or manually overwrite <code>shared_preload_libraries</code> in <code>pg_parameters</code> or DCS, and ensure they are loaded upon restart.</p>
</li>
<li>
<p><a href="/docs/pgext/usage/create/"><strong>How to Create</strong></a>: <a href="/docs/pgsql/db/"><strong><code>pg_databases.extensions</code></strong></a></p>
<p>Most extensions require the execution of the <code>CREATE EXTENSION</code> DDL statement after installation to actually create and enable them in a specific database.</p>
</li>
<li>
<p>You can manually execute this DDL, or explicitly specify the extensions in <code>pg_databases.extensions</code>, and the database will automatically enable these extensions during initialization.</p>
</li>
</ul>
<hr>
<h2 id="out-of-the-box">Out-Of-The-Box</h2>
<p>Pigsty seals the complexity of extension management for users. You don’t need to know the RPM package names of these extensions,
nor how to download, install, load, or enable them. You only need to declare the extensions you require in the configuration file.</p>
<p>For example, the following configuration snippet declares a PostgreSQL cluster that <a href="/docs/pgext/usage/install/">installs</a> all available extension plugins,
dynamically <a href="/docs/pgext/usage/load/"><strong>loads</strong></a> three extensions, and <a href="/docs/pgext/usage/create/"><strong>enables</strong></a> these 3 extensions.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">pg-meta</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">hosts</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">10.10.10.10</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">pg_seq: 1, pg_role</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">primary }</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">vars</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">pg_cluster</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">pg-meta</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">pg_databases</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">meta</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">extensions</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">postgis     }</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">timescaledb }</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">vector      }</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">pg_libs</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;timescaledb, pg_stat_statements, auto_explain&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">pg_extensions</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># extensions to be installed on this cluster</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">timescaledb periods temporal_tables emaj table_version pg_cron pg_later pg_background pg_timetable</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">postgis pgrouting pointcloud pg_h3 q3c ogr_fdw geoip #pg_geohash</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">#mobilitydb</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">pgvector pgvectorscale pg_vectorize pg_similarity pg_tiktoken pgml</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">#smlar</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">pg_search pg_bigm zhparser hunspell</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">hydra pg_lakehouse pg_duckdb duckdb_fdw pg_fkpart pg_partman plproxy</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">#pg_strom citus</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">pg_hint_plan age hll rum pg_graphql pg_jsonschema jsquery index_advisor hypopg imgsmlr pg_ivm pgmq pgq</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">#rdkit</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">pg_tle plv8 pllua plprql pldebugger plpgsql_check plprofiler plsh</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">#pljava plr pgtap faker dbt2</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">prefix semver pgunit md5hash asn1oid roaringbitmap pgfaceting pgsphere pg_country pg_currency pgmp numeral pg_rational pguint ip4r timestamp9 chkpass #pg_uri #pgemailaddr #acl #debversion</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">#pg_rrule</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">topn pg_gzip pg_http pg_net pg_html5_email_address pgsql_tweaks pg_extra_time pg_timeit count_distinct extra_window_functions first_last_agg tdigest aggs_for_arrays pg_arraymath pg_idkit pg_uuidv7 permuteseq pg_hashids</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">sequential_uuids pg_math pg_random pg_base36 pg_base62 floatvec pg_financial pgjwt pg_hashlib shacrypt cryptint pg_ecdsa pgpcre icu_ext envvar url_encode #pg_zstd #aggs_for_vecs #quantile #lower_quantile #pgqr</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">#pg_protobuf</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">pg_repack pg_squeeze pg_dirtyread pgfincore pgdd ddlx pg_prioritize pg_checksums pg_readonly safeupdate pg_permissions pgautofailover pg_catcheck preprepare pgcozy pg_orphaned pg_crash pg_cheat_funcs pg_savior table_log pg_fio</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">#pgpool pgagent</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">pg_profile pg_show_plans pg_stat_kcache pg_stat_monitor pg_qualstats pg_store_plans pg_track_settings pg_wait_sampling system_stats pg_meta pgnodemx pg_sqlog bgw_replstatus pgmeminfo toastinfo pagevis powa pg_top #pg_statviz #pgexporter_ext</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">#pg_mon</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">passwordcheck supautils pgsodium pg_vault anonymizer pg_tde pgsmcrypto pgaudit pgauditlogtofile pg_auth_mon credcheck pgcryptokey pg_jobmon logerrors login_hook set_user pg_snakeoil pgextwlist pg_auditor noset</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">#sslutils</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">wrappers multicorn mysql_fdw tds_fdw sqlite_fdw pgbouncer_fdw mongo_fdw redis_fdw pg_redis_pubsub kafka_fdw hdfs_fdw firebird_fdw aws_s3 log_fdw #oracle_fdw</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">#db2_fdw</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">orafce pgtt session_variable pg_statement_rollback pg_dbms_metadata pg_dbms_lock pgmemcache #pg_dbms_job</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">#wiltondb</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">pglogical pgl_ddl_deploy pg_failover_slots wal2json wal2mongo decoderbufs decoder_raw mimeo pgcopydb pgloader pg_fact_loader pg_bulkload pg_comparator pgimportdoc pgexportdoc #repmgr</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">#slony</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">gis-stack rag-stack fdw-stack fts-stack etl-stack feat-stack olap-stack supa-stack stat-stack json-stack</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>You might have noticed that the extension names here are not the RPM/DEB package names but rather <strong>normalized extension aliases</strong> that have been simplified and encapsulated by Pigsty.</p>
<p>Pigsty translates these standardized aliases into the corresponding RPM/DEB package names for the specific PostgreSQL major version on different operating system distributions.
This way, you don&rsquo;t have to worry about the differences in extension package names across various OS distributions.</p>
<ul>
<li><a href="https://github.com/Vonng/pigsty/blob/main/roles/node_id/vars/el8.yml"><strong>EL8 Package / Extension List</strong></a></li>
<li><a href="https://github.com/Vonng/pigsty/blob/main/roles/node_id/vars/el9.yml"><strong>EL9 Package / Extension List</strong></a></li>
<li><a href="https://github.com/Vonng/pigsty/blob/main/roles/node_id/vars/d12.yml"><strong>D12 Package / Extension List</strong></a></li>
<li><a href="https://github.com/Vonng/pigsty/blob/main/roles/node_id/vars/u22.yml"><strong>U22 Package / Extension List</strong></a></li>
<li><a href="https://github.com/Vonng/pigsty/blob/main/roles/node_id/vars/u24.yml"><strong>U24 Package / Extension List</strong></a></li>
</ul>
<p>During the Pigsty <a href="/docs/setup/install/#configure"><code>configure</code></a> process, the default configuration generated for your specific OS distro will already include the above list.
To install these extensions, you only need to uncomment the ones you need in the configuration file.</p>
<p>Please note that you can still directly use OS-specific RPM/DEB package names here if you prefer.</p>
<hr>
<h2 id="predefined-stacks">Predefined Stacks</h2>
<p>If you are not sure which extensions to install, Pigsty provides you with some predefined extension collections (Stacks).
You can choose one of them and any combination according to your needs, and add them to <code>pg_extensions</code>.</p>
<ul>
<li><code>gis-stack</code>:  <code>postgis</code>, <code>pgrouting</code>, <code>pointcloud</code>, <code>h3</code>, <code>q3c</code>, <code>ogr_fdw</code></li>
<li><code>rag-stack</code>:  <code>pgvector</code>, <code>pgvectorscale</code>, <code>pg_vectorize</code>, <code>pg_similarity</code>, <code>pg_tiktoken</code>, <code>pgml</code></li>
<li><code>fts-stack</code>:  <code>pg_search</code>, <code>pg_bigm</code>, <code>zhparser</code>, <code>hunspell</code></li>
<li><code>fdw-stack</code>:  <code>wrappers</code>, <code>mysql_fdw</code>, <code>tds_fdw</code>, <code>sqlite_fdw</code></li>
<li><code>etl-stack</code>:  <code>pglogical</code>, <code>pgl_ddl_deploy</code>, <code>wal2json</code>, <code>wal2mongo</code>, <code>decoderbufs</code>, <code>pg_fact_loader</code>, <code>pg_bulkload</code>, <code>pgloader</code>, <code>pgcopydb</code></li>
<li><code>feat-stack</code>:  <code>age</code>, <code>hll</code>, <code>rum</code>, <code>pg_graphql</code>, <code>pg_jsonschema</code>, <code>jsquery</code>, <code>pg_ivm</code>, <code>pgq3</code>, <code>gzip</code>, <code>http</code>, <code>topn</code>, <code>pgjwt</code></li>
<li><code>olap-stack</code>:  <code>duckdb</code>, <code>duckdb_fdw</code>, <code>pg-lakehouse</code>, <code>hydra</code>, <code>timescaledb</code>, <code>pg-fkpart</code>, <code>pg-partman</code>, <code>plproxy</code></li>
<li><code>supa-stack</code>:  <code>pg-graphql</code>, <code>pg-jsonschema</code>, <code>wrappers</code>, <code>pgvector</code>, <code>cron</code>, <code>supautils</code>, <code>pgsodium</code>, <code>vault</code>, <code>pgjwt</code>, <code>http</code>, <code>pg-net</code>, <code>index_advisor</code></li>
<li><code>stat-stack</code>:  <code>show-plans</code>, <code>pg-stat-kcache</code>, <code>pg-qualstats</code>, <code>pg-track-settings</code>, <code>pg-wait-sampling</code>, <code>pg-sqlog</code></li>
<li><code>json-stack</code>:  <code>plv8</code>, <code>pg-jsonschema</code>, <code>pgjwt</code>, <code>jsquery</code>, <code>pg-graphql</code>, <code>ferretdb</code></li>
</ul>
<p>When you specify these extension stack names in <code>pg_extensions</code> or <code>pg_packages</code>, Pigsty will automatically translate, expand, and install all the extension plugins in them.</p>
<hr>
<h2 id="install-load-and-create">Install, Load, and Create</h2>
<p>Pigsty not only allows you to declare the extensions you need to install in the configuration file, but it also lets you directly specify the extensions that need to be loaded and enabled.</p>
<p>Here&rsquo;s a concrete example: <a href="https://supabase.com/"><strong>Supabase</strong></a>. Supabase is an &ldquo;upstream abstract database&rdquo; built on top of PostgreSQL, which heavily utilizes PostgreSQL&rsquo;s extension mechanism.
Below is a sample configuration file for creating a PostgreSQL cluster required for Supabase using Pigsty:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># supabase example cluster: pg-meta</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># this cluster needs to be migrated with app/supabase/migration.sql :</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># psql postgres://supabase_admin:DBUser.Supa@10.10.10.10:5432/supa -v ON_ERROR_STOP=1 --no-psqlrc -f ~pigsty/app/supabase/migration.sql</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">pg-meta</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">hosts</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">10.10.10.10</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">pg_seq: 1, pg_role</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">primary } }</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">vars</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">pg_cluster</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">pg-meta</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">pg_users</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">name: supabase_admin ,password: &#39;DBUser.Supa&#39; ,pgbouncer: true ,inherit: true   ,superuser: true ,replication: true ,createdb: true ,createrole: true ,bypassrls</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">pg_databases</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">supa</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">baseline: supa.sql    # the init-scripts</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">https://github.com/supabase/postgres/tree/develop/migrations/db/init-scripts</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">owner</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">supabase_admin</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">comment</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">supabase postgres database</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">schemas</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">extensions ,auth ,realtime ,storage ,graphql_public ,supabase_functions ,_analytics ,_realtime ]</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">extensions</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">name: pgcrypto  ,schema: extensions  } # 1.3   </span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">cryptographic functions</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">name: pg_net    ,schema: extensions  } # 0.9.2 </span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">async HTTP</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">name: pgjwt     ,schema: extensions  } # 0.2.0 </span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">json web token API for postgres</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">name: uuid-ossp ,schema: extensions  } # 1.1   </span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">generate universally unique identifiers (UUIDs)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">name: pgsodium        }                # 3.1.9 </span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">pgsodium is a modern cryptography library for Postgres.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">name: supabase_vault  }                # 0.2.8 </span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Supabase Vault Extension</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">name: pg_graphql      }                # 1.5.7 : pg_graphql</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">GraphQL support</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">name: pg_jsonschema   }                # 0.3.1 : pg_jsonschema</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Validate json schema</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">name: wrappers        }                # 0.4.1 : wrappers</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">FDW collections</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">name: http            }                # 1.6   : http</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">allows web page retrieval inside the database.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">pg_cron         }</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># supabase required extensions</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">pg_libs</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;pg_net, pg_cron, pg_stat_statements, auto_explain&#39;</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># add pg_net to shared_preload_libraries</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">pg_extensions</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">wal2json pg_repack</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">supa-stack</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># pgvector pg_cron pgsodium pg_graphql pg_jsonschema wrappers pgjwt pgsql_http pg_net supautils</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">pg_parameters</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">cron.database_name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">supa</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">pgsodium.enable_event_trigger</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">off</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">pg_hba_rules</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># supabase hba rules, require access from docker network</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">user: all ,db: supa ,addr: intra       ,auth: pwd ,title</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;allow supa database access from intranet&#39;</span><span style="color:#f8f8f8;text-decoration:underline">      </span>}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">user: all ,db: supa ,addr: 172.0.0.0/8 ,auth: pwd ,title</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;allow supa database access from docker network&#39;</span>}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">user: all ,db: supa ,addr: all         ,auth: pwd ,title</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;allow supa database access from entire world&#39;</span><span style="color:#f8f8f8;text-decoration:underline">  </span>}<span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># not safe!</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>In this example, we declare a PostgreSQL cluster named <code>pg-meta</code>, which contains a database called <code>supa</code> along with a set of extension plugins.</p>
<p>The <code>supa-stack</code> defined in <code>pg_extensions</code> translates to <code>pgvector pg_cron pgsodium pg_graphql pg_jsonschema wrappers pgjwt pgsql_http pg_net supautils</code>, which are automatically installed. Meanwhile, <code>pg_libs</code> specifies two extensions that need to be dynamically loaded: <code>pg_net</code> and <code>pg_cron</code>. Additionally, the necessary configuration parameters for the <code>pgsodium</code> and <code>pg_cron</code> extensions are pre-configured via <code>pg_parameters</code>.</p>
<p>Following that, these extensions are sequentially created and enabled in the specified or default schemas within <code>pg_databases.extensions</code>.</p>
<p>Finally, this out-of-the-box, highly available PostgreSQL cluster, ready to be used by stateless Supabase containers, can be fully launched with a single <code>./pgsql.yml</code> command, providing a seamless experience.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-c433589c26820559447d608cbf714e1d">2 - Download Extension</h1>
    <div class="lead">How to download new extension packages to Pigsty&rsquo;s local software repository?</div>
	<p>In Pigsty&rsquo;s default installation mode, the downloading and installation of extension plugins are handled separately. Before <a href="/docs/pgext/usage/install/"><strong>installing extensions</strong></a>, you must ensure that the appropriate software repositories are added to the target node. Otherwise, the installation may fail due to missing packages.</p>
<p>During the installation process, Pigsty downloads all available extensions for the current major PG version (16) to the <strong>INFRA node</strong> and sets up a <strong>local software repository</strong>. This repository is used by all nodes, including the local machine. This approach accelerates installation, avoids redundant downloads, reduces network traffic, improves delivery reliability, and mitigates the risk of inconsistent version installations.</p>
<p>Alternatively, you can opt to add the upstream PostgreSQL software repository and its dependencies (OS software sources) directly to the target node managed by Pigsty. This method allows you to easily update plugins to the latest versions but requires internet access or an HTTP proxy. It may also be subject to network conditions and carries the potential risk of inconsistent installation versions.</p>
<hr>
<h2 id="software-repo">Software Repo</h2>
<p>During the initial installation, Pigsty downloads the packages specified by <a href="/"><strong><code>repo_upstream</code></strong></a> from the upstream software repository. The package names differ between EL systems and Debian/Ubuntu systems. The complete list can be found at the following links:</p>
<ul>
<li><a href="https://github.com/Vonng/pigsty/blob/main/roles/node_id/vars/el8.yml"><strong>EL8 Package / Extension List</strong></a></li>
<li><a href="https://github.com/Vonng/pigsty/blob/main/roles/node_id/vars/el9.yml"><strong>EL9 Package / Extension List</strong></a></li>
<li><a href="https://github.com/Vonng/pigsty/blob/main/roles/node_id/vars/d12.yml"><strong>D12 Package / Extension List</strong></a></li>
<li><a href="https://github.com/Vonng/pigsty/blob/main/roles/node_id/vars/u22.yml"><strong>U22 Package / Extension List</strong></a></li>
<li><a href="https://github.com/Vonng/pigsty/blob/main/roles/node_id/vars/u24.yml"><strong>U24 Package / Extension List</strong></a></li>
</ul>
<p>A few plugins are excluded by default due to various reasons. If you need these extensions, refer to the RPM/DEB package names in the extension list and add them to <a href="/"><strong><code>repo_upstream</code></strong></a> for download.</p>
<ul>
<li>Heavy dependencies: <code>pljava</code>, <code>plr</code></li>
<li>Niche overlap: <code>repmgr</code>, <code>pgexporterext</code>, <code>pgpool</code></li>
<li>EL9 exclusives: <code>pljava</code></li>
</ul>
<hr>
<h2 id="download-extension">Download Extension</h2>
<p>To download new extension plugins, you can add them to <a href="/"><strong><code>repo_upstream</code></strong></a> and run the following tasks to update the local software repository and refresh the package cache on all nodes:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>./infra.yml -t repo       <span style="color:#8f5902;font-style:italic"># Re-download the specified packages to the local software repository</span>
</span></span><span style="display:flex;"><span>./node.yml  -t node_repo  <span style="color:#8f5902;font-style:italic"># Refresh the metadata cache of the local software repository on all nodes</span>
</span></span></code></pre></div><p>By default, Pigsty uses the local software source located on the <strong>INFRA node</strong>. If you prefer not to download these extensions to the local repository but instead use an online software repository for installation, you can directly add the upstream software source to the nodes:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>./node.yml -t node_repo -e <span style="color:#000">node_repo_modules</span><span style="color:#ce5c00;font-weight:bold">=</span>node,pgsql  <span style="color:#8f5902;font-style:italic"># Add the Postgres plugin repository and OS software sources (dependencies)</span>
</span></span></code></pre></div><p>After completing these tasks, you can install PostgreSQL extension plugins using the standard OS package manager (yum/apt).</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-07b66e859c34f3782e2010cea8d3721e">3 - Extension Repo</h1>
    <div class="lead">How to use the pigsty extension repo?</div>
	<hr>
<h2 id="yum-repo">YUM Repo</h2>
<p>Pigsty currently offers a supplementary PG extension repository for EL systems, providing <strong>121</strong> additional RPM plugins in addition to the official PGDG YUM repository (135).</p>
<ul>
<li>Pigsty YUM Repository: <a href="https://repo.pigsty.io/yum/">https://repo.pigsty.io/yum/</a></li>
<li>PGDG YUM Repository: <a href="https://download.postgresql.org/pub/repos/yum/">https://download.postgresql.org/pub/repos/yum/</a></li>
</ul>
<p>The Pigsty YUM repository only includes extensions <strong>not present in the PGDG YUM repository</strong>.
Once an extension is added to the PGDG YUM repository, Pigsty YUM repository will either remove it or align with the PGDG repository.</p>
<p>For EL 7/8/9 and compatible systems, use the following commands to add the GPG public key and the upstream repository file of the Pigsty repository:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -fsSL https://repo.pigsty.io/key      <span style="color:#000;font-weight:bold">|</span> sudo tee /etc/pki/rpm-gpg/RPM-GPG-KEY-pigsty &gt;/dev/null  <span style="color:#8f5902;font-style:italic"># add gpg key</span>
</span></span><span style="display:flex;"><span>curl -fsSL https://repo.pigsty.io/yum/repo <span style="color:#000;font-weight:bold">|</span> sudo tee /etc/yum.repos.d/pigsty.repo        &gt;/dev/null  <span style="color:#8f5902;font-style:italic"># add repo file</span>
</span></span></code></pre></div><p>All RPMs are signed with the GPG key fingerprint <code>9592A7BC7A682E7333376E09E7935D8DB9BD8B20</code> (<code>B9BD8B20</code>).</p>
<details><summary>Write Repo File Manually</summary><br>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo tee /etc/yum.repos.d/pigsty-io.repo &gt; /dev/null <span style="color:#4e9a06">&lt;&lt;-&#39;EOF&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">[pigsty-infra]
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">name=Pigsty Infra for $basearch
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">baseurl=https://repo.pigsty.io/yum/infra/$basearch
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">skip_if_unavailable = 1
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">enabled = 1
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">priority = 1
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">gpgcheck = 1
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-pigsty
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">module_hotfixes=1
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">[pigsty-pgsql]
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">name=Pigsty PGSQL For el$releasever.$basearch
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">baseurl=https://repo.pigsty.io/yum/pgsql/el$releasever.$basearch
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">skip_if_unavailable = 1
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">enabled = 1
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">priority = 1
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">gpgcheck = 1
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-pigsty
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">module_hotfixes=1
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">EOF</span>
</span></span><span style="display:flex;"><span>sudo yum makecache<span style="color:#000;font-weight:bold">;</span>
</span></span></code></pre></div></details>
<hr>
<h2 id="apt-repo">APT Repo</h2>
<p>Pigsty currently offers a supplementary PG extension repository for Debian/Ubuntu systems, providing <strong>133</strong> additional DEB packages in addition to the official PGDG APT repository (109).</p>
<ul>
<li>Pigsty APT Repository: <a href="https://repo.pigsty.io/apt/">https://repo.pigsty.io/apt/</a></li>
<li>PGDG APT Repository: <a href="http://apt.postgresql.org/pub/repos/apt/">http://apt.postgresql.org/pub/repos/apt/</a></li>
</ul>
<p>The Pigsty APT repository only includes extensions <strong>not present in the PGDG APT repository</strong>.
Once an extension is added to the PGDG APT repository, Pigsty APT repository will either remove it or align with the PGDG repository.</p>
<p>For Debian/Ubuntu and compatible systems, use the following commands to sequentially add the GPG public key and the upstream repository file of the Pigsty repository:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># add GPG key to keyring</span>
</span></span><span style="display:flex;"><span>curl -fsSL https://repo.pigsty.io/key <span style="color:#000;font-weight:bold">|</span> sudo gpg --dearmor -o /etc/apt/keyrings/pigsty.gpg
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># get debian codename, distro_codename=jammy, focal, bullseye, bookworm</span>
</span></span><span style="display:flex;"><span><span style="color:#000">distro_codename</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87;font-weight:bold">$(</span>lsb_release -cs<span style="color:#204a87;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>sudo tee /etc/apt/sources.list.d/pigsty-io.list &gt; /dev/null <span style="color:#4e9a06">&lt;&lt;EOF
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">deb [signed-by=/etc/apt/keyrings/pigsty.gpg] https://repo.pigsty.io/apt/infra generic main 
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">deb [signed-by=/etc/apt/keyrings/pigsty.gpg] https://repo.pigsty.io/apt/pgsql/${distro_codename} ${distro_codename} main
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># refresh APT repo cache</span>
</span></span><span style="display:flex;"><span>sudo apt update
</span></span></code></pre></div><p>All DEBs are signed with the GPG key fingerprint <code>9592A7BC7A682E7333376E09E7935D8DB9BD8B20</code> (<code>B9BD8B20</code>).</p>
<hr>
<h2 id="repo-of-repo">Repo of Repo</h2>
<p>The building recipes and specs, metadata are all open-sourced,  related GitHub repos:</p>
<ul>
<li><a href="https://github.com/pgsty/pkg"><code>pkg</code></a>: The repository of RPM/DEB packages for PostgreSQL extensions</li>
<li><a href="https://github.com/pgsty/infra-pkg"><code>infra_pkg</code></a>: Building observability stack &amp; modules from tarball</li>
<li><a href="https://github.com/pgsty/pgsql-rpm"><code>pgsql-rpm</code></a>: Building PostgreSQL RPM packages from source code</li>
<li><a href="https://github.com/pgsty/pgsql-deb"><code>pgsql-deb</code></a>: Building PostgreSQL DEB packages from source code</li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-76461c68ca809aefb9616ca07b648d6c">4 - Install Extension</h1>
    <div class="lead">How to install a extension from local repo, or directly from the Internet upstream repo.</div>
	<p>Pigsty uses the standard OS package managers (yum/apt) to install PostgreSQL extension plugins.</p>
<hr>
<h2 id="parameters">Parameters</h2>
<p>You can specify which extensions to install using the following variables, both of which have similar effects:</p>
<ul>
<li><a href="/docs/reference/param/#pg_packages"><strong><code>pg_packages</code></strong></a></li>
<li><a href="/docs/reference/param/#pg_extensions"><strong><code>pg_extensions</code></strong></a></li>
</ul>
<p>Generally, <code>pg_packages</code> is used to globally specify the software packages that need to be installed across all PostgreSQL clusters in the environment. This includes essential components like the PostgreSQL core, high-availability setup with Patroni, connection pooling with pgBouncer, monitoring with pgExporter, etc. By default, Pigsty also includes two essential extensions here: <code>pg_repack</code> for bloat management and <code>wal2json</code> for CDC (Change Data Capture).</p>
<p>On the other hand, <code>pg_extensions</code> is typically used to specify extension plugins that need to be installed for a specific cluster. Pigsty defaults to installing three key PostgreSQL ecosystem extensions: <code>postgis</code>, <code>timescaledb</code>, and <code>pgvector</code>. You can also specify any additional extensions you need in this list.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">pg_packages</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                      </span><span style="color:#8f5902;font-style:italic"># pg packages to be installed, alias can be used</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#000">postgresql</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#000">patroni pgbouncer pgbackrest pg_exporter pgbadger vip-manager wal2json pg_repack</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">pg_extensions</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                    </span><span style="color:#8f5902;font-style:italic"># pg extensions to be installed, alias can be used</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#000">postgis timescaledb pgvector</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>Another important distinction is that packages installed via <code>pg_packages</code> are merely ensured to be present, whereas those installed via <code>pg_extensions</code> are automatically upgraded to the latest available version. This is not an issue when using a local software repository, but when using upstream online repositories, consider this carefully and move extensions you do not want to be upgraded to <code>pg_packages</code>.</p>
<p>During PGSQL cluster initialization, Pigsty will automatically install the extensions specified in both <code>pg_packages</code> and <code>pg_extensions</code>.</p>
<hr>
<h2 id="install-on-existing-cluster">Install on Existing Cluster</h2>
<p>For a PostgreSQL cluster that has already been provisioned and initialized, you can first add the desired extensions to either <code>pg_packages</code> or <code>pg_extensions</code>, and then install the extensions using the following command:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>./pgsql.yml -t pg_extension  <span style="color:#8f5902;font-style:italic"># install extensions specified in pg_extensions </span>
</span></span></code></pre></div><hr>
<h2 id="alias-translation">Alias Translation</h2>
<p>When specifying extensions in Pigsty, you can use the following formats in <code>pg_packages</code> and <code>pg_extensions</code>:</p>
<ul>
<li>The original OS package name</li>
<li>A normalized extension name (alias)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>postgis                    <span style="color:#8f5902;font-style:italic"># Installs the PostGIS package for the current major PG version</span>
</span></span><span style="display:flex;"><span>postgis34_<span style="color:#000">$v</span>*              <span style="color:#8f5902;font-style:italic"># Installs the PostGIS RPM package for the current major PG version</span>
</span></span><span style="display:flex;"><span>postgis34_15*              <span style="color:#8f5902;font-style:italic"># Installs the PostGIS RPM package for PG 15</span>
</span></span><span style="display:flex;"><span>postgresql-<span style="color:#000">$v</span>-postgis-3*   <span style="color:#8f5902;font-style:italic"># Installs the PostGIS DEB package for the current major PG version</span>
</span></span><span style="display:flex;"><span>postgresql-14-postgis-3*   <span style="color:#8f5902;font-style:italic"># Installs the PostGIS DEB package for PG 14</span>
</span></span></code></pre></div><p>We recommend using the standardized extension names (aliases) provided by Pigsty. Pigsty will translate these aliases into the appropriate RPM/DEB package names corresponding to the PG major version for different OS distributions. This way, users don&rsquo;t need to worry about the differences in extension package names across various OS distributions:</p>
<ul>
<li><a href="https://github.com/Vonng/pigsty/blob/main/roles/node_id/vars/el8.yml"><strong>EL8 Package / Extension List</strong></a></li>
<li><a href="https://github.com/Vonng/pigsty/blob/main/roles/node_id/vars/el9.yml"><strong>EL9 Package / Extension List</strong></a></li>
<li><a href="https://github.com/Vonng/pigsty/blob/main/roles/node_id/vars/d12.yml"><strong>D12 Package / Extension List</strong></a></li>
<li><a href="https://github.com/Vonng/pigsty/blob/main/roles/node_id/vars/u22.yml"><strong>U22 Package / Extension List</strong></a></li>
<li><a href="https://github.com/Vonng/pigsty/blob/main/roles/node_id/vars/u24.yml"><strong>U24 Package / Extension List</strong></a></li>
</ul>
<p>Pigsty strives to align the PostgreSQL extensions available for EL and Debian-based systems.
However, a few extensions may be difficult to migrate or have not yet been ported due to various reasons.
For more information, please refer to the <a href="/docs/pgext/list/rpm/">RPM Extension List</a> and <a href="/docs/pgext/list/deb/">DEB Extension List</a>.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-c12d714b40237f738ff22c7b61498055">5 - Load Extension</h1>
    <div class="lead">Some extensions that use hook mechanism must be preloaded and restarted to take effect.</div>
	<p>After installing PostgreSQL extensions, you can view them in the <code>pg_available_extensions</code> view in PostgreSQL.</p>
<p>Aside from extensions written purely in SQL, most extensions provide a <code>.so</code> file, which is a dynamic shared library.</p>
<p>Most extensions do not require explicit loading and can be enabled simply with <code>CREATE EXTENSION</code>. However, a small subset of extensions use PostgreSQL&rsquo;s hook mechanism. These extensions must be preloaded using the <code>shared_preload_libraries</code> parameter and require a PostgreSQL restart to take effect. Attempting to execute <code>CREATE EXTENSION</code> without preloading and restarting will result in an error.</p>
<p>In Pigsty, you can predefine the extensions that need to be loaded in the cluster by specifying them in the cluster&rsquo;s <a href="/"><code>pg_libs</code></a> parameter, or <a href="/"><strong>modify the cluster configuration</strong></a> after initializing the cluster.</p>
<hr>
<h2 id="extensions-that-need-loading">Extensions that Need Loading</h2>
<p>In the <a href="/docs/pgext/list/">Extension List</a>, extensions marked with <code>LOAD</code> are the ones that need to be dynamically loaded and require a restart. These include:</p>
<table>
<thead>
<tr>
<th style="text-align:left">Extension</th>
<th style="text-align:left">Alias</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><a href="https://github.com/timescale/timescaledb"><code>timescaledb</code></a></td>
<td style="text-align:left"><a href="docs/pgext/time/timescaledb">timescaledb</a></td>
<td style="text-align:left">Enables scalable inserts and complex queries for time-series data (Apache 2 Edition)</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://github.com/postgresml/postgresml"><code>pgml</code></a></td>
<td style="text-align:left"><a href="docs/pgext/rag/pgml">pgml</a></td>
<td style="text-align:left">PostgresML: Run AL/ML workloads with SQL interface</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://github.com/citusdata/citus"><code>citus</code></a></td>
<td style="text-align:left"><a href="docs/pgext/olap/citus">citus</a></td>
<td style="text-align:left">Distributed PostgreSQL as an extension</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://github.com/cybertec-postgresql/pg_squeeze"><code>pg_squeeze</code></a></td>
<td style="text-align:left"><a href="docs/pgext/admin/pg_squeeze">pg_squeeze</a></td>
<td style="text-align:left">A tool to remove unused space from a relation.</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://github.com/hapostgres/pg_auto_failover"><code>pgautofailover</code></a></td>
<td style="text-align:left"><a href="docs/pgext/admin/pgautofailover">pgautofailover</a></td>
<td style="text-align:left">auto failover for PostgreSQL</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://www.postgresql.org/docs/current/pgprewarm.html"><code>pg_prewarm</code></a></td>
<td style="text-align:left"><a href="docs/pgext/admin/pg_prewarm">pg_prewarm</a></td>
<td style="text-align:left">prewarm relation data</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://github.com/powa-team/pg_stat_kcache"><code>pg_stat_kcache</code></a></td>
<td style="text-align:left"><a href="docs/pgext/stat/pg_stat_kcache">pg_stat_kcache</a></td>
<td style="text-align:left">Kernel statistics gathering</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://github.com/mhagander/bgw_replstatus"><code>bgw_replstatus</code></a></td>
<td style="text-align:left"><a href="docs/pgext/stat/bgw_replstatus">bgw_replstatus</a></td>
<td style="text-align:left">Small PostgreSQL background worker to report whether a node is a replication master or standby</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://www.postgresql.org/docs/current/auto-explain.html"><code>auto_explain</code></a></td>
<td style="text-align:left"><a href="docs/pgext/stat/auto_explain">auto_explain</a></td>
<td style="text-align:left">Provides a means for logging execution plans of slow statements automatically</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://www.postgresql.org/docs/current/pgstatstatements.html"><code>pg_stat_statements</code></a></td>
<td style="text-align:left"><a href="docs/pgext/stat/pg_stat_statements">pg_stat_statements</a></td>
<td style="text-align:left">track planning and execution statistics of all SQL statements executed</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://github.com/devrimgunduz/passwordcheck_cracklib"><code>passwordcheck_cracklib</code></a></td>
<td style="text-align:left"><a href="docs/pgext/sec/passwordcheck">passwordcheck</a></td>
<td style="text-align:left">Strengthen PostgreSQL user password checks with cracklib</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://github.com/supabase/supautils"><code>supautils</code></a></td>
<td style="text-align:left"><a href="docs/pgext/sec/supautils">supautils</a></td>
<td style="text-align:left">Extension that secures a cluster on a cloud environment</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://github.com/Percona-Lab/pg_tde"><code>pg_tde</code></a></td>
<td style="text-align:left"><a href="docs/pgext/sec/pg_tde">pg_tde</a></td>
<td style="text-align:left">pg_tde access method</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://github.com/pgaudit/pgaudit"><code>pgaudit</code></a></td>
<td style="text-align:left"><a href="docs/pgext/sec/pgaudit">pgaudit</a></td>
<td style="text-align:left">provides auditing functionality</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://github.com/credativ/pg_snakeoil"><code>pg_snakeoil</code></a></td>
<td style="text-align:left"><a href="docs/pgext/sec/pg_snakeoil">pg_snakeoil</a></td>
<td style="text-align:left">The PostgreSQL Antivirus</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://github.com/dimitri/pgextwlist"><code>pgextwlist</code></a></td>
<td style="text-align:left"><a href="docs/pgext/sec/pgextwlist">pgextwlist</a></td>
<td style="text-align:left">PostgreSQL Extension Whitelisting</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://www.postgresql.org/docs/current/sepgsql.html"><code>sepgsql</code></a></td>
<td style="text-align:left"><a href="docs/pgext/sec/sepgsql">sepgsql</a></td>
<td style="text-align:left">label-based mandatory access control (MAC) based on SELinux security policy.</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://www.postgresql.org/docs/current/auth-delay.html"><code>auth_delay</code></a></td>
<td style="text-align:left"><a href="docs/pgext/sec/auth_delay">auth_delay</a></td>
<td style="text-align:left">pause briefly before reporting authentication failure</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://www.postgresql.org/docs/current/passwordcheck.html"><code>passwordcheck</code></a></td>
<td style="text-align:left"><a href="docs/pgext/sec/passwordcheck">passwordcheck</a></td>
<td style="text-align:left">Server side rollback at statement level for PostgreSQL like Oracle or DB2</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://github.com/lzlabs/pg_statement_rollback"><code>pg_statement_rollback</code></a></td>
<td style="text-align:left"><a href="docs/pgext/sim/pg_statement_rollback">pg_statement_rollback</a></td>
<td style="text-align:left">SQL Server Transact SQL compatibility</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://babelfishpg.org/"><code>babelfishpg_tsql</code></a></td>
<td style="text-align:left"><a href="docs/pgext/sim/babelfishpg_tsql">babelfishpg_tsql</a></td>
<td></td>
</tr>
</tbody>
</table>
<hr>
<h2 id="loading-order">Loading Order</h2>
<p>In <code>shared_preload_libraries</code>, if multiple extensions need to be loaded, they can be separated by commas, for example:</p>
<ul>
<li><code>'timescaledb, pg_stat_statements, auto_explain'</code></li>
</ul>
<p>Note that both Citus and TimescaleDB explicitly require preloading in <code>shared_preload_libraries</code>, meaning they should be listed first.</p>
<p>While it is rare to use both Citus and TimescaleDB simultaneously, in such cases, it is recommended to list <code>citus</code> before <code>timescaledb</code>.</p>
<p>Pigsty, by default, will load two extensions: <code>pg_stat_statements</code> and <code>auto_explain</code>. These extensions are very useful for optimizing database performance and are strongly recommended.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-64ad4b73770d32d506c29117aae8e444">6 - Create Extension</h1>
    <div class="lead">How to use <code>CREATE EXTENSION</code> to actually enable a PostgreSQL extensions.</div>
	<p>After installing PostgreSQL extensions, you can view them in the <code>pg_available_extensions</code> view. However, enabling these extensions typically requires additional steps:</p>
<ol>
<li>Some extensions must be added to the <code>shared_preload_libraries</code> for dynamic loading, such as <code>timescaledb</code> and <code>citus</code>.</li>
<li>Most extensions need to be activated by running the SQL statement: <code>CREATE EXTENSION &lt;name&gt;;</code>. A few, like <code>wal2json</code>, do not require this step.</li>
</ol>
<h3 id="modifying-shared_preload_libraries">Modifying <code>shared_preload_libraries</code>:</h3>
<ul>
<li><strong>Before initializing the database cluster:</strong> You can manually specify the required libraries using the <a href="/docs/reference/param/#pg_libs"><code>pg_libs</code></a>parameter.</li>
<li><strong>After the database cluster has been initialized:</strong> You can modify the <a href="/docs/pgsql/admin/#config-cluster">cluster configuration</a> by directly editing the <code>shared_preload_libraries</code> parameter and applying the changes (no restart required).</li>
<li><strong>Typical extensions that require dynamic loading:</strong> <code>citus</code>, <code>timescaledb</code>, <code>pg_cron</code>, <code>pg_net</code>, <code>pg_tle</code></li>
</ul>
<h3 id="executing-create-extension">Executing <code>CREATE EXTENSION</code>:</h3>
<ul>
<li><strong>Before initializing the database cluster:</strong> You can specify the required extensions in the <code>extensions</code> list within <a href="/docs/reference/param/#pg_databases"><code>pg_databases</code></a>.</li>
<li><strong>After the database cluster has been initialized:</strong> You can directly connect to the database and execute the SQL command, or manage extensions using other schema management tools.</li>
</ul>
<blockquote>
<p><strong>Conceptually:</strong> PostgreSQL extensions usually consist of three parts: a control file (metadata, always present), an SQL file (optional SQL statements), and a .so file (optional binary shared library). Extensions that provide a <code>.so</code> file may need to be added to <code>shared_preload_libraries</code> to function properly, such as <code>citus</code> and <code>timescaledb</code>. However, many extensions do not require this, such as <code>postgis</code> and <code>pgvector</code>. Extensions that do not expose a SQL interface do not need a <code>CREATE EXTENSION</code> command to be executed, such as the <code>wal2json</code> extension, which provides CDC extraction capabilities.</p>
</blockquote>
<p>To complete the extension creation, execute the <code>CREATE EXTENSION</code> SQL statement in the database where you wish to enable the extension.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">CREATE</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">EXTENSION</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">vector</span><span style="color:#000;font-weight:bold">;</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic">-- create &amp; enable vector extension
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#204a87;font-weight:bold">CREATE</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">EXTENSION</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">hydra</span><span style="color:#000;font-weight:bold">;</span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#8f5902;font-style:italic">-- create &amp; enable columnar extension
</span></span></span></code></pre></div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-78965704f6925349ce2731a811ea1f57">7 - Update Extension</h1>
    <div class="lead">How to update an existing extension?</div>
	<p>To update an existing extension, you can use the OS package manager</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>yum upgrade pg_lakehouse_16*
</span></span></code></pre></div><p>And then perform the <code>ALTER EXTENSION ... UPDATE</code> command in the database to update the extension to the new version:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">ALTER</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">EXTENSION</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">UPDATE</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">TO</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">new_version</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">]</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">ALTER</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">EXTENSION</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">SET</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">SCHEMA</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">new_schema</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">ALTER</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">EXTENSION</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">ADD</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">member_object</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">ALTER</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">EXTENSION</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">DROP</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">member_object</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">where</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">member_object</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">is</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">ACCESS</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">METHOD</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">object_name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">|</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">AGGREGATE</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">aggregate_name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">(</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">aggregate_signature</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">)</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">|</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">CAST</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">source_type</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">AS</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">target_type</span><span style="color:#000;font-weight:bold">)</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">|</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">COLLATION</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">object_name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">|</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">CONVERSION</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">object_name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">|</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">DOMAIN</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">object_name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">|</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">EVENT</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">TRIGGER</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">object_name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">|</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">FOREIGN</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">DATA</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">WRAPPER</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">object_name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">|</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">FOREIGN</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">TABLE</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">object_name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">|</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">FUNCTION</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">function_name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">(</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">argmode</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">]</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">argname</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">]</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">argtype</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[,</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">...]</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">]</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">)</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">]</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">|</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">MATERIALIZED</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">VIEW</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">object_name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">|</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">OPERATOR</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">operator_name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">left_type</span><span style="color:#000;font-weight:bold">,</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">right_type</span><span style="color:#000;font-weight:bold">)</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">|</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">OPERATOR</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">CLASS</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">object_name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">USING</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">index_method</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">|</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">OPERATOR</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">FAMILY</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">object_name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">USING</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">index_method</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">|</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000;font-weight:bold">[</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">PROCEDURAL</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">]</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">LANGUAGE</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">object_name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">|</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">PROCEDURE</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">procedure_name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">(</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">argmode</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">]</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">argname</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">]</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">argtype</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[,</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">...]</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">]</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">)</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">]</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">|</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">ROUTINE</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">routine_name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">(</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">argmode</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">]</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">argname</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">]</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">argtype</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[,</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">...]</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">]</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">)</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">]</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">|</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">SCHEMA</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">object_name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">|</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">SEQUENCE</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">object_name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">|</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">SERVER</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">object_name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">|</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">TABLE</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">object_name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">|</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87">TEXT</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">SEARCH</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">CONFIGURATION</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">object_name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">|</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87">TEXT</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">SEARCH</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">DICTIONARY</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">object_name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">|</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87">TEXT</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">SEARCH</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">PARSER</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">object_name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">|</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87">TEXT</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">SEARCH</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">TEMPLATE</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">object_name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">|</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">TRANSFORM</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">FOR</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">type_name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">LANGUAGE</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">lang_name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">|</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">TYPE</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">object_name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">|</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">VIEW</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">object_name</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">and</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">aggregate_signature</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">is</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">|</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000;font-weight:bold">[</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">argmode</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">]</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">argname</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">]</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">argtype</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">,</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">...</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">]</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">|</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000;font-weight:bold">[</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">argmode</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">]</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">argname</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">]</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">argtype</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">,</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">...</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">]</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">]</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">ORDER</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">BY</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">argmode</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">]</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">argname</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">]</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">argtype</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">,</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">...</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">]</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-5a92a7d28a5b010ba05ac12a6a7c7a4f">8 - Remove Extension</h1>
    <div class="lead">How to safely remove a PostgreSQL extension from a database cluster?</div>
	<p>To uninstall an extension, you typically need to perform the following steps:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">DROP</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">EXTENSION</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;&lt;extname&gt;&#34;</span><span style="color:#000;font-weight:bold">;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>Note that if there are other extensions or database objects dependent on this extension, you will need to uninstall/remove those dependencies first before uninstalling the extension.</p>
<p>Alternatively, you can use the following statement to forcefully uninstall the extension and its dependencies in one go:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">DROP</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">EXTENSION</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;&lt;extname&gt;&#34;</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">CASCADE</span><span style="color:#000;font-weight:bold">;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><blockquote>
<p>Note: The <code>CASCADE</code> option will delete all objects that depend on this extension, including database objects, functions, views, etc. Use with caution!</p>
</blockquote>
<p>If you wish to remove the extension&rsquo;s package, you can use your operating system&rsquo;s package manager to uninstall it:</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-c72b4718241a8b952d499a2e110ac0a6">9 - Pre-defined Stacks</h1>
    <div class="lead">How to use the predefined extension stacks in Pigsty?</div>
	
</div>



    
	
  



          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Mail" aria-label="Mail">
    <a target="_blank" rel="noopener" href="mailto:rh@vonng.com" aria-label="Mail">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="GitHub" aria-label="GitHub">
    <a target="_blank" rel="noopener" href="https://github.com/Vonng/pigsty" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Twitter" aria-label="Twitter">
    <a target="_blank" rel="noopener" href="https://twitter.com/PlGSTY" aria-label="Twitter">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="WeChat" aria-label="WeChat">
    <a target="_blank" rel="noopener" href="/img/pigsty/pigsty-cc.jpg" aria-label="WeChat">
      <i class="fa fa-comment"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Discord" aria-label="Discord">
    <a target="_blank" rel="noopener" href="https://discord.gg/wDzt5VyWEz" aria-label="Discord">
      <i class="fab fa-discord"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Telegram" aria-label="Telegram">
    <a target="_blank" rel="noopener" href="https://t.me/joinchat/gV9zfZraNPM3YjFh" aria-label="Telegram">
      <i class="fab fa-telegram"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        <span class="td-footer__copyright">&copy;
    2018&ndash;2025
    <span class="td-footer__authors">Ruohang Feng</span></span><span class="td-footer__all_rights_reserved">All Rights Reserved</span></span><span class="ms-2"><a href="https://vonng.com/en/" target="_blank" rel="noopener">@Vonng</a></span>
<br><span>Pigsty® distributed under <a href="/docs/about/license" target="_blank" rel="noopener">AGPLv3</a></span>
<br><span class="ms-2"><a href="/docs/about/privacy" target="_blank" rel="noopener">Privacy Policy</a></span>
<span><a href="http://beian.miit.gov.cn/" target="_blank" rel="noopener">浙ICP备15016890号</a></span>
      </div>
    </div>
  </div>
</footer>

    </div>
    <script src="/js/main.min.248655eb216150e39da254c2f7aa5357805d0ec66bdb741b591cd35fb5f629ab.js" integrity="sha256-JIZV6yFhUOOdolTC96pTV4BdDsZr23QbWRzTX7X2Kas=" crossorigin="anonymous"></script>
<script defer src="/js/click-to-copy.min.f724d3de49218995223b7316aa2e53e2b34bf42026bf399ebb21bb02212402d1.js" integrity="sha256-9yTT3kkhiZUiO3MWqi5T4rNL9CAmvzmeuyG7AiEkAtE=" crossorigin="anonymous"></script>
<script src='/js/tabpane-persist.js'></script>

  </body>
</html>
