<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Release Notes | Pigsty</title>
<meta name="description" content="Pigsty release note history">
<meta property="og:title" content="Release Notes" />
<meta property="og:description" content="Pigsty release note history" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/docs/releasenote/" /><meta property="article:section" content="docs" />

<meta property="article:modified_time" content="2025-01-13T15:35:25+08:00" />

<meta itemprop="name" content="Release Notes">
<meta itemprop="description" content="Pigsty release note history">
<meta itemprop="dateModified" content="2025-01-13T15:35:25+08:00" />
<meta itemprop="wordCount" content="14184">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Release Notes"/>
<meta name="twitter:description" content="Pigsty release note history"/>




<link rel="preload" href="/scss/main.min.194607c777ee31a481a26dfc3d1c65134dfc8eb296a0aae9d353b3bd5be6a683.css" as="style">
<link href="/scss/main.min.194607c777ee31a481a26dfc3d1c65134dfc8eb296a0aae9d353b3bd5be6a683.css" rel="stylesheet" integrity="">

<script
  src="/js/jquery-3.6.3.min.js"
  integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ=="
  crossorigin="anonymous"></script>
<script defer
  src="/js/lunr.min.js"
  integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli"
  crossorigin="anonymous"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LG1V9WTKGE"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-LG1V9WTKGE');
}
</script>
  </head>
  <body class="td-page">
    <header>
      <nav class="td-navbar navbar-dark js-navbar-scroll">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xl="http://www.w3.org/1999/xlink" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 24 24" width="24" height="24"><defs/><g id="32" fill="none" stroke-dasharray="none" fill-opacity="1" stroke-opacity="1" stroke="none"><title>32</title><g id="32_图层_2"><title>图层 2</title><g id="Group_17"><g id="Graphic_16"/><g id="Graphic_15"><path d="M7.666187 11.971335l2.165064-3.75H14.16138l2.165065 3.75-2.165065 3.75H9.831251z" fill="#bbb" fill-opacity=".9526367"/><path d="M7.666187 11.971335l2.165064-3.75H14.16138l2.165065 3.75-2.165065 3.75H9.831251z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_14"><path d="M7.666187 19.474806l2.165064-3.75H14.16138l2.165065 3.75-2.165065 3.75H9.831251z" fill="#de372c" fill-opacity=".8545852"/><path d="M7.666187 19.474806l2.165064-3.75H14.16138l2.165065 3.75-2.165065 3.75H9.831251z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_13"><path d="M14.161476 15.751202l2.165064-3.75h4.33013l2.165064 3.75-2.165064 3.75H16.32654z" fill="#424242" fill-opacity=".9016462"/><path d="M14.161476 15.751202l2.165064-3.75h4.33013l2.165064 3.75-2.165064 3.75H16.32654z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_12"><path d="M14.161476 8.226008 16.32654 4.4760076h4.33013L22.821734 8.226008l-2.165064 3.75H16.32654z" fill="#ffa269" fill-opacity=".8975772"/><path d="M14.161476 8.226008 16.32654 4.4760076h4.33013L22.821734 8.226008l-2.165064 3.75H16.32654z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_11"><path d="M7.666187 4.5 9.831251.75H14.16138L16.326445 4.5 14.16138 8.25H9.831251z" fill="#419edb" fill-opacity=".8979957"/><path d="M7.666187 4.5 9.831251.75H14.16138L16.326445 4.5 14.16138 8.25H9.831251z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_10"><path d="M1.1491742 8.226008 3.3142388 4.4760076H7.644368L9.809432 8.226008l-2.165064 3.75H3.3142388z" fill="#2f6793" fill-opacity=".9002511"/><path d="M1.1491742 8.226008 3.3142388 4.4760076H7.644368L9.809432 8.226008l-2.165064 3.75H3.3142388z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_9"><path d="M1.182071 15.741036l2.1650645-3.75h4.330129l2.1650645 3.75-2.1650645 3.75H3.3471355z" fill="#53ac79" fill-opacity=".9"/><path d="M1.182071 15.741036l2.1650645-3.75h4.330129l2.1650645 3.75-2.1650645 3.75H3.3471355z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g></g></g></g></svg></span><span class="navbar-brand__name">Pigsty</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link active" href="/docs/"><i class='fa-solid fa-book'></i><span>Docs</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/blog/"><i class="fas fa-blog"></i><span>Blog</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="https://github.com/Vonng/pigsty/" target="_blank" rel="noopener"><i class='fab fa-github'></i><span>GitHub</span></a>
      </li>
      <li class="nav-item dropdown d-none d-lg-block">
        <div class="dropdown">
  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <i class="fa-solid fa-language"></i>English</a>
  <ul class="dropdown-menu">
    <li><a class="dropdown-item" href="/zh/docs/releasenote/">中文</a></li>
    </ul>
</div>
</li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/offline-search-index.b40d8bc16bcda835248990ff9db38455.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            <div id="td-sidebar-menu" class="td-sidebar__inner">
  <form class="td-sidebar__search d-flex align-items-center">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/offline-search-index.b40d8bc16bcda835248990ff9db38455.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type="button" data-bs-toggle="collapse" data-bs-target="#td-section-nav" aria-controls="td-section-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="td-sidebar-nav collapse foldable-nav" id="td-section-nav">
    <div class="td-sidebar-nav__section nav-item dropdown d-block d-lg-none">
      <div class="dropdown">
  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <i class="fa-solid fa-language"></i>English</a>
  <ul class="dropdown-menu">
    <li><a class="dropdown-item" href="/zh/docs/releasenote/">中文</a></li>
    </ul>
</div>

    </div>
    <ul class="td-sidebar-nav__section pe-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docs-li">
  <a href="/docs/" title="Pigsty Document v3.2" class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-docs"><span class="">Docs</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docssetup-li">
  <input type="checkbox" id="m-docssetup-check"/>
  <label for="m-docssetup-check"><a href="/docs/setup/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docssetup"><i class="fas fa-rocket"></i><span class="">Getting Started</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docssetupinstall-li">
  <input type="checkbox" id="m-docssetupinstall-check"/>
  <label for="m-docssetupinstall-check"><a href="/docs/setup/install/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docssetupinstall"><i class="fa-solid fa-cloud-arrow-down"></i><span class="">Installation</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docssetupoffline-li">
  <input type="checkbox" id="m-docssetupoffline-check"/>
  <label for="m-docssetupoffline-check"><a href="/docs/setup/offline/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docssetupoffline"><i class="fa-solid fa-download"></i><span class="">Offline Install</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docssetupslim-li">
  <input type="checkbox" id="m-docssetupslim-check"/>
  <label for="m-docssetupslim-check"><a href="/docs/setup/slim/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docssetupslim"><i class="fa-solid fa-minimize"></i><span class="">Slim Installation</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docssetupconfig-li">
  <input type="checkbox" id="m-docssetupconfig-check"/>
  <label for="m-docssetupconfig-check"><a href="/docs/setup/config/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docssetupconfig"><i class="fa-solid fa-code"></i><span class="">Configuration</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docssetupprepare-li">
  <input type="checkbox" id="m-docssetupprepare-check"/>
  <label for="m-docssetupprepare-check"><a href="/docs/setup/prepare/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docssetupprepare"><i class="fa-solid fa-calculator"></i><span class="">Preparation</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docssetupplaybook-li">
  <input type="checkbox" id="m-docssetupplaybook-check"/>
  <label for="m-docssetupplaybook-check"><a href="/docs/setup/playbook/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docssetupplaybook"><i class="fa-solid fa-scroll"></i><span class="">Playbooks</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docssetupprovision-li">
  <input type="checkbox" id="m-docssetupprovision-check"/>
  <label for="m-docssetupprovision-check"><a href="/docs/setup/provision/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docssetupprovision"><i class="fa-solid fa-server"></i><span class="">Provisioning</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docssetupsecurity-li">
  <input type="checkbox" id="m-docssetupsecurity-check"/>
  <label for="m-docssetupsecurity-check"><a href="/docs/setup/security/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docssetupsecurity"><i class="fas fa-shield-halved"></i><span class="">Security</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docssetupfaq-li">
  <input type="checkbox" id="m-docssetupfaq-check"/>
  <label for="m-docssetupfaq-check"><a href="/docs/setup/faq/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docssetupfaq"><i class="fa-solid fa-circle-question"></i><span class="">FAQ</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsabout-li">
  <input type="checkbox" id="m-docsabout-check"/>
  <label for="m-docsabout-check"><a href="/docs/about/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsabout"><i class="fa-solid fa-circle-info"></i><span class="">About Pigsty</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsaboutfeature-li">
  <input type="checkbox" id="m-docsaboutfeature-check"/>
  <label for="m-docsaboutfeature-check"><a href="/docs/about/feature/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsaboutfeature"><i class="fa-solid fa-wand-magic-sparkles"></i><span class="">Features</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsaboutmodule-li">
  <input type="checkbox" id="m-docsaboutmodule-check"/>
  <label for="m-docsaboutmodule-check"><a href="/docs/about/module/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsaboutmodule"><i class="fa-solid fa-boxes-stacked"></i><span class="">Modules</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsaboutroadmap-li">
  <input type="checkbox" id="m-docsaboutroadmap-check"/>
  <label for="m-docsaboutroadmap-check"><a href="/docs/about/roadmap/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsaboutroadmap"><i class="fas fa-map"></i><span class="">Roadmap</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsabouthistory-li">
  <input type="checkbox" id="m-docsabouthistory-check"/>
  <label for="m-docsabouthistory-check"><a href="/docs/about/history/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsabouthistory"><i class="fa-solid fa-clock-rotate-left"></i><span class="">History</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsaboutevent-li">
  <input type="checkbox" id="m-docsaboutevent-check"/>
  <label for="m-docsaboutevent-check"><a href="/docs/about/event/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsaboutevent"><i class="fa-regular fa-newspaper"></i><span class="">Event &amp; News</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsaboutcommunity-li">
  <input type="checkbox" id="m-docsaboutcommunity-check"/>
  <label for="m-docsaboutcommunity-check"><a href="/docs/about/community/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsaboutcommunity"><i class="fas fa-user-group"></i><span class="">Community</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsaboutlicense-li">
  <input type="checkbox" id="m-docsaboutlicense-check"/>
  <label for="m-docsaboutlicense-check"><a href="/docs/about/license/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsaboutlicense"><i class="fas fa-balance-scale"></i><span class="">License</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsaboutsponsor-li">
  <input type="checkbox" id="m-docsaboutsponsor-check"/>
  <label for="m-docsaboutsponsor-check"><a href="/docs/about/sponsor/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsaboutsponsor"><i class="fas fa-heart"></i><span class="">Sponsorship</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsaboutprivacy-li">
  <input type="checkbox" id="m-docsaboutprivacy-check"/>
  <label for="m-docsaboutprivacy-check"><a href="/docs/about/privacy/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsaboutprivacy"><i class="fas fa-fingerprint"></i><span class="">Privacy Policy</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsaboutservice-li">
  <input type="checkbox" id="m-docsaboutservice-check"/>
  <label for="m-docsaboutservice-check"><a href="/docs/about/service/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsaboutservice"><i class="fas fa-briefcase"></i><span class="">Service</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsconcept-li">
  <input type="checkbox" id="m-docsconcept-check"/>
  <label for="m-docsconcept-check"><a href="/docs/concept/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsconcept"><i class="fa-solid fa-compass"></i><span class="">Concept</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconceptarch-li">
  <input type="checkbox" id="m-docsconceptarch-check"/>
  <label for="m-docsconceptarch-check"><a href="/docs/concept/arch/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsconceptarch"><i class="fa-solid fa-archway"></i><span class="">Architecture</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconceptmodel-li">
  <input type="checkbox" id="m-docsconceptmodel-check"/>
  <label for="m-docsconceptmodel-check"><a href="/docs/concept/model/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsconceptmodel"><i class="fa-solid fa-coins"></i><span class="">Cluster Model</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconceptca-li">
  <input type="checkbox" id="m-docsconceptca-check"/>
  <label for="m-docsconceptca-check"><a href="/docs/concept/ca/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsconceptca"><i class="fa-solid fa-bank"></i><span class="">Self-Signed CA</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconceptiac-li">
  <input type="checkbox" id="m-docsconceptiac-check"/>
  <label for="m-docsconceptiac-check"><a href="/docs/concept/iac/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsconceptiac"><i class="fa-solid fa-file-code"></i><span class="">Infra as Code</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconceptha-li">
  <input type="checkbox" id="m-docsconceptha-check"/>
  <label for="m-docsconceptha-check"><a href="/docs/concept/ha/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsconceptha"><i class="fa-solid fa-infinity"></i><span class="">High Availability</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconceptpitr-li">
  <input type="checkbox" id="m-docsconceptpitr-check"/>
  <label for="m-docsconceptpitr-check"><a href="/docs/concept/pitr/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsconceptpitr"><i class="fa-solid fa-clock-rotate-left"></i><span class="">Point-in-Time Recovery</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconceptsvc-li">
  <input type="checkbox" id="m-docsconceptsvc-check"/>
  <label for="m-docsconceptsvc-check"><a href="/docs/concept/svc/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsconceptsvc"><i class="fa-solid fa-arrow-down-up-across-line"></i><span class="">Services &amp; Access</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconceptac-li">
  <input type="checkbox" id="m-docsconceptac-check"/>
  <label for="m-docsconceptac-check"><a href="/docs/concept/ac/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsconceptac"><i class="fa-solid fa-lock"></i><span class="">Access Control</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsconf-li">
  <input type="checkbox" id="m-docsconf-check"/>
  <label for="m-docsconf-check"><a href="/docs/conf/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsconf"><i class="fa-solid fa-sliders"></i><span class="">Configuration</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconfoverview-li">
  <input type="checkbox" id="m-docsconfoverview-check"/>
  <label for="m-docsconfoverview-check"><a href="/docs/conf/overview/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsconfoverview"><i class="fa-solid fa-sliders"></i><span class="">Overview</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconfmeta-li">
  <input type="checkbox" id="m-docsconfmeta-check"/>
  <label for="m-docsconfmeta-check"><a href="/docs/conf/meta/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsconfmeta"><i class="fa-solid fa-dice-one"></i><span class="">1-node: meta</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconfrich-li">
  <input type="checkbox" id="m-docsconfrich-check"/>
  <label for="m-docsconfrich-check"><a href="/docs/conf/rich/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsconfrich"><i class="fa-solid fa-dice-one"></i><span class="">1-node: rich</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconfdemo-li">
  <input type="checkbox" id="m-docsconfdemo-check"/>
  <label for="m-docsconfdemo-check"><a href="/docs/conf/demo/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsconfdemo"><i class="fa-solid fa-dice-one"></i><span class="">1-node: demo</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconfpitr-li">
  <input type="checkbox" id="m-docsconfpitr-check"/>
  <label for="m-docsconfpitr-check"><a href="/docs/conf/pitr/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsconfpitr"><i class="fa-solid fa-dice-one"></i><span class="">1-node: pitr</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconfsupa-li">
  <input type="checkbox" id="m-docsconfsupa-check"/>
  <label for="m-docsconfsupa-check"><a href="/docs/conf/supa/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsconfsupa"><i class="fa-solid fa-dice-one"></i><span class="">1-node: supa</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconfbare-li">
  <input type="checkbox" id="m-docsconfbare-check"/>
  <label for="m-docsconfbare-check"><a href="/docs/conf/bare/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsconfbare"><i class="fa-solid fa-dice-one"></i><span class="">1-node: bare</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconffull-li">
  <input type="checkbox" id="m-docsconffull-check"/>
  <label for="m-docsconffull-check"><a href="/docs/conf/full/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsconffull"><i class="fa-solid fa-dice-four"></i><span class="">4-node: full</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconfsafe-li">
  <input type="checkbox" id="m-docsconfsafe-check"/>
  <label for="m-docsconfsafe-check"><a href="/docs/conf/safe/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsconfsafe"><i class="fa-solid fa-dice-four"></i><span class="">4-node: safe</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconfmssql-li">
  <input type="checkbox" id="m-docsconfmssql-check"/>
  <label for="m-docsconfmssql-check"><a href="/docs/conf/mssql/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsconfmssql"><i class="fa-solid fa-dice-four"></i><span class="">4-node: mssql</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconfpolar-li">
  <input type="checkbox" id="m-docsconfpolar-check"/>
  <label for="m-docsconfpolar-check"><a href="/docs/conf/polar/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsconfpolar"><i class="fa-solid fa-dice-four"></i><span class="">4-node: polar</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconfivory-li">
  <input type="checkbox" id="m-docsconfivory-check"/>
  <label for="m-docsconfivory-check"><a href="/docs/conf/ivory/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsconfivory"><i class="fa-solid fa-dice-four"></i><span class="">4-node: ivory</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconfminio-li">
  <input type="checkbox" id="m-docsconfminio-check"/>
  <label for="m-docsconfminio-check"><a href="/docs/conf/minio/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsconfminio"><i class="fa-solid fa-dice-four"></i><span class="">4-node: minio</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconfdual-li">
  <input type="checkbox" id="m-docsconfdual-check"/>
  <label for="m-docsconfdual-check"><a href="/docs/conf/dual/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsconfdual"><i class="fa-solid fa-dice-two"></i><span class="">2-node: dual</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconfslim-li">
  <input type="checkbox" id="m-docsconfslim-check"/>
  <label for="m-docsconfslim-check"><a href="/docs/conf/slim/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsconfslim"><i class="fa-solid fa-dice-two"></i><span class="">2-node: slim</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconftrio-li">
  <input type="checkbox" id="m-docsconftrio-check"/>
  <label for="m-docsconftrio-check"><a href="/docs/conf/trio/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsconftrio"><i class="fa-solid fa-dice-three"></i><span class="">3-node: trio</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconfoss-li">
  <input type="checkbox" id="m-docsconfoss-check"/>
  <label for="m-docsconfoss-check"><a href="/docs/conf/oss/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsconfoss"><i class="fa-solid fa-dice-five"></i><span class="">5-node: oss</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconfext-li">
  <input type="checkbox" id="m-docsconfext-check"/>
  <label for="m-docsconfext-check"><a href="/docs/conf/ext/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsconfext"><i class="fa-solid fa-dice-five"></i><span class="">5-node: ext</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconfsimu-li">
  <input type="checkbox" id="m-docsconfsimu-check"/>
  <label for="m-docsconfsimu-check"><a href="/docs/conf/simu/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsconfsimu"><i class="fa-solid fa-dice-four"></i><span class="">36-node: prod</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsreference-li">
  <input type="checkbox" id="m-docsreference-check"/>
  <label for="m-docsreference-check"><a href="/docs/reference/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsreference"><i class="fas fa-map"></i><span class="">References</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsreferencecompatibility-li">
  <input type="checkbox" id="m-docsreferencecompatibility-check"/>
  <label for="m-docsreferencecompatibility-check"><a href="/docs/reference/compatibility/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsreferencecompatibility"><i class="fa-brands fa-redhat"></i><span class="">Compatibility</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsreferenceparam-li">
  <input type="checkbox" id="m-docsreferenceparam-check"/>
  <label for="m-docsreferenceparam-check"><a href="/docs/reference/param/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsreferenceparam"><i class="fa-solid fa-terminal"></i><span class="">Parameters</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsreferenceextension-li">
  <input type="checkbox" id="m-docsreferenceextension-check"/>
  <label for="m-docsreferenceextension-check"><a href="/docs/reference/extension/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsreferenceextension"><i class="fa-brands fa-usb"></i><span class="">Extension List</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsreferencefhs-li">
  <input type="checkbox" id="m-docsreferencefhs-check"/>
  <label for="m-docsreferencefhs-check"><a href="/docs/reference/fhs/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsreferencefhs"><i class="fa-solid fa-folder-tree"></i><span class="">File Hierarchy</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsreferencecompare-li">
  <input type="checkbox" id="m-docsreferencecompare-check"/>
  <label for="m-docsreferencecompare-check"><a href="/docs/reference/compare/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsreferencecompare"><i class="fa-solid fa-circle-half-stroke"></i><span class="">Comparison</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsreferencecost-li">
  <input type="checkbox" id="m-docsreferencecost-check"/>
  <label for="m-docsreferencecost-check"><a href="/docs/reference/cost/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsreferencecost"><i class="fa-solid fa-sack-dollar"></i><span class="">Cost Analysis</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsreferenceglossary-li">
  <input type="checkbox" id="m-docsreferenceglossary-check"/>
  <label for="m-docsreferenceglossary-check"><a href="/docs/reference/glossary/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsreferenceglossary"><i class="fa-solid fa-list-ul"></i><span class="">Glossary</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docspgsql-li">
  <input type="checkbox" id="m-docspgsql-check"/>
  <label for="m-docspgsql-check"><a href="/docs/pgsql/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docspgsql"><i class="fas fa-database"></i><span class="">Module: PGSQL</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgsqlarch-li">
  <input type="checkbox" id="m-docspgsqlarch-check"/>
  <label for="m-docspgsqlarch-check"><a href="/docs/pgsql/arch/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgsqlarch"><i class="fa-solid fa-archway"></i><span class="">Architecture</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgsqluser-li">
  <input type="checkbox" id="m-docspgsqluser-check"/>
  <label for="m-docspgsqluser-check"><a href="/docs/pgsql/user/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgsqluser"><i class="fa-solid fa-users"></i><span class="">Users</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgsqldb-li">
  <input type="checkbox" id="m-docspgsqldb-check"/>
  <label for="m-docspgsqldb-check"><a href="/docs/pgsql/db/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgsqldb"><i class="fa-solid fa-coins"></i><span class="">Databases</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgsqlsvc-li">
  <input type="checkbox" id="m-docspgsqlsvc-check"/>
  <label for="m-docspgsqlsvc-check"><a href="/docs/pgsql/svc/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgsqlsvc"><i class="fa-solid fa-arrow-down-up-across-line"></i><span class="">Services</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgsqlextension-li">
  <input type="checkbox" id="m-docspgsqlextension-check"/>
  <label for="m-docspgsqlextension-check"><a href="/docs/pgsql/extension/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgsqlextension"><i class="fa-brands fa-usb"></i><span class="">Extensions</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgsqlhba-li">
  <input type="checkbox" id="m-docspgsqlhba-check"/>
  <label for="m-docspgsqlhba-check"><a href="/docs/pgsql/hba/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgsqlhba"><i class="fa-solid fa-key"></i><span class="">Authentication</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgsqlconfig-li">
  <input type="checkbox" id="m-docspgsqlconfig-check"/>
  <label for="m-docspgsqlconfig-check"><a href="/docs/pgsql/config/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgsqlconfig"><i class="fa-solid fa-code"></i><span class="">Configuration</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgsqlplaybook-li">
  <input type="checkbox" id="m-docspgsqlplaybook-check"/>
  <label for="m-docspgsqlplaybook-check"><a href="/docs/pgsql/playbook/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgsqlplaybook"><i class="fa-solid fa-scroll"></i><span class="">Playbook</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgsqladmin-li">
  <input type="checkbox" id="m-docspgsqladmin-check"/>
  <label for="m-docspgsqladmin-check"><a href="/docs/pgsql/admin/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgsqladmin"><i class="fa-solid fa-building-columns"></i><span class="">Administration</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgsqlacl-li">
  <input type="checkbox" id="m-docspgsqlacl-check"/>
  <label for="m-docspgsqlacl-check"><a href="/docs/pgsql/acl/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgsqlacl"><i class="fa-solid fa-lock"></i><span class="">Access Control</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgsqlpitr-li">
  <input type="checkbox" id="m-docspgsqlpitr-check"/>
  <label for="m-docspgsqlpitr-check"><a href="/docs/pgsql/pitr/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgsqlpitr"><i class="fa-solid fa-clock-rotate-left"></i><span class="">Backup &amp; PITR</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgsqlmigration-li">
  <input type="checkbox" id="m-docspgsqlmigration-check"/>
  <label for="m-docspgsqlmigration-check"><a href="/docs/pgsql/migration/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgsqlmigration"><i class="fa-solid fa-truck-moving"></i><span class="">Migration</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgsqlmonitor-li">
  <input type="checkbox" id="m-docspgsqlmonitor-check"/>
  <label for="m-docspgsqlmonitor-check"><a href="/docs/pgsql/monitor/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgsqlmonitor"><i class="fa-solid fa-binoculars"></i><span class="">Monitoring</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgsqldashboard-li">
  <input type="checkbox" id="m-docspgsqldashboard-check"/>
  <label for="m-docspgsqldashboard-check"><a href="/docs/pgsql/dashboard/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgsqldashboard"><i class="fa-solid fa-gauge-simple-high"></i><span class="">Dashboards</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgsqlmetric-li">
  <input type="checkbox" id="m-docspgsqlmetric-check"/>
  <label for="m-docspgsqlmetric-check"><a href="/docs/pgsql/metric/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgsqlmetric"><i class="fa-solid fa-list-check"></i><span class="">Metrics</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgsqlfaq-li">
  <input type="checkbox" id="m-docspgsqlfaq-check"/>
  <label for="m-docspgsqlfaq-check"><a href="/docs/pgsql/faq/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgsqlfaq"><i class="fa-solid fa-circle-question"></i><span class="">FAQ</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docskernel-li">
  <input type="checkbox" id="m-docskernel-check"/>
  <label for="m-docskernel-check"><a href="/docs/kernel/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docskernel"><i class="fas fa-gear"></i><span class="">Kernel: PGSQL</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskernelcitus-li">
  <input type="checkbox" id="m-docskernelcitus-check"/>
  <label for="m-docskernelcitus-check"><a href="/docs/kernel/citus/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docskernelcitus"><i class="fas fa-lemon"></i><span class="">Citus (Distributive)</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskernelbabelfish-li">
  <input type="checkbox" id="m-docskernelbabelfish-check"/>
  <label for="m-docskernelbabelfish-check"><a href="/docs/kernel/babelfish/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docskernelbabelfish"><i class="fab fa-microsoft"></i><span class="">WiltonDB (MSSQL)</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskernelivorysql-li">
  <input type="checkbox" id="m-docskernelivorysql-check"/>
  <label for="m-docskernelivorysql-check"><a href="/docs/kernel/ivorysql/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docskernelivorysql"><i class="fas fa-server"></i><span class="">IvorySQL (Oracle)</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskernelpolardb-li">
  <input type="checkbox" id="m-docskernelpolardb-check"/>
  <label for="m-docskernelpolardb-check"><a href="/docs/kernel/polardb/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docskernelpolardb"><i class="fas fa-paw"></i><span class="">PolarDB PG (RAC)</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskernelpolardb-o-li">
  <input type="checkbox" id="m-docskernelpolardb-o-check"/>
  <label for="m-docskernelpolardb-o-check"><a href="/docs/kernel/polardb-o/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docskernelpolardb-o"><i class="fas fa-paw"></i><span class="">PolarDB O(racle)</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskernelsupabase-li">
  <input type="checkbox" id="m-docskernelsupabase-check"/>
  <label for="m-docskernelsupabase-check"><a href="/docs/kernel/supabase/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docskernelsupabase"><i class="fas fa-bolt"></i><span class="">Supabase (Firebase)</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskernelgreenplum-li">
  <input type="checkbox" id="m-docskernelgreenplum-check"/>
  <label for="m-docskernelgreenplum-check"><a href="/docs/kernel/greenplum/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docskernelgreenplum"><i class="fas fa-leaf"></i><span class="">Greenplum (MPP)</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskernelcloudberry-li">
  <input type="checkbox" id="m-docskernelcloudberry-check"/>
  <label for="m-docskernelcloudberry-check"><a href="/docs/kernel/cloudberry/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docskernelcloudberry"><i class="fas fa-leaf"></i><span class="">Cloudberry (MPP)</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docskernelneon-li">
  <input type="checkbox" id="m-docskernelneon-check"/>
  <label for="m-docskernelneon-check"><a href="/docs/kernel/neon/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docskernelneon"><i class="fab fa-neos"></i><span class="">Neon (Serverless)</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docspgext-li">
  <input type="checkbox" id="m-docspgext-check"/>
  <label for="m-docspgext-check"><a href="/docs/pgext/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docspgext"><i class="fa-brands fa-usb"></i><span class="">Extension: PGSQL</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docspgextlist-li">
  <input type="checkbox" id="m-docspgextlist-check"/>
  <label for="m-docspgextlist-check"><a href="/docs/pgext/list/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docspgextlist"><i class="fa-solid fa-earth-asia"></i><span class="">Extension List</span></a></label>
  
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgextlistmeta-li">
  <input type="checkbox" id="m-docspgextlistmeta-check"/>
  <label for="m-docspgextlistmeta-check"><a href="/docs/pgext/list/meta/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgextlistmeta"><i class="fas fa-tags"></i><span class="">Metadata Desc</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgextlistrpm-li">
  <input type="checkbox" id="m-docspgextlistrpm-check"/>
  <label for="m-docspgextlistrpm-check"><a href="/docs/pgext/list/rpm/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgextlistrpm"><i class="fab fa-redhat"></i><span class="">RPM List</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgextlistdeb-li">
  <input type="checkbox" id="m-docspgextlistdeb-check"/>
  <label for="m-docspgextlistdeb-check"><a href="/docs/pgext/list/deb/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgextlistdeb"><i class="fab fa-debian"></i><span class="">DEB List</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgextlistcontrib-li">
  <input type="checkbox" id="m-docspgextlistcontrib-check"/>
  <label for="m-docspgextlistcontrib-check"><a href="/docs/pgext/list/contrib/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgextlistcontrib"><i class="fas fa-database"></i><span class="">Contrib List</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docspgextusage-li">
  <input type="checkbox" id="m-docspgextusage-check"/>
  <label for="m-docspgextusage-check"><a href="/docs/pgext/usage/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docspgextusage"><i class="fas fa-cloud-arrow-down"></i><span class="">Use Extension</span></a></label>
  
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgextusageintro-li">
  <input type="checkbox" id="m-docspgextusageintro-check"/>
  <label for="m-docspgextusageintro-check"><a href="/docs/pgext/usage/intro/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgextusageintro"><i class="fas fa-boxes-stacked"></i><span class="">Get Started</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgextusagedownload-li">
  <input type="checkbox" id="m-docspgextusagedownload-check"/>
  <label for="m-docspgextusagedownload-check"><a href="/docs/pgext/usage/download/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgextusagedownload"><i class="fas fa-boxes-stacked"></i><span class="">Download Extension</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgextusagerepo-li">
  <input type="checkbox" id="m-docspgextusagerepo-check"/>
  <label for="m-docspgextusagerepo-check"><a href="/docs/pgext/usage/repo/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgextusagerepo"><i class="fas fa-boxes-stacked"></i><span class="">Extension Repo</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgextusageinstall-li">
  <input type="checkbox" id="m-docspgextusageinstall-check"/>
  <label for="m-docspgextusageinstall-check"><a href="/docs/pgext/usage/install/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgextusageinstall"><i class="fas fa-boxes-stacked"></i><span class="">Install Extension</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgextusageload-li">
  <input type="checkbox" id="m-docspgextusageload-check"/>
  <label for="m-docspgextusageload-check"><a href="/docs/pgext/usage/load/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgextusageload"><i class="fas fa-boxes-stacked"></i><span class="">Load Extension</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgextusagecreate-li">
  <input type="checkbox" id="m-docspgextusagecreate-check"/>
  <label for="m-docspgextusagecreate-check"><a href="/docs/pgext/usage/create/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgextusagecreate"><i class="fas fa-boxes-stacked"></i><span class="">Create Extension</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgextusageupdate-li">
  <input type="checkbox" id="m-docspgextusageupdate-check"/>
  <label for="m-docspgextusageupdate-check"><a href="/docs/pgext/usage/update/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgextusageupdate"><i class="fas fa-boxes-stacked"></i><span class="">Update Extension</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgextusageremove-li">
  <input type="checkbox" id="m-docspgextusageremove-check"/>
  <label for="m-docspgextusageremove-check"><a href="/docs/pgext/usage/remove/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgextusageremove"><i class="fas fa-boxes-stacked"></i><span class="">Remove Extension</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgextusagestack-li">
  <input type="checkbox" id="m-docspgextusagestack-check"/>
  <label for="m-docspgextusagestack-check"><a href="/docs/pgext/usage/stack/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgextusagestack"><i class="fab fa-stack-overflow"></i><span class="">Pre-defined Stacks</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docspgextbuild-li">
  <input type="checkbox" id="m-docspgextbuild-check"/>
  <label for="m-docspgextbuild-check"><a href="/docs/pgext/build/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docspgextbuild"><i class="fas fa-screwdriver-wrench"></i><span class="">Build &amp; Packaging</span></a></label>
  
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgextbuildenv-li">
  <input type="checkbox" id="m-docspgextbuildenv-check"/>
  <label for="m-docspgextbuildenv-check"><a href="/docs/pgext/build/env/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgextbuildenv"><span class="">Building Environment</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgextbuildrust-li">
  <input type="checkbox" id="m-docspgextbuildrust-check"/>
  <label for="m-docspgextbuildrust-check"><a href="/docs/pgext/build/rust/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgextbuildrust"><span class="">Prepare rust &amp; pgrx</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgextbuildplv8-li">
  <input type="checkbox" id="m-docspgextbuildplv8-check"/>
  <label for="m-docspgextbuildplv8-check"><a href="/docs/pgext/build/plv8/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgextbuildplv8"><span class="">Build PLv8</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgextbuildpgml-li">
  <input type="checkbox" id="m-docspgextbuildpgml-check"/>
  <label for="m-docspgextbuildpgml-check"><a href="/docs/pgext/build/pgml/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgextbuildpgml"><span class="">Build PostgresML</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgextbuildparadedb-li">
  <input type="checkbox" id="m-docspgextbuildparadedb-check"/>
  <label for="m-docspgextbuildparadedb-check"><a href="/docs/pgext/build/paradedb/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgextbuildparadedb"><span class="">Build ParadeDB</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgextbuildduckdb_fdw-li">
  <input type="checkbox" id="m-docspgextbuildduckdb_fdw-check"/>
  <label for="m-docspgextbuildduckdb_fdw-check"><a href="/docs/pgext/build/duckdb_fdw/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgextbuildduckdb_fdw"><span class="">Build DuckDB FDW</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspgextbuildparquet_s3_fdw-li">
  <input type="checkbox" id="m-docspgextbuildparquet_s3_fdw-check"/>
  <label for="m-docspgextbuildparquet_s3_fdw-check"><a href="/docs/pgext/build/parquet_s3_fdw/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docspgextbuildparquet_s3_fdw"><span class="">Build Parquet S3 FDW</span></a></label>
  
</li>
  </ul>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsinfra-li">
  <input type="checkbox" id="m-docsinfra-check"/>
  <label for="m-docsinfra-check"><a href="/docs/infra/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsinfra"><i class="fas fa-bank"></i><span class="">Module: INFRA</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsinframetric-li">
  <input type="checkbox" id="m-docsinframetric-check"/>
  <label for="m-docsinframetric-check"><a href="/docs/infra/metric/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsinframetric"><i class="fa-solid fa-list-check"></i><span class="">Metrics</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsinfrafaq-li">
  <input type="checkbox" id="m-docsinfrafaq-check"/>
  <label for="m-docsinfrafaq-check"><a href="/docs/infra/faq/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsinfrafaq"><i class="fa-solid fa-circle-question"></i><span class="">FAQ</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsnode-li">
  <input type="checkbox" id="m-docsnode-check"/>
  <label for="m-docsnode-check"><a href="/docs/node/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsnode"><i class="fas fa-server"></i><span class="">Module: NODE</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsnodemetric-li">
  <input type="checkbox" id="m-docsnodemetric-check"/>
  <label for="m-docsnodemetric-check"><a href="/docs/node/metric/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsnodemetric"><i class="fa-solid fa-list-check"></i><span class="">Metrics</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsnodefaq-li">
  <input type="checkbox" id="m-docsnodefaq-check"/>
  <label for="m-docsnodefaq-check"><a href="/docs/node/faq/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsnodefaq"><i class="fa-solid fa-circle-question"></i><span class="">FAQ</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsetcd-li">
  <input type="checkbox" id="m-docsetcd-check"/>
  <label for="m-docsetcd-check"><a href="/docs/etcd/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsetcd"><i class="fas fa-gears"></i><span class="">Module: ETCD</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsetcdconfig-li">
  <input type="checkbox" id="m-docsetcdconfig-check"/>
  <label for="m-docsetcdconfig-check"><a href="/docs/etcd/config/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsetcdconfig"><i class="fa-solid fa-code"></i><span class="">Configuration</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsetcdparam-li">
  <input type="checkbox" id="m-docsetcdparam-check"/>
  <label for="m-docsetcdparam-check"><a href="/docs/etcd/param/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsetcdparam"><i class="fa-solid fa-terminal"></i><span class="">Parameters</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsetcdplaybook-li">
  <input type="checkbox" id="m-docsetcdplaybook-check"/>
  <label for="m-docsetcdplaybook-check"><a href="/docs/etcd/playbook/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsetcdplaybook"><i class="fa-solid fa-scroll"></i><span class="">Playbook</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsetcdadmin-li">
  <input type="checkbox" id="m-docsetcdadmin-check"/>
  <label for="m-docsetcdadmin-check"><a href="/docs/etcd/admin/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsetcdadmin"><i class="fa-solid fa-building-columns"></i><span class="">Administration</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsetcdmonitor-li">
  <input type="checkbox" id="m-docsetcdmonitor-check"/>
  <label for="m-docsetcdmonitor-check"><a href="/docs/etcd/monitor/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsetcdmonitor"><i class="fa-solid fa-binoculars"></i><span class="">Monitoring</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsetcdmetric-li">
  <input type="checkbox" id="m-docsetcdmetric-check"/>
  <label for="m-docsetcdmetric-check"><a href="/docs/etcd/metric/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsetcdmetric"><i class="fa-solid fa-list-check"></i><span class="">Metrics</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsetcdfaq-li">
  <input type="checkbox" id="m-docsetcdfaq-check"/>
  <label for="m-docsetcdfaq-check"><a href="/docs/etcd/faq/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsetcdfaq"><i class="fa-solid fa-circle-question"></i><span class="">FAQ</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsminio-li">
  <input type="checkbox" id="m-docsminio-check"/>
  <label for="m-docsminio-check"><a href="/docs/minio/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsminio"><i class="fas fa-boxes-stacked"></i><span class="">Module: MINIO</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsminiousage-li">
  <input type="checkbox" id="m-docsminiousage-check"/>
  <label for="m-docsminiousage-check"><a href="/docs/minio/usage/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsminiousage"><i class="fa-solid fa-bell-concierge"></i><span class="">Usage</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsminioconfig-li">
  <input type="checkbox" id="m-docsminioconfig-check"/>
  <label for="m-docsminioconfig-check"><a href="/docs/minio/config/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsminioconfig"><i class="fa-solid fa-code"></i><span class="">Configuration</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsminioparam-li">
  <input type="checkbox" id="m-docsminioparam-check"/>
  <label for="m-docsminioparam-check"><a href="/docs/minio/param/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsminioparam"><i class="fa-solid fa-terminal"></i><span class="">Parameters</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsminioplaybook-li">
  <input type="checkbox" id="m-docsminioplaybook-check"/>
  <label for="m-docsminioplaybook-check"><a href="/docs/minio/playbook/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsminioplaybook"><i class="fa-solid fa-scroll"></i><span class="">Playbook</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsminioadmin-li">
  <input type="checkbox" id="m-docsminioadmin-check"/>
  <label for="m-docsminioadmin-check"><a href="/docs/minio/admin/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsminioadmin"><i class="fa-solid fa-building-columns"></i><span class="">Administration</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsminiomonitor-li">
  <input type="checkbox" id="m-docsminiomonitor-check"/>
  <label for="m-docsminiomonitor-check"><a href="/docs/minio/monitor/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsminiomonitor"><i class="fa-solid fa-binoculars"></i><span class="">Monitoring</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsminiometric-li">
  <input type="checkbox" id="m-docsminiometric-check"/>
  <label for="m-docsminiometric-check"><a href="/docs/minio/metric/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsminiometric"><i class="fa-solid fa-list-check"></i><span class="">Metrics</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsminiofaq-li">
  <input type="checkbox" id="m-docsminiofaq-check"/>
  <label for="m-docsminiofaq-check"><a href="/docs/minio/faq/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsminiofaq"><i class="fa-solid fa-circle-question"></i><span class="">FAQ</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsredis-li">
  <input type="checkbox" id="m-docsredis-check"/>
  <label for="m-docsredis-check"><a href="/docs/redis/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsredis"><i class="fas fa-layer-group"></i><span class="">Module: REDIS</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsredismetric-li">
  <input type="checkbox" id="m-docsredismetric-check"/>
  <label for="m-docsredismetric-check"><a href="/docs/redis/metric/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsredismetric"><i class="fa-solid fa-list-check"></i><span class="">Metrics</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsredisfaq-li">
  <input type="checkbox" id="m-docsredisfaq-check"/>
  <label for="m-docsredisfaq-check"><a href="/docs/redis/faq/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsredisfaq"><i class="fa-solid fa-circle-question"></i><span class="">FAQ</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsferret-li">
  <input type="checkbox" id="m-docsferret-check"/>
  <label for="m-docsferret-check"><a href="/docs/ferret/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsferret"><i class="fas fa-leaf"></i><span class="">Module: FERRET</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsferretmetric-li">
  <input type="checkbox" id="m-docsferretmetric-check"/>
  <label for="m-docsferretmetric-check"><a href="/docs/ferret/metric/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsferretmetric"><i class="fa-solid fa-list-check"></i><span class="">Metrics</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsferretfaq-li">
  <input type="checkbox" id="m-docsferretfaq-check"/>
  <label for="m-docsferretfaq-check"><a href="/docs/ferret/faq/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsferretfaq"><i class="fa-solid fa-circle-question"></i><span class="">FAQ</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsdocker-li">
  <input type="checkbox" id="m-docsdocker-check"/>
  <label for="m-docsdocker-check"><a href="/docs/docker/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsdocker"><i class="fa-brands fa-docker"></i><span class="">Module: DOCKER</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdockermetric-li">
  <input type="checkbox" id="m-docsdockermetric-check"/>
  <label for="m-docsdockermetric-check"><a href="/docs/docker/metric/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsdockermetric"><i class="fa-solid fa-list-check"></i><span class="">Metrics</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdockerfaq-li">
  <input type="checkbox" id="m-docsdockerfaq-check"/>
  <label for="m-docsdockerfaq-check"><a href="/docs/docker/faq/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsdockerfaq"><i class="fa-solid fa-circle-question"></i><span class="">FAQ</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docspro-li">
  <input type="checkbox" id="m-docspro-check"/>
  <label for="m-docspro-check"><a href="/docs/pro/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docspro"><i class="fas fa-flask-vial"></i><span class="">Module: Pro/Beta</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docspromysql-li">
  <input type="checkbox" id="m-docspromysql-check"/>
  <label for="m-docspromysql-check"><a href="/docs/pro/mysql/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docspromysql"><i class="fas fa-fish"></i><span class="">Module: MySQL</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsprokafka-li">
  <input type="checkbox" id="m-docsprokafka-check"/>
  <label for="m-docsprokafka-check"><a href="/docs/pro/kafka/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsprokafka"><i class="fas fa-share-nodes"></i><span class="">Module: Kafka</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsproduckdb-li">
  <input type="checkbox" id="m-docsproduckdb-check"/>
  <label for="m-docsproduckdb-check"><a href="/docs/pro/duckdb/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsproduckdb"><i class="fas fa-crow"></i><span class="">Module: DuckDB</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsprotigerbeetle-li">
  <input type="checkbox" id="m-docsprotigerbeetle-check"/>
  <label for="m-docsprotigerbeetle-check"><a href="/docs/pro/tigerbeetle/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsprotigerbeetle"><i class="fas fa-bug"></i><span class="">Module: TigerBeetle</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsprokube-li">
  <input type="checkbox" id="m-docsprokube-check"/>
  <label for="m-docsprokube-check"><a href="/docs/pro/kube/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsprokube"><i class="fas fa-dharmachakra"></i><span class="">Module: Kubernetes</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsproconsul-li">
  <input type="checkbox" id="m-docsproconsul-check"/>
  <label for="m-docsproconsul-check"><a href="/docs/pro/consul/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsproconsul"><i class="fas fa-c"></i><span class="">Module: Consul</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsprovictoria-li">
  <input type="checkbox" id="m-docsprovictoria-check"/>
  <label for="m-docsprovictoria-check"><a href="/docs/pro/victoria/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsprovictoria"><i class="fas fa-layer-group"></i><span class="">Module: Victoria</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsprojupyter-li">
  <input type="checkbox" id="m-docsprojupyter-check"/>
  <label for="m-docsprojupyter-check"><a href="/docs/pro/jupyter/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsprojupyter"><i class="fab fa-python"></i><span class="">Module: Jupyter</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docstasks-li">
  <input type="checkbox" id="m-docstasks-check"/>
  <label for="m-docstasks-check"><a href="/docs/tasks/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docstasks"><i class="fas fa-tasks"></i><span class="">Task &amp; Tutorial</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docstasksnginx-li">
  <input type="checkbox" id="m-docstasksnginx-check"/>
  <label for="m-docstasksnginx-check"><a href="/docs/tasks/nginx/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docstasksnginx"><i class="fa-solid fa-arrow-right-from-bracket"></i><span class="">Nginx: Expose Web Service</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docstasksdocker-li">
  <input type="checkbox" id="m-docstasksdocker-check"/>
  <label for="m-docstasksdocker-check"><a href="/docs/tasks/docker/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docstasksdocker"><i class="fa-brands fa-docker"></i><span class="">Docker: Container Support &amp; Proxy</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docstasksansible-li">
  <input type="checkbox" id="m-docstasksansible-check"/>
  <label for="m-docstasksansible-check"><a href="/docs/tasks/ansible/" title="Use PostgreSQL as Ansible Config Inventory CMDB" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docstasksansible"><i class="fa-solid fa-database"></i><span class="">Ansible: Use PG as CMDB</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docstasksgrafana-li">
  <input type="checkbox" id="m-docstasksgrafana-check"/>
  <label for="m-docstasksgrafana-check"><a href="/docs/tasks/grafana/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docstasksgrafana"><i class="fa-solid fa-microscope"></i><span class="">Use PG as Grafana Backend</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docstaskspromscale-li">
  <input type="checkbox" id="m-docstaskspromscale-check"/>
  <label for="m-docstaskspromscale-check"><a href="/docs/tasks/promscale/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docstaskspromscale"><i class="fa-solid fa-truck-moving"></i><span class="">Use PG as Prometheus Backend</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docstasksnode-vip-li">
  <input type="checkbox" id="m-docstasksnode-vip-check"/>
  <label for="m-docstasksnode-vip-check"><a href="/docs/tasks/node-vip/" title="Bind a L2 VIP to Node Cluster with Keepalived" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docstasksnode-vip"><i class="fa-solid fa-share-nodes"></i><span class="">NODE VIP: Bind a L2 VIP</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docstaskspg-vip-li">
  <input type="checkbox" id="m-docstaskspg-vip-check"/>
  <label for="m-docstaskspg-vip-check"><a href="/docs/tasks/pg-vip/" title="Bind a L2 VIP to PostgreSQL Primary with VIP-Manager" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docstaskspg-vip"><i class="fa-solid fa-arrows-split-up-and-left"></i><span class="">PGSQL VIP: Bind a L2 VIP</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docssoftware-li">
  <input type="checkbox" id="m-docssoftware-check"/>
  <label for="m-docssoftware-check"><a href="/docs/software/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docssoftware"><i class="fa-brands fa-docker"></i><span class="">Software &amp; Tools</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docssoftwaredify-li">
  <input type="checkbox" id="m-docssoftwaredify-check"/>
  <label for="m-docssoftwaredify-check"><a href="/docs/software/dify/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docssoftwaredify"><span class="">Dify: AI Workflow and LLMOps</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docssoftwareodoo-li">
  <input type="checkbox" id="m-docssoftwareodoo-check"/>
  <label for="m-docssoftwareodoo-check"><a href="/docs/software/odoo/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docssoftwareodoo"><span class="">Odoo: OSS ERP for Enterprise</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docssoftwaresupabase-li">
  <input type="checkbox" id="m-docssoftwaresupabase-check"/>
  <label for="m-docssoftwaresupabase-check"><a href="/docs/software/supabase/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docssoftwaresupabase"><span class="">Supabase: Self-Hosting OSS Firebase</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docssoftwarekong-li">
  <input type="checkbox" id="m-docssoftwarekong-check"/>
  <label for="m-docssoftwarekong-check"><a href="/docs/software/kong/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docssoftwarekong"><span class="">Kong: the Nginx API Gateway</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docssoftwarejupyter-li">
  <input type="checkbox" id="m-docssoftwarejupyter-check"/>
  <label for="m-docssoftwarejupyter-check"><a href="/docs/software/jupyter/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docssoftwarejupyter"><span class="">Jupyter: AI Notebook &amp; IDE</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docssoftwaregitea-li">
  <input type="checkbox" id="m-docssoftwaregitea-check"/>
  <label for="m-docssoftwaregitea-check"><a href="/docs/software/gitea/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docssoftwaregitea"><span class="">Gitea: Simple Self-Hosting Git Service</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docssoftwarewiki-li">
  <input type="checkbox" id="m-docssoftwarewiki-check"/>
  <label for="m-docssoftwarewiki-check"><a href="/docs/software/wiki/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docssoftwarewiki"><span class="">Wiki.js: OSS Wiki Software</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docssoftwareminio-li">
  <input type="checkbox" id="m-docssoftwareminio-check"/>
  <label for="m-docssoftwareminio-check"><a href="/docs/software/minio/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docssoftwareminio"><span class="">Minio: OSS AWS S3 Alternative</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docssoftwarebytebase-li">
  <input type="checkbox" id="m-docssoftwarebytebase-check"/>
  <label for="m-docssoftwarebytebase-check"><a href="/docs/software/bytebase/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docssoftwarebytebase"><span class="">ByteBase: PG Schema Migration</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docssoftwarepgadmin-li">
  <input type="checkbox" id="m-docssoftwarepgadmin-check"/>
  <label for="m-docssoftwarepgadmin-check"><a href="/docs/software/pgadmin/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docssoftwarepgadmin"><span class="">PGAdmin4: PG Admin GUI Tool</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docssoftwarepostgrest-li">
  <input type="checkbox" id="m-docssoftwarepostgrest-check"/>
  <label for="m-docssoftwarepostgrest-check"><a href="/docs/software/postgrest/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docssoftwarepostgrest"><span class="">PostgREST: Generate REST API from Schema</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docssoftwareschemaspy-li">
  <input type="checkbox" id="m-docssoftwareschemaspy-check"/>
  <label for="m-docssoftwareschemaspy-check"><a href="/docs/software/schemaspy/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docssoftwareschemaspy"><span class="">SchemaSPY: Dump &amp; Visualize PG Schema</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docssoftwarepgweb-li">
  <input type="checkbox" id="m-docssoftwarepgweb-check"/>
  <label for="m-docssoftwarepgweb-check"><a href="/docs/software/pgweb/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docssoftwarepgweb"><span class="">PGWeb: Browser-based PG Client</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docssoftwarediscourse-li">
  <input type="checkbox" id="m-docssoftwarediscourse-check"/>
  <label for="m-docssoftwarediscourse-check"><a href="/docs/software/discourse/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docssoftwarediscourse"><span class="">Discourse: OSS Forum Software</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docssoftwaregitlab-li">
  <input type="checkbox" id="m-docssoftwaregitlab-check"/>
  <label for="m-docssoftwaregitlab-check"><a href="/docs/software/gitlab/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docssoftwaregitlab"><span class="">GitLab: OSS GitHub Alternative</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsapplet-li">
  <input type="checkbox" id="m-docsapplet-check"/>
  <label for="m-docsapplet-check"><a href="/docs/applet/" class="align-left ps-0  td-sidebar-link td-sidebar-link__section" id="m-docsapplet"><i class="fa-solid fa-chart-line"></i><span class="">Visualization Applet</span></a></label>
  
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsappletpglog-li">
  <input type="checkbox" id="m-docsappletpglog-check"/>
  <label for="m-docsappletpglog-check"><a href="/docs/applet/pglog/" title="Analyse CSVLOG Sample with the built-in PGLOG" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsappletpglog"><span class="">PGLOG CSVLOG Analysis</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsappletisd-li">
  <input type="checkbox" id="m-docsappletisd-check"/>
  <label for="m-docsappletisd-check"><a href="/docs/applet/isd/" title="NOAA ISD Station" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsappletisd"><span class="">Visualize ISD Weather Data</span></a></label>
  
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsappletcovid-li">
  <input type="checkbox" id="m-docsappletcovid-check"/>
  <label for="m-docsappletcovid-check"><a href="/docs/applet/covid/" class="align-left ps-0  td-sidebar-link td-sidebar-link__page" id="m-docsappletcovid"><span class="">WHO COVID-19 Data Analysis</span></a></label>
  
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-docsreleasenote-li">
  <input type="checkbox" id="m-docsreleasenote-check" checked/>
  <label for="m-docsreleasenote-check"><a href="/docs/releasenote/" class="align-left ps-0  active td-sidebar-link td-sidebar-link__page" id="m-docsreleasenote"><i class="fa-regular fa-clipboard"></i><span class="td-sidebar-nav-active-item">Release Notes</span></a></label>
  
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            <div class="td-page-meta ms-2 pb-1 pt-2 mb-0">
<a href="https://github.com/Vonng/pigsty.cc/tree/main/content/en/docs/releasenote.md" class="td-page-meta--view td-page-meta__view" target="_blank" rel="noopener"><i class="fa-solid fa-file-lines fa-fw"></i> View page source</a>
  <a href="https://github.com/Vonng/pigsty.cc/edit/main/content/en/docs/releasenote.md" class="td-page-meta--edit td-page-meta__edit" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit this page</a>
  <a href="https://github.com/Vonng/pigsty.cc/new/main/content/en/docs?filename=change-me.md&amp;value=---%0Atitle%3A&#43;%22Long&#43;Page&#43;Title%22%0AlinkTitle%3A&#43;%22Short&#43;Nav&#43;Title%22%0Aweight%3A&#43;100%0Adescription%3A&#43;%3E-%0A&#43;&#43;&#43;&#43;&#43;Page&#43;description&#43;for&#43;heading&#43;and&#43;indexes.%0A---%0A%0A%23%23&#43;Heading%0A%0AEdit&#43;this&#43;template&#43;to&#43;create&#43;your&#43;new&#43;page.%0A%0A%2A&#43;Give&#43;it&#43;a&#43;good&#43;name%2C&#43;ending&#43;in&#43;%60.md%60&#43;-&#43;e.g.&#43;%60getting-started.md%60%0A%2A&#43;Edit&#43;the&#43;%22front&#43;matter%22&#43;section&#43;at&#43;the&#43;top&#43;of&#43;the&#43;page&#43;%28weight&#43;controls&#43;how&#43;its&#43;ordered&#43;amongst&#43;other&#43;pages&#43;in&#43;the&#43;same&#43;directory%3B&#43;lowest&#43;number&#43;first%29.%0A%2A&#43;Add&#43;a&#43;good&#43;commit&#43;message&#43;at&#43;the&#43;bottom&#43;of&#43;the&#43;page&#43;%28%3C80&#43;characters%3B&#43;use&#43;the&#43;extended&#43;description&#43;field&#43;for&#43;more&#43;detail%29.%0A%2A&#43;Create&#43;a&#43;new&#43;branch&#43;so&#43;you&#43;can&#43;preview&#43;your&#43;new&#43;file&#43;and&#43;request&#43;a&#43;review&#43;via&#43;Pull&#43;Request.%0A" class="td-page-meta--child td-page-meta__child" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Create child page</a>
  <a href="https://github.com/Vonng/pigsty.cc/issues/new?title=Release%20Notes" class="td-page-meta--issue td-page-meta__issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> Create documentation issue</a>
  <a href="https://github.com/Vonng/pigsty/issues/new" class="td-page-meta--project td-page-meta__project-issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> Create project issue</a>
  <a id="print" href="/docs/_print/"><i class="fa-solid fa-print fa-fw"></i> Print entire section</a>

</div>

            <div class="td-toc">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#v321">v3.2.1</a></li>
    <li><a href="#v320">v3.2.0</a></li>
    <li><a href="#v310">v3.1.0</a></li>
    <li><a href="#v304">v3.0.4</a></li>
    <li><a href="#v303">v3.0.3</a></li>
    <li><a href="#v302">v3.0.2</a></li>
    <li><a href="#v301">v3.0.1</a></li>
    <li><a href="#v300">v3.0.0</a></li>
    <li><a href="#v270">v2.7.0</a></li>
    <li><a href="#v260">v2.6.0</a></li>
    <li><a href="#v251">v2.5.1</a></li>
    <li><a href="#v250">v2.5.0</a></li>
    <li><a href="#v241">v2.4.1</a></li>
    <li><a href="#v240">v2.4.0</a></li>
    <li><a href="#v231">v2.3.1</a></li>
    <li><a href="#v230">v2.3.0</a></li>
    <li><a href="#v220">v2.2.0</a></li>
    <li><a href="#v210">v2.1.0</a></li>
    <li><a href="#v202">v2.0.2</a></li>
    <li><a href="#v201">v2.0.1</a></li>
    <li><a href="#v200">v2.0.0</a></li>
    <li><a href="#v151">v1.5.1</a></li>
    <li><a href="#v150">v1.5.0</a></li>
    <li><a href="#v141">v1.4.1</a></li>
    <li><a href="#v140">v1.4.0</a></li>
    <li><a href="#v131">v1.3.1</a></li>
    <li><a href="#v130">v1.3.0</a></li>
    <li><a href="#v120">v1.2.0</a></li>
    <li><a href="#v111">v1.1.1</a></li>
    <li><a href="#v110">v1.1.0</a></li>
    <li><a href="#v101">v1.0.1</a></li>
    <li><a href="#v100">v1.0.0</a></li>
    <li><a href="#v090">v0.9.0</a></li>
    <li><a href="#v080">v0.8.0</a></li>
    <li><a href="#v070">v0.7.0</a></li>
    <li><a href="#v060">v0.6.0</a></li>
    <li><a href="#v050">v0.5.0</a></li>
    <li><a href="#v040">v0.4.0</a></li>
    <li><a href="#v030">v0.3.0</a></li>
  </ul>
</nav>
      </div>
    
            <div class="taxonomy taxonomy-terms-cloud taxo-module">
      <h5 class="taxonomy-title">Modules</h5>
      <ul class="taxonomy-terms">
        <li><a class="taxonomy-term" href="/module/app/" data-taxonomy-term="app"><span class="taxonomy-label">APP</span><span class="taxonomy-count">4</span></a></li>
        <li><a class="taxonomy-term" href="/module/blog/" data-taxonomy-term="blog"><span class="taxonomy-label">BLOG</span><span class="taxonomy-count">5</span></a></li>
        <li><a class="taxonomy-term" href="/module/docker/" data-taxonomy-term="docker"><span class="taxonomy-label">DOCKER</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="/module/etcd/" data-taxonomy-term="etcd"><span class="taxonomy-label">ETCD</span><span class="taxonomy-count">7</span></a></li>
        <li><a class="taxonomy-term" href="/module/infra/" data-taxonomy-term="infra"><span class="taxonomy-label">INFRA</span><span class="taxonomy-count">10</span></a></li>
        <li><a class="taxonomy-term" href="/module/jupyter/" data-taxonomy-term="jupyter"><span class="taxonomy-label">JUPYTER</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/module/kafka/" data-taxonomy-term="kafka"><span class="taxonomy-label">KAFKA</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/module/minio/" data-taxonomy-term="minio"><span class="taxonomy-label">MINIO</span><span class="taxonomy-count">7</span></a></li>
        <li><a class="taxonomy-term" href="/module/mongo/" data-taxonomy-term="mongo"><span class="taxonomy-label">MONGO</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="/module/mysql/" data-taxonomy-term="mysql"><span class="taxonomy-label">MYSQL</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/module/node/" data-taxonomy-term="node"><span class="taxonomy-label">NODE</span><span class="taxonomy-count">5</span></a></li>
        <li><a class="taxonomy-term" href="/module/pgsql/" data-taxonomy-term="pgsql"><span class="taxonomy-label">PGSQL</span><span class="taxonomy-count">59</span></a></li>
        <li><a class="taxonomy-term" href="/module/pigsty/" data-taxonomy-term="pigsty"><span class="taxonomy-label">PIGSTY</span><span class="taxonomy-count">43</span></a></li>
        <li><a class="taxonomy-term" href="/module/redis/" data-taxonomy-term="redis"><span class="taxonomy-label">REDIS</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="/module/software/" data-taxonomy-term="software"><span class="taxonomy-label">SOFTWARE</span><span class="taxonomy-count">16</span></a></li>
        <li><a class="taxonomy-term" href="/module/tigerbeetle/" data-taxonomy-term="tigerbeetle"><span class="taxonomy-label">TigerBeetle</span><span class="taxonomy-count">4</span></a></li>
        <li><a class="taxonomy-term" href="/module/victoria/" data-taxonomy-term="victoria"><span class="taxonomy-label">VICTORIA</span><span class="taxonomy-count">1</span></a></li>
        </ul>
    </div>
  <div class="taxonomy taxonomy-terms-cloud taxo-categories">
      <h5 class="taxonomy-title">Categories</h5>
      <ul class="taxonomy-terms">
        <li><a class="taxonomy-term" href="/categories/about/" data-taxonomy-term="about"><span class="taxonomy-label">About</span><span class="taxonomy-count">10</span></a></li>
        <li><a class="taxonomy-term" href="/categories/admin/" data-taxonomy-term="admin"><span class="taxonomy-label">Admin</span><span class="taxonomy-count">22</span></a></li>
        <li><a class="taxonomy-term" href="/categories/ai/" data-taxonomy-term="ai"><span class="taxonomy-label">AI</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="/categories/arch/" data-taxonomy-term="arch"><span class="taxonomy-label">Arch</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="/categories/business/" data-taxonomy-term="business"><span class="taxonomy-label">Business</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/categories/cloud/" data-taxonomy-term="cloud"><span class="taxonomy-label">Cloud</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="/categories/concept/" data-taxonomy-term="concept"><span class="taxonomy-label">Concept</span><span class="taxonomy-count">11</span></a></li>
        <li><a class="taxonomy-term" href="/categories/config/" data-taxonomy-term="config"><span class="taxonomy-label">Config</span><span class="taxonomy-count">25</span></a></li>
        <li><a class="taxonomy-term" href="/categories/dashboard/" data-taxonomy-term="dashboard"><span class="taxonomy-label">Dashboard</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/categories/database/" data-taxonomy-term="database"><span class="taxonomy-label">Database</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="/categories/develop/" data-taxonomy-term="develop"><span class="taxonomy-label">Develop</span><span class="taxonomy-count">6</span></a></li>
        <li><a class="taxonomy-term" href="/categories/enterprise/" data-taxonomy-term="enterprise"><span class="taxonomy-label">Enterprise</span><span class="taxonomy-count">5</span></a></li>
        <li><a class="taxonomy-term" href="/categories/extension/" data-taxonomy-term="extension"><span class="taxonomy-label">Extension</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/categories/faq/" data-taxonomy-term="faq"><span class="taxonomy-label">FAQ</span><span class="taxonomy-count">9</span></a></li>
        <li><a class="taxonomy-term" href="/categories/install/" data-taxonomy-term="install"><span class="taxonomy-label">Install</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="/categories/metrics/" data-taxonomy-term="metrics"><span class="taxonomy-label">Metrics</span><span class="taxonomy-count">8</span></a></li>
        <li><a class="taxonomy-term" href="/categories/module/" data-taxonomy-term="module"><span class="taxonomy-label">Module</span><span class="taxonomy-count">16</span></a></li>
        <li><a class="taxonomy-term" href="/categories/monitor/" data-taxonomy-term="monitor"><span class="taxonomy-label">Monitor</span><span class="taxonomy-count">4</span></a></li>
        <li><a class="taxonomy-term" href="/categories/overview/" data-taxonomy-term="overview"><span class="taxonomy-label">Overview</span><span class="taxonomy-count">19</span></a></li>
        <li><a class="taxonomy-term" href="/categories/param/" data-taxonomy-term="param"><span class="taxonomy-label">Param</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="/categories/playbook/" data-taxonomy-term="playbook"><span class="taxonomy-label">Playbook</span><span class="taxonomy-count">4</span></a></li>
        <li><a class="taxonomy-term" href="/categories/postgresql/" data-taxonomy-term="postgresql"><span class="taxonomy-label">PostgreSQL</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/categories/reference/" data-taxonomy-term="reference"><span class="taxonomy-label">Reference</span><span class="taxonomy-count">6</span></a></li>
        <li><a class="taxonomy-term" href="/categories/release/" data-taxonomy-term="release"><span class="taxonomy-label">Release</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="/categories/section/" data-taxonomy-term="section"><span class="taxonomy-label">Section</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="/categories/setup/" data-taxonomy-term="setup"><span class="taxonomy-label">Setup</span><span class="taxonomy-count">16</span></a></li>
        <li><a class="taxonomy-term" href="/categories/usage/" data-taxonomy-term="usage"><span class="taxonomy-label">Usage</span><span class="taxonomy-count">1</span></a></li>
        </ul>
    </div>
  <div class="taxonomy taxonomy-terms-cloud taxo-tags">
      <h5 class="taxonomy-title">Tags</h5>
      <ul class="taxonomy-terms">
        <li><a class="taxonomy-term" href="/tags/1-node/" data-taxonomy-term="1-node"><span class="taxonomy-label">1-Node</span><span class="taxonomy-count">6</span></a></li>
        <li><a class="taxonomy-term" href="/tags/2-node/" data-taxonomy-term="2-node"><span class="taxonomy-label">2-Node</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="/tags/3-node/" data-taxonomy-term="3-node"><span class="taxonomy-label">3-Node</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/tags/4-node/" data-taxonomy-term="4-node"><span class="taxonomy-label">4-Node</span><span class="taxonomy-count">6</span></a></li>
        <li><a class="taxonomy-term" href="/tags/5-node/" data-taxonomy-term="5-node"><span class="taxonomy-label">5-Node</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="/tags/access/" data-taxonomy-term="access"><span class="taxonomy-label">Access</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/tags/auth/" data-taxonomy-term="auth"><span class="taxonomy-label">Auth</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/tags/citus/" data-taxonomy-term="citus"><span class="taxonomy-label">Citus</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/tags/cloud/" data-taxonomy-term="cloud"><span class="taxonomy-label">Cloud</span><span class="taxonomy-count">7</span></a></li>
        <li><a class="taxonomy-term" href="/tags/cloudberry/" data-taxonomy-term="cloudberry"><span class="taxonomy-label">Cloudberry</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/tags/cloudexit/" data-taxonomy-term="cloudexit"><span class="taxonomy-label">CloudExit</span><span class="taxonomy-count">6</span></a></li>
        <li><a class="taxonomy-term" href="/tags/cost/" data-taxonomy-term="cost"><span class="taxonomy-label">Cost</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="/tags/database/" data-taxonomy-term="database"><span class="taxonomy-label">Database</span><span class="taxonomy-count">5</span></a></li>
        <li><a class="taxonomy-term" href="/tags/dba/" data-taxonomy-term="dba"><span class="taxonomy-label">DBA</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/tags/develop/" data-taxonomy-term="develop"><span class="taxonomy-label">Develop</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/tags/docker/" data-taxonomy-term="docker"><span class="taxonomy-label">Docker</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="/tags/ebs/" data-taxonomy-term="ebs"><span class="taxonomy-label">EBS</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/tags/ecosystem/" data-taxonomy-term="ecosystem"><span class="taxonomy-label">Ecosystem</span><span class="taxonomy-count">4</span></a></li>
        <li><a class="taxonomy-term" href="/tags/extension/" data-taxonomy-term="extension"><span class="taxonomy-label">Extension</span><span class="taxonomy-count">25</span></a></li>
        <li><a class="taxonomy-term" href="/tags/finops/" data-taxonomy-term="finops"><span class="taxonomy-label">FinOps</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/tags/greenplum/" data-taxonomy-term="greenplum"><span class="taxonomy-label">Greenplum</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/tags/hardware/" data-taxonomy-term="hardware"><span class="taxonomy-label">Hardware</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/tags/hba/" data-taxonomy-term="hba"><span class="taxonomy-label">HBA</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/tags/kernel/" data-taxonomy-term="kernel"><span class="taxonomy-label">Kernel</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/tags/kubernetes/" data-taxonomy-term="kubernetes"><span class="taxonomy-label">Kubernetes</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/tags/migration/" data-taxonomy-term="migration"><span class="taxonomy-label">Migration</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/tags/minio/" data-taxonomy-term="minio"><span class="taxonomy-label">MinIO</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/tags/mssql/" data-taxonomy-term="mssql"><span class="taxonomy-label">MSSQL</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/tags/neon/" data-taxonomy-term="neon"><span class="taxonomy-label">Neon</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/tags/newsql/" data-taxonomy-term="newsql"><span class="taxonomy-label">NewSQL</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/tags/offline/" data-taxonomy-term="offline"><span class="taxonomy-label">Offline</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/tags/oracle/" data-taxonomy-term="oracle"><span class="taxonomy-label">Oracle</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/tags/os/" data-taxonomy-term="os"><span class="taxonomy-label">OS</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/tags/pigsty/" data-taxonomy-term="pigsty"><span class="taxonomy-label">Pigsty</span><span class="taxonomy-count">23</span></a></li>
        <li><a class="taxonomy-term" href="/tags/pigstyapp/" data-taxonomy-term="pigstyapp"><span class="taxonomy-label">PigstyApp</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/tags/pitr/" data-taxonomy-term="pitr"><span class="taxonomy-label">PITR</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="/tags/polardb/" data-taxonomy-term="polardb"><span class="taxonomy-label">PolarDB</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="/tags/postgresql/" data-taxonomy-term="postgresql"><span class="taxonomy-label">PostgreSQL</span><span class="taxonomy-count">7</span></a></li>
        <li><a class="taxonomy-term" href="/tags/preparation/" data-taxonomy-term="preparation"><span class="taxonomy-label">Preparation</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/tags/provision/" data-taxonomy-term="provision"><span class="taxonomy-label">Provision</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/tags/rds/" data-taxonomy-term="rds"><span class="taxonomy-label">RDS</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/tags/release/" data-taxonomy-term="release"><span class="taxonomy-label">Release</span><span class="taxonomy-count">23</span></a></li>
        <li><a class="taxonomy-term" href="/tags/rpm/" data-taxonomy-term="rpm"><span class="taxonomy-label">RPM</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="/tags/s3/" data-taxonomy-term="s3"><span class="taxonomy-label">S3</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/tags/security/" data-taxonomy-term="security"><span class="taxonomy-label">Security</span><span class="taxonomy-count">4</span></a></li>
        <li><a class="taxonomy-term" href="/tags/service/" data-taxonomy-term="service"><span class="taxonomy-label">Service</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="/tags/sla/" data-taxonomy-term="sla"><span class="taxonomy-label">SLA</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/tags/slim/" data-taxonomy-term="slim"><span class="taxonomy-label">Slim</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/tags/sop/" data-taxonomy-term="sop"><span class="taxonomy-label">SOP</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/tags/sponsor/" data-taxonomy-term="sponsor"><span class="taxonomy-label">Sponsor</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/tags/supabase/" data-taxonomy-term="supabase"><span class="taxonomy-label">Supabase</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="/tags/tool/" data-taxonomy-term="tool"><span class="taxonomy-label">Tool</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/tags/user/" data-taxonomy-term="user"><span class="taxonomy-label">User</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="/tags/visualization/" data-taxonomy-term="visualization"><span class="taxonomy-label">Visualization</span><span class="taxonomy-count">4</span></a></li>
        </ul>
    </div>
  
	
          </aside>
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="/docs/">Docs</a></li>
  <li class="breadcrumb-item active" aria-current="page">
    Release Notes</li>
  </ol>
</nav>
            
<div class="td-content">
	<h1>Release Notes</h1>
	<div class="lead">Pigsty release note history</div>
	<header class="article-meta">
		<div class="taxonomy taxonomy-terms-article taxo-module">
  <h5 class="taxonomy-title">Module:</h5>
  <ul class="taxonomy-terms">
    <li><a class="taxonomy-term" href="/module/pigsty/" data-taxonomy-term="pigsty"><span class="taxonomy-label">PIGSTY</span></a></li>
    </ul>
</div>
<div class="taxonomy taxonomy-terms-article taxo-categories">
  <h5 class="taxonomy-title">Categories:</h5>
  <ul class="taxonomy-terms">
    <li><a class="taxonomy-term" href="/categories/release/" data-taxonomy-term="release"><span class="taxonomy-label">Release</span></a></li>
    </ul>
</div>

  </header>
	<table>
<thead>
<tr>
<th style="text-align:left">Version</th>
<th style="text-align:center">Time</th>
<th>Description</th>
<th>Release</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v321">v3.2.1</a></td>
<td style="text-align:center">2025-01-12</td>
<td>351 extension, anon, ivorysql4, Odoo self-hosting</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v3.2.1">v3.2.1</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v320">v3.2.0</a></td>
<td style="text-align:center">2024-12-25</td>
<td>Pig CLI, Arm64 Full Extension, Supabase &amp; Grafana Enhance</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v3.2.0">v3.2.0</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v310">v3.1.0</a></td>
<td style="text-align:center">2024-11-24</td>
<td>ARM64 &amp; Ubuntu24, PG17 by Default, Better Supabase &amp; MinIO</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v3.1.0">v3.1.0</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v304">v3.0.4</a></td>
<td style="text-align:center">2024-10-28</td>
<td>PostgreSQL 17 Extensions, Better self-hosting Supabase</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v3.0.4">v3.0.4</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v303">v3.0.3</a></td>
<td style="text-align:center">2024-09-27</td>
<td>PostgreSQL 17, Etcd Enhancement, IvorySQL 3.4,PostGIS 3.5</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v3.0.3">v3.0.3</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v302">v3.0.2</a></td>
<td style="text-align:center">2024-09-07</td>
<td>Mini Install, PolarDB 15, Bloat View Update</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v3.0.2">v3.0.2</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v301">v3.0.1</a></td>
<td style="text-align:center">2024-08-31</td>
<td>Oracle Compatibility, Patroni 4.0, Routine Bug Fix</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v3.0.1">v3.0.1</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v300">v3.0.0</a></td>
<td style="text-align:center">2024-08-30</td>
<td>Extension Exploding &amp; Plugable Kernels (MSSQL,Oracle)</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v3.0.0">v3.0.0</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v270">v2.7.0</a></td>
<td style="text-align:center">2024-05-16</td>
<td>Extension Overwhelming, new docker apps</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v2.7.0">v2.7.0</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v260">v2.6.0</a></td>
<td style="text-align:center">2024-02-29</td>
<td>PG 16 as default version,  ParadeDB &amp; DuckDB</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v2.6.0">v2.6.0</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v251">v2.5.1</a></td>
<td style="text-align:center">2023-12-01</td>
<td>Routine update, pg16 major extensions</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v2.5.1">v2.5.1</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v250">v2.5.0</a></td>
<td style="text-align:center">2023-10-24</td>
<td>Ubuntu/Debian Support:  bullseye, bookworm, jammy, focal</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v2.5.0">v2.5.0</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v241">v2.4.1</a></td>
<td style="text-align:center">2023-09-24</td>
<td>Supabase/PostgresML support, graphql, jwt, pg_net, vault</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v2.4.1">v2.4.1</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v240">v2.4.0</a></td>
<td style="text-align:center">2023-09-14</td>
<td>PG16, RDS Monitor, New Extensions</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v2.4.0">v2.4.0</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v231">v2.3.1</a></td>
<td style="text-align:center">2023-09-01</td>
<td>PGVector with HNSW, PG16 RC1, Chinese Docs, Bug Fix</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v2.3.1">v2.3.1</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v230">v2.3.0</a></td>
<td style="text-align:center">2023-08-20</td>
<td>PGSQL/REDIS Update, NODE VIP, Mongo/FerretDB, MYSQL Stub</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v2.3.0">v2.3.0</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v220">v2.2.0</a></td>
<td style="text-align:center">2023-08-04</td>
<td>Dashboard &amp; Provision overhaul, UOS compatibility</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v2.2.0">v2.2.0</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v210">v2.1.0</a></td>
<td style="text-align:center">2023-06-10</td>
<td>PostgreSQL 12 ~ 16beta support</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v2.1.0">v2.1.0</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v202">v2.0.2</a></td>
<td style="text-align:center">2023-03-31</td>
<td>Add pgvector support and fix MinIO CVE</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v2.0.2">v2.0.2</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v201">v2.0.1</a></td>
<td style="text-align:center">2023-03-21</td>
<td>v2 Bug Fix, security enhance and bump grafana version</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v2.0.1">v2.0.1</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v200">v2.0.0</a></td>
<td style="text-align:center">2023-02-28</td>
<td>Compatibility Security Maintainability Enhancement</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v2.0.0">v2.0.0</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v151">v1.5.1</a></td>
<td style="text-align:center">2022-06-18</td>
<td>Grafana Security Hotfix</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v1.5.1">v1.5.1</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v150">v1.5.0</a></td>
<td style="text-align:center">2022-05-31</td>
<td>Docker Applications</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v1.5.0">v1.5.0</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v141">v1.4.1</a></td>
<td style="text-align:center">2022-04-20</td>
<td>Bug fix &amp; Full translation of English documents.</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v1.4.1">v1.4.1</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v140">v1.4.0</a></td>
<td style="text-align:center">2022-03-31</td>
<td>MatrixDB Support, Separated INFRA, NODES, PGSQL, REDIS</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v1.4.0">v1.4.0</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v130">v1.3.0</a></td>
<td style="text-align:center">2021-11-30</td>
<td>PGCAT Overhaul &amp; PGSQL Enhancement &amp; Redis Support Beta</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v1.3.0">v1.3.0</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v120">v1.2.0</a></td>
<td style="text-align:center">2021-11-03</td>
<td>Upgrade default Postgres to 14, monitoring existing pg</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v1.2.0">v1.2.0</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v110">v1.1.0</a></td>
<td style="text-align:center">2021-10-12</td>
<td>HomePage, JupyterLab, PGWEB, Pev2 &amp; Pgbadger</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v1.1.0">v1.1.0</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v100">v1.0.0</a></td>
<td style="text-align:center">2021-07-26</td>
<td>v1 GA, Monitoring System Overhaul</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v1.0.0">v1.0.0</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v090">v0.9.0</a></td>
<td style="text-align:center">2021-04-04</td>
<td>Pigsty GUI, CLI, Logging Integration</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v0.9.0">v0.9.0</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v080">v0.8.0</a></td>
<td style="text-align:center">2021-03-28</td>
<td>Service Provision</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v0.8.0">v0.8.0</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v070">v0.7.0</a></td>
<td style="text-align:center">2021-03-01</td>
<td>Monitor only deployment</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v0.7.0">v0.7.0</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v060">v0.6.0</a></td>
<td style="text-align:center">2021-02-19</td>
<td>Architecture Enhancement</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v0.6.0">v0.6.0</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v050">v0.5.0</a></td>
<td style="text-align:center">2021-01-07</td>
<td>Database Customize Template</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v0.5.0">v0.5.0</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v040">v0.4.0</a></td>
<td style="text-align:center">2020-12-14</td>
<td>PostgreSQL 13 Support, Official Documentation</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v0.4.0">v0.4.0</a></td>
</tr>
<tr>
<td style="text-align:left"><a href="/docs/releasenote/#v030">v0.3.0</a></td>
<td style="text-align:center">2020-10-22</td>
<td>Provisioning Solution GA</td>
<td><a href="https://github.com/Vonng/pigsty/releases/tag/v0.3.0">v0.3.0</a></td>
</tr>
<tr>
<td style="text-align:left">v0.2.0</td>
<td style="text-align:center">2020-07-10</td>
<td>PGSQL Monitoring v6 GA</td>
<td><a href="https://github.com/Vonng/pigsty/commit/385e33a62a19817e8ba19997260e6b77d99fe2ba">v0.2.0</a></td>
</tr>
<tr>
<td style="text-align:left">v0.1.0</td>
<td style="text-align:center">2020-06-20</td>
<td>Validation on Testing Environment</td>
<td><a href="https://github.com/Vonng/pigsty/commit/1cf2ea5ee91db071de00ec805032928ff582453b">v0.1.0</a></td>
</tr>
<tr>
<td style="text-align:left">v0.0.5</td>
<td style="text-align:center">2020-08-19</td>
<td>Offline Installation Mode</td>
<td><a href="https://github.com/Vonng/pigsty/commit/0fe9e829b298fe5e56307de3f78c95071de28245">v0.0.5</a></td>
</tr>
<tr>
<td style="text-align:left">v0.0.4</td>
<td style="text-align:center">2020-07-27</td>
<td>Refactor playbooks into ansible roles</td>
<td><a href="https://github.com/Vonng/pigsty/commit/90b44259818d2c71e37df5250fe8ed1078a883d0">v0.0.4</a></td>
</tr>
<tr>
<td style="text-align:left">v0.0.3</td>
<td style="text-align:center">2020-06-22</td>
<td>Interface enhancement</td>
<td><a href="https://github.com/Vonng/pigsty/commit/4c5c68ccd57bc32a9e9c98aa3f264aa19f45c7ee">v0.0.3</a></td>
</tr>
<tr>
<td style="text-align:left">v0.0.2</td>
<td style="text-align:center">2020-04-30</td>
<td>First Commit</td>
<td><a href="https://github.com/Vonng/pigsty/commit/dd646775624ddb33aef7884f4f030682bdc371f8">v0.0.2</a></td>
</tr>
<tr>
<td style="text-align:left">v0.0.1</td>
<td style="text-align:center">2019-05-15</td>
<td>POC</td>
<td><a href="https://github.com/Vonng/pg/commit/fa2ade31f8e81093eeba9d966c20120054f0646b">v0.0.1</a></td>
</tr>
</tbody>
</table>
<hr>
<h2 id="v321">v3.2.1</h2>
<p><strong>Highlights</strong></p>
<ul>
<li><a href="https://ext.pigsty.io"><strong>351</strong></a> PostgreSQL Extensions, including the powerful <a href="https://postgresql-anonymizer.readthedocs.io/en/stable/">postgresql-anonymizer 2.0</a></li>
<li>IvorySQL 4.0 support for EL 8/9</li>
<li>Now use the Pigsty compiled Citus, TimescaleDB and pgroonga on all distros</li>
<li>Add self-hosting Odoo template and support</li>
</ul>
<p><strong>Bump software versions</strong></p>
<ul>
<li>pig CLI 0.1.2 self-updating capability</li>
<li>prometheus 3.1.0</li>
</ul>
<p><strong>Add New Extension</strong></p>
<ul>
<li>add pg_anon 2.0.0</li>
<li>add omnisketch 1.0.2</li>
<li>add ddsketch 1.0.1</li>
<li>add pg_duration 1.0.1</li>
<li>add ddl_historization 0.0.7</li>
<li>add data_historization 1.1.0</li>
<li>add schedoc 0.0.1</li>
<li>add floatfile 1.3.1</li>
<li>add pg_upless 0.0.3</li>
<li>add pg_task 1.0.0</li>
<li>add pg_readme 0.7.0</li>
<li>add vasco 0.1.0</li>
<li>add pg_xxhash 0.0.1</li>
</ul>
<p><strong>Update Extension</strong></p>
<ul>
<li>lower_quantile 1.0.3</li>
<li>quantile 1.1.8</li>
<li>sequential_uuids 1.0.3</li>
<li>pgmq 1.5.0 (subdir)</li>
<li>floatvec 1.1.1</li>
<li>pg_parquet 0.2.0</li>
<li>wrappers 0.4.4</li>
<li>pg_later 0.3.0</li>
<li>topn fix for deb.arm64</li>
<li>add age 17 on debian</li>
<li>powa + pg17, 5.0.1</li>
<li>h3 + pg17</li>
<li>ogr_fdw + pg17</li>
<li>age + pg17 1.5 on debian</li>
<li>pgtap + pg17 1.3.3</li>
<li>repmgr</li>
<li>topn + pg17</li>
<li>pg_partman 5.2.4</li>
<li>credcheck 3.0</li>
<li>ogr_fdw 1.1.5</li>
<li>ddlx 0.29</li>
<li>postgis 3.5.1</li>
<li>tdigest 1.4.3</li>
<li>pg_repack 1.5.2</li>
</ul>
<hr>
<h2 id="v320">v3.2.0</h2>
<p><strong>Highlights</strong></p>
<ul>
<li><strong>New CLI</strong>: Introducing the <code>pig</code> command-line tool for managing extension plugins.</li>
<li><strong>ARM64 Support</strong>: 340 extensions are now available for ARM64 across five major distributions.</li>
<li><strong>Supabase Update</strong>: Latest Supabase Release Week updates are now supported for self-hosting on all distributions.</li>
<li><strong>Grafana v11.4</strong>: Upgraded Grafana to version 11.4, featuring a new Infinity datasource.</li>
</ul>
<p><strong>Package Changes</strong></p>
<ul>
<li><strong>New Extensions</strong>
<ul>
<li>Added <code>timescaledb</code>, <code>timescaledb-loader</code>, <code>timescaledb-toolkit</code>, and <code>timescaledb-tool</code> to the PIGSTY repository.</li>
<li>Added a custom-compiled <a href="https://github.com/timescale/timescaledb">pg_timescaledb</a> for EL.</li>
<li>Added <a href="https://ext.pigsty.io/#/pgroonga">pgroonga</a>, custom-compiled for all EL variants.</li>
<li>Added <a href="https://github.com/tensorchord/VectorChord">vchord</a> 0.1.0.</li>
<li>Added <a href="https://github.com/tensorchord/pg_bestmatch.rs">pg_bestmatch.rs</a> 0.0.1.</li>
<li>Added <a href="https://github.com/frectonz/pglite-fusion">pglite_fusion</a> 0.0.3.</li>
<li>Added <a href="https://github.com/Florents-Tselai/pgpdf">pgpdf</a> 0.1.0.</li>
</ul>
</li>
<li><strong>Updated Extensions</strong>
<ul>
<li><strong>pgvectorscale</strong>: 0.4.0 → 0.5.1</li>
<li><strong>pg_parquet</strong>: 0.1.0 → 0.1.1</li>
<li><strong>pg_polyline</strong>: 0.0.1</li>
<li><strong>pg_cardano</strong>: 1.0.2 → 1.0.3</li>
<li><strong>pg_vectorize</strong>: 0.20.0</li>
<li><strong>pg_duckdb</strong>: 0.1.0 → 0.2.0</li>
<li><strong>pg_search</strong>: 0.13.0 → 0.13.1</li>
<li><strong>aggs_for_vecs</strong>: 1.3.1 → 1.3.2</li>
</ul>
</li>
<li><strong>Infrastructure</strong>
<ul>
<li>Added <strong>promscale</strong> 0.17.0</li>
<li>Added <strong>grafana-plugins</strong> 11.4</li>
<li>Added <strong>grafana-infinity-plugins</strong></li>
<li>Added <strong>grafana-victoriametrics-ds</strong></li>
<li>Added <strong>grafana-victorialogs-ds</strong></li>
<li><strong>vip-manager</strong>: 2.8.0 → 3.0.0</li>
<li><strong>vector</strong>: 0.42.0 → 0.43.0</li>
<li><strong>grafana</strong>: 11.3 → 11.4</li>
<li><strong>prometheus</strong>: 3.0.0 → 3.0.1 (package name changed from <code>prometheus2</code> to <code>prometheus</code>)</li>
<li><strong>nginx_exporter</strong>: 1.3.0 → 1.4.0</li>
<li><strong>mongodb_exporter</strong>: 0.41.2 → 0.43.0</li>
<li><strong>VictoriaMetrics</strong>: 1.106.1 → 1.107.0</li>
<li><strong>VictoriaLogs</strong>: 1.0.0 → 1.3.2</li>
<li><strong>pg_timetable</strong>: 5.9.0 → 5.10.0</li>
<li><strong>tigerbeetle</strong>: 0.16.13 → 0.16.17</li>
<li><strong>pg_export</strong>: 0.7.0 → 0.7.1</li>
</ul>
</li>
<li><strong>New Docker App</strong>
<ul>
<li>Add <a href="https://github.com/mattermost/mattermost">mattermost</a> the open-source Slack alternative self-hosting template</li>
</ul>
</li>
<li><strong>Bug Fixes</strong>
<ul>
<li>Added <code>python3-cdiff</code> for <code>el8.aarch64</code> to fix missing Patroni dependency.</li>
<li>Added <code>timescaledb-tools</code> for <code>el9.aarch64</code> to fix missing package in official repo.</li>
<li>Added <code>pg_filedump</code> for <code>el9.aarch64</code> to fix missing package in official repo.</li>
</ul>
</li>
<li><strong>Removed Extensions</strong>
<ul>
<li><strong>pg_mooncake</strong>: Removed due to conflicts with <code>pg_duckdb</code>.</li>
<li><strong>pg_top</strong>: Removed because of repeated version issues and quality concerns.</li>
<li><strong>hunspell_pt_pt</strong>: Removed because of conflict with official PG dictionary files.</li>
<li><strong>pgml</strong>: Disabled by default (no longer downloaded or installed).</li>
</ul>
</li>
</ul>
<p><strong>API Changes</strong></p>
<ul>
<li><a href="https://pigsty.cc/zh/docs/reference/param/#repo_url_packages"><code>repo_url_packages</code></a> now defaults to an empty array; packages are installed via OS package managers.</li>
<li><code>grafana_plugin_cache</code> is deprecated; Grafana plugins are now installed via OS package managers.</li>
<li><code>grafana_plugin_list</code> is deprecated for the same reason.</li>
<li>The 36-node “production” template has been renamed to <code>simu</code>.</li>
<li>Auto-generated code under <code>node_id/vars</code> now includes <code>aarch64</code> support.</li>
<li><code>infra_packages</code> now includes the <code>pig</code> CLI tool.</li>
<li>The <code>configure</code> command now updates the version numbers of <code>pgsql-xxx</code> aliases in auto-generated config files.</li>
<li>Update terraform templates with Makefile shortcuts and better provision experience</li>
</ul>
<p><strong>Bug Fix</strong></p>
<ul>
<li>Fix pgbouncer dashboard selector issue <a href="https://github.com/Vonng/pigsty/issues/474">#474</a></li>
<li>Add <code>--arg value</code> support for <code>pg-pitr</code> by <a href="https://github.com/Vonng/pigsty/pulls?q=is%3Apr+author%3Awaitingsong">@waitingsong</a></li>
<li>Fix redis log message typo by <a href="https://github.com/Vonng/pigsty/pull/476">@waitingsong</a></li>
</ul>
<p><strong>Checksums</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>c42da231067f25104b71a065b4a50e68  pigsty-pkg-v3.2.0.d12.aarch64.tgz
</span></span><span style="display:flex;"><span>ebb818f98f058f932b57d093d310f5c2  pigsty-pkg-v3.2.0.d12.x86_64.tgz
</span></span><span style="display:flex;"><span>d2b85676235c9b9f2f8a0ad96c5b15fd  pigsty-pkg-v3.2.0.el9.aarch64.tgz
</span></span><span style="display:flex;"><span>649f79e1d94ec1845931c73f663ae545  pigsty-pkg-v3.2.0.el9.x86_64.tgz
</span></span><span style="display:flex;"><span>24c0be1d8436f3c64627c12f82665a17  pigsty-pkg-v3.2.0.u22.aarch64.tgz
</span></span><span style="display:flex;"><span>0b9be0e137661e440cd4f171226d321d  pigsty-pkg-v3.2.0.u22.x86_64.tgz
</span></span><span style="display:flex;"><span>8fdc6a60820909b0a2464b0e2b90a3a6  pigsty-v3.2.0.tgz
</span></span></code></pre></div><hr>
<h2 id="v310">v3.1.0</h2>
<p><strong>Features</strong></p>
<ul>
<li>PostgreSQL 17 as the default major version (17.2)</li>
<li>Ubuntu 24.04 noble support</li>
<li>ARM64 support (el9, debian12, ubuntu 22.04)</li>
<li>New playbook <code>supabase.yml</code> for quick self-hosting supabase</li>
<li>MinIO Enhancement, best, practice, conf template, dashboards,&hellip;</li>
<li>Allow using <code>-v</code> to specify PG major version during <code>configure</code></li>
<li>A series of out-of-the-box configuration templates and documentation.</li>
<li>Now install the <code>pgvector</code> extension by default</li>
<li>Simplify the repo packages configuration with package map alias</li>
<li>Setup WiltonDB, IvorySQL, PolarDB repo mirror</li>
<li>Enable postgres checksum by default</li>
</ul>
<p><strong>Software Upgrades</strong></p>
<ul>
<li>PostgreSQL 17.2, 16.6, 15.10, 14.15, 13.18, 12.22</li>
<li>PostgreSQL Extension Upgrades: <a href="https://ext.pigsty.io">https://ext.pigsty.io</a></li>
<li>Patroni 4.0.4</li>
<li>MinIO 20241107 / MCLI 20241117</li>
<li>Rclone 1.68.2</li>
<li>Prometheus: 2.54.0 -&gt; 3.0.0</li>
<li>VictoriaMetrics 1.102.1 -&gt; 1.106.1</li>
<li>VictoriaLogs v0.28.0 -&gt; 1.0.0</li>
<li>vslogcli 1.0.0</li>
<li>MySQL Exporter 0.15.1 -&gt; 0.16.0</li>
<li>Redis Exporter 1.62.0 -&gt; 1.66.0</li>
<li>MongoDB Exporter 0.41.2 -&gt; 0.42.0</li>
<li>Keepalived Exporter 1.3.3 -&gt; 1.4.0</li>
<li>DuckDB 1.1.2 -&gt; 1.1.3</li>
<li>etcd 3.5.16 -&gt; 3.5.17</li>
<li>tigerbeetle 16.8 -&gt; 0.16.13</li>
</ul>
<p><strong>API Change</strong></p>
<ul>
<li><code>repo_upstream</code>: Now has defaults per distro: <a href="https://github.com/Vonng/pigsty/tree/main/roles/node_id/vars"><code>roles/node_id/vars</code></a></li>
<li><code>repo_packages</code>: Now support using <code>package_map</code> alias.</li>
<li><code>repo_extra_packages</code>: Now support missing default values, and using <code>package_map</code> alias.</li>
<li><code>pg_checksum</code>: Now the default value is <code>true</code>.</li>
<li><code>pg_packages</code>: Change to <code>postgresql, wal2json pg_repack pgvector, patroni pgbouncer pgbackrest pg_exporter pgbadger vip-manager</code>.</li>
<li><code>pg_extensions</code>: Change to empty array <code>[]</code>.</li>
<li><code>infra_portal</code>: Now allow using <code>path</code> in the <code>home</code> server.</li>
</ul>
<p><strong>Checksums</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>e62f9ce9f89a58958609da7b234bf2f2  pigsty-v3.1.0.tgz
</span></span></code></pre></div><hr>
<h2 id="v304">v3.0.4</h2>
<p><strong>Features</strong></p>
<ul>
<li>The new extension repo: <a href="https://ext.pigsty.io">https://ext.pigsty.io</a></li>
<li>Build &amp; Packaging applicable extensions for PostgreSQL 17</li>
<li>Adding OLAP extensions: <code>pg_duckdb</code> &amp; <code>pg_parquet</code></li>
<li>Better supabase self-hosting experience</li>
<li>Allow pulling/load images after docker installation</li>
</ul>
<p><strong>Extensions</strong></p>
<p>Check the new extension catalog: <a href="https://ext.pigsty.io">https://ext.pigsty.io</a></p>
<table>
<thead>
<tr>
<th style="text-align:center">Statistics</th>
<th style="text-align:center">All</th>
<th style="text-align:center">PGDG</th>
<th style="text-align:center">PIGSTY</th>
<th style="text-align:center">MISC</th>
<th style="text-align:center">MISS</th>
<th style="text-align:center">PG17</th>
<th style="text-align:center">PG16</th>
<th style="text-align:center">PG15</th>
<th style="text-align:center">PG14</th>
<th style="text-align:center">PG13</th>
<th style="text-align:center">PG12</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">EL Extension</td>
<td style="text-align:center">338</td>
<td style="text-align:center">134</td>
<td style="text-align:center">130</td>
<td style="text-align:center">4</td>
<td style="text-align:center">7</td>
<td style="text-align:center">298</td>
<td style="text-align:center">334</td>
<td style="text-align:center">336</td>
<td style="text-align:center">328</td>
<td style="text-align:center">319</td>
<td style="text-align:center">310</td>
</tr>
<tr>
<td style="text-align:center">Deb Extension</td>
<td style="text-align:center">326</td>
<td style="text-align:center">109</td>
<td style="text-align:center">143</td>
<td style="text-align:center">74</td>
<td style="text-align:center">19</td>
<td style="text-align:center">290</td>
<td style="text-align:center">322</td>
<td style="text-align:center">324</td>
<td style="text-align:center">316</td>
<td style="text-align:center">307</td>
<td style="text-align:center">300</td>
</tr>
<tr>
<td style="text-align:center">RPM Package</td>
<td style="text-align:center">313</td>
<td style="text-align:center">122</td>
<td style="text-align:center">129</td>
<td style="text-align:center">4</td>
<td style="text-align:center">6</td>
<td style="text-align:center">275</td>
<td style="text-align:center">309</td>
<td style="text-align:center">311</td>
<td style="text-align:center">303</td>
<td style="text-align:center">294</td>
<td style="text-align:center">285</td>
</tr>
<tr>
<td style="text-align:center">DEB Package</td>
<td style="text-align:center">298</td>
<td style="text-align:center">93</td>
<td style="text-align:center">142</td>
<td style="text-align:center">64</td>
<td style="text-align:center">19</td>
<td style="text-align:center">264</td>
<td style="text-align:center">294</td>
<td style="text-align:center">296</td>
<td style="text-align:center">288</td>
<td style="text-align:center">279</td>
<td style="text-align:center">272</td>
</tr>
</tbody>
</table>
<p><strong>Upgrades</strong></p>
<ul>
<li><strong>New PG Extensions</strong>
<ul>
<li><a href="https://github.com/CrunchyData/pg_parquet/">pg_parquet</a></li>
<li><a href="https://github.com/davidgomes/pg-explain-ui">pg_explain_ui</a></li>
<li><a href="https://github.com/yihong0618/pg_polyline">pg_polyline</a></li>
<li><a href="https://github.com/Fell-x27/pg_cardano">pg_cardano</a></li>
<li><a href="https://github.com/Fell-x27/pg_base58">pg_base58</a></li>
<li><a href="https://github.com/HexaCluster/pg_summarize">pg_summarize</a></li>
<li><a href="https://pgxn.org/dist/pg_relusage/0.0.1/">pg_relusage</a></li>
<li><a href="https://github.com/tembo-io/pgmq">pgmq</a></li>
<li><a href="https://github.com/tembo-io/pg_timeseries">pg_timeseries</a></li>
<li><a href="https://github.com/pgexperts/pg_plan_filter">pg_plan_filter</a></li>
</ul>
</li>
<li><strong>Bump Extension Version</strong>
<ul>
<li>pg_search 0.11.0</li>
<li>pg_analytics 0.2.0</li>
<li>plv8 3.2.3</li>
<li>supautils 2.5.0</li>
<li>icu_ext 1.9.0</li>
<li>redis_fdw 17</li>
<li>pg_failover_slots 1.1.0</li>
<li>pg_later 0.1.3</li>
<li>plprql 1.0.0</li>
<li>pg_vectorize 0.18.3</li>
<li>unit 7.7 -&gt; 7.9</li>
<li>log_fdw 1.4</li>
<li>pg_duckdb 0.1.0</li>
<li>pg_graphql 1.5.9 (+17)</li>
<li>pg_jsonschema 0.3.2 (+17)</li>
<li>pgvectorscale 0.4.0 (+17)</li>
<li>wrappers 0.4.3 +pg17</li>
<li>pg_ivm 1.9</li>
<li>pg_timeseries 0.1.6</li>
<li>pgmq 1.4.4</li>
<li>pg_protobuf 16 17</li>
<li>pg_uuidv7 1.6</li>
<li>pg_readonly</li>
<li>pgddl 0.28</li>
<li>pg_safeupdate</li>
<li>pg_stat_monitor 2.1</li>
<li>pg_profile 4.7</li>
<li>system_stats 3.2</li>
<li>pg_auth_mon 3.0</li>
<li>login_hook 1.6</li>
<li>logerrors 2.1.3</li>
<li>pg-orphaned</li>
<li>pgnodemx 1.7</li>
<li>sslutils 1.4 (deb+pg16,17)</li>
<li>timestamp9 (deb)</li>
</ul>
</li>
<li><strong>Fix broken extensions for PG16/17</strong>
<ul>
<li>pg_mon</li>
<li>pg_uri</li>
<li>agg_for_vecs</li>
<li>quantile</li>
<li>lower_quantile</li>
<li>pg_protobuf</li>
<li>acl</li>
<li>pg_emailaddr</li>
<li>pg_zstd</li>
<li>smlar</li>
<li>geohash</li>
<li>pgsmcrypto (+17)</li>
<li>pg_tiktoken (+17)</li>
<li>pg_idkit (+17)</li>
</ul>
</li>
<li><strong>Update infra packages version</strong>
<ul>
<li>Grafana 11.3</li>
<li>duckdb 1.1.2</li>
<li>etcd 3.5.16</li>
<li>ferretdb 1.24.0</li>
<li>minio 20241013133411</li>
<li>mcli 2024101313411</li>
<li>pushgateway 1.10</li>
<li>tigerbeetle 0.16.8</li>
<li>mongodb_exporter 0.41.2</li>
<li>redis_exporter 1.64.1</li>
<li>vector 0.41.1</li>
<li>vip-manager 2.7</li>
<li>sealos 5.0.1</li>
</ul>
</li>
</ul>
<hr>
<h2 id="v303">v3.0.3</h2>
<p><strong>New Feature</strong>:</p>
<ul>
<li>PostgreSQL 17 support through config file</li>
<li>WiltonDB 16, compatible with PG 16</li>
<li>IvorySQL 3.4, sync with PostgreSQL 16.4</li>
<li>ETCD alerting &amp; monitoring enhancement</li>
</ul>
<p><strong>Version Upgrade</strong>:</p>
<ul>
<li>PostGIS 3.5</li>
<li>Grafana 11.2</li>
<li>duckdb 1.1</li>
<li>pg_search 0.10.2</li>
<li>pg_analytics 0.1.4</li>
</ul>
<hr>
<h2 id="v302">v3.0.2</h2>
<p><strong>Features</strong></p>
<ul>
<li><a href="https://pigsty.io/docs/setup/slim/">Minimal Installation</a> support with <code>slim.yml</code> (NODE, PGSQL, ETCD only)</li>
<li>Official support for the latest <a href="https://github.com/ApsaraDB/PolarDB-for-PostgreSQL">PolarDB for PostgreSQL</a> Kernel v15</li>
<li>Optimize <code>monitor.pg_table_bloat</code> and <code>monitor.pg_index_bloat</code> with security definer wrap functions to avoid PolarDB statistics view permission issue.</li>
<li>Honor <code>prometheus_enabled</code>, <code>grafana_enabled</code> option in target register, not register when disabled.</li>
<li>Add <code>PGDATABASE</code> and <code>PGPORT</code> environment variable to <code>/etc/profile.d/pgsql.sh</code>, set to <code>pg_primary_db</code> (default <code>postgres</code>)</li>
</ul>
<p><strong>Changes</strong></p>
<ul>
<li>Remove PolarDB 11, CloudberryDB 1.5.4 packages from pgsql repo.</li>
<li>New dedicate repo for PolarDB 15, CloudberryDB 1.6.0, MSSQL, IvorySQL.</li>
</ul>
<p><strong>Bug Fix</strong></p>
<ul>
<li>Fix redis <code>/etc/tmp.files.d</code> entry name</li>
<li>Set <code>PGHOST</code> and <code>PGPORT</code> when managing pgbouncer users.</li>
<li>Remove support for <code>pg_snakeoil</code> due to <code>clamv</code> deps break on EL8</li>
<li>Remove role <code>pgsql</code> notify handler for ansible 2.9 compatibility</li>
</ul>
<hr>
<h2 id="v301">v3.0.1</h2>
<p><strong>Features &amp; Enhancement</strong></p>
<ul>
<li>Oracle Compatibility through PolarDB-O (3rd commercial kernel)</li>
<li>Rewrite monitoring views and SQL statements using Oracle-compatible SQL syntax</li>
<li>Patroni <a href="https://patroni.readthedocs.io/en/latest/releases.html">4</a> support and adaptation</li>
<li>New extension <code>pg_analytics</code> enhances PostgreSQL with analytics capabilities via DuckDB</li>
<li>Added new extensions: <code>odbc_fdw</code> and <code>jdbc_fdw</code>, providing universal external data source connectivity</li>
<li>Added new kernel <code>cloudberrydb</code> (open-source fork by the original Greenplum developers)</li>
<li>Add a restart after PGSQL primary initialization to apply <code>pg_param</code> &amp; <code>pg_files</code>, no need to reboot after provisioning a Supabase PG / PolarDB cluster.</li>
<li>Add new grafana plugin: <code>volkovlabs-rss-datasource</code></li>
<li>Add new dashboard panel: Extensions in PGCAT databases</li>
<li>Bump Pev2 version to 1.12.1</li>
</ul>
<p><strong>Bug Fix</strong></p>
<ul>
<li>Fix Grafana 11.1.4 panel plugin failed to load by default</li>
<li>Fix BlackBox Exporter Ping probe failed on certain OS Distro (run as root rather than prometheus)</li>
<li>Make suare <code>/var/run/postgresql</code> and <code>/var/run/redis</code> temporary directory always auto-create after reboot</li>
<li>Fix <code>cache.yml</code> playbook not correctly remove outdated Patroni 3.0.4 RPM package</li>
<li>Correct description errors in some alerting rules</li>
<li>Remove outdated Bootstrap User/HBA parameters from Patroni configuration file</li>
</ul>
<hr>
<h2 id="v300">v3.0.0</h2>
<p><a href="https://pigsty.io/docs/setup/install"><strong>Get started</strong></a> with:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -fsSL https://repo.pigsty.io/get <span style="color:#000;font-weight:bold">|</span> bash
</span></span><span style="display:flex;"><span><span style="color:#204a87">cd</span> ~/pigsty<span style="color:#000;font-weight:bold">;</span> ./bootstrap<span style="color:#000;font-weight:bold">;</span> ./configure<span style="color:#000;font-weight:bold">;</span> ./install.yml
</span></span></code></pre></div><p><strong>Highlight Features</strong></p>
<p><strong>Extension Exploding</strong>:</p>
<p>Pigsty now has an unprecedented <a href="https://pigsty.io/docs/pgext/list/"><strong>340</strong></a> available extensions for PostgreSQL. This includes <strong>121</strong> extension <a href="https://pigsty.io/docs/pgext/list/rpm/">RPM packages</a> and <strong>133</strong> <a href="https://pigsty.io/docs/pgext/list/deb/">DEB packages</a>, surpassing the total number of extensions provided by the PGDG official repository (135 RPM/109 DEB).
Pigsty has ported unique PG extensions from the EL/DEB system to each other, achieving a great alignment of extension ecosystems between the two major distributions.</p>
<p>A crude list of the extension ecosystem is as follows:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>- <span style="color:#000">timescaledb periods temporal_tables emaj table_version pg_cron pg_later pg_background pg_timetable</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span>- <span style="color:#000">postgis pgrouting pointcloud pg_h3 q3c ogr_fdw geoip #pg_geohash</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">#mobilitydb</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span>- <span style="color:#000">pgvector pgvectorscale pg_vectorize pg_similarity pg_tiktoken pgml</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">#smlar</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span>- <span style="color:#000">pg_search pg_bigm zhparser hunspell</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span>- <span style="color:#000">hydra pg_lakehouse pg_duckdb duckdb_fdw pg_fkpart pg_partman plproxy</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">#pg_strom citus</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span>- <span style="color:#000">pg_hint_plan age hll rum pg_graphql pg_jsonschema jsquery index_advisor hypopg imgsmlr pg_ivm pgmq pgq</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">#rdkit</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span>- <span style="color:#000">pg_tle plv8 pllua plprql pldebugger plpgsql_check plprofiler plsh</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">#pljava plr pgtap faker dbt2</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span>- <span style="color:#000">prefix semver pgunit md5hash asn1oid roaringbitmap pgfaceting pgsphere pg_country pg_currency pgmp numeral pg_rational pguint ip4r timestamp9 chkpass #pg_uri #pgemailaddr #acl #debversion</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">#pg_rrule</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span>- <span style="color:#000">topn pg_gzip pg_http pg_net pg_html5_email_address pgsql_tweaks pg_extra_time pg_timeit count_distinct extra_window_functions first_last_agg tdigest aggs_for_arrays pg_arraymath pg_idkit pg_uuidv7 permuteseq pg_hashids</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span>- <span style="color:#000">sequential_uuids pg_math pg_random pg_base36 pg_base62 floatvec pg_financial pgjwt pg_hashlib shacrypt cryptint pg_ecdsa pgpcre icu_ext envvar url_encode #pg_zstd #aggs_for_vecs #quantile #lower_quantile #pgqr</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">#pg_protobuf</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span>- <span style="color:#000">pg_repack pg_squeeze pg_dirtyread pgfincore pgdd ddlx pg_prioritize pg_checksums pg_readonly safeupdate pg_permissions pgautofailover pg_catcheck preprepare pgcozy pg_orphaned pg_crash pg_cheat_funcs pg_savior table_log pg_fio</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">#pgpool pgagent</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span>- <span style="color:#000">pg_profile pg_show_plans pg_stat_kcache pg_stat_monitor pg_qualstats pg_store_plans pg_track_settings pg_wait_sampling system_stats pg_meta pgnodemx pg_sqlog bgw_replstatus pgmeminfo toastinfo pagevis powa pg_top #pg_statviz #pgexporter_ext</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">#pg_mon</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span>- <span style="color:#000">passwordcheck supautils pgsodium pg_vault anonymizer pg_tde pgsmcrypto pgaudit pgauditlogtofile pg_auth_mon credcheck pgcryptokey pg_jobmon logerrors login_hook set_user pg_snakeoil pgextwlist pg_auditor noset</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">#sslutils</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span>- <span style="color:#000">wrappers multicorn mysql_fdw tds_fdw sqlite_fdw pgbouncer_fdw mongo_fdw redis_fdw pg_redis_pubsub kafka_fdw hdfs_fdw firebird_fdw aws_s3 log_fdw #oracle_fdw</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">#db2_fdw</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span>- <span style="color:#000">orafce pgtt session_variable pg_statement_rollback pg_dbms_metadata pg_dbms_lock pgmemcache #pg_dbms_job</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">#wiltondb</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span>- <span style="color:#000">pglogical pgl_ddl_deploy pg_failover_slots wal2json wal2mongo decoderbufs decoder_raw mimeo pgcopydb pgloader pg_fact_loader pg_bulkload pg_comparator pgimportdoc pgexportdoc #repmgr</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">#slony</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span>- <span style="color:#000">gis-stack rag-stack fdw-stack fts-stack etl-stack feat-stack olap-stack supa-stack stat-stack json-stack</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p><strong>Plugable Kernels</strong>:</p>
<p>Pigsty v3 allows you to replace the PostgreSQL kernel, currently supporting Babelfish (SQL Server compatible, with wire protocol emulation), IvorySQL (Oracle compatible), and RAC PolarDB for PostgreSQL.
Additionally, self-hosted Supabase is now available on Debian systems. You can emulate MSSQL (via WiltonDB), Oracle (via IvorySQL), Oracle RAC (via PolarDB), MongoDB (via FerretDB), and Firebase (via Supabase) in Pigsty
with production-grade PostgreSQL clusters featuring HA, IaC, PITR, and monitoring.</p>
<p><strong>Pro Edition</strong>:</p>
<p>We now offer <a href="https://pigsty.io/docs/about/service/">PGSTY Pro</a>, a professional edition that provides value-added services on top of the open-source features.
The professional edition includes additional modules: MSSQL, Oracle, Mongo, K8S, Victoria, Kafka, etc., and offers broader support for PG major versions, operating systems, and chip architectures.
It provides offline installation packages customized for precise minor versions of all operating systems, and support for legacy systems like EL7, Debian 11, Ubuntu 20.04.</p>
<p><strong>Major Changes</strong></p>
<p>This Pigsty release updates the major version number from 2.x to 3.0, with several significant changes:</p>
<ul>
<li>Primary supported operating systems updated to: EL 8 / EL 9 / Debian 12 / Ubuntu 22.04
<ul>
<li>EL7 / Debian 11 / Ubuntu 20.04 systems are now deprecated and no longer supported.</li>
<li>Users needing to run on these systems should consider our <a href="https://pigsty.io/docs/about/service">subscription service</a>.</li>
</ul>
</li>
<li>Default to online installation, offline packages are no longer provided to resolve minor OS version compatibility issues.
<ul>
<li>The <code>bootstrap</code> process will no longer prompt for downloading offline packages, but if <code>/tmp/pkg.tgz</code> exists, it will still use the offline package automatically.</li>
<li>For offline installation needs, please create offline packages yourself or consider our <a href="https://pigsty.io/docs/about/service">subscription service</a>.</li>
</ul>
</li>
<li>Unified adjustment of upstream software repositories used by Pigsty, address changes, and GPG signing and verification for all packages.
<ul>
<li>Standard repository: <code>https://repo.pigsty.io/{apt/yum}</code></li>
<li>Domestic mirror: <code>https://repo.pigsty.cc/{apt/yum}</code></li>
</ul>
</li>
<li>API parameter changes and configuration template changes
<ul>
<li>Configuration templates for EL and Debian systems are now consolidated, with differing parameters managed in the <a href="https://github.com/Vonng/pigsty/tree/master/roles/node_id/vars"><code>roles/node_id/vars/</code></a> directory.</li>
<li>Configuration directory changes, all configuration file templates are now placed in the <code>conf</code> directory and categorized into <code>default</code>, <code>dbms</code>, <code>demo</code>, <code>build</code>.</li>
</ul>
</li>
<li><strong><code>Docker</code></strong> is now completely treated as a separate module, and will not be downloaded by default</li>
<li>New beta module: <strong><code>KAFKA</code></strong></li>
<li>New beta module: <strong><code>KUBE</code></strong></li>
</ul>
<p><strong>Other New Features</strong></p>
<ul>
<li>Epic enhancement of PG OLAP analysis capabilities: DuckDB 1.0.0, DuckDB FDW, and PG Lakehouse, Hydra have been ported to the Debian system.</li>
<li>Strengthened PG vector search and full-text search capabilities: Vectorscale provides DiskANN vector indexing, Hunspell dictionary support, pg_search 0.8.6.</li>
<li>Resolved package build issues for ParadeDB, now available on Debian/Ubuntu.</li>
<li>All required extensions for Supabase are now available on Debian/Ubuntu, making Supabase self-hostable across all OSes.</li>
<li>Provided capability for scenario-based pre-configured extension stacks. If you&rsquo;re unsure which extensions to install, we offer extension recommendation packages (Stacks) tailored for specific application scenarios.</li>
<li>Created metadata tables, documentation, indexes, and name mappings for all PostgreSQL ecosystem extensions, ensuring alignment and usability for both EL and Debian systems.</li>
<li>Enhanced <code>proxy_env</code> parameter functionality to mitigate DockerHub ban issues, simplifying configuration.</li>
<li>Established a new dedicated software repository offering all extension plugins for versions 12-17, with the PG16 extension repository implemented by default in Pigsty.</li>
<li>Upgraded existing software repositories, employing standard signing and verification mechanisms to ensure package integrity and security. The APT repository adopts a new standard layout built through <code>reprepro</code>.</li>
<li>Provided sandbox environments for 1, 2, 3, 4, 43 nodes: <code>meta</code>, <code>dual</code>, <code>trio</code>, <code>full</code>, <code>prod</code>, and quick configuration templates for 7 major OS Distros.</li>
<li>Add PostgreSQL 17 and pgBouncer 1.23 metrics support in pg_exporter config, adding related dashboard panels.</li>
<li>Add logs panel for PGSQL Pgbouncer / PGSQL Patroni Dashboard</li>
<li>Add new playbook <code>cache.yml</code> to make offline packages, instead of bash <code>bin/cache</code> and <code>bin/release-pkg</code></li>
</ul>
<p><strong>API Changes</strong></p>
<ul>
<li>New parameter option: <code>pg_mode</code> now have several new options:
<ul>
<li><code>pgsql</code>: Standard PostgreSQL high availability cluster.</li>
<li><code>citus</code>: Citus horizontally distributed PostgreSQL native high availability cluster.</li>
<li><code>gpsql</code>: Monitoring for Greenplum and GP compatible databases (Pro edition).</li>
<li><code>mssql</code>: Install WiltonDB / Babelfish to provide Microsoft SQL Server compatibility mode for standard PostgreSQL high availability clusters, with wire protocol level support, extensions unavailable.</li>
<li><code>ivory</code>: Install IvorySQL to provide Oracle compatibility for PostgreSQL high availability clusters, supporting Oracle syntax/data types/functions/stored procedures, extensions unavailable (Pro edition).</li>
<li><code>polar</code>: Install PolarDB for PostgreSQL (PG RAC) open-source version to support localization database capabilities, extensions unavailable (Pro edition).</li>
</ul>
</li>
<li>New parameter: <code>pg_parameters</code>, used to specify parameters in <code>postgresql.auto.conf</code> at the instance level, overriding cluster configurations for personalized settings on different instance members.</li>
<li>New parameter: <code>pg_files</code>, used to specify additional files to be written to the PostgreSQL data directory, to support license feature required by some kernel forks.</li>
<li>New parameter: <code>repo_extra_packages</code>, used to specify additional packages to download, to be used in conjunction with <code>repo_packages</code>, facilitating the specification of extension lists unique to OS versions.</li>
<li>Parameter renaming: <code>patroni_citus_db</code> renamed to <code>pg_primary_db</code>, used to specify the primary database in the cluster (used in Citus mode).</li>
<li>Parameter enhancement: Proxy server configurations in <code>proxy_env</code> will be written to the Docker Daemon to address internet access issues, and the <code>configure -x</code> option will automatically write the proxy server configuration of the current environment.</li>
<li>Parameter enhancement: Allow using <code>path</code> item in <code>infra_portal</code> entries, to expose local dir as web service rather than proxy to another upstream.</li>
<li>Parameter enhancement: The <code>repo_url_packages</code> in <code>repo.pigsty.io</code> will automatically switch to <code>repo.pigsty.cc</code> when the region is China, addressing internet access issues. Additionally, the downloaded file name can now be specified.</li>
<li>Parameter enhancement: The <code>extension</code> field in <code>pg_databases.extensions</code> now supports both dictionary and extension name string modes. The dictionary mode offers <code>version</code> support, allowing the installation of specific extension versions.</li>
<li>Parameter enhancement: If the <code>repo_upstream</code> parameter is not explicitly overridden, it will extract the default value for the corresponding system from <a href="https://github.com/Vonng/pigsty/blob/master/roles/node_id/vars/rpm.yml"><code>rpm.yml</code></a> or <a href="https://github.com/Vonng/pigsty/blob/master/roles/node_id/vars/deb.yml"><code>deb.yml</code></a>.</li>
<li>Parameter enhancement: If the <code>repo_packages</code> parameter is not explicitly overridden, it will extract the default value for the corresponding system from <a href="https://github.com/Vonng/pigsty/blob/master/roles/node_id/vars/rpm.yml"><code>rpm.yml</code></a> or <a href="https://github.com/Vonng/pigsty/blob/master/roles/node_id/vars/deb.yml"><code>deb.yml</code></a>.</li>
<li>Parameter enhancement: If the <code>infra_packages</code> parameter is not explicitly overridden, it will extract the default value for the corresponding system from <a href="https://github.com/Vonng/pigsty/blob/master/roles/node_id/vars/rpm.yml"><code>rpm.yml</code></a> or <a href="https://github.com/Vonng/pigsty/blob/master/roles/node_id/vars/deb.yml"><code>deb.yml</code></a>.</li>
<li>Parameter enhancement: If the <code>node_default_packages</code> parameter is not explicitly overridden, it will extract the default value for the corresponding system from <a href="https://github.com/Vonng/pigsty/blob/master/roles/node_id/vars/rpm.yml"><code>rpm.yml</code></a> or <a href="https://github.com/Vonng/pigsty/blob/master/roles/node_id/vars/deb.yml"><code>deb.yml</code></a>.</li>
<li>Parameter enhancement: The extensions specified in <code>pg_packages</code> and <code>pg_extensions</code> will now perform a lookup and translation from the <code>pg_package_map</code> defined in <a href="https://github.com/Vonng/pigsty/blob/master/roles/node_id/vars/rpm.yml"><code>rpm.yml</code></a> or <a href="https://github.com/Vonng/pigsty/blob/master/roles/node_id/vars/deb.yml"><code>deb.yml</code></a>.</li>
<li>Parameter enhancement: Packages specified in <code>node_packages</code> and <code>pg_extensions</code> will be upgraded to the latest version upon installation. The default value in <code>node_packages</code> is now <code>[openssh-server]</code>, helping to fix the <a href="https://pigsty.io/blog/db/cve-2024-6387/">OpenSSH CVE</a>.</li>
<li>Parameter enhancement: <code>pg_dbsu_uid</code> will automatically adjust to <code>26</code> (EL) or <code>543</code> (Debian) based on the operating system type, avoiding manual adjustments.</li>
<li>pgBouncer Parameter update, <code>max_prepared_statements = 128</code> enabled prepared statement support in transaction pooling mode, and set <code>server_lifetime</code> to 600.</li>
<li>Patroni template parameter update, uniformly increase <code>max_worker_processes</code> +8 available backend processes, increase <code>max_wal_senders</code> and <code>max_replication_slots</code> to 50, and increase the OLAP template temporary file size limit to 1/5 of the main disk.</li>
</ul>
<p><strong>Software Upgrade</strong></p>
<p>The main components of Pigsty are upgraded to the following versions (as of the release time):</p>
<ul>
<li><a href="https://www.postgresql.org/about/news/postgresql-164-158-1413-1316-1220-and-17-beta-3-released-2910/"><strong>PostgreSQL</strong></a> 16.4, 15.8, 14.13, 13.16, 12.20</li>
<li><a href="https://github.com/Vonng/pg_exporter">pg_exporter</a> : 0.7.0</li>
<li><a href="https://patroni.readthedocs.io/en/latest/">Patroni</a>: 3.3.2</li>
<li><a href="https://www.pgbouncer.org/2024/08/pgbouncer-1-23-1">pgBouncer</a>: 1.23.1</li>
<li><a href="https://pgbackrest.org/release.html#2.53.1">pgBackRest</a>: 2.53.1</li>
<li><a href="https://github.com/duckdb/duckdb">duckdb</a> : 1.0.0</li>
<li><a href="https://github.com/etcd-io/etcd">etcd</a> : 3.5.15</li>
<li><a href="https://github.com/cybertec-postgresql/pg_timetable">pg_timetable</a>: 5.9.0</li>
<li><a href="https://github.com/FerretDB/FerretDB">ferretdb</a>: 1.23.1</li>
<li><a href="https://github.com/cybertec-postgresql/vip-manager">vip-manager</a>: 2.6.0</li>
<li><a href="https://github.com/minio/minio">minio</a>: 20240817012454</li>
<li><a href="https://github.com/minio/mc">mcli</a>: 20240817113350</li>
<li><a href="https://github.com/grafana/grafana/">grafana</a> : 11.1.4</li>
<li><a href="https://github.com/grafana/loki">loki</a> : 3.1.1</li>
<li><a href="https://github.com/grafana/loki">promtail</a> : 3.0.0</li>
<li><a href="https://github.com/prometheus/prometheus">prometheus</a> : 2.54.0</li>
<li><a href="https://github.com/prometheus/pushgateway">pushgateway</a> : 1.9.0</li>
<li><a href="https://github.com/prometheus/alertmanager">alertmanager</a> : 0.27.0</li>
<li><a href="https://github.com/prometheus/blackbox_exporter">blackbox_exporter</a> : 0.25.0</li>
<li><a href="https://github.com/nginxinc/nginx-prometheus-exporter">nginx_exporter</a> : 1.3.0</li>
<li><a href="https://github.com/prometheus/node_exporter">node_exporter</a> : 1.8.2</li>
<li><a href="https://github.com/gen2brain/keepalived_exporter">keepalived_exporter</a> : 0.7.0</li>
<li><a href="https://github.com/woblerr/pgbackrest_exporter">pgbackrest_exporter</a> 0.18.0</li>
<li><a href="https://github.com/prometheus/mysqld_exporter">mysqld_exporter</a> : 0.15.1</li>
<li><a href="https://github.com/oliver006/redis_exporter">redis_exporter</a> : v1.62.0</li>
<li><a href="https://github.com/danielqsj/kafka_exporter">kafka_exporter</a> : 1.8.0</li>
<li><a href="https://github.com/percona/mongodb_exporter">mongodb_exporter</a> : 0.40.0</li>
<li><a href="https://github.com/VictoriaMetrics/VictoriaMetrics">VictoriaMetrics</a> : 1.102.1</li>
<li><a href="https://github.com/VictoriaMetrics/VictoriaMetrics/releases">VictoriaLogs</a> : v0.28.0</li>
<li><a href="https://github.com/labring/sealos">sealos</a>: 5.0.0</li>
<li><a href="https://github.com/vectordotdev/vector/releases">vector</a> : 0.40.0</li>
</ul>
<p>The complete list of 340 available PostgreSQL extensions can be found <a href="https://pigsty.io/docs/pgext/list/">here</a>.</p>
<p><strong>Docker Application</strong></p>
<p>Pigsty now offers out-of-the-box Dify and Odoo Docker Compose templates:</p>
<ul>
<li><a href="https://github.com/Vonng/pigsty/tree/master/app/dify">Dify</a>: Open Source AI Agent Workflow &amp; LLMOps, with PostgreSQL &amp; PGVector</li>
<li><a href="https://github.com/Vonng/pigsty/tree/master/app/Odoo">Odoo</a>: Open Source ERP System</li>
</ul>
<p>There two new beta modules available in Pigsty Pro version:</p>
<ul>
<li><strong><code>KAFKA</code></strong>: Deploy a high-availability Kafka cluster supported by the Kraft protocol.</li>
<li><strong><code>KUBE</code></strong>: Deploy a Kubernetes cluster managed by Pigsty using cri-dockerd or containerd.</li>
</ul>
<p><strong>Bug Fix</strong></p>
<ul>
<li>Fix Debian/Ubuntu postgres service been overwritten by postgresql-common after server reboot.</li>
<li>Fix <a href="https://pigsty.io/blog/db/cve-2024-6387/">CVE-2024-6387</a> by automatically repairing during the Pigsty installation process using the default value <code>[openssh-server]</code> in <code>node_packages</code>.</li>
<li>Fix memory consumption issues caused by Loki parsing Nginx log tag cardinality being too large.</li>
<li>Fix bootstrap failure caused by upstream Ansible dependency changes in EL8 systems (python3.11-jmespath upgraded to python3.12-jmespath).</li>
</ul>
<hr>
<h2 id="v270">v2.7.0</h2>
<p><strong>Highlight</strong></p>
<p>Extension Overwhelming, adding numerous new extensions written in <code>rust</code> &amp; <code>pgrx</code>:</p>
<ul>
<li><a href="https://github.com/paradedb/paradedb/tree/dev/pg_search">pg_search</a> v0.7.0 : Full text search over SQL tables using the BM25 algorithm</li>
<li><a href="https://github.com/paradedb/paradedb/tree/dev/pg_lakehouse">pg_lakehouse</a> v0.7.0 : Query engine over object stores like S3 and table formats like Delta Lake</li>
<li><a href="https://github.com/paradedb/pg_analytics">pg_analytics</a> v0.6.1 : Accelerates analytical query processing inside Postgres</li>
<li><a href="https://github.com/supabase/pg_graphql">pg_graphql</a> v1.5.4 : GraphQL support to your PostgreSQL database.</li>
<li><a href="https://github.com/supabase/pg_jsonschema">pg_jsonschema</a> v0.3.1 : PostgreSQL extension providing JSON Schema validation</li>
<li><a href="https://github.com/supabase/wrappers">wrappers</a> v0.3.1 : Postgres Foreign Data Wrappers Collections by Supabase</li>
<li><a href="https://github.com/tembo-io/pgmq">pgmq</a> v1.5.2 : A lightweight message queue. Like AWS SQS and RSMQ but on Postgres.</li>
<li><a href="https://github.com/tembo-io/pg_tier">pg_tier</a> v0.0.3 : Postgres Extension written in Rust, to enable data tiering to AWS S3</li>
<li><a href="https://github.com/tembo-io/pg_vectorize">pg_vectorize</a> v0.15.0 : The simplest way to orchestrate vector search on Postgres</li>
<li><a href="https://github.com/tembo-io/pg_later">pg_later</a> v0.1.0 : Execute SQL now and get the results later.</li>
<li><a href="https://github.com/VADOSWARE/pg_idkit">pg_idkit</a> v0.2.3 : Generating many popular types of identifiers</li>
<li><a href="https://github.com/kaspermarstal/plprql">plprql</a> v0.1.0 : Use PRQL in PostgreSQL</li>
<li><a href="https://github.com/zhuobie/pgsmcrypto">pgsmcrypto</a> v0.1.0 : PostgreSQL SM Algorithm Extension</li>
<li><a href="https://github.com/kelvich/pg_tiktoken">pg_tiktoken</a> v0.0.1 : OpenAI tiktoken tokenizer for postgres</li>
<li><a href="https://github.com/rustprooflabs/pgdd">pgdd</a> v0.5.2 : Access Data Dictionary metadata with pure SQL</li>
</ul>
<p>And some new extensions in plain C &amp; C++</p>
<ul>
<li><a href="https://github.com/pgspider/parquet_s3_fdw">parquet_s3_fdw</a> 1.1.0 : ParquetS3 Foreign Data Wrapper for PostgresSQL</li>
<li><a href="https://github.com/plv8/plv8">plv8</a> 3.2.2 : V8 Engine Javascript Procedural Language add-on for PostgreSQL</li>
<li><a href="https://github.com/tvondra/md5hash">md5hash</a> 1.0.1 : Custom data type for storing MD5 hashes rather than text</li>
<li><a href="https://github.com/Percona-Lab/pg_tde">pg_tde</a> 1.0 alpha: Experimental encrypted access method for PostgreSQL</li>
<li><a href="https://github.com/df7cb/pg_dirtyread">pg_dirtyread</a> 2.6 : Read dead but unvacuumed tuples from a PostgreSQL relation</li>
<li>New deb PGDG extensions: <code>pg_roaringbitmap</code>, <code>pgfaceting</code>, <code>mobilitydb</code>, <code>pgsql-http</code>, <code>pg_hint_plan</code>, <code>pg_statviz</code>, <code>pg_rrule</code></li>
<li>New rpm PGDG extensions: <code>pg_profile</code>, <code>pg_show_plans</code>, use PGDG&rsquo;s <code>pgsql_http</code>, <code>pgsql_gzip</code>, <code>pg_net</code>, <code>pg_bigm</code> instead of Pigsty RPM.</li>
</ul>
<p><strong>New Features</strong></p>
<ul>
<li>running on certain <code>docker</code> containers.</li>
<li>prepare arm64 packages for infra &amp; pgsql packages for el &amp; deb distros.</li>
<li>new installation script to download from cloudflare, and more hint.</li>
<li>new monitoring dashboard for PGSQL PITR to assist the PITR procedure.</li>
<li>make preparation for running pigsty inside docker VM containers</li>
<li>add a <a href="https://github.com/Vonng/pigsty/issues/402">fool-proof design</a> for running pgsql.yml on node that is not managed by pigsty</li>
<li>add config template for each major version: el7, el8, el9, debian11, debian12, ubuntu20, ubuntu22</li>
</ul>
<p><strong>Software Upgrade</strong></p>
<ul>
<li><strong>PostgreSQL 16.3</strong></li>
<li>Patroni 3.3.0</li>
<li>pgBackRest 2.51</li>
<li>vip-manager v2.5.0</li>
<li>Haproxy 2.9.7</li>
<li>Grafana 10.4.2</li>
<li>Prometheus 2.51</li>
<li>Loki &amp; Promtail: 3.0.0 (breaking changes!)</li>
<li>Alertmanager 0.27.0</li>
<li>BlackBox Exporter 0.25.0</li>
<li>Node Exporter 1.8.0</li>
<li>pgBackrest Exporter 0.17.0</li>
<li>duckdb 0.10.2</li>
<li>etcd 3.5.13</li>
<li>minio-20240510014138 / mcli-20240509170424</li>
<li>pev2 v1.8.0 -&gt; v1.11.0</li>
<li><strong>pgvector</strong> 0.6.1 -&gt; 0.7.0</li>
<li>pg_tle: v1.3.4 -&gt; v1.4.0</li>
<li>hydra: v1.1.1 -&gt; v1.1.2</li>
<li>duckdb_fdw: v1.1.0 recompile with libduckdb 0.10.2</li>
<li>pg_bm25 0.5.6 -&gt; pg_search 0.7.0</li>
<li>pg_analytics: 0.5.6 -&gt; 0.6.1</li>
<li>pg_graphql: 1.5.0 -&gt; 1.5.4</li>
<li>pg_net 0.8.0 -&gt; 0.9.1</li>
<li>pg_sparse (deprecated)</li>
</ul>
<p><strong>Docker Application</strong></p>
<ul>
<li><a href="https://github.com/Vonng/pigsty/tree/master/app/odoo">Odoo</a>: launch open source ERP and plugins</li>
<li><a href="https://github.com/Vonng/pigsty/tree/master/app/jupyter">Jupyter</a>: run jupyter notebook container</li>
<li><a href="https://github.com/Vonng/pigsty/tree/master/app/polardb">PolarDB</a>: run the demo PG RAC playground.</li>
<li><a href="https://github.com/Vonng/pigsty/tree/master/app/supabase">supabase</a>: bump to the latest GA version.</li>
<li><a href="https://github.com/Vonng/pigsty/tree/master/app/bytebase">bytebase</a>: use the <code>latest</code> tag instead of ad hoc version.</li>
<li><a href="https://github.com/Vonng/pigsty/tree/master/app/pg_exporter">pg_exporter</a>: update docker image example</li>
</ul>
<p><strong>Bug Fix</strong></p>
<ul>
<li>Fix role pg_exporters white space in variable templates</li>
<li>Fix <code>minio_cluster</code> not commented in global variables</li>
<li>Fix the non-exist <code>postgis34</code> in el7 config template</li>
<li>Fix EL8 <code>python3.11-cryptography</code> deps to <code>python3-cryptography</code> according to upstream</li>
<li>Fix <code>/pg/bin/pg-role</code> can not get OS user name from environ in non-interact mode</li>
<li>Fix <code>/pg/bin/pg-pitr</code> can not hint -X -P flag properly</li>
</ul>
<p><strong>API Change</strong></p>
<ul>
<li>New parameter <code>node_write_etc_hosts</code> to control whether to write <code>/etc/hosts</code> file on target nodes.</li>
<li>Relocatable prometheus target directory with new parameter <code>prometheus_sd_dir</code>.</li>
<li>Add <code>-x|--proxy</code> flag to enable and use value of global proxy env by @waitingsong in <a href="https://github.com/Vonng/pigsty/pull/405">https://github.com/Vonng/pigsty/pull/405</a></li>
<li>No longer parse infra nginx log details since it brings too much labels to the log.</li>
<li>Use alertmanager API Version v2 instead of v1 in prometheus config.</li>
<li>Use <code>/pg/cert/ca.crt</code> instead of <code>/etc/pki/ca.crt</code> in pgsql roles.</li>
</ul>
<p><strong>New Contributors</strong></p>
<ul>
<li>@NeroSong made their first contribution in <a href="https://github.com/Vonng/pigsty/pull/373">https://github.com/Vonng/pigsty/pull/373</a></li>
<li>@waitingsong made their first contribution in <a href="https://github.com/Vonng/pigsty/pull/405">https://github.com/Vonng/pigsty/pull/405</a></li>
</ul>
<p><strong>Package Checksums</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ec271a1d34b2b1360f78bfa635986c3a  pigsty-pkg-v2.7.0.el8.x86_64.tgz
</span></span><span style="display:flex;"><span>f3304bfd896b7e3234d81d8ff4b83577  pigsty-pkg-v2.7.0.debian12.x86_64.tgz
</span></span><span style="display:flex;"><span>5b071c2a651e8d1e68fc02e7e922f2b3  pigsty-pkg-v2.7.0.ubuntu22.x86_64.tgz
</span></span></code></pre></div><hr>
<h2 id="v260">v2.6.0</h2>
<p><strong>Highlight</strong></p>
<ul>
<li>Use PostgreSQL 16 as the default major version (16.2)</li>
<li>Introduce <a href="https://www.paradedb.com/">ParadeDB</a> extensions: <code>pg_analytics</code>, <code>pg_bm25</code>, and <code>pg_sparse</code></li>
<li>Introduce <a href="https://duckdb.org/">DuckDB</a> and corresponding foreign data wrapper: <code>duckdb_fdw</code></li>
<li>Cloudflare CDN <a href="https://repo.pigsty.io">https://repo.pigsty.io</a> and QCloud CDN <a href="https://repo.pigsty.cc">https://repo.pigsty.cc</a></li>
</ul>
<p><strong>Configuration</strong></p>
<ul>
<li>Disable Grafana Unified Alert to work around the &ldquo;Database Locked&rdquo; error.</li>
<li>add <code>node_repo_modules</code> to add upstream repos (including local one) to node</li>
<li>remove <code>node_local_repo_urls</code>, replaced by <code>node_repo_modules</code> &amp; <code>repo_upstream</code>.</li>
<li>remove <code>node_repo_method</code>, replaced by <code>node_repo_modules</code>.</li>
<li>add the new <code>local</code> repo into <code>repo_upstream</code> instead of <code>node_local_repo_urls</code></li>
<li>add <code>chrony</code> into <code>node_default_packages</code></li>
<li>remove redis,minio,postgresql client from infra packages</li>
<li>replace <code>repo_upstream.baseurl</code> $releasever for pgdg el8/el9 with <code>major.minor</code> instead of <code>major</code> version</li>
</ul>
<p><strong>Software Upgrade</strong></p>
<ul>
<li>Grafana 10.3.3</li>
<li>Prometheus 2.47</li>
<li>node_exporter 1.7.0</li>
<li>HAProxy 2.9.5</li>
<li>Loki / Promtail 2.9.4</li>
<li>minio-20240216110548 / mcli-20240217011557</li>
<li>etcd 3.5.11</li>
<li>Redis 7.2.4</li>
<li>Bytebase 2.13.2</li>
<li>HAProxy 2.9.5</li>
<li>DuckDB 0.10.0</li>
<li>FerretDB 1.19</li>
<li>Metabase: new docker compose app template added</li>
</ul>
<p><strong>PostgreSQL x Pigsty Extensions</strong></p>
<ul>
<li>PostgreSQL Minor Version Upgrade 16.2, 15.6, 14.11, 13.14, 12.18</li>
<li>PostgreSQL 16 is now used as the default major version</li>
<li>pg_exporter 0.6.1, security fix</li>
<li>Patroni 3.2.2</li>
<li>pgBadger 12.4</li>
<li>pgBouncer 1.22</li>
<li>pgBackRest 2.50</li>
<li>vip-manager 2.3.0</li>
<li>PostGIS 3.4.1</li>
<li>PGVector 0.6.0</li>
<li>TimescaleDB 2.14.1</li>
<li>New Extension <a href="https://github.com/alitrack/duckdb_fdw">duckdb_fdw</a> v1.1</li>
<li>New Extension <a href="https://github.com/pramsey/pgsql-gzip">pgsql-gzip</a> v1.0.0</li>
<li>New Extension <a href="https://github.com/paradedb/paradedb/tree/dev/pg_sparse">pg_sparse</a> from ParadeDB: v0.5.6</li>
<li>New Extension <a href="https://github.com/paradedb/paradedb/tree/dev/pg_bm25">pg_bm25</a> from ParadeDB: v0.5.6</li>
<li>New Extension <a href="https://github.com/paradedb/paradedb/tree/dev/pg_analytics">pg_analytics</a> from ParadeDB: v0.5.6</li>
<li>Bump AI/ML Extension <a href="https://github.com/postgresml/postgresml">pgml</a> to v2.8.1 with pg16 support</li>
<li>Bump Columnar Extension <a href="https://github.com/hydradatabase/">hydra</a> to v1.1.1 with pg16 support</li>
<li>Bump Graph Extension <a href="https://github.com/apache/age">age</a> to v1.5.0 with pg16 support</li>
<li>Bump Packaging Extension <a href="https://github.com/aws/pg_tle">pg_tle</a> to v1.3.4 with pg16 support</li>
<li>Bump GraphQL Extension <a href="https://github.com/supabase/pg_graphql">pg_graphql</a> to v1.5.0 to support supabase</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>330e9bc16a2f65d57264965bf98174ff  pigsty-v2.6.0.tgz
</span></span><span style="display:flex;"><span>81abcd0ced798e1198740ab13317c29a  pigsty-pkg-v2.6.0.debian11.x86_64.tgz
</span></span><span style="display:flex;"><span>7304f4458c9abd3a14245eaf72f4eeb4  pigsty-pkg-v2.6.0.debian12.x86_64.tgz
</span></span><span style="display:flex;"><span>f914fbb12f90dffc4e29f183753736bb  pigsty-pkg-v2.6.0.el7.x86_64.tgz
</span></span><span style="display:flex;"><span>fc23d122d0743d1c1cb871ca686449c0  pigsty-pkg-v2.6.0.el8.x86_64.tgz
</span></span><span style="display:flex;"><span>9d258dbcecefd232f3a18bcce512b75e  pigsty-pkg-v2.6.0.el9.x86_64.tgz
</span></span><span style="display:flex;"><span>901ee668621682f99799de8932fb716c  pigsty-pkg-v2.6.0.ubuntu20.x86_64.tgz
</span></span><span style="display:flex;"><span>39872cf774c1fe22697c428be2fc2c22  pigsty-pkg-v2.6.0.ubuntu22.x86_64.tgz
</span></span></code></pre></div><hr>
<h2 id="v251">v2.5.1</h2>
<p>Routine update with v16.1, v15.5, 14.10, 13.13, 12.17, 11.22</p>
<p>Now PostgreSQL 16 has all the core extensions available (<code>pg_repack</code> &amp; <code>timescaledb</code> added)</p>
<ul>
<li>Software Version Upgrade:
<ul>
<li>PostgreSQL to v16.1, v15.5, 14.10, 13.13, 12.17, 11.22</li>
<li>Patroni v3.2.0</li>
<li>PgBackrest v2.49</li>
<li>Citus 12.1</li>
<li>TimescaleDB 2.13.0 (with PG 16 support)</li>
<li>Grafana v10.2.2</li>
<li>FerretDB 1.15</li>
<li>SealOS 4.3.7</li>
<li>Bytebase 2.11.1</li>
</ul>
</li>
</ul>
<ul>
<li>Remove <code>monitor</code> schema prefix from PGCAT dashboard queries</li>
<li>New template <code>wool.yml</code> for Aliyun free ECS singleton</li>
<li>Add <code>python3-jmespath</code> in addition to <code>python3.11-jmespath</code> for el9</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>31ee48df1007151009c060e0edbd74de  pigsty-pkg-v2.5.1.el7.x86_64.tgz
</span></span><span style="display:flex;"><span>a40f1b864ae8a19d9431bcd8e74fa116  pigsty-pkg-v2.5.1.el8.x86_64.tgz
</span></span><span style="display:flex;"><span>c976cd4431fc70367124fda4e2eac0a7  pigsty-pkg-v2.5.1.el9.x86_64.tgz
</span></span><span style="display:flex;"><span>7fc1b5bdd3afa267a5fc1d7cb1f3c9a7  pigsty-pkg-v2.5.1.debian11.x86_64.tgz
</span></span><span style="display:flex;"><span>add0731dc7ed37f134d3cb5b6646624e  pigsty-pkg-v2.5.1.debian12.x86_64.tgz
</span></span><span style="display:flex;"><span>99048d09fa75ccb8db8e22e2a3b41f28  pigsty-pkg-v2.5.1.ubuntu20.x86_64.tgz
</span></span><span style="display:flex;"><span>431668425f8ce19388d38e5bfa3a948c  pigsty-pkg-v2.5.1.ubuntu22.x86_64.tgz
</span></span></code></pre></div><hr>
<h2 id="v250">v2.5.0</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -L https://get.pigsty.cc/latest <span style="color:#000;font-weight:bold">|</span> bash
</span></span></code></pre></div><p><strong>Highlights</strong></p>
<ul>
<li>
<p><a href="https://github.com/Vonng/pigsty/blob/master/files/pigsty/ubuntu.yml">Ubuntu</a> / <a href="https://github.com/Vonng/pigsty/blob/master/files/pigsty/debian.yml">Debian</a> Support:  bullseye, bookworm, jammy, focal</p>
</li>
<li>
<p>Dedicate yum/apt repo on <code>repo.pigsty.cc</code> and mirror on packagecloud.io</p>
</li>
<li>
<p>Anolis OS Support (EL 8.8 Compatible)</p>
</li>
<li>
<p>PG Major Candidate: Use PostgreSQL 16 instead of PostgreSQL 14.</p>
</li>
<li>
<p>New Dashboard PGSQL Exporter, PGSQL Patroni, rework on PGSQL Query</p>
</li>
<li>
<p>Extensions Update:</p>
<ul>
<li>Bump PostGIS version to v3.4 on el8, el9, ubuntu22, keep postgis 33 on EL7</li>
<li>Remove extension <code>pg_embedding</code> because it is no longer maintained, use <code>pgvector</code> instead.</li>
<li>New extension on EL: <code>pointcloud</code> with LIDAR data type support.</li>
<li>New extension on EL: <code>imgsmlr</code>,  <code>pg_similarity</code>, <code>pg_bigm</code></li>
<li>Include columnar extension <code>hydra</code> and remove <code>citus</code> from default installed extension list.</li>
<li>Recompile <code>pg_filedump</code> as PG major version independent package.</li>
</ul>
</li>
<li>
<p>Software Version Upgrade:</p>
<ul>
<li>Grafana to v10.1.5</li>
<li>Prometheus to v2.47</li>
<li>Promtail/Loki to v2.9.1</li>
<li>Node Exporter to v1.6.1</li>
<li>Bytebase to v2.10.0</li>
<li>patroni to v3.1.2</li>
<li>pgbouncer to v1.21.0</li>
<li>pg_exporter to v0.6.0</li>
<li>pgbackrest to v2.48.0</li>
<li>pgbadger to v12.2</li>
<li>pg_graphql to v1.4.0</li>
<li>pg_net to v0.7.3</li>
<li>ferretdb to v0.12.1</li>
<li>sealos to 4.3.5</li>
<li>Supabase support to <code>20231013070755</code></li>
</ul>
</li>
</ul>
<p><strong>Ubuntu Support</strong></p>
<p>Pigsty has two ubuntu LTS support: 22.04 (jammy) and 20.04 (focal), and ship corresponding offline packages for them.</p>
<p>Some parameters need to be specified explicitly when deploying on Ubuntu, please refer to <a href="https://github.com/Vonng/pigsty/blob/master/files/pigsty/ubuntu.yml"><code>ubuntu.yml</code></a></p>
<ul>
<li><code>repo_upstream</code>: Adjust according to ubuntu / debian repo.</li>
<li><code>repo_packages</code>: Adjust according to ubuntu / debian naming convention</li>
<li><code>node_repo_local_urls</code>: use the default value: <code>['deb [trusted=yes] http://${admin_ip}/pigsty ./']</code></li>
<li><code>node_default_packages</code> :
<ul>
<li><code>zlib</code> -&gt; <code>zlib1g</code>, <code>readline</code> -&gt; <code>libreadline-dev</code></li>
<li><code>vim-minimal</code> -&gt; <code>vim-tiny</code>, <code>bind-utils</code> -&gt; <code>dnsutils</code>, <code>perf</code> -&gt; <code>linux-tools-generic</code>,</li>
<li>new packages <code>acl</code> to ensure ansible tmp file privileges are set correctly</li>
</ul>
</li>
<li><code>infra_packages</code>: replace all <code>_</code> with <code>-</code> in names, and replace <code>postgresql16</code> with <code>postgresql-client-16</code></li>
<li><code>pg_packages</code>: replace all <code>_</code> with <code>-</code> in names, <code>patroni-etcd</code> not needed on ubuntu</li>
<li><code>pg_extensions</code>: different naming convention, no <code>passwordcheck_cracklib</code> on ubuntu.</li>
<li><code>pg_dbsu_uid</code>: You have to manually specify <code>pg_dbsu_uid</code> on ubuntu, because PGDG deb package does not specify pg dbsu uid.</li>
</ul>
<p><strong>API Changes</strong></p>
<p>default values of following parameters have changed:</p>
<ul>
<li>
<p><code>repo_modules</code>: <code>infra,node,pgsql,redis,minio</code></p>
</li>
<li>
<p><code>repo_upstream</code>: Now add Pigsty Infra/MinIO/Redis/PGSQL modular upstream repo.</p>
</li>
<li>
<p><code>repo_packages</code>: remove unused <code>karma,mtail,dellhw_exporter</code> and pg 14 extra extensions, adding pg 16 extra extensions.</p>
</li>
<li>
<p><code>node_default_packages</code> now add <code>python3-pip</code> as default packages.</p>
</li>
<li>
<p><code>pg_libs</code>: <code>timescaledb</code> is remove from shared_preload_libraries by default.</p>
</li>
<li>
<p><code>pg_extensions</code>: citus is nolonger installed by default, and <code>passwordcheck_cracklib</code> is installed by default</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>- <span style="color:#000">pg_repack_${pg_version}* wal2json_${pg_version}* passwordcheck_cracklib_${pg_version}*</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span>- <span style="color:#000">postgis34_${pg_version}* timescaledb-2-postgresql-${pg_version}* pgvector_${pg_version}*</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div></li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>87e0be2edc35b18709d7722976e305b0  pigsty-pkg-v2.5.0.el7.x86_64.tgz
</span></span><span style="display:flex;"><span>e71304d6f53ea6c0f8e2231f238e8204  pigsty-pkg-v2.5.0.el8.x86_64.tgz
</span></span><span style="display:flex;"><span>39728496c134e4352436d69b02226ee8  pigsty-pkg-v2.5.0.el9.x86_64.tgz
</span></span><span style="display:flex;"><span>e3f548a6c7961af6107ffeee3eabc9a7  pigsty-pkg-v2.5.0.debian11.x86_64.tgz
</span></span><span style="display:flex;"><span>1e469cc86a19702e48d7c1a37e2f14f9  pigsty-pkg-v2.5.0.debian12.x86_64.tgz
</span></span><span style="display:flex;"><span>cc3af3b7c12f98969d3c6962f7c4bd8f  pigsty-pkg-v2.5.0.ubuntu20.x86_64.tgz
</span></span><span style="display:flex;"><span>c5b2b1a4867eee624e57aed58ac65a80  pigsty-pkg-v2.5.0.ubuntu22.x86_64.tgz
</span></span></code></pre></div><hr>
<h2 id="v241">v2.4.1</h2>
<p><strong>Highlights</strong></p>
<ul>
<li><a href="https://supabase.com/">Supabase</a> support: run open-source Firebase alternative with external postgres managed by Pigsty: <a href="https://github.com/Vonng/pigsty/tree/master/app/supabase">example config</a></li>
<li><a href="https://postgresml.org/">PostgresML</a> support: Run LLMs, vector operations, classical Machine Learning in Postgres.</li>
<li>GraphQL support: <a href="https://github.com/supabase/pg_graphql"><code>pg_graphql</code></a> reflects a GraphQL schema from the existing SQL schema.</li>
<li>Async HTTP Client support <a href="https://github.com/supabase/pg_net"><code>pg_net</code></a> enables asynchronous (non-blocking) HTTP/HTTPS requests with SQL</li>
<li>JWT support: <a href="https://github.com/michelp/pgjwt"><code>pgjwt</code></a> is the PostgreSQL implementation of JWT (JSON Web Tokens)</li>
<li>Vault support: <a href="https://github.com/supabase/vault"><code>vault</code></a> can store encrypted secrets in the Vault</li>
<li>New component <a href="https://github.com/df7cb/pg_filedump"><code>pg_filedump</code></a> for pg 14 &amp; 15, low-level data recovery tool for PostgreSQL</li>
<li>New extension <code>hydra</code> the columnar available for PG 13 - 15.</li>
<li>Reduce offline packages size for el9 400MB by removing <code>proj-data*</code></li>
<li>Bump <a href="https://github.com/FerretDB/FerretDB">FerretDB</a> version to v1.10</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>efabe7632d8994f3fb58f9838b8f9d7d  pigsty-pkg-v2.4.1.el7.x86_64.tgz # 1.1G
</span></span><span style="display:flex;"><span>ea78957e8c8434b120d1c8c43d769b56  pigsty-pkg-v2.4.1.el8.x86_64.tgz # 1.4G
</span></span><span style="display:flex;"><span>4ef280a7d28872814e34521978b851bb  pigsty-pkg-v2.4.1.el9.x86_64.tgz # 1.3G
</span></span></code></pre></div><hr>
<h2 id="v240">v2.4.0</h2>
<p>Get started with <code>bash -c &quot;$(curl -fsSL https://get.pigsty.cc/latest)&quot;</code>.</p>
<p><strong>Highlights</strong></p>
<ul>
<li>PostgreSQL 16 support</li>
<li>The first LTS version with business support and consulting service</li>
<li>Monitoring existing PostgreSQL, RDS for PostgreSQL / PolarDB with PGRDS Dashboards</li>
<li>New extension: Apache AGE, openCypher graph query engine on PostgreSQL</li>
<li>New extension: zhparser, full text search for Chinese language</li>
<li>New extension: pg_roaringbitmap, roaring bitmap for PostgreSQL</li>
<li>New extension: pg_embedding, hnsw alternative to pgvector</li>
<li>New extension: pg_tle, admin / manage stored procedure extensions</li>
<li>New extension: pgsql-http, issue http request with SQL interface</li>
<li>Add extensions: pg_auth_mon pg_checksums pg_failover_slots pg_readonly postgresql-unit pg_store_plans pg_uuidv7 set_user</li>
<li>Redis enhancement: add monitoring panels for redis sentinel, and auto HA configuration for redis ms cluster.</li>
</ul>
<p><strong>API Change</strong></p>
<ul>
<li>New Parameter: <code>REDIS</code>.<code>redis_sentinel_monitor</code>: specify masters monitor by redis sentinel cluster</li>
</ul>
<p><strong>Bug Fix</strong></p>
<ul>
<li>Fix Grafana 10.1 registered datasource will use random uid rather than <code>ins.datname</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>MD5 (pigsty-pkg-v2.4.0.el7.x86_64.tgz) = 257443e3c171439914cbfad8e9f72b17
</span></span><span style="display:flex;"><span>MD5 (pigsty-pkg-v2.4.0.el8.x86_64.tgz) = 41ad8007ffbfe7d5e8ba5c4b51ff2adc
</span></span><span style="display:flex;"><span>MD5 (pigsty-pkg-v2.4.0.el9.x86_64.tgz) = 9a950aed77a6df90b0265a6fa6029250
</span></span></code></pre></div><hr>
<h2 id="v231">v2.3.1</h2>
<p>Get started with <code>bash -c &quot;$(curl -fsSL https://get.pigsty.cc/latest)&quot;</code>.</p>
<p><strong>Highlights</strong></p>
<ul>
<li>PGVector 0.5 with HNSW index support</li>
<li>PostgreSQL 16 RC1 for el8/el9
Adding SealOS for kubernetes support</li>
</ul>
<p><strong>Bug Fix</strong></p>
<ul>
<li>Fix <code>infra</code>.<code>repo</code>.<code>repo_pkg</code> task when downloading rpm with <code>*</code> in their names in <code>repo_packages</code>.
<ul>
<li>if <code>/www/pigsty</code> already have package name match that pattern, some rpm will be skipped.</li>
</ul>
</li>
<li>Change default value of <code>vip_dns_suffix</code> to <code>''</code> empty string rather than <code>.vip</code></li>
<li>Grant sudo privilege for postgres dbsu when <code>pg_dbsu_sudo</code> = <code>limit</code> and <code>patroni_watchdog_mode</code> = <code>required</code>
<ul>
<li><code>/usr/bin/sudo /sbin/modprobe softdog</code>: enable watchdog module before launching patroni</li>
<li><code>/usr/bin/sudo /bin/chown {{ pg_dbsu }} /dev/watchdog</code>: chown watchdog before launching patroni</li>
</ul>
</li>
</ul>
<p><strong>Documentation Update</strong></p>
<ul>
<li>Add details to English documentation</li>
<li>Add Chinese/zh-cn documentation</li>
</ul>
<p><strong>Software Upgrade</strong></p>
<ul>
<li>PostgreSQL 16 RC1 on el8/el9</li>
<li>PGVector 0.5.0 with hnsw index</li>
<li>TimescaleDB 2.11.2</li>
<li>grafana 10.1.0</li>
<li>loki &amp; promtail 2.8.4</li>
<li>mcli-20230829225506 / minio-20230829230735</li>
<li>ferretdb 1.9</li>
<li>sealos 4.3.3</li>
<li>pgbadger 1.12.2</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>ce69791eb622fa87c543096cdf11f970  pigsty-pkg-v2.3.1.el7.x86_64.tgz
</span></span><span style="display:flex;"><span>495aba9d6d18ce1ebed6271e6c96b63a  pigsty-pkg-v2.3.1.el8.x86_64.tgz
</span></span><span style="display:flex;"><span>38b45582cbc337ff363144980d0d7b64  pigsty-pkg-v2.3.1.el9.x86_64.tgz
</span></span></code></pre></div><hr>
<h2 id="v230">v2.3.0</h2>
<p>Get started with <code>bash -c &quot;$(curl -fsSL https://get.pigsty.cc/latest)&quot;</code></p>
<p><strong>Highlight</strong></p>
<ul>
<li>INFRA: NODE/PGSQL VIP monitoring support</li>
<li>NODE:  Allow bind <code>node_vip</code> to node cluster with <code>keepalived</code></li>
<li>REPO: Dedicate yum repo, enable https for <a href="https://get.pigsty.cc"><code>get.pigsty.cc</code></a> and <a href="https://demo.pigsty.cc"><code>demo.pigsty.cc</code></a></li>
<li>PGSQL: Fix <a href="https://www.postgresql.org/about/news/postgresql-154-149-1312-1216-1121-and-postgresql-16-beta-3-released-2689/">CVE-2023-39417</a> with PostgreSQL 15.4, 14.9, 13.12, 12.16, bump patroni version to v3.1.0</li>
<li>APP: Bump <code>app/bytebase</code> to v2.6.0, <code>app/ferretdb</code> version to v1.8, new application <a href="https://nocodb.com/">nocodb</a></li>
<li>REDIS: bump to v7.2 and rework on dashboards</li>
<li>MONGO: basic deploy &amp; monitor support with <a href="https://www.ferretdb.io/">FerretDB</a> 1.8</li>
<li>MYSQL: add prometheus/grafana/ca stub for future implementation.</li>
</ul>
<p><strong>API Change</strong></p>
<p>Add 1 new section <code>NODE</code>.<code>NODE_VIP</code> with 8 new parameter</p>
<ul>
<li><code>NODE</code>.<code>VIP</code>.<code>vip_enabled</code> : enable vip on this node cluster?</li>
<li><code>NODE</code>.<code>VIP</code>.<code>vip_address</code> : node vip address in ipv4 format, required if vip is enabled</li>
<li><code>NODE</code>.<code>VIP</code>.<code>vip_vrid</code> : required, integer, 1-255 should be unique among same VLAN</li>
<li><code>NODE</code>.<code>VIP</code>.<code>vip_role</code> : <code>master/backup</code>, backup by default, use as init role</li>
<li><code>NODE</code>.<code>VIP</code>.<code>vip_preempt</code> : optional, <code>true/false</code>, false by default, enable vip preemption</li>
<li><code>NODE</code>.<code>VIP</code>.<code>vip_interface</code> : node vip network interface to listen, <code>eth0</code> by default</li>
<li><code>NODE</code>.<code>VIP</code>.<code>vip_dns_suffix</code> : node vip dns name suffix, <code>.vip</code> by default</li>
<li><code>NODE</code>.<code>VIP</code>.<code>vip_exporter_port</code> : keepalived exporter listen port, 9650 by default</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>MD5 (pigsty-pkg-v2.3.0.el7.x86_64.tgz) = 81db95f1c591008725175d280ad23615
</span></span><span style="display:flex;"><span>MD5 (pigsty-pkg-v2.3.0.el8.x86_64.tgz) = 6f4d169b36f6ec4aa33bfd5901c9abbe
</span></span><span style="display:flex;"><span>MD5 (pigsty-pkg-v2.3.0.el9.x86_64.tgz) = 4bc9ae920e7de6dd8988ca7ee681459d
</span></span></code></pre></div><hr>
<h2 id="v220">v2.2.0</h2>
<p>Get started with <code>bash -c &quot;$(curl -fsSL http://get.pigsty.cc/latest)&quot;</code></p>
<p>Release Note: <a href="https://doc.pigsty.cc/#/RELEASENOTE">https://doc.pigsty.cc/#/RELEASENOTE</a></p>
<p><strong>Highlight</strong></p>
<ul>
<li>Monitoring Dashboards Overhaul: <a href="https://demo.pigsty.cc">https://demo.pigsty.cc</a></li>
<li>Vagrant Sandbox Overhaul: libvirt support and new templates</li>
<li>Pigsty EL Yum Repo: Building simplified</li>
<li>OS Compatibility: UOS-v20-1050e support</li>
<li>New config template: prod simulation with 42 nodes</li>
<li>Use official pgdg citus distribution for el7</li>
</ul>
<p><strong>Software Upgrade</strong></p>
<ul>
<li>PostgreSQL 16 beta2</li>
<li>Citus 12 / PostGIS 3.3.3 / TimescaleDB 2.11.1 / PGVector 0.44</li>
<li>patroni 3.0.4 / pgbackrest 2.47 / pgbouncer 1.20</li>
<li>grafana 10.0.3 / loki/promtail/logcli 2.8.3</li>
<li>etcd 3.5.9 / haproxy v2.8.1 / redis v7.0.12</li>
<li>minio 20230711212934 / mcli 20230711233044</li>
</ul>
<p><strong>Bug Fix</strong></p>
<ul>
<li>Fix docker group ownership issue <a href="https://github.com/Vonng/pigsty/commit/29434bdd39548d95d80a236de9099874ed564f9b">29434bd</a></li>
<li>Append infra os group rather than set it as primary group</li>
<li>Fix redis sentinel systemd enable status <a href="https://github.com/Vonng/pigsty/commit/5c96feb598ad6e44daa7a595e34c87e67952777b">5c96feb</a></li>
<li>Loose <code>bootstrap</code> &amp; <code>configure</code> if <code>/etc/redhat-release</code> not exists</li>
<li>Fix grafana 9.x <a href="https://grafana.com/blog/2023/03/22/grafana-security-release-new-versions-with-security-fixes-for-cve-2023-1410/">CVE-2023-1410</a> with 10.0.2</li>
<li>Add PG 14 - 16 new command tags and error codes for <code>pglog</code> schema</li>
</ul>
<p><strong>API Change</strong></p>
<p>Add 1 new parameter</p>
<ul>
<li><code>INFRA</code>.<code>NGINX</code>.<code>nginx_exporter_enabled</code>        : now you can disable nginx_exporter with this parameter</li>
</ul>
<p>Default value changes:</p>
<ul>
<li><code>repo_modules</code>: <code>node,pgsql,infra</code> : redis is removed from it</li>
<li><code>repo_upstream</code>:
<ul>
<li>add <code>pigsty-el</code>: distribution independent rpms: such as grafana, minio, pg_exporter, etc&hellip;</li>
<li>add <code>pigsty-misc</code>: misc rpms: such as redis, minio, pg_exporter, etc&hellip;</li>
<li>remove <code>citus</code> repo since pgdg now have full official citus support (on el7)</li>
<li>remove <code>remi</code> , since redis is now included in <code>pigsty-misc</code></li>
<li>remove <code>grafana</code> in build config for acceleration</li>
</ul>
</li>
<li><code>repo_packages</code>:
<ul>
<li>ansible python3 python3-pip python3-requests python3.11-jmespath dnf-utils modulemd-tools # el7: python36-requests python36-idna yum-utils</li>
<li>grafana loki logcli promtail prometheus2 alertmanager karma pushgateway node_exporter blackbox_exporter nginx_exporter redis_exporter</li>
<li>redis etcd minio mcli haproxy vip-manager pg_exporter nginx createrepo_c sshpass chrony dnsmasq docker-ce docker-compose-plugin flamegraph</li>
<li>lz4 unzip bzip2 zlib yum pv jq git ncdu make patch bash lsof wget uuid tuned perf nvme-cli numactl grubby sysstat iotop htop rsync tcpdump</li>
<li>netcat socat ftp lrzsz net-tools ipvsadm bind-utils telnet audit ca-certificates openssl openssh-clients readline vim-minimal</li>
<li>postgresql13* wal2json_13* pg_repack_13* passwordcheck_cracklib_13* postgresql12* wal2json_12* pg_repack_12* passwordcheck_cracklib_12* timescaledb-tools</li>
<li>postgresql15 postgresql15* citus_15* pglogical_15* wal2json_15* pg_repack_15* pgvector_15* timescaledb-2-postgresql-15* postgis33_15* passwordcheck_cracklib_15* pg_cron_15*</li>
<li>postgresql14 postgresql14* citus_14* pglogical_14* wal2json_14* pg_repack_14* pgvector_14* timescaledb-2-postgresql-14* postgis33_14* passwordcheck_cracklib_14* pg_cron_14*</li>
<li>postgresql16* wal2json_16* pgvector_16* pg_squeeze_16* postgis34_16* passwordcheck_cracklib_16* pg_cron_16*</li>
<li>patroni patroni-etcd pgbouncer pgbadger pgbackrest pgloader pg_activity pg_partman_15 pg_permissions_15 pgaudit17_15 pgexportdoc_15 pgimportdoc_15 pg_statement_rollback_15*</li>
<li>orafce_15* mysqlcompat_15 mongo_fdw_15* tds_fdw_15* mysql_fdw_15 hdfs_fdw_15 sqlite_fdw_15 pgbouncer_fdw_15 multicorn2_15* powa_15* pg_stat_kcache_15* pg_stat_monitor_15* pg_qualstats_15 pg_track_settings_15 pg_wait_sampling_15 system_stats_15</li>
<li>plprofiler_15* plproxy_15 plsh_15* pldebugger_15 plpgsql_check_15*  pgtt_15 pgq_15* pgsql_tweaks_15 count_distinct_15 hypopg_15 timestamp9_15* semver_15* prefix_15* rum_15 geoip_15 periods_15 ip4r_15 tdigest_15 hll_15 pgmp_15 extra_window_functions_15 topn_15</li>
<li>pg_background_15 e-maj_15 pg_catcheck_15 pg_prioritize_15 pgcopydb_15 pg_filedump_15 pgcryptokey_15 logerrors_15 pg_top_15 pg_comparator_15 pg_ivm_15* pgsodium_15* pgfincore_15* ddlx_15 credcheck_15 safeupdate_15 pg_squeeze_15* pg_fkpart_15 pg_jobmon_15</li>
</ul>
</li>
<li><code>repo_url_packages</code>:
<ul>
<li><a href="http://get.pigsty.cc/rpm/pev.html">http://get.pigsty.cc/rpm/pev.html</a></li>
<li><a href="http://get.pigsty.cc/rpm/chart.tgz">http://get.pigsty.cc/rpm/chart.tgz</a></li>
</ul>
</li>
<li><code>node_default_packages</code>:
<ul>
<li>lz4,unzip,bzip2,zlib,yum,pv,jq,git,ncdu,make,patch,bash,lsof,wget,uuid,tuned,nvme-cli,numactl,grubby,sysstat,iotop,htop,rsync,tcpdump</li>
<li>netcat,socat,ftp,lrzsz,net-tools,ipvsadm,bind-utils,telnet,audit,ca-certificates,openssl,readline,vim-minimal,node_exporter,etcd,haproxy,python3,python3-pip</li>
</ul>
</li>
<li><code>infra_packages</code>
<ul>
<li>grafana,loki,logcli,promtail,prometheus2,alertmanager,karma,pushgateway</li>
<li>node_exporter,blackbox_exporter,nginx_exporter,redis_exporter,pg_exporter</li>
<li>nginx,dnsmasq,ansible,postgresql15,redis,mcli,python3-requests</li>
</ul>
</li>
<li><code>PGSERVICE</code> in <code>.pigsty</code> is removed, replaced with <code>PGDATABASE=postgres</code>.</li>
</ul>
<p>FHS Changes:</p>
<ul>
<li><code>bin/dns</code> and <code>bin/ssh</code> now moved to <code>vagrant/</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>MD5 <span style="color:#ce5c00;font-weight:bold">(</span>pigsty-pkg-v2.2.0.el7.x86_64.tgz<span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> 5fb6a449a234e36c0d895a35c76add3c
</span></span><span style="display:flex;"><span>MD5 <span style="color:#ce5c00;font-weight:bold">(</span>pigsty-pkg-v2.2.0.el8.x86_64.tgz<span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> c7211730998d3b32671234e91f529fd0
</span></span><span style="display:flex;"><span>MD5 <span style="color:#ce5c00;font-weight:bold">(</span>pigsty-pkg-v2.2.0.el9.x86_64.tgz<span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> 385432fe86ee0f8cbccbbc9454472fdd
</span></span></code></pre></div><hr>
<h2 id="v210">v2.1.0</h2>
<p><strong>Highlight</strong></p>
<ul>
<li>PostgreSQL 16 beta support, and 12 ~ 15 support.</li>
<li>Add PGVector for AI Embedding for 12 - 15</li>
<li>Add 6 extra panel &amp; datasource plugins for grafana</li>
<li>Add <code>bin/profile</code> to profile remote process and generate flamegraph</li>
<li>Add <code>bin/validate</code> to validate pigsty.yml configuration file</li>
<li>Add <code>bin/repo-add</code> to add upstream repo files to /etc/yum.repos.d</li>
<li>PostgreSQL 16 observability: <code>pg_stat_io</code> and corresponding dashboards</li>
</ul>
<p><strong>Software Upgrade</strong></p>
<ul>
<li>PostgreSQL 15.3 , 14.8, 13.11, 12.15, 11.20, and 16 beta1</li>
<li>pgBackRest 2.46</li>
<li>pgbouncer 1.19</li>
<li>Redis 7.0.11</li>
<li>Grafana v9.5.3</li>
<li>Loki / Promtail / Logcli 2.8.2</li>
<li>Prometheus 2.44</li>
<li>TimescaleDB 2.11.0</li>
<li>minio-20230518000536 / mcli-20230518165900</li>
<li>Bytebase v2.2.0</li>
</ul>
<p><strong>Enhancement</strong></p>
<ul>
<li>Now use all <code>id*.pub</code> when installing local user&rsquo;s public key</li>
</ul>
<hr>
<h2 id="v202">v2.0.2</h2>
<p><strong>Highlight</strong></p>
<p>Store OpenAI embedding and search similar vectors with <a href="https://github.com/pgvector/pgvector"><code>pgvector</code></a></p>
<ul>
<li>New extension <a href="https://github.com/Vonng/pigsty/issues/267"><code>pgvector</code></a></li>
<li><a href="https://github.com/Vonng/pigsty/issues/265">MinIO CVE-2023-28432</a> fix, and upgrade to 20230324 with new policy API:</li>
</ul>
<p><strong>Changes</strong></p>
<ul>
<li>New extension <a href="https://github.com/Vonng/pigsty/issues/267"><code>pgvector</code></a> for storing OpenAI embedding and searching similar vectors.</li>
<li><a href="https://github.com/Vonng/pigsty/issues/265">MinIO CVE-2023-28432</a> fix, and upgrade to 20230324 with new policy API.</li>
<li>Add reload functionality to DNSMASQ systemd services</li>
<li>Bump pev to v1.8</li>
<li>Bump grafana to v9.4.7</li>
<li>Bump MinIO and MCLI version to 20230324</li>
<li>Bump bytebase version to v1.15.0</li>
<li>Upgrade monitoring dashboards and fix dead links</li>
<li>Upgrade aliyun terraform template image to rockylinux 9</li>
<li>Adopt grafana provisioning API change since v9.4</li>
<li>Add asciinema videos for various administration tasks</li>
<li>Fix broken EL8 pgsql deps: remove anonymizer_15 faker_15 and pgloader</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>MD5 <span style="color:#ce5c00;font-weight:bold">(</span>pigsty-pkg-v2.0.2.el7.x86_64.tgz<span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> d46440a115d741386d29d6de646acfe2
</span></span><span style="display:flex;"><span>MD5 <span style="color:#ce5c00;font-weight:bold">(</span>pigsty-pkg-v2.0.2.el8.x86_64.tgz<span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> 5fa268b5545ac96b40c444210157e1e1
</span></span><span style="display:flex;"><span>MD5 <span style="color:#ce5c00;font-weight:bold">(</span>pigsty-pkg-v2.0.2.el9.x86_64.tgz<span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> c8b113d57c769ee86a22579fc98e8345
</span></span></code></pre></div><hr>
<h2 id="v201">v2.0.1</h2>
<p>Bug fix for <a href="https://github.com/Vonng/pigsty/releases/tag/v2.0.0">v2.0.0</a> and security improvement.</p>
<p><strong>Enhancement</strong></p>
<ul>
<li>Replace the pig shape logo for compliance with the PostgreSQL trademark policy.</li>
<li>Bump grafana version to v9.4 with better UI and bugfix.</li>
<li>Bump patroni version to v3.0.1 with some bugfix.</li>
<li>Change: rollback grafana systemd service file to rpm default.</li>
<li>Use slow <code>copy</code> instead of <code>rsync</code> to copy grafana dashboards.</li>
<li>Enhancement: add back default repo files after bootstrap</li>
<li>Add asciinema video for various administration tasks.</li>
<li>Security Enhance Mode: restrict monitor user privilege.</li>
<li>New config template: <code>dual.yml</code> for two-node deployment.</li>
<li>Enable <code>log_connections</code> and <code>log_disconnections</code> in <code>crit.yml</code> template.</li>
<li>Enable <code>$lib/passwordcheck</code> in <code>pg_libs</code> in <code>crit.yml</code> template.</li>
<li>Explicitly grant monitor view permission to <code>pg_monitor</code> role.</li>
<li>Remove default <code>dbrole_readonly</code> from <code>dbuser_monitor</code> to limit monitor user privilege</li>
<li>Now patroni listen on <code>{{ inventory_hostname }}</code> instead of <code>0.0.0.0</code></li>
<li>Now you can control postgres/pgbouncer listen to address with <code>pg_listen</code></li>
<li>Now you can use placeholder <code>${ip}</code>, <code>${lo}</code>, <code>${vip}</code> in <code>pg_listen</code></li>
<li>Bump Aliyun terraform image to rocky Linux 9 instead of centos 7.9</li>
<li>Bump bytebase to v1.14.0</li>
</ul>
<p><strong>Bug Fixes</strong></p>
<ul>
<li>Add missing advertise address for alertmanager</li>
<li>Fix missing <code>pg_mode</code> error when adding postgres user with <code>bin/pgsql-user</code></li>
<li>Add <code>-a password</code> to redis-join task @ <code>redis.yml</code></li>
<li>Fix missing default value in <code>infra-rm.yml</code>.<code>remove infra data</code></li>
<li>Fix prometheus targets file ownership to <code>prometheus</code></li>
<li>Use admin user rather than root to delete metadata in DCS</li>
<li>Fix Meta datasource missing database name due to grafana 9.4 bug.</li>
</ul>
<p><strong>Caveats</strong></p>
<p>Official EL8 pgdg upstream is broken now, DO use it with caution!</p>
<p>Affected packages: <code>postgis33_15, pgloader, postgresql_anonymizer_15*, postgresql_faker_15</code></p>
<p><strong>How to Upgrade</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#204a87">cd</span> ~/pigsty<span style="color:#000;font-weight:bold">;</span> tar -zcf /tmp/files.tgz files<span style="color:#000;font-weight:bold">;</span> rm -rf ~/pigsty    <span style="color:#8f5902;font-style:italic"># backup files dir and remove</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">cd</span> ~<span style="color:#000;font-weight:bold">;</span> bash -c <span style="color:#4e9a06">&#34;</span><span style="color:#204a87;font-weight:bold">$(</span>curl -fsSL http://get.pigsty.cc/latest<span style="color:#204a87;font-weight:bold">)</span><span style="color:#4e9a06">&#34;</span>    <span style="color:#8f5902;font-style:italic"># get latest pigsty source</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">cd</span> ~/pigsty<span style="color:#000;font-weight:bold">;</span> rm -rf files<span style="color:#000;font-weight:bold">;</span> tar -xf /tmp/files.tgz -C ~/pigsty  <span style="color:#8f5902;font-style:italic"># restore files dir</span>
</span></span></code></pre></div><p><strong>Checksums</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>MD5 <span style="color:#ce5c00;font-weight:bold">(</span>pigsty-pkg-v2.0.1.el7.x86_64.tgz<span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> 5cfbe98fd9706b9e0f15c1065971b3f6
</span></span><span style="display:flex;"><span>MD5 <span style="color:#ce5c00;font-weight:bold">(</span>pigsty-pkg-v2.0.1.el8.x86_64.tgz<span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> c34aa460925ae7548866bf51b8b8759c
</span></span><span style="display:flex;"><span>MD5 <span style="color:#ce5c00;font-weight:bold">(</span>pigsty-pkg-v2.0.1.el9.x86_64.tgz<span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> 055057cebd93c473a67fb63bcde22d33
</span></span></code></pre></div><p>Special thanks to <a href="https://github.com/cocoonkid">@cocoonkid</a> for his feedback.</p>
<hr>
<h2 id="v200">v2.0.0</h2>
<p>&ldquo;PIGSTY&rdquo; is now the abbr of &ldquo;PostgreSQL in Great STYle&rdquo;</p>
<blockquote>
<p>or &ldquo;PostgreSQL &amp; Infrastructure &amp; Governance System allTogether for You&rdquo;.</p>
</blockquote>
<p>Get pigsty v2.0.0 via the following command:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -fsSL http://get.pigsty.cc/latest <span style="color:#000;font-weight:bold">|</span> bash
</span></span></code></pre></div><details><summary>Download directly from GitHub Release</summary>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># get from GitHub</span>
</span></span><span style="display:flex;"><span>bash -c <span style="color:#4e9a06">&#34;</span><span style="color:#204a87;font-weight:bold">$(</span>curl -fsSL https://raw.githubusercontent.com/Vonng/pigsty/master/bin/get<span style="color:#204a87;font-weight:bold">)</span><span style="color:#4e9a06">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># or download tarball directly with curl</span>
</span></span><span style="display:flex;"><span>curl -L https://github.com/Vonng/pigsty/releases/download/v2.0.0/pigsty-v2.0.0.tgz -o ~/pigsty.tgz                 <span style="color:#8f5902;font-style:italic"># SRC</span>
</span></span><span style="display:flex;"><span>curl -L https://github.com/Vonng/pigsty/releases/download/v2.0.0/pigsty-pkg-v2.0.0.el9.x86_64.tgz -o /tmp/pkg.tgz  <span style="color:#8f5902;font-style:italic"># EL9</span>
</span></span><span style="display:flex;"><span>curl -L https://github.com/Vonng/pigsty/releases/download/v2.0.0/pigsty-pkg-v2.0.0.el8.x86_64.tgz -o /tmp/pkg.tgz  <span style="color:#8f5902;font-style:italic"># EL8</span>
</span></span><span style="display:flex;"><span>curl -L https://github.com/Vonng/pigsty/releases/download/v2.0.0/pigsty-pkg-v2.0.0.el7.x86_64.tgz -o /tmp/pkg.tgz  <span style="color:#8f5902;font-style:italic"># EL7</span>
</span></span></code></pre></div></details>
<p><strong>Highlights</strong></p>
<ul>
<li>PostgreSQL 15.2, PostGIS 3.3, Citus 11.2, TimescaleDB 2.10 now works together and unite as one.</li>
<li>Now works on EL 7,8,9 for RHEL, CentOS, Rocky, AlmaLinux, and other EL compatible distributions</li>
<li>Security enhancement with self-signed CA, full SSL support, <code>scram-sha-256</code> pwd encryption, and more.</li>
<li>Patroni 3.0 with native HA citus cluster support and dcs failsafe mode to prevent global DCS failures.</li>
<li>Auto-Configured, Battery-Included PITR for PostgreSQL powered by <code>pgbackrest</code>, local or S3/minio.</li>
<li>Dedicate module <code>ETCD</code> which can be easily deployed and scaled in/out. Used as DCS instead of Consul.</li>
<li>Dedicate module <code>MINIO</code>, local S3 alternative for the optional central backup repo for PGSQL PITR.</li>
<li>Better config templates with adaptive tuning for Node &amp; PG according to your hardware spec.</li>
<li>Use AGPL v3.0 license instead of Apache 2.0 license due to Grafana &amp; MinIO reference.</li>
</ul>
<p><strong>Compatibility</strong></p>
<ul>
<li>Pigsty now works on EL7, EL8, EL9, and offers corresponding pre-packed offline packages.</li>
<li>Pigsty now works on EL compatible distributions: RHEL, CentOS, Rocky, AlmaLinux, OracleLinux,&hellip;</li>
<li>Pigsty now use RockyLinux 9 as default developing &amp; testing environment instead of CentOS 7</li>
<li>EL version, CPU arch, and pigsty version string are part of source &amp; offline package names.</li>
<li>PGSQL: PostgreSQL 15.2 / PostGIS 3.3 / TimescaleDB 2.10 / Citus 11.2 now works together.</li>
<li>PGSQL: Patroni 3.0 is used as default HA solution for PGSQL, and etcd is used as default DCS.
<ul>
<li>Patroni 3.0 with DCS failsafe mode to prevent global DCS failures (demoting all primary)</li>
<li>Patroni 3.0 with native HA citus cluster support, with entirely open sourced v11 citus.</li>
<li>vip-manager 2.x with ETCDv3 API, ETCDv2 API is deprecated, so does patroni.</li>
</ul>
</li>
<li>PGSQL: pgBackRest v2.44 is introduced to provide battery-include PITR for PGSQL.
<ul>
<li>it will use local backup FS on primary by default for a two-day retention policy</li>
<li>it will use S3/minio as an alternative central backup repo for a two-week retention policy</li>
</ul>
</li>
<li>ETCD is used as default DCS instead of Consul, And V3 API is used instead of V2 API.</li>
<li>NODE module now consist of <code>node</code> itself, <code>haproxy</code>, <code>docker</code>, <code>node_exporter</code>, and <code>promtail</code>
<ul>
<li><code>chronyd</code> is used as default NTP client instead of <code>ntpd</code></li>
<li>HAPROXY now attach to <code>NODE</code> instead of <code>PGSQL</code>, which can be used for exposing services</li>
<li>You can register PG Service to dedicate haproxy clusters rather than local cluster nodes.</li>
<li>You can expose ad hoc service in a NodePort manner with haproxy, not limited to pg services.</li>
</ul>
</li>
<li>INFRA now consist of <code>dnsmasq</code>, <code>nginx</code>, <code>prometheus</code>, <code>grafana</code>, <code>loki</code>
<ul>
<li>DNSMASQ is enabled on all infra nodes, and added to all nodes as the default resolver.</li>
<li>Add blackbox_exporter for ICMP probe, add pushgateway for batch job metrics.</li>
<li>Switch to official loki &amp; promtail rpm packages. Use official Grafana Echarts Panel.</li>
<li>Add infra dashboards for self-monitoring, add patroni &amp; pg15 metrics to monitoring system</li>
</ul>
</li>
<li>Software Upgrade
<ul>
<li>PostgreSQL 15.2 / PostGIS 3.3 / TimescaleDB 2.10 / Citus 11.2</li>
<li>Patroni 3.0 / Pgbouncer 1.18 / pgBackRest 2.44 / vip-manager 2.1</li>
<li>HAProxy 2.7 / Etcd 3.5 / MinIO 20230222182345 / mcli 20230216192011</li>
<li>Prometheus 2.42 / Grafana 9.3 / Loki &amp; Promtail 2.7 / Node Exporter 1.5</li>
</ul>
</li>
</ul>
<p><strong>Security</strong></p>
<ul>
<li>A full-featured self-signed CA enabled by default</li>
<li>Redact password in postgres logs.</li>
<li>SSL for Nginx (you have to trust the self-signed CA or use <code>thisisunsafe</code> to dismiss warning)</li>
<li>SSL for etcd peer/client traffics by @alemacci</li>
<li>SSL for postgres/pgbouncer/patroni by @alemacci</li>
<li><code>scram-sha-256</code> auth for postgres password encryption by @alemacci</li>
<li>Pgbouncer Auth Query  by @alemacci</li>
<li>Use <code>AES-256-CBC</code> for <code>pgbackrest</code> encryption by @alemacci</li>
<li>Adding a security enhancement config template which enforce global SSL</li>
<li>Now all hba rules are defined in config inventory, no default rules.</li>
</ul>
<p><strong>Maintainability</strong></p>
<ul>
<li>Adaptive tuning template for PostgreSQL &amp; Patroni by @Vonng, @alemacci</li>
<li>configurable log dir for Patroni &amp; Postgres &amp; Pgbouncer &amp; Pgbackrest by @alemacci</li>
<li>Replace fixed ip placeholder <code>10.10.10.10</code> with <code>${admin_ip}</code> that can be referenced</li>
<li>Adaptive upstream repo definition that can be switched according EL ver, <code>region</code> &amp; arch.</li>
<li>Terraform Templates for AWS CN &amp; Aliyun, which can be used for sandbox IaaS provisioning</li>
<li>Vagrant Templates: <code>meta</code>, <code>full</code>, <code>el7</code> <code>el8</code>, <code>el9</code>, <code>build</code>, <code>minio</code>, <code>citus</code>, etc&hellip;</li>
<li>New playbook <code>pgsql-monitor.yml</code> for monitoring existing pg instance or RDS PG.</li>
<li>New playbook <code>pgsql-migration.yml</code> for migrating existing pg instance to pigsty manged pg.</li>
<li>New shell utils under <code>bin/</code> to simplify the daily administration tasks.</li>
<li>Optimize ansible role implementation. which can be used without default parameter values.</li>
<li>Now you can define pgbouncer parameters on database &amp; user level</li>
</ul>
<p><strong>API Changes</strong></p>
<p>69 parameters added, 16 parameters removed, rename 14 parameters</p>
<ul>
<li><code>INFRA</code>.<code>META</code>.<code>admin_ip</code>                        : primary meta node ip address</li>
<li><code>INFRA</code>.<code>META</code>.<code>region</code>                         : upstream mirror region: default|china|europe</li>
<li><code>INFRA</code>.<code>META</code>.<code>os_version</code>                     : enterprise linux release version: 7,8,9</li>
<li><code>INFRA</code>.<code>CA</code>.<code>ca_cn</code>                            : ca common name, pigsty-ca by default</li>
<li><code>INFRA</code>.<code>CA</code>.<code>cert_validity</code>                    : cert validity, 20 years by default</li>
<li><code>INFRA</code>.<code>REPO</code>.<code>repo_enabled</code>                   : build a local yum repo on infra node?</li>
<li><code>INFRA</code>.<code>REPO</code>.<code>repo_upstream</code>                  : list of upstream yum repo definition</li>
<li><code>INFRA</code>.<code>REPO</code>.<code>repo_home</code>                      : home dir of local yum repo, usually same as nginx_home &lsquo;/www&rsquo;</li>
<li><code>INFRA</code>.<code>NGINX</code>.<code>nginx_ssl_port</code>                : https listen port</li>
<li><code>INFRA</code>.<code>NGINX</code>.<code>nginx_ssl_enabled</code>             : nginx https enabled?</li>
<li><code>INFRA</code>.<code>PROMTETHEUS</code>.<code>alertmanager_endpoint</code>   : altermanager endpoint in (ip|domain):port format</li>
<li><code>NODE</code>.<code>NODE_TUNE</code>.<code>node_hugepage_count</code>        : number of 2MB hugepage, take precedence over <code>node_hugepage_ratio</code></li>
<li><code>NODE</code>.<code>NODE_TUNE</code>.<code>node_hugepage_ratio</code>        : mem hugepage ratio, 0 disable it by default</li>
<li><code>NODE</code>.<code>NODE_TUNE</code>.<code>node_overcommit_ratio</code>      : node mem overcommit ratio, 0 disable it by default</li>
<li><code>NODE</code>.<code>HAPROXY</code>.<code>haproxy_service</code>              : list of haproxy service to be exposed</li>
<li><code>PGSQL</code>.<code>PG_ID</code>.<code>pg_mode</code>                       : pgsql cluster mode: pgsql,citus,gpsql</li>
<li><code>PGSQL</code>.<code>PG_BUSINESS</code>.<code>pg_dbsu_password</code>        : dbsu password, empty string means no dbsu password by default</li>
<li><code>PGSQL</code>.<code>PG_INSTALL</code>.<code>pg_log_dir</code>               : postgres log dir, <code>/pg/data/log</code> by default</li>
<li><code>PGSQL</code>.<code>PG_BOOTSTRAP</code>.<code>pg_storage_type</code>        : SSD|HDD, SSD by default</li>
<li><code>PGSQL</code>.<code>PG_BOOTSTRAP</code>.<code>patroni_log_dir</code>        : patroni log dir, <code>/pg/log</code> by default</li>
<li><code>PGSQL</code>.<code>PG_BOOTSTRAP</code>.<code>patroni_ssl_enabled</code>    : secure patroni RestAPI communications with SSL?</li>
<li><code>PGSQL</code>.<code>PG_BOOTSTRAP</code>.<code>patroni_username</code>       : patroni rest api username</li>
<li><code>PGSQL</code>.<code>PG_BOOTSTRAP</code>.<code>patroni_password</code>       : patroni rest api password (IMPORTANT: CHANGE THIS)</li>
<li><code>PGSQL</code>.<code>PG_BOOTSTRAP</code>.<code>patroni_citus_db</code>       : citus database managed by patroni, postgres by default</li>
<li><code>PGSQL</code>.<code>PG_BOOTSTRAP</code>.<code>pg_max_conn</code>            : postgres max connections, <code>auto</code> will use recommended value</li>
<li><code>PGSQL</code>.<code>PG_BOOTSTRAP</code>.<code>pg_shared_buffer_ratio</code> : postgres shared buffer memory ratio, 0.25 by default, 0.1~0.4</li>
<li><code>PGSQL</code>.<code>PG_BOOTSTRAP</code>.<code>pg_rto</code>                 : recovery time objective, ttl to failover, 30s by default</li>
<li><code>PGSQL</code>.<code>PG_BOOTSTRAP</code>.<code>pg_rpo</code>                 : recovery point objective, 1MB data loss at most by default</li>
<li><code>PGSQL</code>.<code>PG_BOOTSTRAP</code>.<code>pg_pwd_enc</code>             : algorithm for encrypting passwords: md5|scram-sha-256</li>
<li><code>PGSQL</code>.<code>PG_BOOTSTRAP</code>.<code>pgbouncer_log_dir</code>      : pgbouncer log dir, <code>/var/log/pgbouncer</code> by default</li>
<li><code>PGSQL</code>.<code>PG_BOOTSTRAP</code>.<code>pgbouncer_auth_query</code>   : if enabled, query pg_authid table to retrieve biz users instead of populating userlist</li>
<li><code>PGSQL</code>.<code>PG_BOOTSTRAP</code>.<code>pgbouncer_sslmode</code>      : SSL for pgbouncer client: disable|allow|prefer|require|verify-ca|verify-full</li>
<li><code>PGSQL</code>.<code>PG_BACKUP</code>.<code>pgbackrest_enabled</code>        : pgbackrest enabled?</li>
<li><code>PGSQL</code>.<code>PG_BACKUP</code>.<code>pgbackrest_clean</code>          : remove pgbackrest data during init ?</li>
<li><code>PGSQL</code>.<code>PG_BACKUP</code>.<code>pgbackrest_log_dir</code>        : pgbackrest log dir, <code>/pg/log</code> by default</li>
<li><code>PGSQL</code>.<code>PG_BACKUP</code>.<code>pgbackrest_method</code>         : pgbackrest backup repo method, local or minio</li>
<li><code>PGSQL</code>.<code>PG_BACKUP</code>.<code>pgbackrest_repo</code>           : pgbackrest backup repo config</li>
<li><code>PGSQL</code>.<code>PG_SERVICE</code>.<code>pg_service_provider</code>      : dedicate haproxy node group name, or empty string for local nodes by default</li>
<li><code>PGSQL</code>.<code>PG_SERVICE</code>.<code>pg_default_service_dest</code>  : default service destination if svc.dest=&lsquo;default&rsquo;</li>
<li><code>PGSQL</code>.<code>PG_SERVICE</code>.<code>pg_vip_enabled</code>           : enable a l2 vip for pgsql primary? false by default</li>
<li><code>PGSQL</code>.<code>PG_SERVICE</code>.<code>pg_vip_address</code>           : vip address in <code>&lt;ipv4&gt;/&lt;mask&gt;</code> format, require if vip is enabled</li>
<li><code>PGSQL</code>.<code>PG_SERVICE</code>.<code>pg_vip_interface</code>         : vip network interface to listen, eth0 by default</li>
<li><code>PGSQL</code>.<code>PG_SERVICE</code>.<code>pg_dns_suffix</code>            : pgsql cluster dns name suffix, &rsquo;&rsquo; by default</li>
<li><code>PGSQL</code>.<code>PG_SERVICE</code>.<code>pg_dns_target</code>            : auto, primary, vip, none, or ad hoc ip</li>
<li><code>ETCD</code>.<code>etcd_seq</code>                : etcd instance identifier, REQUIRED</li>
<li><code>ETCD</code>.<code>etcd_cluster</code>            : etcd cluster &amp; group name, etcd by default</li>
<li><code>ETCD</code>.<code>etcd_safeguard</code>          : prevent purging running etcd instance?</li>
<li><code>ETCD</code>.<code>etcd_clean</code>              : purging existing etcd during initialization?</li>
<li><code>ETCD</code>.<code>etcd_data</code>               : etcd data directory, /data/etcd by default</li>
<li><code>ETCD</code>.<code>etcd_port</code>               : etcd client port, 2379 by default</li>
<li><code>ETCD</code>.<code>etcd_peer_port</code>          : etcd peer port, 2380 by default</li>
<li><code>ETCD</code>.<code>etcd_init</code>               : etcd initial cluster state, new or existing</li>
<li><code>ETCD</code>.<code>etcd_election_timeout</code>   : etcd election timeout, 1000ms by default</li>
<li><code>ETCD</code>.<code>etcd_heartbeat_interval</code> : etcd heartbeat interval, 100ms by default</li>
<li><code>MINIO</code>.<code>minio_seq</code>        :  minio instance identifier, REQUIRED</li>
<li><code>MINIO</code>.<code>minio_cluster</code>    :  minio cluster name, minio by default</li>
<li><code>MINIO</code>.<code>minio_clean</code>      :  cleanup minio during init?, false by default</li>
<li><code>MINIO</code>.<code>minio_user</code>       :  minio os user, <code>minio</code> by default</li>
<li><code>MINIO</code>.<code>minio_node</code>       :  minio node name pattern</li>
<li><code>MINIO</code>.<code>minio_data</code>       :  minio data dir(s), use {x&hellip;y} to specify multi drivers</li>
<li><code>MINIO</code>.<code>minio_domain</code>     :  minio external domain name, <code>sss.pigsty</code> by default</li>
<li><code>MINIO</code>.<code>minio_port</code>       :  minio service port, 9000 by default</li>
<li><code>MINIO</code>.<code>minio_admin_port</code> :  minio console port, 9001 by default</li>
<li><code>MINIO</code>.<code>minio_access_key</code> :  root access key, <code>minioadmin</code> by default</li>
<li><code>MINIO</code>.<code>minio_secret_key</code> :  root secret key, <code>minioadmin</code> by default</li>
<li><code>MINIO</code>.<code>minio_extra_vars</code> :  extra environment variables for minio server</li>
<li><code>MINIO</code>.<code>minio_alias</code>      :  alias name for local minio deployment</li>
<li><code>MINIO</code>.<code>minio_buckets</code>    :  list of minio bucket to be created</li>
<li><code>MINIO</code>.<code>minio_users</code>      :  list of minio user to be created</li>
</ul>
<p><strong>Removed Parameters</strong></p>
<ul>
<li><code>INFRA</code>.<code>CA</code>.<code>ca_homedir</code>: ca home dir, now fixed as <code>/etc/pki/</code></li>
<li><code>INFRA</code>.<code>CA</code>.<code>ca_cert</code>: ca cert filename, now fixed as <code>ca.key</code></li>
<li><code>INFRA</code>.<code>CA</code>.<code>ca_key</code>: ca key filename, now fixed as <code>ca.key</code></li>
<li><code>INFRA</code>.<code>REPO</code>.<code>repo_upstreams</code>: replaced by <code>repo_upstream</code></li>
<li><code>PGSQL</code>.<code>PG_INSTALL</code>.<code>pgdg_repo</code>: now taken care by node playbooks</li>
<li><code>PGSQL</code>.<code>PG_INSTALL</code>.<code>pg_add_repo</code>: now taken care by node playbooks</li>
<li><code>PGSQL</code>.<code>PG_IDENTITY</code>.<code>pg_backup</code>: not used and conflict with section name</li>
<li><code>PGSQL</code>.<code>PG_IDENTITY</code>.<code>pg_preflight_skip</code>: not used anymore, replace by <code>pg_id</code></li>
<li><code>DCS</code>.<code>dcs_name</code>      : removed due to using etcd</li>
<li><code>DCS</code>.<code>dcs_servers</code>   : replaced by using ad hoc group <code>etcd</code></li>
<li><code>DCS</code>.<code>dcs_registry</code>  : removed due to using etcd</li>
<li><code>DCS</code>.<code>dcs_safeguard</code> : replaced by <code>etcd_safeguard</code></li>
<li><code>DCS</code>.<code>dcs_clean</code>     : replaced by <code>etcd_clean</code></li>
<li><code>PGSQL</code>.<code>PG_VIP</code>.<code>vip_mode</code>      : replaced by <code>pg_vip_enabled</code></li>
<li><code>PGSQL</code>.<code>PG_VIP</code>.<code>vip_address</code>   : replaced by <code>pg_vip_address</code></li>
<li><code>PGSQL</code>.<code>PG_VIP</code>.<code>vip_interface</code> : replaced by <code>pg_vip_interface</code></li>
</ul>
<p><strong>Renamed Parameters</strong></p>
<ul>
<li><code>nginx_upstream</code>            -&gt; <code>infra_portal</code></li>
<li><code>repo_address</code>              -&gt; <code>repo_endpoint</code></li>
<li><code>pg_hostname</code>               -&gt; <code>node_id_from_pg</code></li>
<li><code>pg_sindex</code>                 -&gt; <code>pg_group</code></li>
<li><code>pg_services</code>               -&gt; <code>pg_default_services</code></li>
<li><code>pg_services_extra</code>         -&gt; <code>pg_services</code></li>
<li><code>pg_hba_rules_extra</code>        -&gt; <code>pg_hba_rules</code></li>
<li><code>pg_hba_rules</code>              -&gt; <code>pg_default_hba_rules</code></li>
<li><code>pgbouncer_hba_rules_extra</code> -&gt; <code>pgb_hba_rules</code></li>
<li><code>pgbouncer_hba_rules</code>       -&gt; <code>pgb_default_hba_rules</code></li>
<li><code>node_packages_default</code>     -&gt; <code>node_default_packages</code></li>
<li><code>node_packages_meta</code>        -&gt; <code>infra_packages</code></li>
<li><code>node_packages_meta_pip</code>    -&gt; <code>infra_packages_pip</code></li>
<li><code>node_data_dir</code>             -&gt; <code>node_data</code></li>
</ul>
<p><strong>Checksums</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>MD5 (pigsty-pkg-v2.0.0.el7.x86_64.tgz) = 9ff3c973fa5915f65622b91419817c9b
</span></span><span style="display:flex;"><span>MD5 (pigsty-pkg-v2.0.0.el8.x86_64.tgz) = bd108a6c8f026cb79ee62c3b68b72176
</span></span><span style="display:flex;"><span>MD5 (pigsty-pkg-v2.0.0.el9.x86_64.tgz) = e24288770f240af0511b0c38fa2f4774
</span></span></code></pre></div><p>Special thanks to @alemacci for his great contribution!</p>
<hr>
<h2 id="v151">v1.5.1</h2>
<p>WARNING: <code>CREATE INDEX|REINDEX CONCURRENTLY</code> PostgreSQL 14.0 - 14.3 may lead to index data corruption!</p>
<p>Please upgrade postgres to 14.4 ASAP.</p>
<p><strong>Software Upgrade</strong></p>
<ul>
<li>upgrade postgres to 14.4 (important bug fix)</li>
<li>upgrade citus to 11.0-2 (with enterprise features)</li>
<li>upgrade timescaledb to 2.7 (more continuous aggregates)</li>
<li>Upgrade patroni to 2.1.4 (new sync health-check)</li>
<li>Upgrade haproxy to 2.6.0 (cli, reload, ssl,&hellip;)</li>
<li>Upgrade grafana to 9.0.0 (new ui)</li>
<li>Upgrade prometheus 2.36.0</li>
</ul>
<p><strong>Bug fix</strong></p>
<ul>
<li>Fix typo in <code>pgsql-migration.yml</code></li>
<li>remove pid file in haproxy config</li>
<li>remove i686 packages when using repotrack under el7</li>
<li>Fix redis service systemctl enabled issue</li>
<li>Fix patroni systemctl service enabled=no by default issue</li>
<li>stop vip-manager when purging existing postgres</li>
</ul>
<p><strong>API Changes</strong></p>
<ul>
<li>Mark <code>grafana_database</code> and <code>grafana_pgurl</code> as obsolete</li>
<li>Add some new etcd &amp; pgsql alias (optional)</li>
</ul>
<p><strong>New Apps</strong></p>
<ul>
<li>wiki.js : Local wiki with Postgres</li>
<li>FerretDB : MongoDB API over Postgres</li>
</ul>
<hr>
<h2 id="v150">v1.5.0</h2>
<p><strong>Highlights</strong></p>
<ul>
<li>Complete Docker Support, enable on meta nodes by default with lot&rsquo;s of software templates.
<ul>
<li>bytebase pgadmin4 pgweb postgrest kong minio,&hellip;</li>
</ul>
</li>
<li>Infra Self Monitoring: Nginx, ETCD, Consul, Grafana, Prometheus, Loki, etc&hellip;</li>
<li>New CMDB design compatible with redis &amp; greenplum, visualize with CMDB Overview</li>
<li>Service Discovery : Consul SD now works again for prometheus targets management</li>
<li>Redis playbook now works on single instance with <code>redis_port</code> option.</li>
<li>Better cold backup support: crontab for backup, delayed standby with <code>pg_delay</code></li>
<li>Use ETCD as DCS, alternative to Consul</li>
<li>Nginx Log Enhancement</li>
</ul>
<p><strong>Monitoring</strong></p>
<p><em><strong>Dashboards</strong></em></p>
<ul>
<li>CMDB Overview: Visualize CMDB Inventory</li>
<li>DCS Overview: Show consul &amp; etcd metrics</li>
<li>Nginx Overview: Visualize nginx metrics &amp; access/error logs</li>
<li>Grafana Overview: Grafana self Monitoring</li>
<li>Prometheus Overview: Prometheus self Monitoring</li>
<li>INFRA Dashboard &amp; Home Dashboard Reforge</li>
</ul>
<p><em><strong>Architecture</strong></em></p>
<ul>
<li>Infra monitoring targets now have a separated target dir <code>targets/infra</code></li>
<li>Consul SD is available for prometheus</li>
<li>etcd , consul , patroni, docker metrics</li>
<li>Now infra targets are managed by role <code>infra_register</code></li>
<li>Upgrade pg_exporter to v0.5.0 with <code>scale</code> and <code>default</code> support
<ul>
<li><code>pg_bgwriter</code>, <code>pg_wal</code>, <code>pg_query</code>, <code>pg_db</code>, <code>pgbouncer_stat</code> now use seconds instead of ms and µs</li>
<li><code>pg_table</code> counters now have default value 0 instead of NaN</li>
<li><code>pg_class</code> is replaced by <code>pg_table</code> and <code>pg_index</code></li>
<li><code>pg_table_size</code> is now enabled with 300s ttl</li>
</ul>
</li>
</ul>
<p><em><strong>Provisioning</strong></em></p>
<ul>
<li>New optional package <code>docker.tgz</code> contains: Pgadmin, Pgweb, Postgrest, ByteBase, Kong, Minio, etc.</li>
<li>New Role <code>etcd</code> to deploy &amp; monitor etcd dcs service</li>
<li>Specify which type of DCS to use with <code>pg_dcs_type</code> (<code>etcd</code> now available)</li>
<li>Add <code>pg_checksum</code> option to enable data checksum</li>
<li>Add <code>pg_delay</code> option to setup delayed standby leaders</li>
<li>Add <code>node_crontab</code> and <code>node_crontab_overwrite</code> to create routine jobs such as cold backup</li>
<li>Add a series of <code>*_enable</code> options to control  components</li>
<li>Loki and Promtail are now installed using the RPM package made by <code>frpm</code>.</li>
<li>Allow customize monitoring logo</li>
</ul>
<p><em><strong>Software Updates</strong></em></p>
<ul>
<li>Upgrade PostgreSQL to 14.3</li>
<li>Upgrade Redis to 6.2.7</li>
<li>Upgrade PG Exporter to 0.5.0</li>
<li>Upgrade Consul to 1.12.0</li>
<li>Upgrade vip-manager to v1.0.2</li>
<li>Upgrade Grafana to v8.5.2</li>
<li>Upgrade HAproxy to 2.5.7 without rsyslog dependency</li>
<li>Upgrade Loki &amp; Promtail to v2.5.0 with RPM packages</li>
<li>New packages: <code>pg_probackup</code></li>
</ul>
<p>New software / application based on docker:</p>
<ul>
<li>bytebase : DDL Schema Migrator</li>
<li>pgadmin4 : Web Admin UI for PostgreSQL</li>
<li>pgweb : Web Console for PostgreSQL</li>
<li>postgrest : Auto generated REST API for PostgreSQL</li>
<li>kong : API Gateway which use PostgreSQL as backend storage</li>
<li>swagger openapi : API Specification Generator</li>
<li>Minio : S3-compatible object storage</li>
<li>Gitea : Private local git service</li>
</ul>
<p><strong>Bug Fix</strong></p>
<ul>
<li>Fix loki &amp; promtail <code>/etc/default</code> config file name issue</li>
<li>Now <code>node_data_dir (/data)</code> is created before consul init if not exists</li>
<li>Fix haproxy silence <code>/var/log/messages</code> with inappropriate rsyslog dependency</li>
</ul>
<p><strong>API Change</strong></p>
<p><em><strong>New Variable</strong></em></p>
<ul>
<li><code>node_data_dir</code> : major data mount path, will be created if not exist.</li>
<li><code>node_crontab_overwrite</code> : overwrite <code>/etc/crontab</code> instead of append</li>
<li><code>node_crontab</code>: node crontab to be appended or overwritten</li>
<li><code>nameserver_enabled</code>: enable nameserver on this meta node?</li>
<li><code>prometheus_enabled</code>: enable prometheus on this meta node?</li>
<li><code>grafana_enabled</code>: enable grafana on this meta node?</li>
<li><code>loki_enabled</code>: enable loki on this meta node?</li>
<li><code>docker_enable</code>: enable docker on this node?</li>
<li><code>consul_enable</code>: enable consul server/agent?</li>
<li><code>etcd_enable</code>: enable etcd server/clients?</li>
<li><code>pg_checksum</code>: enable pg cluster data-checksum?</li>
<li><code>pg_delay</code>: recovery min apply delay for standby leader</li>
<li><code>grafana_customize_logo</code>: customize grafana icon</li>
</ul>
<p><em><strong>Reforge</strong></em></p>
<p>Now <code>*_clean</code> are boolean flags to clean up existing instance during init.</p>
<p>And <code>*_safeguard</code> are boolean flags to avoid purging running instance when executing any playbook.</p>
<ul>
<li><code>pg_exists_action</code> -&gt; <code>pg_clean</code></li>
<li><code>pg_disable_purge</code> -&gt; <code>pg_safeguard</code></li>
<li><code>dcs_exists_action</code> -&gt; <code>dcs_clean</code></li>
<li><code>dcs_disable_purge</code> -&gt; <code>dcs_safeguard</code></li>
</ul>
<p><em><strong>Rename</strong></em></p>
<ul>
<li><code>node_ntp_config</code> -&gt; <code>node_ntp_enabled</code></li>
<li><code>node_admin_setup</code> -&gt; <code>node_admin_enabled</code></li>
<li><code>node_admin_pks</code> -&gt; <code>node_admin_pk_list</code></li>
<li><code>node_dns_hosts</code> -&gt; <code>node_etc_hosts_default</code></li>
<li><code>node_dns_hosts_extra</code> -&gt; <code>node_etc_hosts</code></li>
<li><code>node_dns_server</code> -&gt; <code>node_dns_method</code></li>
<li><code>node_local_repo_url</code> -&gt; <code>node_repo_local_urls</code></li>
<li><code>node_packages</code> -&gt; <code>node_packages_default</code></li>
<li><code>node_extra_packages</code> -&gt; <code>node_packages</code></li>
<li><code>node_meta_pip_install</code> -&gt; <code>node_packages_meta_pip</code></li>
<li><code>node_sysctl_params</code> -&gt; <code>node_tune_params</code></li>
<li><code>app_list</code> -&gt; <code>nginx_indexes</code></li>
<li><code>grafana_plugin</code> -&gt; <code>grafana_plugin_method</code></li>
<li><code>grafana_cache</code> -&gt; <code>grafana_plugin_cache</code></li>
<li><code>grafana_plugins</code> -&gt; <code>grafana_plugin_list</code></li>
<li><code>grafana_git_plugin_git</code> -&gt; <code>grafana_plugin_git</code></li>
<li><code>haproxy_admin_auth_enabled</code> -&gt; <code>haproxy_auth_enabled</code></li>
<li><code>pg_shared_libraries</code> -&gt; <code>pg_libs</code></li>
<li><code>dcs_type</code> -&gt; <code>pg_dcs_type</code></li>
</ul>
<hr>
<h2 id="v141">v1.4.1</h2>
<p>Routine bug fix / Docker Support / English Docs</p>
<p>Now docker is enabled on meta node by default. You can launch ton&rsquo;s of SaaS with it</p>
<p>English document is available now.</p>
<ul>
<li><a href="https://github.com/Vonng/pigsty/commit/68f8c8da0576e043686137aca47bad01dd4e82c0">add docker to default packages</a></li>
<li><a href="https://github.com/Vonng/pigsty/commit/765077744836d8600a8703dce8623182784d65a7">add docker-compose to default pacakge list</a></li>
<li><a href="https://github.com/Vonng/pigsty/commit/9b8b7c5209d09049716318b624001de3b567452a">disable nameserver by default &amp; enable docker role by default</a></li>
</ul>
<p><strong>Bug Fix</strong></p>
<ul>
<li><a href="https://github.com/Vonng/pigsty/commit/100f31842d473001f946200d9b8e2e3e89add35a">fix promtail &amp; loki config var issue</a></li>
<li>Fix grafana legacy alerts.</li>
<li>Disable nameserver by default</li>
<li>Rename pg-alias.sh for patroni shortcuts</li>
<li><a href="https://github.com/Vonng/pigsty/commit/62d74f15f8c164e5971d9d1d1215869359267b53">disable exemplars queries for all dashboards</a></li>
<li><a href="https://github.com/Vonng/pigsty/commit/b277f488b7ed0fd0a7eeeb995e2efd75a048e0ef">fix loki data dir issue</a> <a href="https://github.com/Vonng/pigsty/issues/100">https://github.com/Vonng/pigsty/issues/100</a></li>
<li><a href="https://github.com/Vonng/pigsty/commit/1690b490205af24d5f0394aba99007c0d9ebc49d">change autovacuum_freeze_max_age from 100000000 to 1000000000</a></li>
</ul>
<hr>
<h2 id="v140">v1.4.0</h2>
<p><strong>Architecture</strong></p>
<ul>
<li>Decouple system into 4 major categories:  <code>INFRA</code>, <code>NODES</code>, <code>PGSQL</code>, <code>REDIS</code>, which makes pigsty far more clear and more extensible.</li>
<li>Single Node Deployment = <code>INFRA</code> + <code>NODES</code> + <code>PGSQL</code></li>
<li>Deploy pgsql clusters = <code>NODES</code> + <code>PGSQL</code></li>
<li>Deploy redis clusters = <code>NODES</code> + <code>REDIS</code></li>
<li>Deploy other databases = <code>NODES</code> + xxx (e.g <code>MONGO</code>, <code>KAFKA</code>, &hellip; TBD)</li>
</ul>
<p><strong>Accessibility</strong></p>
<ul>
<li>CDN for mainland China.</li>
<li>Get the latest source with <code>bash -c &quot;$(curl -fsSL http://get.pigsty.cc/latest)&quot;</code></li>
<li>Download &amp; Extract packages with new <code>download</code> script.</li>
</ul>
<p><strong>Monitor Enhancement</strong></p>
<ul>
<li>Split monitoring system into 5 major categories:  <code>INFRA</code>, <code>NODES</code>, <code>REDIS</code>, <code>PGSQL</code>, <code>APP</code></li>
<li>Logging enabled by default
<ul>
<li>now <code>loki</code> and <code>promtail</code> are enabled by default. with prebuilt <a href="https://github.com/Vonng/loki-rpm">loki-rpm</a></li>
</ul>
</li>
<li>Models &amp; Labels
<ul>
<li>A hidden <code>ds</code> prometheus datasource variable is added for all dashboards, so you can easily switch different datasource simply by select a new one rather than modifying Grafana Datasources &amp; Dashboards</li>
<li>An <code>ip</code> label is added for all metrics, and will be used as join key between database metrics &amp; nodes metrics</li>
</ul>
</li>
<li>INFRA Monitoring
<ul>
<li>Home dashboard for infra: INFRA Overview</li>
<li>Add logging Dashboards : Logs Instance</li>
<li>PGLOG Analysis &amp; PGLOG Session now treated as an example Pigsty APP.</li>
</ul>
</li>
<li>NODES Monitoring Application
<ul>
<li>If you don&rsquo;t care database at all, Pigsty now can be used as host monitoring software alone!</li>
<li>Consist of 4 core dashboards: Nodes Overview &amp; Nodes Cluster &amp; Nodes Instance &amp; Nodes Alert</li>
<li>Introduce new identity variables for nodes: <code>node_cluster</code> and <code>nodename</code></li>
<li>Variable <code>pg_hostname</code> now means set hostname same as postgres instance name to keep backward-compatible</li>
<li>Variable <code>nodename_overwrite</code> control whether overwrite node&rsquo;s hostname with nodename</li>
<li>Variable <code>nodename_exchange</code> will write nodename to each other&rsquo;s <code>/etc/hosts</code></li>
<li>All nodes metrics reference are overhauled, join by <code>ip</code></li>
<li>Nodes monitoring targets are managed alone under <code>/etc/prometheus/targets/nodes</code></li>
</ul>
</li>
<li>PGSQL Monitoring Enhancement
<ul>
<li>Complete new PGSQL Cluster which simplify and focus on important stuff among cluster.</li>
<li>New Dashboard PGSQL Databases which is cluster level object monitoring. Such as tables &amp; queries among the entire cluster rather than single instance.</li>
<li>PGSQL Alert dashboard now only focus on pgsql alerts.</li>
<li>PGSQL Shard are added to PGSQL</li>
</ul>
</li>
<li>Redis Monitoring Enhancement
<ul>
<li>Add nodes monitoring for all redis dashboards.</li>
</ul>
</li>
</ul>
<p><strong>MatrixDB Support</strong></p>
<ul>
<li>MatrixDB (Greenplum 7) can be deployed via <code>pigsty-matrix.yml</code> playbook</li>
<li>MatrixDB Monitor Dashboards : PGSQL MatrixDB</li>
<li>Example configuration added: <code>pigsty-mxdb.yml</code></li>
</ul>
<p><strong>Provisioning Enhancement</strong></p>
<p>Now pigsty work flow works as this:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> infra.yml ---&gt; install pigsty on single meta node
</span></span><span style="display:flex;"><span>      <span style="color:#000;font-weight:bold">|</span>          <span style="color:#204a87;font-weight:bold">then</span> add more nodes under pigsty<span style="color:#a40000">&#39;</span>s management
</span></span><span style="display:flex;"><span>      <span style="color:#000;font-weight:bold">|</span>
</span></span><span style="display:flex;"><span> nodes.yml ---&gt; prepare nodes <span style="color:#204a87;font-weight:bold">for</span> pigsty <span style="color:#ce5c00;font-weight:bold">(</span>node setup, dcs, node_exporter, promtail<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#000;font-weight:bold">|</span>          <span style="color:#204a87;font-weight:bold">then</span> choose one playbook to deploy database clusters on those nodes
</span></span><span style="display:flex;"><span>      <span style="color:#000;font-weight:bold">|</span>
</span></span><span style="display:flex;"><span>      ^--&gt; pgsql.yml   install postgres on prepared nodes
</span></span><span style="display:flex;"><span>      ^--&gt; redis.yml   install redis on prepared nodes
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>infra-demo.yml <span style="color:#ce5c00;font-weight:bold">=</span> 
</span></span><span style="display:flex;"><span>           infra.yml -l meta     +
</span></span><span style="display:flex;"><span>           nodes.yml -l pg-test  +
</span></span><span style="display:flex;"><span>           pgsql.yml -l pg-test +
</span></span><span style="display:flex;"><span>           infra-loki.yml + infra-jupyter.yml + infra-pgweb.yml
</span></span><span style="display:flex;"><span> 
</span></span></code></pre></div><ul>
<li><code>nodes.yml</code> to setup &amp; prepare nodes for pigsty
<ul>
<li>setup node, node_exporter, consul agent on nodes</li>
<li><code>node-remove.yml</code> are used for node de-register</li>
</ul>
</li>
<li><code>pgsql.yml</code> now only works on prepared nodes
<ul>
<li><code>pgsql-remove</code> now  only responsible for postgres itself. (dcs and node monitor are taken by <code>node.yml</code>)</li>
<li>Add a series of new options to reuse <code>postgres</code> role in greenplum/matrixdb</li>
</ul>
</li>
<li><code>redis.yml</code> now works on prepared nodes
<ul>
<li>and <code>redis-remove.yml</code> now remove redis from nodes.</li>
</ul>
</li>
<li><code>pgsql-matrix.yml</code> now install matrixdb (Greenplum 7) on prepared nodes.</li>
</ul>
<p><strong>Software Upgrade</strong></p>
<ul>
<li>PostgreSQL  14.2</li>
<li>PostGIS 3.2</li>
<li>TimescaleDB 2.6</li>
<li>Patroni 2.1.3 (Prometheus Metrics + Failover Slots)</li>
<li>HAProxy 2.5.5  (Fix stats error, more metrics)</li>
<li>PG Exporter 0.4.1 (Timeout Parameters, and)</li>
<li>Grafana 8.4.4</li>
<li>Prometheus 2.33.4</li>
<li>Greenplum 6.19.4 / MatrixDB 4.4.0</li>
<li>Loki are now shipped as rpm packages instead of zip archives</li>
</ul>
<p><strong>Bug Fix</strong></p>
<ul>
<li>Remove consul dependency for patroni , which makes it much more easier to migrate to a new consul cluster</li>
<li>Fix prometheus bin/new scripts default data dir path : <code>/export/prometheus</code> to <code>/data/prometheus</code></li>
<li>Fix typos and tasks</li>
<li>Add restart seconds to vip-manager systemd service</li>
</ul>
<p><strong>API Changes</strong></p>
<p>New Variable</p>
<ul>
<li><code>node_cluster</code>: Identity variable for node cluster</li>
<li><code>nodename_overwrite</code>: If set, nodename will be set to node&rsquo;s hostname</li>
<li><code>nodename_exchange</code> : exchange node hostname (in <code>/etc/hosts</code>) among play hosts</li>
<li><code>node_dns_hosts_extra</code> : extra static dns records which can be easily overwritten by single instance/cluster</li>
<li><code>patroni_enabled</code>: if disabled, postgres &amp; patroni bootstrap will not be performed during role <code>postgres</code></li>
<li><code>pgbouncer_enabled</code> : if disabled, pgbouncer will not be launched during role <code>postgres</code></li>
<li><code>pg_exporter_params</code>: extra url parameters for pg_exporter when generating monitor target url.</li>
<li><code>pg_provision</code>: bool var to indicate whether perform provision part of role <code>postgres</code> (template, db,user)</li>
<li><code>no_cmdb</code>: cli args for <code>infra.yml</code> and <code>infra-demo.yml</code> playbook which will not create cmdb on meta node.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>MD5 (app.tgz) = f887313767982b31a2b094e5589a75ea
</span></span><span style="display:flex;"><span>MD5 (matrix.tgz) = 3d063437c482d94bd7e35df1a08bbc84
</span></span><span style="display:flex;"><span>MD5 (pigsty.tgz) = e143b88ebea1474f9ebaffddc6072c49
</span></span><span style="display:flex;"><span>MD5 (pkg.tgz) = 73e8f5ce995b1f1760cb63c1904fb91b
</span></span></code></pre></div><hr>
<h2 id="v131">v1.3.1</h2>
<p>[Monitor]</p>
<ul>
<li>PGSQL &amp; PGCAT Dashboard polish</li>
<li>optimize layout for pgcat instance &amp; pgcat database</li>
<li>add key metrics panels to pgsql instance dashboard, keep consist with pgsql cluster</li>
<li>add table/index bloat panels to pgcat database, remove pgcat bloat dashboard.</li>
<li>add index information in pgcat database dashboard</li>
<li>fix broken panels in grafana 8.3</li>
<li>add redis index in nginx homepage</li>
</ul>
<p>[Deploy]</p>
<ul>
<li>New <code>infra-demo.yml</code> playbook for one-pass bootstrap</li>
<li>Use <code>infra-jupyter.yml</code> playbook to deploy optional jupyter lab server</li>
<li>Use <code>infra-pgweb.yml</code> playbook to deploy optional pgweb server</li>
<li>New <code>pg</code> alias on meta node, can initiate postgres cluster from admin user (in addition to postgres)</li>
<li>Adjust all patroni conf templates&rsquo;s <code>max_locks_per_transactions</code> according to <code>timescaledb-tune</code> &rsquo;s advise</li>
<li>Add <code>citus.node_conninfo: 'sslmode=prefer'</code> to conf templates in order to use citus without SSL</li>
<li>Add all extensions (except for pgrouting) in pgdg14 in package list</li>
<li>Upgrade node_exporter to v1.3.1</li>
<li>Add PostgREST v9.0.0 to package list. Generate API from postgres schema.</li>
</ul>
<p>[BugFix]</p>
<ul>
<li>Grafana&rsquo;s security breach (upgrade to v8.3.1 <a href="https://grafana.com/blog/2021/12/07/grafana-8.3.1-8.2.7-8.1.8-and-8.0.7-released-with-high-severity-security-fix/">issue</a>)</li>
<li>fix <code>pg_instance</code> &amp; <code>pg_service</code> in <code>register</code> role when start from middle of playbook</li>
<li>Fix nginx homepage render issue when host without <code>pg_cluster</code> variable exists</li>
<li>Fix style issue when upgrading to grafana 8.3.1</li>
</ul>
<h2 id="v130">v1.3.0</h2>
<ul>
<li>
<p>[ENHANCEMENT] Redis Deployment (cluster,sentinel,standalone)</p>
</li>
<li>
<p>[ENHANCEMENT] Redis Monitor</p>
<ul>
<li>Redis Overview Dashboard</li>
<li>Redis Cluster Dashboard</li>
<li>Redis Instance Dashboard</li>
</ul>
</li>
<li>
<p>[ENHANCEMENT] monitor: PGCAT Overhaul</p>
<ul>
<li>New Dashboard: PGCAT Instance</li>
<li>New Dashboard: PGCAT Database Dashboard</li>
<li>Remake Dashboard: PGCAT Table</li>
</ul>
</li>
<li>
<p>[ENHANCEMENT] monitor: PGSQL Enhancement</p>
<ul>
<li>New Panels: PGSQL Cluster, add 10 key metrics panel (toggled by default)</li>
<li>New Panels: PGSQL Instance, add 10 key metrics panel (toggled by default)</li>
<li>Simplify &amp; Redesign: PGSQL Service</li>
<li>Add cross-references between PGCAT &amp; PGSL dashboards</li>
</ul>
</li>
<li>
<p>[ENHANCEMENT] monitor deploy</p>
<ul>
<li>Now grafana datasource is automatically registered during monly deployment</li>
</ul>
</li>
<li>
<p>[ENHANCEMENT] software upgrade</p>
<ul>
<li>add PostgreSQL 13 to default package list</li>
<li>upgrade to PostgreSQL 14.1 by default</li>
<li>add greenplum rpm and dependencies</li>
<li>add redis rpm &amp; source packages</li>
<li>add perf as default packages</li>
</ul>
</li>
</ul>
<hr>
<h2 id="v120">v1.2.0</h2>
<ul>
<li>[ENHANCEMENT] Use PostgreSQL 14 as default version</li>
<li>[ENHANCEMENT] Use TimescaleDB 2.5 as default extension
<ul>
<li>now timescaledb &amp; postgis are enabled in cmdb by default</li>
</ul>
</li>
<li>[ENHANCEMENT] new monitor-only mode:
<ul>
<li>you can use pigsty to monitor existing pg instances with a connectable url only</li>
<li>pg_exporter will be deployed on meta node locally</li>
<li>new dashboard PGSQL Cluster Monly for remote clusters</li>
</ul>
</li>
<li>[ENHANCEMENT] Software upgrade
<ul>
<li>grafana to 8.2.2</li>
<li>pev2 to v0.11.9</li>
<li>promscale to 0.6.2</li>
<li>pgweb to 0.11.9</li>
<li>Add new extensions: pglogical pg_stat_monitor orafce</li>
</ul>
</li>
<li>[ENHANCEMENT] Automatic detect machine spec and use proper <code>node_tune</code> and <code>pg_conf</code> templates</li>
<li>[ENHANCEMENT] Rework on bloat related views, now more information are exposed</li>
<li>[ENHANCEMENT] Remove timescale &amp; citus internal monitoring</li>
<li>[ENHANCEMENT] New playbook <code>pgsql-audit.yml</code> to create audit report.</li>
<li>[BUG FIX] now pgbouncer_exporter resource owner are {{ pg_dbsu }} instead of postgres</li>
<li>[BUG FIX] fix pg_exporter duplicate metrics on pg_table pg_index while executing <code>REINDEX TABLE CONCURRENTLY</code></li>
<li>[CHANGE] now all config templates are minimize into two: auto &amp; demo. (removed: <code>pub4, pg14, demo4, tiny, oltp</code> )
<ul>
<li><code>pigsty-demo</code> is configured if <code>vagrant</code> is the default user, otherwise <code>pigsty-auto</code> is used.</li>
</ul>
</li>
</ul>
<p><strong>How to upgrade from v1.1.1</strong></p>
<p>There&rsquo;s no API change in 1.2.0 You can still use old <code>pigsty.yml</code> configuration files (PG13).</p>
<p>For the infrastructure part. Re-execution of <code>repo</code> will do most of the parts</p>
<p>As for the database. You can still use the existing PG13 instances. In-place upgrade is quite
tricky especially when involving extensions such as PostGIS &amp; Timescale. I would highly recommend
performing a database migration with logical replication.</p>
<p>The new playbook <code>pgsql-migration.yml</code> will make this a lot easier. It will create a series of
scripts which will help you to migrate your cluster with near-zero downtime.</p>
<hr>
<h2 id="v111">v1.1.1</h2>
<ul>
<li>[ENHANCEMENT] replace timescaledb <code>apache</code> version with <code>timescale</code> version</li>
<li>[ENHANCEMENT] upgrade prometheus to 2.30</li>
<li>[BUG FIX] now pg_exporter config dir&rsquo;s owner are {{ pg_dbsu }} instead of prometheus</li>
</ul>
<p><strong>How to upgrade from v1.1.0</strong>
The major change in this release is timescaledb. Which replace old <code>apache</code> license version with <code>timescale</code> license version</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>stop/pause postgres instance with timescaledb
</span></span><span style="display:flex;"><span>yum remove -y timescaledb_13
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">[</span>timescale_timescaledb<span style="color:#ce5c00;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span><span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">=</span>timescale_timescaledb
</span></span><span style="display:flex;"><span><span style="color:#000">baseurl</span><span style="color:#ce5c00;font-weight:bold">=</span>https://packagecloud.io/timescale/timescaledb/el/7/<span style="color:#000">$basearch</span>
</span></span><span style="display:flex;"><span><span style="color:#000">repo_gpgcheck</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">0</span>
</span></span><span style="display:flex;"><span><span style="color:#000">gpgcheck</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">0</span>
</span></span><span style="display:flex;"><span><span style="color:#000">enabled</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>yum install timescaledb-2-postgresql13 
</span></span></code></pre></div><hr>
<h2 id="v110">v1.1.0</h2>
<ul>
<li>[ENHANCEMENT] add <code>pg_dummy_filesize</code> to create fs space placeholder</li>
<li>[ENHANCEMENT] home page overhaul</li>
<li>[ENHANCEMENT] add jupyter lab integration</li>
<li>[ENHANCEMENT] add pgweb console integration</li>
<li>[ENHANCEMENT] add pgbadger support</li>
<li>[ENHANCEMENT] add pev2 support, explain visualizer</li>
<li>[ENHANCEMENT] add pglog utils</li>
<li>[ENHANCEMENT] update default pkg.tgz software version:
<ul>
<li>upgrade postgres to v13.4  (with official pg14 support)</li>
<li>upgrade pgbouncer to v1.16 (metrics definition updates)</li>
<li>upgrade grafana to v8.1.4</li>
<li>upgrade prometheus to v2.2.29</li>
<li>upgrade node_exporter to v1.2.2</li>
<li>upgrade haproxy to v2.1.1</li>
<li>upgrade consul to v1.10.2</li>
<li>upgrade vip-manager to v1.0.1</li>
</ul>
</li>
</ul>
<p><strong>API Changes</strong></p>
<ul>
<li>
<p><code>nginx_upstream</code> now holds different structures. (incompatible)</p>
</li>
<li>
<p>new config entries: <code>app_list</code>, render into home page&rsquo;s nav entries</p>
</li>
<li>
<p>new config entries: <code>docs_enabled</code>, setup local docs on default server.</p>
</li>
<li>
<p>new config entries: <code>pev2_enabled</code>, setup local pev2 utils.</p>
</li>
<li>
<p>new config entries: <code>pgbadger_enabled</code>, create log summary/report dir</p>
</li>
<li>
<p>new config entries: <code>jupyter_enabled</code>, enable jupyter lab server on meta node</p>
</li>
<li>
<p>new config entries: <code>jupyter_username</code>, specify which user to run jupyter lab</p>
</li>
<li>
<p>new config entries: <code>jupyter_password</code>, specify jupyter lab default password</p>
</li>
<li>
<p>new config entries: <code>pgweb_enabled</code>, enable pgweb server on meta node</p>
</li>
<li>
<p>new config entries: <code>pgweb_username</code>, specify which user to run pgweb</p>
</li>
<li>
<p>rename internal flag <code>repo_exist</code> into <code>repo_exists</code></p>
</li>
<li>
<p>now default value for <code>repo_address</code> is <code>pigsty</code> instead of <code>yum.pigsty</code></p>
</li>
<li>
<p>now haproxy access point is <code>http://pigsty</code> instead of <code>http://h.pigsty</code></p>
</li>
</ul>
<hr>
<h2 id="v101">v1.0.1</h2>
<ul>
<li>Documentation Update
<ul>
<li>Chinese document now viable</li>
<li>Machine-Translated English document now viable</li>
</ul>
</li>
<li>Bug Fix: <code>pgsql-remove</code> does not remove primary instance.</li>
<li>Bug Fix: replace pg_instance with pg_cluster + pg_seq
<ul>
<li>Start-At-Task may fail due to pg_instance undefined</li>
</ul>
</li>
<li>Bug Fix: remove citus from default shared preload library
<ul>
<li>citus will force max_prepared_transaction to non-zero value</li>
</ul>
</li>
<li>Bug Fix: ssh sudo checking in <code>configure</code>:
<ul>
<li>now <code>ssh -t sudo -n ls</code> is used for privilege checking</li>
</ul>
</li>
<li>Typo Fix: <code>pg-backup</code> script typo</li>
<li>Alert Adjust: Remove ntp sanity check alert (dupe with ClockSkew)</li>
<li>Exporter Adjust: remove collector.systemd to reduce overhead</li>
</ul>
<hr>
<h2 id="v100">v1.0.0</h2>
<p>v1 GA, Monitoring System Overhaul</p>
<p><strong>Highlights</strong></p>
<ul>
<li>
<p>Monitoring System Overhaul</p>
<ul>
<li>New Dashboards on Grafana 8.0</li>
<li>New metrics definition, with extra PG14 support</li>
<li>Simplified labeling system: static label set: (job, cls, ins)</li>
<li>New Alerting Rules &amp; Derived Metrics</li>
<li>Monitoring multiple database at one time</li>
<li>Realtime log search &amp; csvlog analysis</li>
<li>Link-Rich Dashboards, click graphic elements to drill-down|roll-up</li>
</ul>
</li>
<li>
<p>Architecture Changes</p>
<ul>
<li>Add citus &amp; timescaledb as part of default installation</li>
<li>Add PostgreSQL 14beta2 support</li>
<li>Simply haproxy admin page index</li>
<li>Decouple infra &amp; pgsql by adding a new role <code>register</code></li>
<li>Add new role <code>loki</code> and <code>promtail</code> for logging</li>
<li>Add new role <code>environ</code> for setting up environment for admin user on admin node</li>
<li>Using <code>static</code> service-discovery for prometheus by default (instead of <code>consul</code>)</li>
<li>Add new role <code>remove</code> to gracefully remove cluster &amp; instance</li>
<li>Upgrade prometheus &amp; grafana provisioning logics.</li>
<li>Upgrade to vip-manager 1.0 , node_exporter 1.2 , pg_exporter 0.4, grafana 8.0</li>
<li>Now every database on every instance can be auto-registered as grafana datasource</li>
<li>Move consul register tasks to role <code>register</code>, change consul service tags</li>
<li>Add cmdb.sql as pg-meta baseline definition (CMDB &amp; PGLOG)</li>
</ul>
</li>
<li>
<p>Application Framework</p>
<ul>
<li>Extensible framework for new functionalities</li>
<li>core app: PostgreSQL Monitor System: <code>pgsql</code></li>
<li>core app: PostgreSQL Catalog explorer: <code>pgcat</code></li>
<li>core app: PostgreSQL Csvlog Analyzer: <code>pglog</code></li>
<li>add example app <code>covid</code> for visualizing covid-19 data.</li>
<li>add example app <code>isd</code> for visualizing isd data.</li>
</ul>
</li>
<li>
<p>Misc</p>
<ul>
<li>Add jupyterlab which brings entire python environment for data science</li>
<li>Add <code>vonng-echarts-panel</code> to bring Echarts support back.</li>
<li>Add wrap script <code>createpg</code> , <code>createdb</code>, <code>createuser</code></li>
<li>Add cmdb dynamic inventory scripts: <code>load_conf.py</code>, <code>inventory_cmdb</code>, <code>inventory_conf</code></li>
<li>Remove obsolete playbooks: <code>pgsql-monitor</code>, <code>pgsql-service</code>, <code>node-remove</code>, etc&hellip;.</li>
</ul>
</li>
</ul>
<p><strong>API Change</strong></p>
<ul>
<li>new var :  <a href="https://doc.pigsty.cc/#/zh-cn/v-node?id=node_meta_pip_install"><code>node_meta_pip_install</code></a></li>
<li>rename var: <code>grafana_url</code> to <a href="https://doc.pigsty.cc/#/zh-cn/v-meta?id=grafana_endpoint"><code>grafana_endpoint</code></a></li>
<li>new var: <a href="https://doc.pigsty.cc/#/zh-cn/v-meta?id=grafana_admin_username"><code>grafana_admin_username</code></a></li>
<li>new var: <a href="https://doc.pigsty.cc/#/zh-cn/v-meta?id=grafana_database"><code>grafana_database</code></a></li>
<li>new var: <a href="https://doc.pigsty.cc/#/zh-cn/v-meta?id=grafana_pgurl"><code>grafana_pgurl</code></a></li>
<li>new var: <a href="https://doc.pigsty.cc/#/zh-cn/v-pg-provision?id=pg_shared_libraries"><code>pg_shared_libraries</code></a></li>
<li>new var: <a href="https://doc.pigsty.cc/#/zh-cn/v-monitor?id=pg_exporter_auto_discovery"><code>pg_exporter_auto_discovery</code></a></li>
<li>new var: <a href="https://doc.pigsty.cc/#/zh-cn/v-monitor?id=pg_exporter_exclude_database"><code>pg_exporter_exclude_database</code></a></li>
<li>new var: <a href="https://doc.pigsty.cc/#/zh-cn/v-monitor?id=pg_exporter_include_database"><code>pg_exporter_include_database</code></a></li>
</ul>
<p><strong>Bug Fix</strong></p>
<ul>
<li>Fix default timezone Asia/Shanghai (CST) issue</li>
<li>Fix nofile limit for pgbouncer &amp; patroni</li>
<li>Pgbouncer userlist &amp; database list will be generated when executing tag <code>pgbouncer</code></li>
</ul>
<hr>
<h2 id="v090">v0.9.0</h2>
<p>Pigsty GUI, CLI, Logging Intergration</p>
<details>
<p><strong>Features</strong></p>
<ul>
<li>
<p>One-Line Installation</p>
<p>Run this on meta node <code>/bin/bash -c &quot;$(curl -fsSL https://pigsty.cc/install)&quot;</code></p>
</li>
<li>
<p>MetaDB provisioning</p>
<p>Now you can use pgsql database on meta node as inventory instead of static yaml file affter bootstrap.</p>
</li>
<li>
<p>Add Loki &amp; Prometail as optinal logging collector</p>
<p>Now you can view, query, search postgres|pgbouncer|patroni logs with Grafana UI (PG Instance Log)</p>
</li>
<li>
<p>Pigsty CLI/GUI (beta)</p>
<p>Mange you pigsty deployment with much more human-friendly command line interface.</p>
</li>
</ul>
<p><strong>Bug Fix</strong></p>
<ul>
<li>Log related issues
<ul>
<li>fix <code>connection reset by peer</code> entries in postgres log caused by Haproxy health check.</li>
<li>fix <code>Connect Reset Exception</code> in patroni logs caused by haproxy health check</li>
<li>fix patroni log time format (remove mill seconds, add timezone)</li>
<li>set <code>log_min_duration_statement=1s</code> for <code>dbuser_monitor</code> to get ride of monitor logs.</li>
</ul>
</li>
<li>Fix <code>pgbouncer-create-user</code> does not handle md5 password properly</li>
<li>Fix obsolete <code>Makefile</code> entries</li>
<li>Fix node dns nameserver lost when abort during resolv.conf rewrite</li>
<li>Fix db/user template and entry not null check</li>
</ul>
<p><strong>API Change</strong></p>
<ul>
<li>Set default value of <code>node_disable_swap</code> to <code>false</code></li>
<li>Remove example enties of <code>node_sysctl_params</code>.</li>
<li><code>grafana_plugin</code> default <code>install</code> will now download from CDN if plugins not exists</li>
<li><code>repo_url_packages</code> now download rpm via pigsty CDN to accelerate.</li>
<li><code>proxy_env.no_proxy</code> now add pigsty CDN to <code>noproxy</code> sites.</li>
<li><code>grafana_customize</code>  set to <code>false</code> by default, enable it means install pigsty pro UI.</li>
<li><code>node_admin_pk_current</code> add current user&rsquo;s <code>~/.ssh/id_rsa.pub</code> to admin pks</li>
<li><code>loki_clean</code> whether to cleanup existing loki data during init</li>
<li><code>loki_data_dir</code> set default data dir for loki logging service</li>
<li><code>promtail_enabled</code> enabling promtail logging agent service?</li>
<li><code>promtail_clean</code> remove existing promtail status during init?</li>
<li><code>promtail_port</code> default port used by promtail, 9080 by default</li>
<li><code>promtail_status_file</code> location of promtail status file</li>
<li><code>promtail_send_url</code> endpoint of loki service which receives log data</li>
</ul>
</details>
<hr>
<h2 id="v080">v0.8.0</h2>
<p>Service Provisioning support is added in this release</p>
<details>
<p><strong>New Features</strong></p>
<ul>
<li>Service provision.</li>
<li>full locale support.</li>
</ul>
<p><strong>API Changes</strong></p>
<p>Role <code>vip</code> and <code>haproxy</code> are merged into <code>service</code>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#------------------------------------------------------------------------------</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># SERVICE PROVISION</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic">#------------------------------------------------------------------------------</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">pg_weight</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">100</span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#8f5902;font-style:italic"># default load balance weight (instance level)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># - service - #</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">pg_services</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                                  </span><span style="color:#8f5902;font-style:italic"># how to expose postgres service in cluster?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># primary service will route {ip|name}:5433 to primary pgbouncer (5433-&gt;6432 rw)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">primary          </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># service name {{ pg_cluster }}_primary</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">src_ip</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;*&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">src_port</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">5433</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">dst_port</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">pgbouncer    </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># 5433 route to pgbouncer</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">check_url</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/primary    </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># primary health check, success when instance is primary</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">selector</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;[]&#34;</span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#8f5902;font-style:italic"># select all instance as primary service candidate</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># replica service will route {ip|name}:5434 to replica pgbouncer (5434-&gt;6432 ro)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">replica          </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># service name {{ pg_cluster }}_replica</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">src_ip</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;*&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">src_port</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">5434</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">dst_port</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">pgbouncer</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">check_url</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/read-only  </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># read-only health check. (including primary)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">selector</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;[]&#34;</span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#8f5902;font-style:italic"># select all instance as replica service candidate</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">selector_backup</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;[? pg_role == `primary`]&#34;</span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#8f5902;font-style:italic"># primary are used as backup server in replica service</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># default service will route {ip|name}:5436 to primary postgres (5436-&gt;5432 primary)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">default          </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># service&#39;s actual name is {{ pg_cluster }}-{{ service.name }}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">src_ip</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;*&#34;</span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#8f5902;font-style:italic"># service bind ip address, * for all, vip for cluster virtual ip address</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">src_port</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">5436</span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#8f5902;font-style:italic"># bind port, mandatory</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">dst_port: postgres      # target port</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">postgres|pgbouncer|port_number , pgbouncer(6432) by default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">check_method: http      # health check method</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">only http is available for now</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">check_port: patroni     # health check port</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">patroni|pg_exporter|port_number , patroni by default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">check_url</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/primary    </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># health check url path, / as default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">check_code</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">200</span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#8f5902;font-style:italic"># health check http code, 200 as default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">selector</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;[]&#34;</span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#8f5902;font-style:italic"># instance selector</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">haproxy</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#8f5902;font-style:italic"># haproxy specific fields</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">maxconn</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">3000</span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#8f5902;font-style:italic"># default front-end connection</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">balance</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">roundrobin  </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># load balance algorithm (roundrobin by default)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">default_server_options</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;inter 3s fastinter 1s downinter 5s rise 3 fall 3 on-marked-down shutdown-sessions slowstart 30s maxconn 3000 maxqueue 128 weight 100&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># offline service will route {ip|name}:5438 to offline postgres (5438-&gt;5432 offline)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">offline          </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># service name {{ pg_cluster }}_replica</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">src_ip</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;*&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">src_port</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">5438</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">dst_port</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">postgres</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">check_url</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/replica    </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># offline MUST be a replica</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">selector</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;[? pg_role == `offline` || pg_offline_query ]&#34;</span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#8f5902;font-style:italic"># instances with pg_role == &#39;offline&#39; or instance marked with &#39;pg_offline_query == true&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">selector_backup</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;[? pg_role == `replica` &amp;&amp; !pg_offline_query]&#34;</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># replica are used as backup server in offline service</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">pg_services_extra</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[]</span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic"># extra services to be added</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># - haproxy - #</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">haproxy_enabled</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                         </span><span style="color:#8f5902;font-style:italic"># enable haproxy among every cluster members</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">haproxy_reload</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                          </span><span style="color:#8f5902;font-style:italic"># reload haproxy after config</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">haproxy_policy</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">roundrobin                   </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># roundrobin, leastconn</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">haproxy_admin_auth_enabled</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#8f5902;font-style:italic"># enable authentication for haproxy admin?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">haproxy_admin_username</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">admin                </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># default haproxy admin username</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">haproxy_admin_password</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">admin                </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># default haproxy admin password</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">haproxy_exporter_port</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">9101</span><span style="color:#f8f8f8;text-decoration:underline">                   </span><span style="color:#8f5902;font-style:italic"># default admin/exporter port</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">haproxy_client_timeout</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">3h                   </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># client side connection timeout</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">haproxy_server_timeout</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">3h                   </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># server side connection timeout</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># - vip - #</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">vip_mode</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">none                               </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># none | l2 | l4</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">vip_reload</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                              </span><span style="color:#8f5902;font-style:italic"># whether reload service after config</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># vip_address: 127.0.0.1                      # virtual ip address ip (l2 or l4)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># vip_cidrmask: 24                            # virtual ip address cidr mask (l2 only)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># vip_interface: eth0                         # virtual ip network interface (l2 only)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p><strong>New Options</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># - localization - #</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">pg_encoding</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">UTF8                            </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># default to UTF8</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">pg_locale</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">C                                 </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># default to C</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">pg_lc_collate</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">C                             </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># default to C</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">pg_lc_ctype</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">en_US.UTF8                      </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># default to en_US.UTF8</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">pg_reload</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                               </span><span style="color:#8f5902;font-style:italic"># reload postgres after hba changes</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">vip_mode</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">none                               </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># none | l2 | l4</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">vip_reload</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                              </span><span style="color:#8f5902;font-style:italic"># whether reload service after config</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p><strong>Remove Options</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>haproxy_check_port                            # covered by service options
</span></span><span style="display:flex;"><span>haproxy_primary_port
</span></span><span style="display:flex;"><span>haproxy_replica_port
</span></span><span style="display:flex;"><span>haproxy_backend_port
</span></span><span style="display:flex;"><span>haproxy_weight
</span></span><span style="display:flex;"><span>haproxy_weight_fallback
</span></span><span style="display:flex;"><span>vip_enabled                                   # replace by vip_mode
</span></span></code></pre></div><p><strong>Service</strong></p>
<p><code>pg_services</code> and <code>pg_services_extra</code> Defines the services in cluster:</p>
<p>A service has some mandatory fields:</p>
<ul>
<li><code>name</code>: service&rsquo;s name</li>
<li><code>src_port</code>: which port to listen and expose service?</li>
<li><code>selector</code>: which instances belonging to this service?</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># default service will route {ip|name}:5436 to primary postgres (5436-&gt;5432 primary)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">default          </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># service&#39;s actual name is {{ pg_cluster }}-{{ service.name }}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">src_ip</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;*&#34;</span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#8f5902;font-style:italic"># service bind ip address, * for all, vip for cluster virtual ip address</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">src_port</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">5436</span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#8f5902;font-style:italic"># bind port, mandatory</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">dst_port: postgres      # target port</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">postgres|pgbouncer|port_number , pgbouncer(6432) by default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">check_method: http      # health check method</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">only http is available for now</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">check_port: patroni     # health check port</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">patroni|pg_exporter|port_number , patroni by default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">check_url</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/primary    </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># health check url path, / as default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">check_code</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">200</span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#8f5902;font-style:italic"># health check http code, 200 as default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">selector</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;[]&#34;</span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#8f5902;font-style:italic"># instance selector</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">haproxy</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#8f5902;font-style:italic"># haproxy specific fields</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">maxconn</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">3000</span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#8f5902;font-style:italic"># default front-end connection</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">balance</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">roundrobin  </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># load balance algorithm (roundrobin by default)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">default_server_options</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;inter 3s fastinter 1s downinter 5s rise 3 fall 3 on-marked-down shutdown-sessions slowstart 30s maxconn 3000 maxqueue 128 weight 100&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p><strong>Database</strong></p>
<p>Add additional locale support: <code>lc_ctype</code> and <code>lc_collate</code>.</p>
<p>It&rsquo;s mainly because of <code>pg_trgm</code> &rsquo;s weird behavior on i18n characters.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">pg_databases</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">meta                     </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># name is the only required field for a database</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># owner: postgres                 # optional, database owner</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># template: template1             # optional, template1 by default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># encoding: UTF8                # optional, UTF8 by default , must same as template database, leave blank to set to db default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># locale: C                     # optional, C by default , must same as template database, leave blank to set to db default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># lc_collate: C                 # optional, C by default , must same as template database, leave blank to set to db default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># lc_ctype: C                   # optional, C by default , must same as template database, leave blank to set to db default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">allowconn</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                 </span><span style="color:#8f5902;font-style:italic"># optional, true by default, false disable connect at all</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">revokeconn</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">               </span><span style="color:#8f5902;font-style:italic"># optional, false by default, true revoke connect from public # (only default user and owner have connect privilege on database)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># tablespace: pg_default          # optional, &#39;pg_default&#39; is the default tablespace</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">connlimit</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>-<span style="color:#0000cf;font-weight:bold">1</span><span style="color:#f8f8f8;text-decoration:underline">                   </span><span style="color:#8f5902;font-style:italic"># optional, connection limit, -1 or none disable limit (default)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">extensions</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                     </span><span style="color:#8f5902;font-style:italic"># optional, extension name and where to create</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- {<span style="color:#204a87;font-weight:bold">name: postgis, schema</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">public}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">parameters</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                     </span><span style="color:#8f5902;font-style:italic"># optional, extra parameters with ALTER DATABASE</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">enable_partitionwise_join</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">pgbouncer</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                 </span><span style="color:#8f5902;font-style:italic"># optional, add this database to pgbouncer list? true by default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">comment</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">pigsty meta database  </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># optional, comment string for database</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div></details>
<hr>
<h2 id="v070">v0.7.0</h2>
<p>Monitor only deployment support</p>
<details>
<p><strong>Overview</strong></p>
<ul>
<li>
<p>Monitor Only Deployment</p>
<ul>
<li>Now you can monitoring existing postgres clusters without Pigsty provisioning solution.</li>
<li>Intergration with other provisioning solution is available and under further test.</li>
</ul>
</li>
<li>
<p>Database/User Management</p>
<ul>
<li>Update user/database definition schema to cover more usecases.</li>
<li>Add <code>pgsql-createdb.yml</code> and <code>pgsql-user.yml</code> to mange user/db on running clusters.</li>
</ul>
</li>
</ul>
<p><strong>Features</strong></p>
<ul>
<li><a href="https://github.com/Vonng/pigsty/issues/25">Monitor Only Deployment Support #25</a></li>
<li><a href="https://github.com/Vonng/pigsty/issues/36">Split monolith static monitor target file into per-cluster conf #36</a></li>
<li><a href="https://github.com/Vonng/pigsty/issues/29">Add create user playbook #29</a></li>
<li><a href="https://github.com/Vonng/pigsty/issues/28">Add create database playbook #28</a></li>
<li><a href="https://github.com/Vonng/pigsty/issues/33">Database provisioning interface enhancement #33</a></li>
<li><a href="https://github.com/Vonng/pigsty/issues/34">User provisioning interface enhancement #34</a></li>
</ul>
<p><strong>Bug Fix</strong></p>
<ul>
<li><a href="https://github.com/Vonng/pigsty/issues/32">Create extension with schema typo #32</a></li>
<li><a href="https://github.com/Vonng/pigsty/issues/35">pgbouncer reload with systemctl not work #35</a></li>
</ul>
<p><strong>API Changes</strong></p>
<p><em><strong>New Options</strong></em></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">prometheus_sd_target</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">batch                  </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># batch|single</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">exporter_install</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">none                       </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># none|yum|binary</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">exporter_repo_url</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;&#39;</span><span style="color:#f8f8f8;text-decoration:underline">                         </span><span style="color:#8f5902;font-style:italic"># add to yum repo if set</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">node_exporter_options</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;--no-collector.softnet --collector.systemd --collector.ntp --collector.tcpstat --collector.processes&#39;</span><span style="color:#f8f8f8;text-decoration:underline">                          </span><span style="color:#8f5902;font-style:italic"># default opts for node_exporter</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">pg_exporter_url</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;&#39;</span><span style="color:#f8f8f8;text-decoration:underline">                           </span><span style="color:#8f5902;font-style:italic"># optional, overwrite default pg_exporter target</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">pgbouncer_exporter_url</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;&#39;</span><span style="color:#f8f8f8;text-decoration:underline">                    </span><span style="color:#8f5902;font-style:italic"># optional, overwrite default pgbouncer_expoter target</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p><em><strong>Remove Options</strong></em></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">exporter_binary_install</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                 </span><span style="color:#8f5902;font-style:italic"># covered by exporter_install</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p><em><strong>Structure Changes</strong></em></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#000">pg_default_roles                              </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># refer to pg_users</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">pg_users                                      </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># refer to pg_users</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">pg_databases                                  </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># refer to pg_databases</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p><em><strong>Rename Options</strong></em></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span><span style="color:#000">pg_default_privilegs -&gt; pg_default_privileges </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># fix typo</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p><strong>Enhancement</strong></p>
<p><strong>Monitoring Provisioning Enhancement</strong></p>
<ul>
<li><a href="https://github.com/Vonng/pigsty/issues/13">Decouple consul #13</a></li>
<li><a href="https://github.com/Vonng/pigsty/issues/14">Binary install mode for node_exporter and pg_exporter #14</a></li>
<li><a href="https://github.com/Vonng/pigsty/issues/11">Prometheus static targets mode support #11</a></li>
</ul>
<p><strong>Haproxy Enhancement</strong></p>
<ul>
<li><a href="https://github.com/Vonng/pigsty/issues/10">Adjust relative traffic weight with configuration #10</a></li>
<li><a href="https://github.com/Vonng/pigsty/issues/12">HAProxy admin page access via nginx #12</a></li>
<li><a href="https://github.com/Vonng/pigsty/issues/8">Readonly traffic fallback on primary if all replicas down #8</a></li>
</ul>
<p><strong>Security Enhancement</strong></p>
<ul>
<li><a href="https://github.com/Vonng/pigsty/issues/7">Offline access control #7</a></li>
<li><a href="https://github.com/Vonng/pigsty/issues/9">Safeguard for purge functionality #9</a></li>
</ul>
<p><strong>Software Update</strong></p>
<ul>
<li>
<p><a href="https://github.com/Vonng/pigsty/issues/6">Upgrade to PG 13.2 #6</a></p>
</li>
<li>
<p>Prometheus 2.25 / Grafana 7.4 / Consul 1.9.3 / Node Exporter 1.1 / PG Exporter 0.3.2</p>
</li>
</ul>
<p><strong>API Change</strong></p>
<p><em><strong>New Config Entries</strong></em></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">service_registry</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">consul                     </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># none | consul | etcd | both</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">prometheus_options</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;--storage.tsdb.retention=30d&#39;</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># prometheus cli opts</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">prometheus_sd_method: consul                  # Prometheus service discovery method</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">static|consul</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">prometheus_sd_interval</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">2s                   </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Prometheus service discovery refresh interval</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">pg_offline_query</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                       </span><span style="color:#8f5902;font-style:italic"># set to true to allow offline queries on this instance</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">node_exporter_enabled</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                   </span><span style="color:#8f5902;font-style:italic"># enabling Node Exporter</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">pg_exporter_enabled</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                     </span><span style="color:#8f5902;font-style:italic"># enabling PG Exporter</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">pgbouncer_exporter_enabled</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#8f5902;font-style:italic"># enabling Pgbouncer Exporter</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">export_binary_install</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># install Node/PG Exporter via copy binary</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">dcs_disable_purge</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                      </span><span style="color:#8f5902;font-style:italic"># force dcs_exists_action = abort to avoid dcs purge</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">pg_disable_purge</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                       </span><span style="color:#8f5902;font-style:italic"># force pg_exists_action = abort to avoid pg purge</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">haproxy_weight</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">100</span><span style="color:#f8f8f8;text-decoration:underline">                           </span><span style="color:#8f5902;font-style:italic"># relative lb weight for backend instance</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">haproxy_weight_fallback</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#f8f8f8;text-decoration:underline">                    </span><span style="color:#8f5902;font-style:italic"># primary server weight in replica service group</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p><em><strong>Obsolete Config Entries</strong></em></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#000">prometheus_metrics_path                      </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># duplicate with exporter_metrics_path </span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">prometheus_retention                         </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># covered by `prometheus_options`</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p><strong>Database Definition</strong></p>
<p><a href="https://github.com/Vonng/pigsty/issues/33">Database provisioning interface enhancement #33</a></p>
<p><em><strong>Old Schema</strong></em></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">pg_databases</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                       </span><span style="color:#8f5902;font-style:italic"># create a business database &#39;meta&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">meta</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">schemas</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#000">meta]                </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># create extra schema named &#39;meta&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">extensions</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span>{<span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">postgis}]  </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># create extra extension postgis</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">parameters</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                     </span><span style="color:#8f5902;font-style:italic"># overwrite database meta&#39;s default search_path</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">search_path</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">public, monitor</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p><em><strong>New Schema</strong></em></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">pg_databases</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">meta                     </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># name is the only required field for a database</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">owner</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">postgres                </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># optional, database owner</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">template</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">template1            </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># optional, template1 by default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">encoding</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">UTF8                 </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># optional, UTF8 by default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">locale</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">C                      </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># optional, C by default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">allowconn</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                 </span><span style="color:#8f5902;font-style:italic"># optional, true by default, false disable connect at all</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">revokeconn</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">               </span><span style="color:#8f5902;font-style:italic"># optional, false by default, true revoke connect from public # (only default user and owner have connect privilege on database)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">tablespace</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">pg_default         </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># optional, &#39;pg_default&#39; is the default tablespace</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">connlimit</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>-<span style="color:#0000cf;font-weight:bold">1</span><span style="color:#f8f8f8;text-decoration:underline">                   </span><span style="color:#8f5902;font-style:italic"># optional, connection limit, -1 or none disable limit (default)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">extensions</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                     </span><span style="color:#8f5902;font-style:italic"># optional, extension name and where to create</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- {<span style="color:#204a87;font-weight:bold">name: postgis, schema</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">public}</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">parameters</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                     </span><span style="color:#8f5902;font-style:italic"># optional, extra parameters with ALTER DATABASE</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">enable_partitionwise_join</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">pgbouncer</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                 </span><span style="color:#8f5902;font-style:italic"># optional, add this database to pgbouncer list? true by default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">comment</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">pigsty meta database  </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># optional, comment string for database</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p><strong>Changes</strong></p>
<ul>
<li>Add new options: <code>template</code> , <code>encoding</code>, <code>locale</code>, <code>allowconn</code>, <code>tablespace</code>, <code>connlimit</code></li>
<li>Add new option <code>revokeconn</code>, which revoke connect privileges from public for this database</li>
<li>Add <code>comment</code> field for database</li>
</ul>
<p><em><strong>Apply Changes</strong></em></p>
<p>You can create new database on running postgres clusters with <code>pgsql-createdb.yml</code> playbook.</p>
<ol>
<li>Define your new database in config files</li>
<li>Pass new database.name with option <code>pg_database</code> to playbook.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>./pgsql-createdb.yml -e <span style="color:#000">pg_database</span><span style="color:#ce5c00;font-weight:bold">=</span>&lt;your_new_database_name&gt;
</span></span></code></pre></div><p><strong>User Definition</strong></p>
<p><a href="https://github.com/Vonng/pigsty/issues/34">User provisioning interface enhancement #34</a></p>
<p><em><strong>Old Schema</strong></em></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">pg_users</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">username</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">test                 </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># example production user have read-write access</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">password</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">test                 </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># example user&#39;s password</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">options</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">LOGIN                 </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># extra options</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">groups</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">dbrole_readwrite ]   </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># dborole_admin|dbrole_readwrite|dbrole_readonly</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">comment</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">default test user for production usage</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">pgbouncer</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                 </span><span style="color:#8f5902;font-style:italic"># add to pgbouncer</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p><em><strong>New Schema</strong></em></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">pg_users</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># complete example of user/role definition for production user</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">dbuser_meta              </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># example production user have read-write access</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">password</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">DBUser.Meta          </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># example user&#39;s password, can be encrypted</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">login</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                     </span><span style="color:#8f5902;font-style:italic"># can login, true by default (should be false for role)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">superuser</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#8f5902;font-style:italic"># is superuser? false by default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">createdb</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                 </span><span style="color:#8f5902;font-style:italic"># can create database? false by default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">createrole</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">               </span><span style="color:#8f5902;font-style:italic"># can create role? false by default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">inherit</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                   </span><span style="color:#8f5902;font-style:italic"># can this role use inherited privileges?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">replication</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#8f5902;font-style:italic"># can this role do replication? false by default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">bypassrls</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#8f5902;font-style:italic"># can this role bypass row level security? false by default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">connlimit</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>-<span style="color:#0000cf;font-weight:bold">1</span><span style="color:#f8f8f8;text-decoration:underline">                   </span><span style="color:#8f5902;font-style:italic"># connection limit, -1 disable limit</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">expire_at</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;2030-12-31&#39;</span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#8f5902;font-style:italic"># &#39;timestamp&#39; when this role is expired</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">expire_in</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">365</span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># now + n days when this role is expired (OVERWRITE expire_at)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">roles</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#000">dbrole_readwrite]      </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># dborole_admin|dbrole_readwrite|dbrole_readonly</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">pgbouncer</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                 </span><span style="color:#8f5902;font-style:italic"># add this user to pgbouncer? false by default (true for production user)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">parameters</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                     </span><span style="color:#8f5902;font-style:italic"># user&#39;s default search path</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">search_path</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">public</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">comment</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">test user</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p><strong>Changes</strong></p>
<ul>
<li><code>username</code> field rename to <code>name</code></li>
<li><code>groups</code> field rename to <code>roles</code></li>
<li><code>options</code> now split into separated configration entries:
<code>login</code>, <code>superuser</code>, <code>createdb</code>, <code>createrole</code>, <code>inherit</code>, <code>replication</code>,<code>bypassrls</code>,<code>connlimit</code></li>
<li><code>expire_at</code> and <code>expire_in</code> options</li>
<li><code>pgbouncer</code> option for user is now <code>false</code> by default</li>
</ul>
<p><strong>Apply Changes</strong></p>
<p>You can create new users on running postgres clusters with <code>pgsql-createuser.yml</code> playbook.</p>
<ol>
<li>Define your new users in config files (<code>pg_users</code>)</li>
<li>Pass new user.name with option <code>pg_user</code> to playbook.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>./pgsql-createuser.yml -e <span style="color:#000">pg_user</span><span style="color:#ce5c00;font-weight:bold">=</span>&lt;your_new_user_name&gt;
</span></span></code></pre></div></details>
<hr>
<h2 id="v060">v0.6.0</h2>
<p>Architecture Enhancement</p>
<details>
<p><strong>Bug Fix</strong></p>
<ul>
<li><a href="https://github.com/Vonng/pigsty/issues/5">pg_hba reset on patroni restart (patroni 2.0) #5</a></li>
<li>Merge <a href="https://github.com/Vonng/pigsty/pull/1">Fix name of dashboard #1</a>, Fix PG Overview Dashboard typo</li>
<li>Fix default primary instance to <code>pg-test-1</code> of cluster <code>pg-test</code> in sandbox environment</li>
<li>Fix obsolete comments</li>
</ul>
<p><strong>Monitoring Provisioning Enhancement</strong></p>
<ul>
<li><a href="https://github.com/Vonng/pigsty/issues/13">Decouple consul #13</a></li>
<li><a href="https://github.com/Vonng/pigsty/issues/14">Binary install mode for node_exporter and pg_exporter #14</a></li>
<li><a href="https://github.com/Vonng/pigsty/issues/11">Prometheus static targets mode support #11</a></li>
</ul>
<p><strong>Haproxy Enhancement</strong></p>
<ul>
<li><a href="https://github.com/Vonng/pigsty/issues/10">Adjust relative traffic weight with configuration #10</a></li>
<li><a href="https://github.com/Vonng/pigsty/issues/12">HAProxy admin page access via nginx #12</a></li>
<li><a href="https://github.com/Vonng/pigsty/issues/8">Readonly traffic fallback on primary if all replicas down #8</a></li>
</ul>
<p><strong>Security Enhancement</strong></p>
<ul>
<li><a href="https://github.com/Vonng/pigsty/issues/7">Offline access control #7</a></li>
<li><a href="https://github.com/Vonng/pigsty/issues/9">Safeguard for purge functionality #9</a></li>
</ul>
<p><strong>Software Update</strong></p>
<ul>
<li>
<p><a href="https://github.com/Vonng/pigsty/issues/6">Upgrade to PG 13.2 #6</a></p>
</li>
<li>
<p>Prometheus 2.25 / Grafana 7.4 / Consul 1.9.3 / Node Exporter 1.1 / PG Exporter 0.3.2</p>
</li>
</ul>
<p><strong>API Change</strong></p>
<p><strong>New Config Entries</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">service_registry</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">consul                     </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># none | consul | etcd | both</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">prometheus_options</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;--storage.tsdb.retention=30d&#39;</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># prometheus cli opts</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">prometheus_sd_method: consul                  # Prometheus service discovery method</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">static|consul</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">prometheus_sd_interval</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">2s                   </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Prometheus service discovery refresh interval</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">pg_offline_query</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                       </span><span style="color:#8f5902;font-style:italic"># set to true to allow offline queries on this instance</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">node_exporter_enabled</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                   </span><span style="color:#8f5902;font-style:italic"># enabling Node Exporter</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">pg_exporter_enabled</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                     </span><span style="color:#8f5902;font-style:italic"># enabling PG Exporter</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">pgbouncer_exporter_enabled</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#8f5902;font-style:italic"># enabling Pgbouncer Exporter</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">export_binary_install</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># install Node/PG Exporter via copy binary</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">dcs_disable_purge</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                      </span><span style="color:#8f5902;font-style:italic"># force dcs_exists_action = abort to avoid dcs purge</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">pg_disable_purge</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                       </span><span style="color:#8f5902;font-style:italic"># force pg_exists_action = abort to avoid pg purge</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">haproxy_weight</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">100</span><span style="color:#f8f8f8;text-decoration:underline">                           </span><span style="color:#8f5902;font-style:italic"># relative lb weight for backend instance</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">haproxy_weight_fallback</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#f8f8f8;text-decoration:underline">                    </span><span style="color:#8f5902;font-style:italic"># primary server weight in replica service group</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p><strong>Obsolete Config Entries</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#000">prometheus_metrics_path                      </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># duplicate with exporter_metrics_path </span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">prometheus_retention                         </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># covered by `prometheus_options`</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div></details>
<hr>
<h2 id="v050">v0.5.0</h2>
<p>Pigsty now have an <a href="http://pigsty.cc/">Official Site</a> 🎉 !</p>
<details>
<p><strong>New Features</strong></p>
<ul>
<li>Add Database Provision Template</li>
<li>Add Init Template</li>
<li>Add Business Init Template</li>
<li>Refactor HBA Rules variables</li>
<li>Fix dashboards bugs.</li>
<li>Move <code>pg-cluster-replication</code> to default dashboards</li>
<li>Use ZJU PostgreSQL mirror as default to accelerate repo build phase.</li>
<li>Move documentation to official site:  <a href="https://pigsty.cc">https://pigsty.cc</a></li>
<li>Download newly created offline installation packages:  <a href="https://github.com/Vonng/pigsty/releases/download/v0.5.0/pkg.tgz">pkg.tgz</a> (v0.5)</li>
</ul>
<p><strong>Database Provision Template</strong></p>
<p>Now you can customize your database content with pigsty !</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">pg_users</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">username</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">test</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">password</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">test</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">comment</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">default test user</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">groups</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">dbrole_readwrite ]   </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># dborole_admin|dbrole_readwrite|dbrole_readonly</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">pg_databases</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                       </span><span style="color:#8f5902;font-style:italic"># create a business database &#39;test&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">test</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">extensions</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span>{<span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">postgis}]  </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># create extra extension postgis</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">parameters</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                     </span><span style="color:#8f5902;font-style:italic"># overwrite database meta&#39;s default search_path</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">search_path</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">public,monitor</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p><a href="https://github.com/Vonng/pigsty/blob/master/roles/postgres/templates/pg-init-template.sql">pg-init-template.sql</a> wil be used as default template1 database init script
<a href="https://github.com/Vonng/pigsty/blob/master/roles/postgres/templates/pg-init-business.sql">pg-init-business.sql</a> will be used as default business database init script</p>
<p>you can customize default role system, schemas, extensions, privileges with variables now:</p>
<details>
<summary>Template Configuration</summary>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># - system roles - #</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">pg_replication_username</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">replicator          </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># system replication user</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">pg_replication_password</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">DBUser.Replicator   </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># system replication password</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">pg_monitor_username</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">dbuser_monitor          </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># system monitor user</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">pg_monitor_password</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">DBUser.Monitor          </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># system monitor password</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">pg_admin_username</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">dbuser_admin              </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># system admin user</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">pg_admin_password</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">DBUser.Admin              </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># system admin password</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># - default roles - #</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">pg_default_roles</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">username</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">dbrole_readonly                 # sample user</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">options</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">NOLOGIN                         </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># role can not login</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">comment</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">role for readonly access        </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># comment string</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">username: dbrole_readwrite                # sample user</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">one object for each user</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">options</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">NOLOGIN</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">comment</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">role for read-write access</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">groups</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">dbrole_readonly ]              </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># read-write includes read-only access</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">username: dbrole_admin                    # sample user</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">one object for each user</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">options</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">NOLOGIN BYPASSRLS               </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># admin can bypass row level security</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">comment</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">role for object creation</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">groups</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#000">dbrole_readwrite,pg_monitor,pg_signal_backend]</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># NOTE: replicator, monitor, admin password are overwritten by separated config entry</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">username</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">postgres                       </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># reset dbsu password to NULL (if dbsu is not postgres)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">options</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">SUPERUSER LOGIN</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">comment</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">system superuser</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">username</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">replicator</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">options</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">REPLICATION LOGIN</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">groups</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#000">pg_monitor, dbrole_readonly]</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">comment</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">system replicator</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">username</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">dbuser_monitor</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">options</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">LOGIN CONNECTION LIMIT 10</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">comment</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">system monitor user</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">groups</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#000">pg_monitor, dbrole_readonly]</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">username</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">dbuser_admin</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">options</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">LOGIN BYPASSRLS</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">comment</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">system admin user</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">groups</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#000">dbrole_admin]</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">username</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">dbuser_stats</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">password</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">DBUser.Stats</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">options</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">LOGIN</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">comment</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">business read-only user for statistics</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">groups</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#000">dbrole_readonly]</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># object created by dbsu and admin will have their privileges properly set</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">pg_default_privilegs</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#000">GRANT USAGE                         ON SCHEMAS   TO dbrole_readonly</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#000">GRANT SELECT                        ON TABLES    TO dbrole_readonly</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#000">GRANT SELECT                        ON SEQUENCES TO dbrole_readonly</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#000">GRANT EXECUTE                       ON FUNCTIONS TO dbrole_readonly</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#000">GRANT INSERT, UPDATE, DELETE        ON TABLES    TO dbrole_readwrite</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#000">GRANT USAGE,  UPDATE                ON SEQUENCES TO dbrole_readwrite</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#000">GRANT TRUNCATE, REFERENCES, TRIGGER ON TABLES    TO dbrole_admin</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#000">GRANT CREATE                        ON SCHEMAS   TO dbrole_admin</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#000">GRANT USAGE                         ON TYPES     TO dbrole_admin</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># schemas</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">pg_default_schemas</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#000">monitor]</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># extension</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">pg_default_extensions</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">name: &#39;pg_stat_statements&#39;,  schema</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;monitor&#39;</span><span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">name: &#39;pgstattuple&#39;,         schema</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;monitor&#39;</span><span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">name: &#39;pg_qualstats&#39;,        schema</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;monitor&#39;</span><span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">name: &#39;pg_buffercache&#39;,      schema</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;monitor&#39;</span><span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">name: &#39;pageinspect&#39;,         schema</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;monitor&#39;</span><span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">name: &#39;pg_prewarm&#39;,          schema</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;monitor&#39;</span><span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">name: &#39;pg_visibility&#39;,       schema</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;monitor&#39;</span><span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">name: &#39;pg_freespacemap&#39;,     schema</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;monitor&#39;</span><span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">name: &#39;pg_repack&#39;,           schema</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;monitor&#39;</span><span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">postgres_fdw</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">file_fdw</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">btree_gist</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">btree_gin</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">pg_trgm</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">intagg</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">intarray</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># postgres host-based authentication rules</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">pg_hba_rules</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">title</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">allow meta node password access</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">role</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">common</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">rules</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">host    all     all                         10.10.10.10/32      md5</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">title</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">allow intranet admin password access</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">role</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">common</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">rules</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">host    all     +dbrole_admin               10.0.0.0/8          md5</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">host    all     +dbrole_admin               172.16.0.0/12       md5</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">host    all     +dbrole_admin               192.168.0.0/16      md5</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">title</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">allow intranet password access</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">role</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">common</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">rules</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">host    all             all                 10.0.0.0/8          md5</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">host    all             all                 172.16.0.0/12       md5</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">host    all             all                 192.168.0.0/16      md5</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">title</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">allow local read-write access (local production user via pgbouncer)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">role</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">common</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">rules</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">local   all     +dbrole_readwrite                               md5</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">host    all     +dbrole_readwrite           127.0.0.1/32        md5</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">title</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">allow read-only user (stats, personal) password directly access</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">role</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">replica</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">rules</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">local   all     +dbrole_readonly                               md5</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">host    all     +dbrole_readonly           127.0.0.1/32        md5</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">pg_hba_rules_extra</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[]</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># pgbouncer host-based authentication rules</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">pgbouncer_hba_rules</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">title</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">local password access</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">role</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">common</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">rules</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">local  all          all                                     md5</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">host   all          all                     127.0.0.1/32    md5</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">title</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">intranet password access</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">role</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">common</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">rules</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">host   all          all                     10.0.0.0/8      md5</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">host   all          all                     172.16.0.0/12   md5</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">host   all          all                     192.168.0.0/16  md5</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">pgbouncer_hba_rules_extra</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[]</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div></details>
</details>
<hr>
<h2 id="v040">v0.4.0</h2>
<p>The second public beta (v0.4.0) of pigsty is available now ! 🎉</p>
<details>
<p><strong>Monitoring System</strong></p>
<p>Skim version of monitoring system consist of 10 essential dashboards:</p>
<ul>
<li>PG Overview</li>
<li>PG Cluster</li>
<li>PG Service</li>
<li>PG Instance</li>
<li>PG Database</li>
<li>PG Query</li>
<li>PG Table</li>
<li>PG Table Catalog</li>
<li>PG Table Detail</li>
<li>Node</li>
</ul>
<p><strong>Software upgrade</strong></p>
<ul>
<li>Upgrade to PostgreSQL 13.1, Patroni 2.0.1-4, add citus to repo.</li>
<li>Upgrade to <a href="https://github.com/Vonng/pg_exporter/releases/tag/v0.3.1"><code>pg_exporter 0.3.1</code></a></li>
<li>Upgrade to Grafana 7.3, Ton&rsquo;s of compatibility work</li>
<li>Upgrade to prometheus 2.23, with new UI as default</li>
<li>Upgrade to consul 1.9</li>
</ul>
<p><strong>Misc</strong></p>
<ul>
<li>Update prometheus alert rules</li>
<li>Fix alertmanager info links</li>
<li>Fix bugs and typos.</li>
<li>add a simple backup script</li>
</ul>
<p><strong>Offline Installation</strong></p>
<ul>
<li><a href="https://github.com/Vonng/pigsty/releases/download/v0.4.0/pkg.tgz">pkg.tgz</a> is the latest offline install package (1GB rpm packages, made under CentOS 7.8)</li>
</ul>
</details>
<hr>
<h2 id="v030">v0.3.0</h2>
<p>The first public beta (v0.3.0) of pigsty is available now ! 🎉</p>
<details>
<p><strong>Monitoring System</strong></p>
<p><strong>Skim version of monitoring system</strong> consist of 8 essential dashboards:</p>
<ul>
<li>PG Overview</li>
<li>PG Cluster</li>
<li>PG Service</li>
<li>PG Instance</li>
<li>PG Database</li>
<li>PG Table Overview</li>
<li>PG Table Catalog</li>
<li>Node</li>
</ul>
<p><strong>Database Cluster Provision</strong></p>
<ul>
<li>All config files are merged into one file: <code>conf/all.yml</code> by default</li>
<li>Use <code>infra.yml</code> to provision meta node(s) and infrastructure</li>
<li>Use <code>initdb.yml</code> to provision database clusters</li>
<li>Use <code>ins-add.yml</code> to add new instance to database cluster</li>
<li>Use <code>ins-del.yml</code> to remove instance from database cluster</li>
</ul>
<p><strong>Offline Installation</strong></p>
<ul>
<li><a href="https://github.com/Vonng/pigsty/releases/download/v0.3.0/pkg.tgz">pkg.tgz</a> is the latest offline install package (1GB rpm packages, made under CentOS 7.8)</li>
</ul>
</details>
	<style>
  .feedback--answer {
    display: inline-block;
  }
  .feedback--answer-no {
    margin-left: 1em;
  }
  .feedback--response {
    display: none;
    margin-top: 1em;
  }
  .feedback--response__visible {
    display: block;
  }
</style>
<div class="d-print-none">
<h2 class="feedback--title">Feedback</h2>
<p class="feedback--question">Was this page helpful?</p>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-yes">Yes</button>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-no">No</button>
<p class="feedback--response feedback--response-yes">
  Glad to hear it! Please <a href="https://github.com/Vonng/pigsty/issues/new">tell us how we can improve</a>.
</p>
<p class="feedback--response feedback--response-no">
  Sorry to hear that. Please <a href="https://github.com/Vonng/pigsty/issues/new">tell us how we can improve</a>.
</p>
</div>
<script>
  const yesButton = document.querySelector('.feedback--answer-yes');
  const noButton = document.querySelector('.feedback--answer-no');
  const yesResponse = document.querySelector('.feedback--response-yes');
  const noResponse = document.querySelector('.feedback--response-no');
  const disableButtons = () => {
    yesButton.disabled = true;
    noButton.disabled = true;
  };
  const sendFeedback = (value) => {
    if (typeof gtag !== 'function') return;
    gtag('event', 'page_helpful', {
      'event_category': 'Helpful',
      'event_label': window.location.pathname,
      'value': value
    });
  };
  yesButton.addEventListener('click', () => {
    yesResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback( 100 );
  });
  noButton.addEventListener('click', () => {
    noResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback(0);
  });
</script>
<br />
<div class="td-page-meta__lastmod">
  Last modified 2025-01-13: <a href="https://github.com/Vonng/pigsty.cc/commit/9ee4c8b2fce2fc0cad156978d7f28e8e8c7b3747">add new blog patsy (9ee4c8b2)</a>
</div>

</div>


          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Mail" aria-label="Mail">
    <a target="_blank" rel="noopener" href="mailto:rh@vonng.com" aria-label="Mail">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="GitHub" aria-label="GitHub">
    <a target="_blank" rel="noopener" href="https://github.com/Vonng/pigsty" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Twitter" aria-label="Twitter">
    <a target="_blank" rel="noopener" href="https://twitter.com/GobeUncleWang" aria-label="Twitter">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="WeChat" aria-label="WeChat">
    <a target="_blank" rel="noopener" href="/img/pigsty/pigsty-cc.jpg" aria-label="WeChat">
      <i class="fa fa-comment"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Discord" aria-label="Discord">
    <a target="_blank" rel="noopener" href="https://discord.gg/wDzt5VyWEz" aria-label="Discord">
      <i class="fab fa-discord"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Telegram" aria-label="Telegram">
    <a target="_blank" rel="noopener" href="https://t.me/joinchat/gV9zfZraNPM3YjFh" aria-label="Telegram">
      <i class="fab fa-telegram"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        <span class="td-footer__copyright">&copy;
    2018&ndash;2025
    <span class="td-footer__authors">Ruohang Feng</span></span><span class="td-footer__all_rights_reserved">All Rights Reserved</span></span><span class="ms-2"><a href="https://vonng.com/en/" target="_blank" rel="noopener">@Vonng</a></span>
<br><span>Pigsty® distributed under <a href="/docs/about/license" target="_blank" rel="noopener">AGPLv3</a></span>
<br><span class="ms-2"><a href="/docs/about/privacy" target="_blank" rel="noopener">Privacy Policy</a></span>
<span><a href="http://beian.miit.gov.cn/" target="_blank" rel="noopener">浙ICP备15016890号</a></span>
      </div>
    </div>
  </div>
</footer>

    </div>
    <script src="/js/main.min.248655eb216150e39da254c2f7aa5357805d0ec66bdb741b591cd35fb5f629ab.js" integrity="sha256-JIZV6yFhUOOdolTC96pTV4BdDsZr23QbWRzTX7X2Kas=" crossorigin="anonymous"></script>
<script defer src="/js/click-to-copy.min.f724d3de49218995223b7316aa2e53e2b34bf42026bf399ebb21bb02212402d1.js" integrity="sha256-9yTT3kkhiZUiO3MWqi5T4rNL9CAmvzmeuyG7AiEkAtE=" crossorigin="anonymous"></script>
<script src='/js/tabpane-persist.js'></script>

  </body>
</html>