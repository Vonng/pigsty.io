<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="canonical" type="text/html" href="/docs/redis/">
<link rel="alternate" type="application/rss&#43;xml" href="/docs/redis/index.xml">
<meta name="robots" content="noindex, nofollow">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Module: REDIS | Pigsty</title>
<meta name="description" content="Pigsty has built-in Redis support, which is a high-performance data-structure server. Deploy redis in standalone, cluster or sentinel mode.">
<meta property="og:title" content="Module: REDIS" />
<meta property="og:description" content="Pigsty has built-in Redis support, which is a high-performance data-structure server. Deploy redis in standalone, cluster or sentinel mode." />
<meta property="og:type" content="website" />
<meta property="og:url" content="/docs/redis/" />

<meta itemprop="name" content="Module: REDIS">
<meta itemprop="description" content="Pigsty has built-in Redis support, which is a high-performance data-structure server. Deploy redis in standalone, cluster or sentinel mode."><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Module: REDIS"/>
<meta name="twitter:description" content="Pigsty has built-in Redis support, which is a high-performance data-structure server. Deploy redis in standalone, cluster or sentinel mode."/>




<link rel="preload" href="/scss/main.min.194607c777ee31a481a26dfc3d1c65134dfc8eb296a0aae9d353b3bd5be6a683.css" as="style">
<link href="/scss/main.min.194607c777ee31a481a26dfc3d1c65134dfc8eb296a0aae9d353b3bd5be6a683.css" rel="stylesheet" integrity="">

<script
  src="/js/jquery-3.6.3.min.js"
  integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ=="
  crossorigin="anonymous"></script>
<script defer
  src="/js/lunr.min.js"
  integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli"
  crossorigin="anonymous"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LG1V9WTKGE"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-LG1V9WTKGE');
}
</script>
  </head>
  <body class="td-section">
    <header>
      <nav class="td-navbar navbar-dark js-navbar-scroll">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xl="http://www.w3.org/1999/xlink" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 24 24" width="24" height="24"><defs/><g id="32" fill="none" stroke-dasharray="none" fill-opacity="1" stroke-opacity="1" stroke="none"><title>32</title><g id="32_图层_2"><title>图层 2</title><g id="Group_17"><g id="Graphic_16"/><g id="Graphic_15"><path d="M7.666187 11.971335l2.165064-3.75H14.16138l2.165065 3.75-2.165065 3.75H9.831251z" fill="#bbb" fill-opacity=".9526367"/><path d="M7.666187 11.971335l2.165064-3.75H14.16138l2.165065 3.75-2.165065 3.75H9.831251z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_14"><path d="M7.666187 19.474806l2.165064-3.75H14.16138l2.165065 3.75-2.165065 3.75H9.831251z" fill="#de372c" fill-opacity=".8545852"/><path d="M7.666187 19.474806l2.165064-3.75H14.16138l2.165065 3.75-2.165065 3.75H9.831251z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_13"><path d="M14.161476 15.751202l2.165064-3.75h4.33013l2.165064 3.75-2.165064 3.75H16.32654z" fill="#424242" fill-opacity=".9016462"/><path d="M14.161476 15.751202l2.165064-3.75h4.33013l2.165064 3.75-2.165064 3.75H16.32654z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_12"><path d="M14.161476 8.226008 16.32654 4.4760076h4.33013L22.821734 8.226008l-2.165064 3.75H16.32654z" fill="#ffa269" fill-opacity=".8975772"/><path d="M14.161476 8.226008 16.32654 4.4760076h4.33013L22.821734 8.226008l-2.165064 3.75H16.32654z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_11"><path d="M7.666187 4.5 9.831251.75H14.16138L16.326445 4.5 14.16138 8.25H9.831251z" fill="#419edb" fill-opacity=".8979957"/><path d="M7.666187 4.5 9.831251.75H14.16138L16.326445 4.5 14.16138 8.25H9.831251z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_10"><path d="M1.1491742 8.226008 3.3142388 4.4760076H7.644368L9.809432 8.226008l-2.165064 3.75H3.3142388z" fill="#2f6793" fill-opacity=".9002511"/><path d="M1.1491742 8.226008 3.3142388 4.4760076H7.644368L9.809432 8.226008l-2.165064 3.75H3.3142388z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_9"><path d="M1.182071 15.741036l2.1650645-3.75h4.330129l2.1650645 3.75-2.1650645 3.75H3.3471355z" fill="#53ac79" fill-opacity=".9"/><path d="M1.182071 15.741036l2.1650645-3.75h4.330129l2.1650645 3.75-2.1650645 3.75H3.3471355z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g></g></g></g></svg></span><span class="navbar-brand__name">Pigsty</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link active" href="/docs/"><i class='fa-solid fa-book'></i><span>Docs</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/blog/"><i class="fas fa-blog"></i><span>Blog</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="https://github.com/Vonng/pigsty/" target="_blank" rel="noopener"><i class='fab fa-github'></i><span>GitHub</span></a>
      </li>
      <li class="nav-item dropdown d-none d-lg-block">
        <div class="dropdown">
  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <i class="fa-solid fa-language"></i>English</a>
  <ul class="dropdown-menu">
    <li><a class="dropdown-item" href="/zh/docs/redis/">中文</a></li>
    </ul>
</div>
</li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/offline-search-index.dc22ffb9b868686ed6973aefbe6630db.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This is the multi-page printable view of this section.
<a href="#" onclick="print();return false;">Click here to print</a>.
</p><p>
<a href="/docs/redis/">Return to the regular view of this page</a>.
</p>
</div>



<h1 class="title">Module: REDIS</h1>
<div class="lead">Pigsty has built-in Redis support, which is a high-performance data-structure server. Deploy redis in standalone, cluster or sentinel mode.</div>




    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-d30f775631874dbea209c56a3cf88d88">Redis Administration</a></li>


    
  
    
    
	
<li>2: <a href="#pg-81482490a3974d936d1dca668f5c2d09">Redis Monitoring</a></li>


    
  
    
    
	
<li>3: <a href="#pg-107d691b6855a16e3959ebbb20893769">Redis Parameters</a></li>


    
  
    
    
	
<li>4: <a href="#pg-a4ac99db4d7e939afec8be333eb8e254">Redis Playbooks</a></li>


    
  
    
    
	
<li>5: <a href="#pg-fc15b08dead0af0ef0581be1e78f1089">集群配置</a></li>


    
  
    
    
	
<li>6: <a href="#pg-5bcac294a078899a139a79dc1fb2b009">Metrics</a></li>


    
  
    
    
	
<li>7: <a href="#pg-b2e89e0d2e5fa7361edacff6f86e00ea">FAQ</a></li>


    
  

    </ul>


<div class="content">
      
</div>
</div>


  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-d30f775631874dbea209c56a3cf88d88">1 - Redis Administration</h1>
    <div class="lead">How to administrate Redis instances in Pigsty</div>
	<p>Here are some common administration tasks for Redis. Check <a href="/docs/redis/faq/">FAQ: Redis</a> for more details.</p>
<hr>
<h2 id="init-redis">Init Redis</h2>
<p><strong>Init Cluster/Node/Instance</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># init all redis instances on group &lt;cluster&gt;</span>
</span></span><span style="display:flex;"><span>./redis.yml -l &lt;cluster&gt;      <span style="color:#8f5902;font-style:italic"># init redis cluster</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># init redis node  </span>
</span></span><span style="display:flex;"><span>./redis.yml -l 10.10.10.10    <span style="color:#8f5902;font-style:italic"># init redis node</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># init one specific redis instance 10.10.10.11:6379</span>
</span></span><span style="display:flex;"><span>./redis.yml -l 10.10.10.11 -e <span style="color:#000">redis_port</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">6379</span> -t redis
</span></span></code></pre></div><p>You can also use wrapper script:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>bin/redis-add redis-ms          <span style="color:#8f5902;font-style:italic"># create redis cluster &#39;redis-ms&#39;</span>
</span></span><span style="display:flex;"><span>bin/redis-add 10.10.10.10       <span style="color:#8f5902;font-style:italic"># create redis node &#39;10.10.10.10&#39;</span>
</span></span><span style="display:flex;"><span>bin/redis-add 10.10.10.10 <span style="color:#0000cf;font-weight:bold">6379</span>  <span style="color:#8f5902;font-style:italic"># create redis instance &#39;10.10.10.10:6379&#39;</span>
</span></span></code></pre></div><hr>
<h2 id="remove-redis">Remove Redis</h2>
<p><strong>Remove Cluster/Node/Instance</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># Remove cluster `redis-test`</span>
</span></span><span style="display:flex;"><span>redis-rm.yml -l redis-test
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># Remove cluster `redis-test`, and uninstall packages</span>
</span></span><span style="display:flex;"><span>redis-rm.yml -l redis-test -e <span style="color:#000">redis_uninstall</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87">true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># Remove all instance on redis node 10.10.10.13</span>
</span></span><span style="display:flex;"><span>redis-rm.yml -l 10.10.10.13
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># Remove one specific instance 10.10.10.13:6379</span>
</span></span><span style="display:flex;"><span>redis-rm.yml -l 10.10.10.13 -e <span style="color:#000">redis_port</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">6379</span>
</span></span></code></pre></div><p>You can also use wrapper script:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>bin/redis-rm redis-ms          <span style="color:#8f5902;font-style:italic"># remove redis cluster &#39;redis-ms&#39;</span>
</span></span><span style="display:flex;"><span>bin/redis-rm 10.10.10.10       <span style="color:#8f5902;font-style:italic"># remove redis node &#39;10.10.10.10&#39;</span>
</span></span><span style="display:flex;"><span>bin/redis-rm 10.10.10.10 <span style="color:#0000cf;font-weight:bold">6379</span>  <span style="color:#8f5902;font-style:italic"># remove redis instance &#39;10.10.10.10:6379&#39;</span>
</span></span></code></pre></div><hr>
<h2 id="reconfigure-redis">Reconfigure Redis</h2>
<p>You can partially run <a href="/docs/redis/playbook/#redisyml"><code>redis.yml</code></a> tasks to re-configure redis.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>./redis.yml -l &lt;cluster&gt; -t redis_config,redis_launch
</span></span></code></pre></div><p>Beware that redis can not be reload online, you have to restart redis to make config effective.</p>
<hr>
<h2 id="use-redis-client-tools">Use Redis Client Tools</h2>
<p>Access redis instance with <code>redis-cli</code>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ redis-cli -h 10.10.10.10 -p <span style="color:#0000cf;font-weight:bold">6379</span> <span style="color:#8f5902;font-style:italic"># &lt;--- connect with host and port</span>
</span></span><span style="display:flex;"><span>10.10.10.10:6379&gt; auth redis.ms    <span style="color:#8f5902;font-style:italic"># &lt;--- auth with password</span>
</span></span><span style="display:flex;"><span>OK
</span></span><span style="display:flex;"><span>10.10.10.10:6379&gt; <span style="color:#204a87">set</span> a <span style="color:#0000cf;font-weight:bold">10</span>         <span style="color:#8f5902;font-style:italic"># &lt;--- set a key</span>
</span></span><span style="display:flex;"><span>OK
</span></span><span style="display:flex;"><span>10.10.10.10:6379&gt; get a            <span style="color:#8f5902;font-style:italic"># &lt;--- get a key back</span>
</span></span><span style="display:flex;"><span><span style="color:#4e9a06">&#34;10&#34;</span>
</span></span></code></pre></div><p>Redis also has a <code>redis-benchmark</code> which can be used for benchmark and generate load on redis server:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>redis-benchmark -h 10.10.10.13 -p <span style="color:#0000cf;font-weight:bold">6379</span>
</span></span></code></pre></div><hr>
<h2 id="configure-redis-replica">Configure Redis Replica</h2>
<p><a href="https://redis.io/commands/replicaof/">https://redis.io/commands/replicaof/</a></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># promote a redis instance to primary</span>
</span></span><span style="display:flex;"><span>&gt; REPLICAOF NO ONE
</span></span><span style="display:flex;"><span><span style="color:#4e9a06">&#34;OK&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># make a redis instance replica of another instance</span>
</span></span><span style="display:flex;"><span>&gt; REPLICAOF 127.0.0.1 <span style="color:#0000cf;font-weight:bold">6799</span>
</span></span><span style="display:flex;"><span><span style="color:#4e9a06">&#34;OK&#34;</span>
</span></span></code></pre></div><hr>
<h2 id="configure-ha-with-sentinel">Configure HA with Sentinel</h2>
<p>You have to enable HA for redis standalone m-s cluster manually with your redis sentinel.</p>
<p>Take the 4-node sandbox as an example, a redis sentinel cluster <code>redis-meta</code> is used manage the <code>redis-ms</code> standalone cluster.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># for each sentinel, add redis master to the sentinel with:</span>
</span></span><span style="display:flex;"><span>$ redis-cli -h 10.10.10.11 -p <span style="color:#0000cf;font-weight:bold">26379</span> -a redis.meta
</span></span><span style="display:flex;"><span>10.10.10.11:26379&gt; SENTINEL MONITOR redis-ms 10.10.10.10 <span style="color:#0000cf;font-weight:bold">6379</span> <span style="color:#0000cf;font-weight:bold">1</span>
</span></span><span style="display:flex;"><span>10.10.10.11:26379&gt; SENTINEL SET redis-ms auth-pass redis.ms      <span style="color:#8f5902;font-style:italic"># if auth enabled, password has to be configured</span>
</span></span></code></pre></div><p>If you wish to remove a redis master from sentinel, use <code>SENTINEL REMOVE &lt;name&gt;</code>.</p>
<p>You can configure multiple redis master on sentinel cluster with <a href="/docs/redis/param/#redis_sentinel_monitor"><code>redis_sentinel_monitor</code></a>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">redis_sentinel_monitor</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># primary list for redis sentinel, use cls as name, primary ip:port</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">name: redis-src, host: 10.10.10.45, port: 6379 ,password: redis.src, quorum</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">name: redis-dst, host: 10.10.10.48, port: 6379 ,password: redis.dst, quorum</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>And refresh master list on sentinel cluster with:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>./redis.yml -l redis-meta -t redis-ha   <span style="color:#8f5902;font-style:italic"># replace redis-meta if your sentinel cluster has different name</span>
</span></span></code></pre></div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-81482490a3974d936d1dca668f5c2d09">2 - Redis Monitoring</h1>
    <div class="lead">How to monitor Redis instances in Pigsty</div>
	<h2 id="dashboard">Dashboard</h2>
<p>There are three dashboards for <a href="/docs/redis/"><code>REDIS</code></a> module.</p>
<h3 id="redis-overview">Redis Overview</h3>
<p><a href="https://demo.pigsty.cc/d/redis-overview">Redis Overview</a>: Overview of all Redis Instances</p>
<details><summary>Redis Overview Dashboard</summary>
<p><a href="https://demo.pigsty.cc/d/redis-overview"><img alt="redis-overview.jpg" src="/img/dashboard/redis-overview.jpg"></a></p>
</details>
<h3 id="redis-cluster">Redis Cluster</h3>
<p><a href="https://demo.pigsty.cc/d/redis-cluster">Redis Cluster</a> : Overview of one single redis cluster</p>
<details><summary>Redis Cluster Dashboard</summary>
<p><a href="https://demo.pigsty.cc/d/redis-cluster"><img alt="redis-cluster.jpg" src="/img/dashboard/redis-cluster.jpg"></a></p>
</details>
<h3 id="redis-instance">Redis Instance</h3>
<p><a href="https://demo.pigsty.cc/d/redis-instance">Redis Instance</a> : Overview of one single redis instance</p>
<details><summary>Redis Instance Dashboard</summary>
<p><a href="https://demo.pigsty.cc/d/redis-instance"><img alt="redis-instance" src="/img/dashboard/redis-instance.jpg"></a></p>
</details>
<hr>
<h2 id="alert-rules">Alert Rules</h2>
<p>There are 6 predefined alert rules for Redis, defined in <a href="https://github.com/Vonng/pigsty/blob/main/files/prometheus/rules/redis.yml"><code>files/prometheus/rules/redis.yml</code></a>.</p>
<ul>
<li><code>RedisDown</code>：redis server is down</li>
<li><code>RedisRejectConn</code>：redis instance reject connection</li>
<li><code>RedisRTHigh</code>：redis instance response time is too high</li>
<li><code>RedisCPUHigh</code>：redis instance CPU usage is too high</li>
<li><code>RedisMemHigh</code>：redis instance memory usage is too high</li>
<li><code>RedisQPSHigh</code>：redis instance QPS is too high</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#==============================================================#</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic">#                         Error                                #</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic">#==============================================================#</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># redis down triggers a P0 alert</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span>- <span style="color:#204a87;font-weight:bold">alert</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">RedisDown</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">expr</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">redis_up &lt; 1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">for</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">1m</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">labels</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">level: 0, severity: CRIT, category</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">redis }</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">annotations</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">summary</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;CRIT RedisDown: {{ $labels.ins }} {{ $labels.instance }} {{ $value }}&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">description</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#8f5902;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">      redis_up[ins={{ $labels.ins }}, instance={{ $labels.instance }}] = {{ $value }} == 0
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">      http://g.pigsty/d/redis-instance?from=now-5m&amp;to=now&amp;var-ins={{$labels.ins}}</span><span style="color:#f8f8f8;text-decoration:underline">      
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># redis reject connection in last 5m</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span>- <span style="color:#204a87;font-weight:bold">alert</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">RedisRejectConn</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">expr</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">redis:ins:conn_reject &gt; 0</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">labels</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">level: 0, severity: CRIT, category</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">redis }</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">annotations</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">summary</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;CRIT RedisRejectConn: {{ $labels.ins }} {{ $labels.instance }} {{ $value }}&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">description</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#8f5902;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">      redis:ins:conn_reject[cls={{ $labels.cls }}, ins={{ $labels.ins }}][5m] = {{ $value }} &gt; 0
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">      http://g.pigsty/d/redis-instance?from=now-10m&amp;to=now&amp;viewPanel=88&amp;fullscreen&amp;var-ins={{ $labels.ins }}</span><span style="color:#f8f8f8;text-decoration:underline">      
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic">#==============================================================#</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic">#                         Latency                              #</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic">#==============================================================#</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># redis avg query response time &gt; 160 µs</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span>- <span style="color:#204a87;font-weight:bold">alert</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">RedisRTHigh</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">expr</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">redis:ins:rt &gt; 0.00016</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">for</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">1m</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">labels</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">level: 1, severity: WARN, category</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">redis }</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">annotations</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">summary</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;WARN RedisRTHigh: {{ $labels.cls }} {{ $labels.ins }}&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">description</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#8f5902;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">      pg:ins:query_rt[cls={{ $labels.cls }}, ins={{ $labels.ins }}] = {{ $value }} &gt; 160µs
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">      http://g.pigsty/d/redis-instance?from=now-10m&amp;to=now&amp;viewPanel=97&amp;fullscreen&amp;var-ins={{ $labels.ins }}</span><span style="color:#f8f8f8;text-decoration:underline">      
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic">#==============================================================#</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic">#                        Saturation                            #</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic">#==============================================================#</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># redis cpu usage more than 70% for 1m</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span>- <span style="color:#204a87;font-weight:bold">alert</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">RedisCPUHigh</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">expr</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">redis:ins:cpu_usage &gt; 0.70</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">for</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">1m</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">labels</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">level: 1, severity: WARN, category</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">redis }</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">annotations</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">summary</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;WARN RedisCPUHigh: {{ $labels.cls }} {{ $labels.ins }}&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">description</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#8f5902;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">      redis:ins:cpu_all[cls={{ $labels.cls }}, ins={{ $labels.ins }}] = {{ $value }} &gt; 60%
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">      http://g.pigsty/d/redis-instance?from=now-10m&amp;to=now&amp;viewPanel=43&amp;fullscreen&amp;var-ins={{ $labels.ins }}</span><span style="color:#f8f8f8;text-decoration:underline">      
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># redis mem usage more than 70% for 1m</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span>- <span style="color:#204a87;font-weight:bold">alert</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">RedisMemHigh</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">expr</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">redis:ins:mem_usage &gt; 0.70</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">for</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">1m</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">labels</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">level: 1, severity: WARN, category</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">redis }</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">annotations</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">summary</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;WARN RedisMemHigh: {{ $labels.cls }} {{ $labels.ins }}&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">description</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#8f5902;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">      redis:ins:mem_usage[cls={{ $labels.cls }}, ins={{ $labels.ins }}] = {{ $value }} &gt; 80%
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">      http://g.pigsty/d/redis-instance?from=now-10m&amp;to=now&amp;viewPanel=7&amp;fullscreen&amp;var-ins={{ $labels.ins }}</span><span style="color:#f8f8f8;text-decoration:underline">      
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic">#==============================================================#</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic">#                         Traffic                              #</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic">#==============================================================#</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># redis qps more than 32000 for 5m</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span>- <span style="color:#204a87;font-weight:bold">alert</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">RedisQPSHigh</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">expr</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">redis:ins:qps &gt; 32000</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">for</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">5m</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">labels</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">level: 2, severity: INFO, category</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">redis }</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">annotations</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">summary</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;INFO RedisQPSHigh: {{ $labels.cls }} {{ $labels.ins }}&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">description</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#8f5902;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">      redis:ins:qps[cls={{ $labels.cls }}, ins={{ $labels.ins }}] = {{ $value }} &gt; 16000
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">      http://g.pigsty/d/redis-instance?from=now-10m&amp;to=now&amp;viewPanel=96&amp;fullscreen&amp;var-ins={{ $labels.ins }}</span><span style="color:#f8f8f8;text-decoration:underline">      
</span></span></span></code></pre></div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-107d691b6855a16e3959ebbb20893769">3 - Redis Parameters</h1>
    <div class="lead">Redis module parameters reference</div>
	<h2 id="parameter">Parameter</h2>
<p>There 21 parameters in the redis module.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th style="text-align:center">Type</th>
<th style="text-align:center">Level</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="/docs/redis/param/#redis_cluster"><code>redis_cluster</code></a></td>
<td style="text-align:center">string</td>
<td style="text-align:center">C</td>
<td>redis cluster name, required identity parameter</td>
</tr>
<tr>
<td><a href="/docs/redis/param/#redis_instances"><code>redis_instances</code></a></td>
<td style="text-align:center">dict</td>
<td style="text-align:center">I</td>
<td>redis instances definition on this redis node</td>
</tr>
<tr>
<td><a href="/docs/redis/param/#redis_node"><code>redis_node</code></a></td>
<td style="text-align:center">int</td>
<td style="text-align:center">I</td>
<td>redis node sequence number, node int id required</td>
</tr>
<tr>
<td><a href="/docs/redis/param/#redis_fs_main"><code>redis_fs_main</code></a></td>
<td style="text-align:center">path</td>
<td style="text-align:center">C</td>
<td>redis main data mountpoint, <code>/data</code> by default</td>
</tr>
<tr>
<td><a href="/docs/redis/param/#redis_exporter_enabled"><code>redis_exporter_enabled</code></a></td>
<td style="text-align:center">bool</td>
<td style="text-align:center">C</td>
<td>install redis exporter on redis nodes?</td>
</tr>
<tr>
<td><a href="/docs/redis/param/#redis_exporter_port"><code>redis_exporter_port</code></a></td>
<td style="text-align:center">port</td>
<td style="text-align:center">C</td>
<td>redis exporter listen port, 9121 by default</td>
</tr>
<tr>
<td><a href="/docs/redis/param/#redis_exporter_options"><code>redis_exporter_options</code></a></td>
<td style="text-align:center">string</td>
<td style="text-align:center">C/I</td>
<td>cli args and extra options for redis exporter</td>
</tr>
<tr>
<td><a href="/docs/redis/param/#redis_safeguard"><code>redis_safeguard</code></a></td>
<td style="text-align:center">bool</td>
<td style="text-align:center">G/C/A</td>
<td>prevent purging running redis instance?</td>
</tr>
<tr>
<td><a href="/docs/redis/param/#redis_clean"><code>redis_clean</code></a></td>
<td style="text-align:center">bool</td>
<td style="text-align:center">G/C/A</td>
<td>purging existing redis during init?</td>
</tr>
<tr>
<td><a href="/docs/redis/param/#redis_rmdata"><code>redis_rmdata</code></a></td>
<td style="text-align:center">bool</td>
<td style="text-align:center">G/C/A</td>
<td>remove redis data when purging redis server?</td>
</tr>
<tr>
<td><a href="/docs/redis/param/#redis_mode"><code>redis_mode</code></a></td>
<td style="text-align:center">enum</td>
<td style="text-align:center">C</td>
<td>redis mode: standalone,cluster,sentinel</td>
</tr>
<tr>
<td><a href="/docs/redis/param/#redis_conf"><code>redis_conf</code></a></td>
<td style="text-align:center">string</td>
<td style="text-align:center">C</td>
<td>redis config template path, except sentinel</td>
</tr>
<tr>
<td><a href="/docs/redis/param/#redis_bind_address"><code>redis_bind_address</code></a></td>
<td style="text-align:center">ip</td>
<td style="text-align:center">C</td>
<td>redis bind address, empty string will use host ip</td>
</tr>
<tr>
<td><a href="/docs/redis/param/#redis_max_memory"><code>redis_max_memory</code></a></td>
<td style="text-align:center">size</td>
<td style="text-align:center">C/I</td>
<td>max memory used by each redis instance</td>
</tr>
<tr>
<td><a href="/docs/redis/param/#redis_mem_policy"><code>redis_mem_policy</code></a></td>
<td style="text-align:center">enum</td>
<td style="text-align:center">C</td>
<td>redis memory eviction policy</td>
</tr>
<tr>
<td><a href="/docs/redis/param/#redis_password"><code>redis_password</code></a></td>
<td style="text-align:center">password</td>
<td style="text-align:center">C</td>
<td>redis password, empty string will disable password</td>
</tr>
<tr>
<td><a href="/docs/redis/param/#redis_rdb_save"><code>redis_rdb_save</code></a></td>
<td style="text-align:center">string[]</td>
<td style="text-align:center">C</td>
<td>redis rdb save directives, disable with empty list</td>
</tr>
<tr>
<td><a href="/docs/redis/param/#redis_aof_enabled"><code>redis_aof_enabled</code></a></td>
<td style="text-align:center">bool</td>
<td style="text-align:center">C</td>
<td>enable redis append only file?</td>
</tr>
<tr>
<td><a href="/docs/redis/param/#redis_rename_commands"><code>redis_rename_commands</code></a></td>
<td style="text-align:center">dict</td>
<td style="text-align:center">C</td>
<td>rename redis dangerous commands</td>
</tr>
<tr>
<td><a href="/docs/redis/param/#redis_cluster_replicas"><code>redis_cluster_replicas</code></a></td>
<td style="text-align:center">int</td>
<td style="text-align:center">C</td>
<td>replica number for one master in redis cluster</td>
</tr>
<tr>
<td><a href="/docs/redis/param/#redis_sentinel_monitor"><code>redis_sentinel_monitor</code></a></td>
<td style="text-align:center">master[]</td>
<td style="text-align:center">C</td>
<td>sentinel master list, sentinel cluster only</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#redis_cluster:        &lt;CLUSTER&gt; # redis cluster name, required identity parameter</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic">#redis_node: 1            &lt;NODE&gt; # redis node sequence number, node int id required</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic">#redis_instances: {}      &lt;NODE&gt; # redis instances definition on this redis node</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_fs_main</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/data             </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># redis main data mountpoint, `/data` by default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_exporter_enabled</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#8f5902;font-style:italic"># install redis exporter on redis nodes?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_exporter_port</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">9121</span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#8f5902;font-style:italic"># redis exporter listen port, 9121 by default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_exporter_options</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;&#39;</span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic"># cli args and extra options for redis exporter</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_safeguard</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#8f5902;font-style:italic"># prevent purging running redis instance?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_clean</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                 </span><span style="color:#8f5902;font-style:italic"># purging existing redis during init?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_rmdata</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#8f5902;font-style:italic"># remove redis data when purging redis server?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_mode: standalone            # redis mode</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">standalone,cluster,sentinel</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_conf</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">redis.conf           </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># redis config template path, except sentinel</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_bind_address</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;0.0.0.0&#39;</span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#8f5902;font-style:italic"># redis bind address, empty string will use host ip</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_max_memory</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">1GB            </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># max memory used by each redis instance</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_mem_policy</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">allkeys-lru    </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># redis memory eviction policy</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_password</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;&#39;</span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#8f5902;font-style:italic"># redis password, empty string will disable password</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_rdb_save</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;1200 1&#39;</span><span style="color:#000;font-weight:bold">]</span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic"># redis rdb save directives, disable with empty list</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_aof_enabled</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#8f5902;font-style:italic"># enable redis append only file?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_rename_commands</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#8f5902;font-style:italic"># rename redis dangerous commands</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_cluster_replicas</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#8f5902;font-style:italic"># replica number for one master in redis cluster</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_sentinel_monitor</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[]</span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic"># sentinel master list, works on sentinel cluster only</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><hr>
<h1 id="redis"><code>REDIS</code></h1>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#redis_cluster:        &lt;CLUSTER&gt; # redis cluster name, required identity parameter</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic">#redis_node: 1            &lt;NODE&gt; # redis node sequence number, node int id required</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic">#redis_instances: {}      &lt;NODE&gt; # redis instances definition on this redis node</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_fs_main</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/data             </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># redis main data mountpoint, `/data` by default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_exporter_enabled</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#8f5902;font-style:italic"># install redis exporter on redis nodes?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_exporter_port</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">9121</span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#8f5902;font-style:italic"># redis exporter listen port, 9121 by default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_exporter_options</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;&#39;</span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic"># cli args and extra options for redis exporter</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_safeguard</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#8f5902;font-style:italic"># prevent purging running redis instance?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_clean</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                 </span><span style="color:#8f5902;font-style:italic"># purging existing redis during init?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_rmdata</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#8f5902;font-style:italic"># remove redis data when purging redis server?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_mode: standalone            # redis mode</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">standalone,cluster,sentinel</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_conf</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">redis.conf           </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># redis config template path, except sentinel</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_bind_address</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;0.0.0.0&#39;</span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#8f5902;font-style:italic"># redis bind address, empty string will use host ip</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_max_memory</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">1GB            </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># max memory used by each redis instance</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_mem_policy</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">allkeys-lru    </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># redis memory eviction policy</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_password</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;&#39;</span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#8f5902;font-style:italic"># redis password, empty string will disable password</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_rdb_save</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;1200 1&#39;</span><span style="color:#000;font-weight:bold">]</span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic"># redis rdb save directives, disable with empty list</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_aof_enabled</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#8f5902;font-style:italic"># enable redis append only file?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_rename_commands</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#8f5902;font-style:italic"># rename redis dangerous commands</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_cluster_replicas</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#8f5902;font-style:italic"># replica number for one master in redis cluster</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis_sentinel_monitor</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[]</span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic"># sentinel master list, works on sentinel cluster only</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><hr>
<h2 id="redis_cluster"><code>redis_cluster</code></h2>
<p>name: <code>redis_cluster</code>, type: <code>string</code>, level: <code>C</code></p>
<p>redis cluster name, required identity parameter.</p>
<p>no default value, you have to define it explicitly.</p>
<p>Comply with regexp <code>[a-z][a-z0-9-]*</code>, it is recommended to use the same name as the group name and start with <code>redis-</code></p>
<hr>
<h2 id="redis_node"><code>redis_node</code></h2>
<p>name: <code>redis_node</code>, type: <code>int</code>, level: <code>I</code></p>
<p>redis node sequence number,  unique integer among redis cluster is required</p>
<p>You have to explicitly define the node id for each redis node. integer start from 0 or 1.</p>
<hr>
<h2 id="redis_instances"><code>redis_instances</code></h2>
<p>name: <code>redis_instances</code>, type: <code>dict</code>, level: <code>I</code></p>
<p>redis instances definition on this redis node</p>
<p>no default value, you have to define redis instances on each redis node using this parameter explicitly.</p>
<p>Here is an example for a native redis cluster definition</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">redis-test: # redis native cluster</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">3m x 3s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">hosts</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">10.10.10.12</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">redis_node: 1 ,redis_instances</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">6379</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">} ,6380</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">} ,6381</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">10.10.10.13</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">redis_node: 2 ,redis_instances</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">6379</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">} ,6380</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">} ,6381</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">vars</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">redis_cluster: redis-test ,redis_password: &#39;redis.test&#39; ,redis_mode: cluster, redis_max_memory</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">32MB }</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>The port number should be unique among the <strong>node</strong>, and the <code>replica_of</code> in <code>value</code> should be instance member of the same redis <strong>cluster</strong>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">redis_instances</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">6379</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">6380</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">replica_of</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;10.10.10.13 6379&#39;</span><span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">6381</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">replica_of</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;10.10.10.13 6379&#39;</span><span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><hr>
<h2 id="redis_fs_main"><code>redis_fs_main</code></h2>
<p>name: <code>redis_fs_main</code>, type: <code>path</code>, level: <code>C</code></p>
<p>redis main data mountpoint, <code>/data</code> by default</p>
<p>default values: <code>/data</code>, and <code>/data/redis</code> will be used as the redis data directory.</p>
<hr>
<h2 id="redis_exporter_enabled"><code>redis_exporter_enabled</code></h2>
<p>name: <code>redis_exporter_enabled</code>, type: <code>bool</code>, level: <code>C</code></p>
<p>install redis exporter on redis nodes?</p>
<p>default value is <code>true</code>, which will launch a redis_exporter on this redis_node</p>
<hr>
<h2 id="redis_exporter_port"><code>redis_exporter_port</code></h2>
<p>name: <code>redis_exporter_port</code>, type: <code>port</code>, level: <code>C</code></p>
<p>redis exporter listen port, 9121 by default</p>
<p>default values: <code>9121</code></p>
<hr>
<h2 id="redis_exporter_options"><code>redis_exporter_options</code></h2>
<p>name: <code>redis_exporter_options</code>, type: <code>string</code>, level: <code>C/I</code></p>
<p>cli args and extra options for redis exporter, will be added to <code>/etc/defaut/redis_exporter</code>.</p>
<p>default value is empty string</p>
<hr>
<h2 id="redis_safeguard"><code>redis_safeguard</code></h2>
<p>name: <code>redis_safeguard</code>, type: <code>bool</code>, level: <code>G/C/A</code></p>
<p>prevent purging running redis instance?</p>
<p>default value is <code>false</code>, if set to <code>true</code>, and redis instance is running, init / remove playbook will abort immediately.</p>
<hr>
<h2 id="redis_clean"><code>redis_clean</code></h2>
<p>name: <code>redis_clean</code>, type: <code>bool</code>, level: <code>G/C/A</code></p>
<p>purging existing redis during init?</p>
<p>default value is <code>true</code>, which will remove redis server during redis init or remove.</p>
<hr>
<h2 id="redis_rmdata"><code>redis_rmdata</code></h2>
<p>name: <code>redis_rmdata</code>, type: <code>bool</code>, level: <code>G/C/A</code></p>
<p>remove redis data when purging redis server?</p>
<p>default value is <code>true</code>, which will remove redis rdb / aof along with redis instance.</p>
<hr>
<h2 id="redis_mode"><code>redis_mode</code></h2>
<p>name: <code>redis_mode</code>, type: <code>enum</code>, level: <code>C</code></p>
<p>redis mode: standalone,cluster,sentinel</p>
<p>default values: <code>standalone</code></p>
<ul>
<li><code>standalone</code>: setup redis as standalone (master-slave) mode</li>
<li><code>cluster</code>: setup this redis cluster as a redis native cluster</li>
<li><code>sentinel</code>: setup redis as sentinel for standalone redis HA</li>
</ul>
<hr>
<h2 id="redis_conf"><code>redis_conf</code></h2>
<p>name: <code>redis_conf</code>, type: <code>string</code>, level: <code>C</code></p>
<p>redis config template path, except sentinel</p>
<p>default values: <code>redis.conf</code>, which is a template file in <a href="https://github.com/Vonng/pigsty/blob/main/roles/redis/templates/redis.conf"><code>roles/redis/templates/redis.conf</code></a>.</p>
<p>If you want to use your own redis config template, you can put it in <code>templates/</code> directory and set this parameter to the template file name.</p>
<p>Note that redis sentinel are using a different template file, which is <a href="https://github.com/Vonng/pigsty/blob/main/roles/redis/templates/redis-sentinel.conf"><code>roles/redis/templates/redis-sentinel.conf</code></a></p>
<hr>
<h2 id="redis_bind_address"><code>redis_bind_address</code></h2>
<p>name: <code>redis_bind_address</code>, type: <code>ip</code>, level: <code>C</code></p>
<p>redis bind address, empty string will use inventory hostname</p>
<p>default values: <code>0.0.0.0</code>, which will bind to all available IPv4 address on this host</p>
<blockquote>
<p>PLEASE bind to intranet IP only in production environment, i.e. set this value to <code>''</code></p>
</blockquote>
<hr>
<h2 id="redis_max_memory"><code>redis_max_memory</code></h2>
<p>name: <code>redis_max_memory</code>, type: <code>size</code>, level: <code>C/I</code></p>
<p>max memory used by each redis instance, default values: <code>1GB</code></p>
<hr>
<h2 id="redis_mem_policy"><code>redis_mem_policy</code></h2>
<p>name: <code>redis_mem_policy</code>, type: <code>enum</code>, level: <code>C</code></p>
<p>redis memory eviction policy</p>
<p>default values: <code>allkeys-lru</code>, check redis <a href="https://redis.io/docs/reference/eviction/">eviction policy</a> for more details</p>
<ul>
<li><code>noeviction</code>: New values aren’t saved when memory limit is reached. When a database uses replication, this applies to the primary database</li>
<li><code>allkeys-lru</code>: Keeps most recently used keys; removes least recently used (LRU) keys</li>
<li><code>allkeys-lfu</code>: Keeps frequently used keys; removes least frequently used (LFU) keys</li>
<li><code>volatile-lru</code>: Removes least recently used keys with the expire field set to true.</li>
<li><code>volatile-lfu</code>: Removes least frequently used keys with the expire field set to true.</li>
<li><code>allkeys-random</code>: Randomly removes keys to make space for the new data added.</li>
<li><code>volatile-random</code>: Randomly removes keys with expire field set to true.</li>
<li><code>volatile-ttl</code>: Removes keys with expire field set to true and the shortest remaining time-to-live (TTL) value.</li>
</ul>
<hr>
<h2 id="redis_password"><code>redis_password</code></h2>
<p>name: <code>redis_password</code>, type: <code>password</code>, level: <code>C/N</code></p>
<p>redis password, empty string will disable password, which is the default behavior</p>
<p>Note that due to the implementation limitation of redis_exporter, you can only set one <code>redis_password</code> per node.
This is usually not a problem, because pigsty does not allow deploying two different redis cluster on the same node.</p>
<blockquote>
<p>PLEASE use a strong password in production environment</p>
</blockquote>
<hr>
<h2 id="redis_rdb_save"><code>redis_rdb_save</code></h2>
<p>name: <code>redis_rdb_save</code>, type: <code>string[]</code>, level: <code>C</code></p>
<p>redis rdb save directives, disable with empty list, check redis <a href="https://redis.io/docs/management/persistence/">persist</a> for details.</p>
<p>the default value is  <code>[&quot;1200 1&quot;]</code>: dump the dataset to disk every 20 minutes if at least 1 key changed:</p>
<hr>
<h2 id="redis_aof_enabled"><code>redis_aof_enabled</code></h2>
<p>name: <code>redis_aof_enabled</code>, type: <code>bool</code>, level: <code>C</code></p>
<p>enable redis append only file? default value is <code>false</code>.</p>
<hr>
<h2 id="redis_rename_commands"><code>redis_rename_commands</code></h2>
<p>name: <code>redis_rename_commands</code>, type: <code>dict</code>, level: <code>C</code></p>
<p>rename redis dangerous commands, which is a dict of k:v <code>old: new</code></p>
<p>default values: <code>{}</code>, you can hide dangerous commands like <code>FLUSHDB</code> and <code>FLUSHALL</code> by setting this value, here&rsquo;s an example:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>{<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">&#34;keys&#34;: </span><span style="color:#4e9a06">&#34;op_keys&#34;</span><span style="color:#000;font-weight:bold">,</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">&#34;flushdb&#34;: </span><span style="color:#4e9a06">&#34;op_flushdb&#34;</span><span style="color:#000;font-weight:bold">,</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">&#34;flushall&#34;: </span><span style="color:#4e9a06">&#34;op_flushall&#34;</span><span style="color:#000;font-weight:bold">,</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">&#34;config&#34;: </span><span style="color:#4e9a06">&#34;op_config&#34;</span><span style="color:#f8f8f8;text-decoration:underline">  
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span>}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><hr>
<h2 id="redis_cluster_replicas"><code>redis_cluster_replicas</code></h2>
<p>name: <code>redis_cluster_replicas</code>, type: <code>int</code>, level: <code>C</code></p>
<p>replica number for one master/primary in redis cluster, default values: <code>1</code></p>
<hr>
<h2 id="redis_sentinel_monitor"><code>redis_sentinel_monitor</code></h2>
<p>name: <code>redis_sentinel_monitor</code>, type: <code>master[]</code>, level: <code>C</code></p>
<p>This can only be used when <a href="/docs/redis/param/#redis_mode"><code>redis_mode</code></a> is set to <code>sentinel</code>.</p>
<p>List of redis master to be monitored by this sentinel cluster. each master is defined as a dict with <code>name</code>, <code>host</code>, <code>port</code>, <code>password</code>, <code>quorum</code> keys.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">redis_sentinel_monitor</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># primary list for redis sentinel, use cls as name, primary ip:port</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">name: redis-src, host: 10.10.10.45, port: 6379 ,password: redis.src, quorum</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">name: redis-dst, host: 10.10.10.48, port: 6379 ,password: redis.dst, quorum</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>The <code>name</code> and <code>host</code> are mandatory, <code>port</code>, <code>password</code>, <code>quorum</code> are optional, <code>quorum</code> is used to set the quorum for this master, usually large than half of the sentinel instances.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-a4ac99db4d7e939afec8be333eb8e254">4 - Redis Playbooks</h1>
    <div class="lead">Redis module playbooks reference</div>
	<h2 id="playbook">Playbook</h2>
<p>There are two playbooks for redis:</p>
<ul>
<li><a href="https://github.com/Vonng/pigsty/blob/main/redis.yml"><code>redis.yml</code></a>: create redis cluster / node / instance</li>
<li><a href="https://github.com/Vonng/pigsty/blob/main/redis-rm.yml"><code>redis-rm.yml</code></a>: remove redis cluster /node /instance</li>
</ul>
<h3 id="redisyml"><code>redis.yml</code></h3>
<p>The playbook  <a href="https://github.com/Vonng/pigsty/blob/main/redis.yml"><code>redis.yml</code></a> will init redis cluster/node/instance:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>redis_node        : init redis node
</span></span><span style="display:flex;"><span>  - redis_install : install redis <span style="color:#000;font-weight:bold">&amp;</span> redis_exporter
</span></span><span style="display:flex;"><span>  - redis_user    : create os user redis
</span></span><span style="display:flex;"><span>  - redis_dir     <span style="color:#8f5902;font-style:italic"># redis redis fhs</span>
</span></span><span style="display:flex;"><span>redis_exporter    : config and launch redis_exporter
</span></span><span style="display:flex;"><span>  - redis_exporter_config  : generate redis_exporter config
</span></span><span style="display:flex;"><span>  - redis_exporter_launch  : launch redis_exporter
</span></span><span style="display:flex;"><span>redis_instance    : config and launch redis cluster/node/instance
</span></span><span style="display:flex;"><span>  - redis_check   : check redis instance existence
</span></span><span style="display:flex;"><span>  - redis_clean   : purge existing redis instance
</span></span><span style="display:flex;"><span>  - redis_config  : generate redis instance config
</span></span><span style="display:flex;"><span>  - redis_launch  : launch redis instance
</span></span><span style="display:flex;"><span>redis_register    : register redis to prometheus
</span></span><span style="display:flex;"><span>redis_ha          : setup redis sentinel
</span></span><span style="display:flex;"><span>redis_join        : join redis cluster
</span></span></code></pre></div><details><summary>Example: Init redis cluster</summary>
<p><a href="https://asciinema.org/a/568808"><img alt="asciicast" src="https://asciinema.org/a/568808.svg"></a></p>
</details>
<h3 id="redis-rmyml"><code>redis-rm.yml</code></h3>
<p>The playbook <a href="https://github.com/Vonng/pigsty/blob/main/redis.yml"><code>redis-rm.yml</code></a> will remove redis cluster/node/instance:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>- register       : remove monitor target from prometheus
</span></span><span style="display:flex;"><span>- redis_exporter : stop and disable redis_exporter  
</span></span><span style="display:flex;"><span>- redis          : stop and disable redis cluster/node/instance
</span></span><span style="display:flex;"><span>- redis_data     : remove redis data <span style="color:#ce5c00;font-weight:bold">(</span>rdb, aof<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>- redis_pkg      : uninstall redis <span style="color:#000;font-weight:bold">&amp;</span> redis_exporter packages
</span></span></code></pre></div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-fc15b08dead0af0ef0581be1e78f1089">5 - 集群配置</h1>
    <div class="lead">根据需求场景选择合适的 Redis 模式，并通过配置清单表达您的需求</div>
	<hr>
<h2 id="concept">Concept</h2>
<p>The entity model of Redis is almost the same as that of <a href="/docs/concept/model/#er-diagram">PostgreSQL</a>, which also includes the concepts of <strong>Cluster</strong> and <strong>Instance</strong>. The Cluster here does not refer to the native Redis Cluster mode.</p>
<p>The core difference between the REDIS module and the <a href="/docs/pgsql/">PGSQL</a> module is that Redis uses a <strong>single-node multi-instance</strong> deployment rather than the 1:1 deployment: multiple Redis instances are typically deployed on a physical/virtual machine node to utilize multi-core CPUs fully. Therefore, the ways to <a href="/docs/redis/config/#configuration">configure</a> and <a href="/docs/redis/config/#administration">administer</a> Redis instances are slightly different from PGSQL.</p>
<p>In Redis managed by Pigsty, nodes are entirely subordinate to the cluster, which means that currently, it is not allowed to deploy Redis instances of two different clusters on one node. However, this does not affect deploying multiple independent Redis primary replica instances on one node.</p>
<h2 id="configuration">Configuration</h2>
<hr>
<h2 id="redis-identity">Redis Identity</h2>
<p>Redis <a href="/docs/redis/param/#redis_id"><strong>identity parameters</strong></a> are required parameters when defining a Redis cluster.</p>
<table>
<thead>
<tr>
<th style="text-align:center">Name</th>
<th style="text-align:center">Attribute</th>
<th style="text-align:center">Description</th>
<th style="text-align:center">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><a href="/docs/redis/param/#redis_cluster"><code>redis_cluster</code></a></td>
<td style="text-align:center"><strong>REQUIRED</strong>, cluster level</td>
<td style="text-align:center">cluster name</td>
<td style="text-align:center"><code>redis-test</code></td>
</tr>
<tr>
<td style="text-align:center"><a href="/docs/redis/param/#redis_node"><code>redis_node</code></a></td>
<td style="text-align:center"><strong>REQUIRED</strong>, node level</td>
<td style="text-align:center">Node Sequence Number</td>
<td style="text-align:center"><code>1</code>,<code>2</code></td>
</tr>
<tr>
<td style="text-align:center"><a href="/docs/redis/param/#redis_instances"><code>redis_instances</code></a></td>
<td style="text-align:center"><strong>REQUIRED</strong>, node level</td>
<td style="text-align:center">Instance Definition</td>
<td style="text-align:center"><code>{ 6001 : {} ,6002 : {}}</code></td>
</tr>
</tbody>
</table>
<hr>
<h2 id="redis-mode">Redis Mode</h2>
<p>There are three <a href="/docs/redis/param/#redis_mode"><code>redis_mode</code></a> available in Pigsty:</p>
<ul>
<li><code>standalone</code>: setup Redis in standalone (master-slave) mode</li>
<li><code>cluster</code>: setup this Redis cluster as a Redis native cluster</li>
<li><code>sentinel</code>: setup Redis as a sentinel for standalone Redis HA</li>
</ul>
<p>Here are three examples:</p>
<ul>
<li>A 1-node, one master &amp; one slave Redis Standalone cluster: <code>redis-ms</code></li>
<li>A 1-node, 3-instance Redis Sentinel cluster: <code>redis-sentinel</code></li>
<li>A 2-node, 6-instance Redis Cluster: <code>redis-cluster</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">redis-ms</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># redis classic primary &amp; replica</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">hosts</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">10.10.10.10</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">redis_node: 1 , redis_instances</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">6379</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">}, 6380</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">replica_of</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;10.10.10.10 6379&#39;</span><span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">vars</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">redis_cluster: redis-ms ,redis_password: &#39;redis.ms&#39; ,redis_max_memory</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">64MB }</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis-meta</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># redis sentinel x 3</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">hosts</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">10.10.10.11</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">redis_node: 1 , redis_instances</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">26379</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">} ,26380</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">} ,26381</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">vars</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">redis_cluster</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">redis-meta</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">redis_password</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;redis.meta&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">redis_mode</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">sentinel</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">redis_max_memory</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">16MB</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">redis_sentinel_monitor</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># primary list for redis sentinel, use cls as name, primary ip:port</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">name: redis-ms, host: 10.10.10.10, port: 6379 ,password: redis.ms, quorum</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">2</span><span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">redis-test: # redis native cluster</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">3m x 3s</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">hosts</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">10.10.10.12</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">redis_node: 1 ,redis_instances</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">6379</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">} ,6380</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">} ,6381</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">10.10.10.13</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">redis_node: 2 ,redis_instances</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">6379</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">} ,6380</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">} ,6381</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">vars</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">redis_cluster: redis-test ,redis_password: &#39;redis.test&#39; ,redis_mode: cluster, redis_max_memory</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">32MB }</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><hr>
<h2 id="limitation">Limitation</h2>
<ul>
<li>A Redis node can only belong to one Redis cluster, which means you cannot assign a node to two different Redis clusters simultaneously.</li>
<li>On each Redis node, you need to assign a unique port number to the Redis instance to avoid port conflicts.</li>
<li>Typically, the same Redis cluster will use the same password, but multiple Redis instances on a Redis node cannot set different passwords (because redis_exporter only allows one password).</li>
<li>Redis Cluster has built-in HA, while standalone HA requires manually configured in Sentinel because we are unsure if you have any sentinels available. Fortunately, configuring standalone Redis HA is straightforward: <a href="/docs/redis/admin/#configure-ha-with-sentinel">Configure HA with sentinel</a>.</li>
</ul>
<br>
<hr>
<br>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-5bcac294a078899a139a79dc1fb2b009">6 - Metrics</h1>
    <div class="lead">Pigsty REDIS module metric list</div>
	<p><a href="/docs/redis/"><strong><code>REDIS</code></strong></a> module has 275 available metrics</p>
<table>
<thead>
<tr>
<th>Metric Name</th>
<th>Type</th>
<th>Labels</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ALERTS</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>level</code>, <code>severity</code>, <code>instance</code>, <code>category</code>, <code>ins</code>, <code>alertname</code>, <code>job</code>, <code>alertstate</code></td>
<td>N/A</td>
</tr>
<tr>
<td>ALERTS_FOR_STATE</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>level</code>, <code>severity</code>, <code>instance</code>, <code>category</code>, <code>ins</code>, <code>alertname</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:cls:aof_rewrite_time</td>
<td>Unknown</td>
<td><code>cls</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:cls:blocked_clients</td>
<td>Unknown</td>
<td><code>cls</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:cls:clients</td>
<td>Unknown</td>
<td><code>cls</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:cls:cmd_qps</td>
<td>Unknown</td>
<td><code>cls</code>, <code>cmd</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:cls:cmd_rt</td>
<td>Unknown</td>
<td><code>cls</code>, <code>cmd</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:cls:cmd_time</td>
<td>Unknown</td>
<td><code>cls</code>, <code>cmd</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:cls:conn_rate</td>
<td>Unknown</td>
<td><code>cls</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:cls:conn_reject</td>
<td>Unknown</td>
<td><code>cls</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:cls:cpu_sys</td>
<td>Unknown</td>
<td><code>cls</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:cls:cpu_sys_child</td>
<td>Unknown</td>
<td><code>cls</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:cls:cpu_usage</td>
<td>Unknown</td>
<td><code>cls</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:cls:cpu_usage_child</td>
<td>Unknown</td>
<td><code>cls</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:cls:cpu_user</td>
<td>Unknown</td>
<td><code>cls</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:cls:cpu_user_child</td>
<td>Unknown</td>
<td><code>cls</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:cls:fork_time</td>
<td>Unknown</td>
<td><code>cls</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:cls:key_evict</td>
<td>Unknown</td>
<td><code>cls</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:cls:key_expire</td>
<td>Unknown</td>
<td><code>cls</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:cls:key_hit</td>
<td>Unknown</td>
<td><code>cls</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:cls:key_hit_rate</td>
<td>Unknown</td>
<td><code>cls</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:cls:key_miss</td>
<td>Unknown</td>
<td><code>cls</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:cls:mem_max</td>
<td>Unknown</td>
<td><code>cls</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:cls:mem_usage</td>
<td>Unknown</td>
<td><code>cls</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:cls:mem_usage_max</td>
<td>Unknown</td>
<td><code>cls</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:cls:mem_used</td>
<td>Unknown</td>
<td><code>cls</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:cls:net_traffic</td>
<td>Unknown</td>
<td><code>cls</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:cls:qps</td>
<td>Unknown</td>
<td><code>cls</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:cls:qps_mu</td>
<td>Unknown</td>
<td><code>cls</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:cls:qps_realtime</td>
<td>Unknown</td>
<td><code>cls</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:cls:qps_sigma</td>
<td>Unknown</td>
<td><code>cls</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:cls:rt</td>
<td>Unknown</td>
<td><code>cls</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:cls:rt_mu</td>
<td>Unknown</td>
<td><code>cls</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:cls:rt_sigma</td>
<td>Unknown</td>
<td><code>cls</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:cls:rx</td>
<td>Unknown</td>
<td><code>cls</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:cls:size</td>
<td>Unknown</td>
<td><code>cls</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:cls:tx</td>
<td>Unknown</td>
<td><code>cls</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:env:blocked_clients</td>
<td>Unknown</td>
<td><code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:env:clients</td>
<td>Unknown</td>
<td><code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:env:cmd_qps</td>
<td>Unknown</td>
<td><code>cmd</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:env:cmd_rt</td>
<td>Unknown</td>
<td><code>cmd</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:env:cmd_time</td>
<td>Unknown</td>
<td><code>cmd</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:env:conn_rate</td>
<td>Unknown</td>
<td><code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:env:conn_reject</td>
<td>Unknown</td>
<td><code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:env:cpu_usage</td>
<td>Unknown</td>
<td><code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:env:cpu_usage_child</td>
<td>Unknown</td>
<td><code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:env:key_evict</td>
<td>Unknown</td>
<td><code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:env:key_expire</td>
<td>Unknown</td>
<td><code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:env:key_hit</td>
<td>Unknown</td>
<td><code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:env:key_hit_rate</td>
<td>Unknown</td>
<td><code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:env:key_miss</td>
<td>Unknown</td>
<td><code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:env:mem_usage</td>
<td>Unknown</td>
<td><code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:env:net_traffic</td>
<td>Unknown</td>
<td><code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:env:qps</td>
<td>Unknown</td>
<td><code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:env:qps_mu</td>
<td>Unknown</td>
<td><code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:env:qps_realtime</td>
<td>Unknown</td>
<td><code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:env:qps_sigma</td>
<td>Unknown</td>
<td><code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:env:rt</td>
<td>Unknown</td>
<td><code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:env:rt_mu</td>
<td>Unknown</td>
<td><code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:env:rt_sigma</td>
<td>Unknown</td>
<td><code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:env:rx</td>
<td>Unknown</td>
<td><code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:env:tx</td>
<td>Unknown</td>
<td><code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:ins</td>
<td>Unknown</td>
<td><code>cls</code>, <code>id</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:ins:blocked_clients</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:ins:clients</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:ins:cmd_qps</td>
<td>Unknown</td>
<td><code>cls</code>, <code>cmd</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:ins:cmd_rt</td>
<td>Unknown</td>
<td><code>cls</code>, <code>cmd</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:ins:cmd_time</td>
<td>Unknown</td>
<td><code>cls</code>, <code>cmd</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:ins:conn_rate</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:ins:conn_reject</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:ins:cpu_sys</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:ins:cpu_sys_child</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:ins:cpu_usage</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:ins:cpu_usage_child</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:ins:cpu_user</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:ins:cpu_user_child</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:ins:key_evict</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:ins:key_expire</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:ins:key_hit</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:ins:key_hit_rate</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:ins:key_miss</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:ins:lsn_rate</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:ins:mem_usage</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:ins:net_traffic</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:ins:qps</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:ins:qps_mu</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:ins:qps_realtime</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:ins:qps_sigma</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:ins:rt</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:ins:rt_mu</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:ins:rt_sigma</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:ins:rx</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:ins:tx</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:node:ip</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:node:mem_alloc</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:node:mem_total</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:node:mem_used</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis:node:qps</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis_active_defrag_running</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>active_defrag_running metric</td>
</tr>
<tr>
<td>redis_allocator_active_bytes</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>allocator_active_bytes metric</td>
</tr>
<tr>
<td>redis_allocator_allocated_bytes</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>allocator_allocated_bytes metric</td>
</tr>
<tr>
<td>redis_allocator_frag_bytes</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>allocator_frag_bytes metric</td>
</tr>
<tr>
<td>redis_allocator_frag_ratio</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>allocator_frag_ratio metric</td>
</tr>
<tr>
<td>redis_allocator_resident_bytes</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>allocator_resident_bytes metric</td>
</tr>
<tr>
<td>redis_allocator_rss_bytes</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>allocator_rss_bytes metric</td>
</tr>
<tr>
<td>redis_allocator_rss_ratio</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>allocator_rss_ratio metric</td>
</tr>
<tr>
<td>redis_aof_current_rewrite_duration_sec</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>aof_current_rewrite_duration_sec metric</td>
</tr>
<tr>
<td>redis_aof_enabled</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>aof_enabled metric</td>
</tr>
<tr>
<td>redis_aof_last_bgrewrite_status</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>aof_last_bgrewrite_status metric</td>
</tr>
<tr>
<td>redis_aof_last_cow_size_bytes</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>aof_last_cow_size_bytes metric</td>
</tr>
<tr>
<td>redis_aof_last_rewrite_duration_sec</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>aof_last_rewrite_duration_sec metric</td>
</tr>
<tr>
<td>redis_aof_last_write_status</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>aof_last_write_status metric</td>
</tr>
<tr>
<td>redis_aof_rewrite_in_progress</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>aof_rewrite_in_progress metric</td>
</tr>
<tr>
<td>redis_aof_rewrite_scheduled</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>aof_rewrite_scheduled metric</td>
</tr>
<tr>
<td>redis_blocked_clients</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>blocked_clients metric</td>
</tr>
<tr>
<td>redis_client_recent_max_input_buffer_bytes</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>client_recent_max_input_buffer_bytes metric</td>
</tr>
<tr>
<td>redis_client_recent_max_output_buffer_bytes</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>client_recent_max_output_buffer_bytes metric</td>
</tr>
<tr>
<td>redis_clients_in_timeout_table</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>clients_in_timeout_table metric</td>
</tr>
<tr>
<td>redis_cluster_connections</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>cluster_connections metric</td>
</tr>
<tr>
<td>redis_cluster_current_epoch</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>cluster_current_epoch metric</td>
</tr>
<tr>
<td>redis_cluster_enabled</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>cluster_enabled metric</td>
</tr>
<tr>
<td>redis_cluster_known_nodes</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>cluster_known_nodes metric</td>
</tr>
<tr>
<td>redis_cluster_messages_received_total</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>cluster_messages_received_total metric</td>
</tr>
<tr>
<td>redis_cluster_messages_sent_total</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>cluster_messages_sent_total metric</td>
</tr>
<tr>
<td>redis_cluster_my_epoch</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>cluster_my_epoch metric</td>
</tr>
<tr>
<td>redis_cluster_size</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>cluster_size metric</td>
</tr>
<tr>
<td>redis_cluster_slots_assigned</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>cluster_slots_assigned metric</td>
</tr>
<tr>
<td>redis_cluster_slots_fail</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>cluster_slots_fail metric</td>
</tr>
<tr>
<td>redis_cluster_slots_ok</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>cluster_slots_ok metric</td>
</tr>
<tr>
<td>redis_cluster_slots_pfail</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>cluster_slots_pfail metric</td>
</tr>
<tr>
<td>redis_cluster_state</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>cluster_state metric</td>
</tr>
<tr>
<td>redis_cluster_stats_messages_meet_received</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>cluster_stats_messages_meet_received metric</td>
</tr>
<tr>
<td>redis_cluster_stats_messages_meet_sent</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>cluster_stats_messages_meet_sent metric</td>
</tr>
<tr>
<td>redis_cluster_stats_messages_ping_received</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>cluster_stats_messages_ping_received metric</td>
</tr>
<tr>
<td>redis_cluster_stats_messages_ping_sent</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>cluster_stats_messages_ping_sent metric</td>
</tr>
<tr>
<td>redis_cluster_stats_messages_pong_received</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>cluster_stats_messages_pong_received metric</td>
</tr>
<tr>
<td>redis_cluster_stats_messages_pong_sent</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>cluster_stats_messages_pong_sent metric</td>
</tr>
<tr>
<td>redis_commands_duration_seconds_total</td>
<td>counter</td>
<td><code>cls</code>, <code>cmd</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>Total amount of time in seconds spent per command</td>
</tr>
<tr>
<td>redis_commands_failed_calls_total</td>
<td>counter</td>
<td><code>cls</code>, <code>cmd</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>Total number of errors prior command execution per command</td>
</tr>
<tr>
<td>redis_commands_latencies_usec_bucket</td>
<td>Unknown</td>
<td><code>cls</code>, <code>cmd</code>, <code>ip</code>, <code>le</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis_commands_latencies_usec_count</td>
<td>Unknown</td>
<td><code>cls</code>, <code>cmd</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis_commands_latencies_usec_sum</td>
<td>Unknown</td>
<td><code>cls</code>, <code>cmd</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis_commands_processed_total</td>
<td>counter</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>commands_processed_total metric</td>
</tr>
<tr>
<td>redis_commands_rejected_calls_total</td>
<td>counter</td>
<td><code>cls</code>, <code>cmd</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>Total number of errors within command execution per command</td>
</tr>
<tr>
<td>redis_commands_total</td>
<td>counter</td>
<td><code>cls</code>, <code>cmd</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>Total number of calls per command</td>
</tr>
<tr>
<td>redis_config_io_threads</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>config_io_threads metric</td>
</tr>
<tr>
<td>redis_config_maxclients</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>config_maxclients metric</td>
</tr>
<tr>
<td>redis_config_maxmemory</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>config_maxmemory metric</td>
</tr>
<tr>
<td>redis_connected_clients</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>connected_clients metric</td>
</tr>
<tr>
<td>redis_connected_slave_lag_seconds</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>slave_ip</code>, <code>instance</code>, <code>slave_state</code>, <code>ins</code>, <code>slave_port</code>, <code>job</code></td>
<td>Lag of connected slave</td>
</tr>
<tr>
<td>redis_connected_slave_offset_bytes</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>slave_ip</code>, <code>instance</code>, <code>slave_state</code>, <code>ins</code>, <code>slave_port</code>, <code>job</code></td>
<td>Offset of connected slave</td>
</tr>
<tr>
<td>redis_connected_slaves</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>connected_slaves metric</td>
</tr>
<tr>
<td>redis_connections_received_total</td>
<td>counter</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>connections_received_total metric</td>
</tr>
<tr>
<td>redis_cpu_sys_children_seconds_total</td>
<td>counter</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>cpu_sys_children_seconds_total metric</td>
</tr>
<tr>
<td>redis_cpu_sys_main_thread_seconds_total</td>
<td>counter</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>cpu_sys_main_thread_seconds_total metric</td>
</tr>
<tr>
<td>redis_cpu_sys_seconds_total</td>
<td>counter</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>cpu_sys_seconds_total metric</td>
</tr>
<tr>
<td>redis_cpu_user_children_seconds_total</td>
<td>counter</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>cpu_user_children_seconds_total metric</td>
</tr>
<tr>
<td>redis_cpu_user_main_thread_seconds_total</td>
<td>counter</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>cpu_user_main_thread_seconds_total metric</td>
</tr>
<tr>
<td>redis_cpu_user_seconds_total</td>
<td>counter</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>cpu_user_seconds_total metric</td>
</tr>
<tr>
<td>redis_db_keys</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>db</code>, <code>job</code></td>
<td>Total number of keys by DB</td>
</tr>
<tr>
<td>redis_db_keys_expiring</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>db</code>, <code>job</code></td>
<td>Total number of expiring keys by DB</td>
</tr>
<tr>
<td>redis_defrag_hits</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>defrag_hits metric</td>
</tr>
<tr>
<td>redis_defrag_key_hits</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>defrag_key_hits metric</td>
</tr>
<tr>
<td>redis_defrag_key_misses</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>defrag_key_misses metric</td>
</tr>
<tr>
<td>redis_defrag_misses</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>defrag_misses metric</td>
</tr>
<tr>
<td>redis_dump_payload_sanitizations</td>
<td>counter</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>dump_payload_sanitizations metric</td>
</tr>
<tr>
<td>redis_errors_total</td>
<td>counter</td>
<td><code>cls</code>, <code>ip</code>, <code>err</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>Total number of errors per error type</td>
</tr>
<tr>
<td>redis_evicted_keys_total</td>
<td>counter</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>evicted_keys_total metric</td>
</tr>
<tr>
<td>redis_expired_keys_total</td>
<td>counter</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>expired_keys_total metric</td>
</tr>
<tr>
<td>redis_expired_stale_percentage</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>expired_stale_percentage metric</td>
</tr>
<tr>
<td>redis_expired_time_cap_reached_total</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>expired_time_cap_reached_total metric</td>
</tr>
<tr>
<td>redis_exporter_build_info</td>
<td>gauge</td>
<td><code>cls</code>, <code>golang_version</code>, <code>ip</code>, <code>commit_sha</code>, <code>instance</code>, <code>version</code>, <code>ins</code>, <code>job</code>, <code>build_date</code></td>
<td>redis exporter build_info</td>
</tr>
<tr>
<td>redis_exporter_last_scrape_connect_time_seconds</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>exporter_last_scrape_connect_time_seconds metric</td>
</tr>
<tr>
<td>redis_exporter_last_scrape_duration_seconds</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>exporter_last_scrape_duration_seconds metric</td>
</tr>
<tr>
<td>redis_exporter_last_scrape_error</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>The last scrape error status.</td>
</tr>
<tr>
<td>redis_exporter_scrape_duration_seconds_count</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis_exporter_scrape_duration_seconds_sum</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis_exporter_scrapes_total</td>
<td>counter</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>Current total redis scrapes.</td>
</tr>
<tr>
<td>redis_instance_info</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>os</code>, <code>role</code>, <code>instance</code>, <code>run_id</code>, <code>redis_version</code>, <code>tcp_port</code>, <code>process_id</code>, <code>ins</code>, <code>redis_mode</code>, <code>maxmemory_policy</code>, <code>redis_build_id</code>, <code>job</code></td>
<td>Information about the Redis instance</td>
</tr>
<tr>
<td>redis_io_threaded_reads_processed</td>
<td>counter</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>io_threaded_reads_processed metric</td>
</tr>
<tr>
<td>redis_io_threaded_writes_processed</td>
<td>counter</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>io_threaded_writes_processed metric</td>
</tr>
<tr>
<td>redis_io_threads_active</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>io_threads_active metric</td>
</tr>
<tr>
<td>redis_keyspace_hits_total</td>
<td>counter</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>keyspace_hits_total metric</td>
</tr>
<tr>
<td>redis_keyspace_misses_total</td>
<td>counter</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>keyspace_misses_total metric</td>
</tr>
<tr>
<td>redis_last_key_groups_scrape_duration_milliseconds</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>Duration of the last key group metrics scrape in milliseconds</td>
</tr>
<tr>
<td>redis_last_slow_execution_duration_seconds</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>The amount of time needed for last slow execution, in seconds</td>
</tr>
<tr>
<td>redis_latency_percentiles_usec</td>
<td>summary</td>
<td><code>cls</code>, <code>cmd</code>, <code>ip</code>, <code>instance</code>, <code>quantile</code>, <code>ins</code>, <code>job</code></td>
<td>A summary of latency percentile distribution per command</td>
</tr>
<tr>
<td>redis_latency_percentiles_usec_count</td>
<td>Unknown</td>
<td><code>cls</code>, <code>cmd</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis_latency_percentiles_usec_sum</td>
<td>Unknown</td>
<td><code>cls</code>, <code>cmd</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>redis_latest_fork_seconds</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>latest_fork_seconds metric</td>
</tr>
<tr>
<td>redis_lazyfree_pending_objects</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>lazyfree_pending_objects metric</td>
</tr>
<tr>
<td>redis_loading_dump_file</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>loading_dump_file metric</td>
</tr>
<tr>
<td>redis_master_last_io_seconds_ago</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>master_host</code>, <code>instance</code>, <code>ins</code>, <code>job</code>, <code>master_port</code></td>
<td>Master last io seconds ago</td>
</tr>
<tr>
<td>redis_master_link_up</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>master_host</code>, <code>instance</code>, <code>ins</code>, <code>job</code>, <code>master_port</code></td>
<td>Master link status on Redis slave</td>
</tr>
<tr>
<td>redis_master_repl_offset</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>master_repl_offset metric</td>
</tr>
<tr>
<td>redis_master_sync_in_progress</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>master_host</code>, <code>instance</code>, <code>ins</code>, <code>job</code>, <code>master_port</code></td>
<td>Master sync in progress</td>
</tr>
<tr>
<td>redis_mem_clients_normal</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>mem_clients_normal metric</td>
</tr>
<tr>
<td>redis_mem_clients_slaves</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>mem_clients_slaves metric</td>
</tr>
<tr>
<td>redis_mem_fragmentation_bytes</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>mem_fragmentation_bytes metric</td>
</tr>
<tr>
<td>redis_mem_fragmentation_ratio</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>mem_fragmentation_ratio metric</td>
</tr>
<tr>
<td>redis_mem_not_counted_for_eviction_bytes</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>mem_not_counted_for_eviction_bytes metric</td>
</tr>
<tr>
<td>redis_memory_max_bytes</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>memory_max_bytes metric</td>
</tr>
<tr>
<td>redis_memory_used_bytes</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>memory_used_bytes metric</td>
</tr>
<tr>
<td>redis_memory_used_dataset_bytes</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>memory_used_dataset_bytes metric</td>
</tr>
<tr>
<td>redis_memory_used_lua_bytes</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>memory_used_lua_bytes metric</td>
</tr>
<tr>
<td>redis_memory_used_overhead_bytes</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>memory_used_overhead_bytes metric</td>
</tr>
<tr>
<td>redis_memory_used_peak_bytes</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>memory_used_peak_bytes metric</td>
</tr>
<tr>
<td>redis_memory_used_rss_bytes</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>memory_used_rss_bytes metric</td>
</tr>
<tr>
<td>redis_memory_used_scripts_bytes</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>memory_used_scripts_bytes metric</td>
</tr>
<tr>
<td>redis_memory_used_startup_bytes</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>memory_used_startup_bytes metric</td>
</tr>
<tr>
<td>redis_migrate_cached_sockets_total</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>migrate_cached_sockets_total metric</td>
</tr>
<tr>
<td>redis_module_fork_in_progress</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>module_fork_in_progress metric</td>
</tr>
<tr>
<td>redis_module_fork_last_cow_size</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>module_fork_last_cow_size metric</td>
</tr>
<tr>
<td>redis_net_input_bytes_total</td>
<td>counter</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>net_input_bytes_total metric</td>
</tr>
<tr>
<td>redis_net_output_bytes_total</td>
<td>counter</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>net_output_bytes_total metric</td>
</tr>
<tr>
<td>redis_number_of_cached_scripts</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>number_of_cached_scripts metric</td>
</tr>
<tr>
<td>redis_process_id</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>process_id metric</td>
</tr>
<tr>
<td>redis_pubsub_channels</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>pubsub_channels metric</td>
</tr>
<tr>
<td>redis_pubsub_patterns</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>pubsub_patterns metric</td>
</tr>
<tr>
<td>redis_pubsubshard_channels</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>pubsubshard_channels metric</td>
</tr>
<tr>
<td>redis_rdb_bgsave_in_progress</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>rdb_bgsave_in_progress metric</td>
</tr>
<tr>
<td>redis_rdb_changes_since_last_save</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>rdb_changes_since_last_save metric</td>
</tr>
<tr>
<td>redis_rdb_current_bgsave_duration_sec</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>rdb_current_bgsave_duration_sec metric</td>
</tr>
<tr>
<td>redis_rdb_last_bgsave_duration_sec</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>rdb_last_bgsave_duration_sec metric</td>
</tr>
<tr>
<td>redis_rdb_last_bgsave_status</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>rdb_last_bgsave_status metric</td>
</tr>
<tr>
<td>redis_rdb_last_cow_size_bytes</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>rdb_last_cow_size_bytes metric</td>
</tr>
<tr>
<td>redis_rdb_last_save_timestamp_seconds</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>rdb_last_save_timestamp_seconds metric</td>
</tr>
<tr>
<td>redis_rejected_connections_total</td>
<td>counter</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>rejected_connections_total metric</td>
</tr>
<tr>
<td>redis_repl_backlog_first_byte_offset</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>repl_backlog_first_byte_offset metric</td>
</tr>
<tr>
<td>redis_repl_backlog_history_bytes</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>repl_backlog_history_bytes metric</td>
</tr>
<tr>
<td>redis_repl_backlog_is_active</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>repl_backlog_is_active metric</td>
</tr>
<tr>
<td>redis_replica_partial_resync_accepted</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>replica_partial_resync_accepted metric</td>
</tr>
<tr>
<td>redis_replica_partial_resync_denied</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>replica_partial_resync_denied metric</td>
</tr>
<tr>
<td>redis_replica_resyncs_full</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>replica_resyncs_full metric</td>
</tr>
<tr>
<td>redis_replication_backlog_bytes</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>replication_backlog_bytes metric</td>
</tr>
<tr>
<td>redis_second_repl_offset</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>second_repl_offset metric</td>
</tr>
<tr>
<td>redis_sentinel_master_ckquorum_status</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>message</code>, <code>instance</code>, <code>ins</code>, <code>master_name</code>, <code>job</code></td>
<td>Master ckquorum status</td>
</tr>
<tr>
<td>redis_sentinel_master_ok_sentinels</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>master_address</code>, <code>master_name</code>, <code>job</code></td>
<td>The number of okay sentinels monitoring this master</td>
</tr>
<tr>
<td>redis_sentinel_master_ok_slaves</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>master_address</code>, <code>master_name</code>, <code>job</code></td>
<td>The number of okay slaves of the master</td>
</tr>
<tr>
<td>redis_sentinel_master_sentinels</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>master_address</code>, <code>master_name</code>, <code>job</code></td>
<td>The number of sentinels monitoring this master</td>
</tr>
<tr>
<td>redis_sentinel_master_setting_ckquorum</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>master_address</code>, <code>master_name</code>, <code>job</code></td>
<td>Show the current ckquorum config for each master</td>
</tr>
<tr>
<td>redis_sentinel_master_setting_down_after_milliseconds</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>master_address</code>, <code>master_name</code>, <code>job</code></td>
<td>Show the current down-after-milliseconds config for each master</td>
</tr>
<tr>
<td>redis_sentinel_master_setting_failover_timeout</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>master_address</code>, <code>master_name</code>, <code>job</code></td>
<td>Show the current failover-timeout config for each master</td>
</tr>
<tr>
<td>redis_sentinel_master_setting_parallel_syncs</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>master_address</code>, <code>master_name</code>, <code>job</code></td>
<td>Show the current parallel-syncs config for each master</td>
</tr>
<tr>
<td>redis_sentinel_master_slaves</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>master_address</code>, <code>master_name</code>, <code>job</code></td>
<td>The number of slaves of the master</td>
</tr>
<tr>
<td>redis_sentinel_master_status</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>master_status</code>, <code>instance</code>, <code>ins</code>, <code>master_address</code>, <code>master_name</code>, <code>job</code></td>
<td>Master status on Sentinel</td>
</tr>
<tr>
<td>redis_sentinel_masters</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>The number of masters this sentinel is watching</td>
</tr>
<tr>
<td>redis_sentinel_running_scripts</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>Number of scripts in execution right now</td>
</tr>
<tr>
<td>redis_sentinel_scripts_queue_length</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>Queue of user scripts to execute</td>
</tr>
<tr>
<td>redis_sentinel_simulate_failure_flags</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>Failures simulations</td>
</tr>
<tr>
<td>redis_sentinel_tilt</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>Sentinel is in TILT mode</td>
</tr>
<tr>
<td>redis_slave_expires_tracked_keys</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>slave_expires_tracked_keys metric</td>
</tr>
<tr>
<td>redis_slave_info</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>master_host</code>, <code>instance</code>, <code>read_only</code>, <code>ins</code>, <code>job</code>, <code>master_port</code></td>
<td>Information about the Redis slave</td>
</tr>
<tr>
<td>redis_slave_priority</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>slave_priority metric</td>
</tr>
<tr>
<td>redis_slave_repl_offset</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>master_host</code>, <code>instance</code>, <code>ins</code>, <code>job</code>, <code>master_port</code></td>
<td>Slave replication offset</td>
</tr>
<tr>
<td>redis_slowlog_last_id</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>Last id of slowlog</td>
</tr>
<tr>
<td>redis_slowlog_length</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>Total slowlog</td>
</tr>
<tr>
<td>redis_start_time_seconds</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>Start time of the Redis instance since unix epoch in seconds.</td>
</tr>
<tr>
<td>redis_target_scrape_request_errors_total</td>
<td>counter</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>Errors in requests to the exporter</td>
</tr>
<tr>
<td>redis_total_error_replies</td>
<td>counter</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>total_error_replies metric</td>
</tr>
<tr>
<td>redis_total_reads_processed</td>
<td>counter</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>total_reads_processed metric</td>
</tr>
<tr>
<td>redis_total_system_memory_bytes</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>total_system_memory_bytes metric</td>
</tr>
<tr>
<td>redis_total_writes_processed</td>
<td>counter</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>total_writes_processed metric</td>
</tr>
<tr>
<td>redis_tracking_clients</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>tracking_clients metric</td>
</tr>
<tr>
<td>redis_tracking_total_items</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>tracking_total_items metric</td>
</tr>
<tr>
<td>redis_tracking_total_keys</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>tracking_total_keys metric</td>
</tr>
<tr>
<td>redis_tracking_total_prefixes</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>tracking_total_prefixes metric</td>
</tr>
<tr>
<td>redis_unexpected_error_replies</td>
<td>counter</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>unexpected_error_replies metric</td>
</tr>
<tr>
<td>redis_up</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>Information about the Redis instance</td>
</tr>
<tr>
<td>redis_uptime_in_seconds</td>
<td>gauge</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>uptime_in_seconds metric</td>
</tr>
<tr>
<td>scrape_duration_seconds</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>scrape_samples_post_metric_relabeling</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>scrape_samples_scraped</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>scrape_series_added</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
<tr>
<td>up</td>
<td>Unknown</td>
<td><code>cls</code>, <code>ip</code>, <code>instance</code>, <code>ins</code>, <code>job</code></td>
<td>N/A</td>
</tr>
</tbody>
</table>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-b2e89e0d2e5fa7361edacff6f86e00ea">7 - FAQ</h1>
    <div class="lead">Pigsty REDIS module frequently asked questions</div>
	<hr>
<h2 id="abort-due-to-existing-redis-instance">ABORT due to existing redis instance</h2>
<blockquote>
<p>use <code>redis_clean = true</code> and <code>redis_safeguard = false</code> to force clean redis data</p>
</blockquote>
<p>This happens when you run <code>redis.yml</code> to init a redis instance that is already running, and <a href="/docs/redis/param/#redis_clean"><code>redis_clean</code></a> is set to <code>false</code>.</p>
<p>If <code>redis_clean</code> is set to <code>true</code> (and the <code>redis_safeguard</code> is set to <code>false</code>, too), the <code>redis.yml</code> playbook will remove the existing redis instance and re-init it as a new one, which makes the <code>redis.yml</code> playbook fully idempotent.</p>
<hr>
<h2 id="abort-due-to-redis_safeguard-enabled">ABORT due to redis_safeguard enabled</h2>
<blockquote>
<p>This happens when removing a redis instance with <a href="/docs/redis/param/#redis_safeguard"><code>redis_safeguard</code></a> set to <code>true</code>.</p>
</blockquote>
<p>You can disable <a href="/docs/redis/param/#redis_safeguard"><code>redis_safeguard</code></a> to remove the Redis instance. This is redis_safeguard is what it is for.</p>
<hr>
<h2 id="how-to-add-a-single-new-redis-instance-on-this-node">How to add a single new redis instance on this node?</h2>
<blockquote>
<p>Use <code>bin/redis-add &lt;ip&gt; &lt;port&gt;</code> to deploy a new redis instance on node.</p>
</blockquote>
<hr>
<h2 id="how-to-remove-a-single-redis-instance-from-the-node">How to remove a single redis instance from the node?</h2>
<blockquote>
<p><code>bin/redis-rm &lt;ip&gt; &lt;port&gt;</code> to remove a single redis instance from node</p>
</blockquote>

</div>



    
	
  



          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Mail" aria-label="Mail">
    <a target="_blank" rel="noopener" href="mailto:rh@vonng.com" aria-label="Mail">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="GitHub" aria-label="GitHub">
    <a target="_blank" rel="noopener" href="https://github.com/Vonng/pigsty" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Twitter" aria-label="Twitter">
    <a target="_blank" rel="noopener" href="https://twitter.com/GobeUncleWang" aria-label="Twitter">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="WeChat" aria-label="WeChat">
    <a target="_blank" rel="noopener" href="/img/pigsty/pigsty-cc.jpg" aria-label="WeChat">
      <i class="fa fa-comment"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Discord" aria-label="Discord">
    <a target="_blank" rel="noopener" href="https://discord.gg/wDzt5VyWEz" aria-label="Discord">
      <i class="fab fa-discord"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Telegram" aria-label="Telegram">
    <a target="_blank" rel="noopener" href="https://t.me/joinchat/gV9zfZraNPM3YjFh" aria-label="Telegram">
      <i class="fab fa-telegram"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        <span class="td-footer__copyright">&copy;
    2018&ndash;2025
    <span class="td-footer__authors">Ruohang Feng</span></span><span class="td-footer__all_rights_reserved">All Rights Reserved</span></span><span class="ms-2"><a href="https://vonng.com/en/" target="_blank" rel="noopener">@Vonng</a></span>
<br><span>Pigsty® distributed under <a href="/docs/about/license" target="_blank" rel="noopener">AGPLv3</a></span>
<br><span class="ms-2"><a href="/docs/about/privacy" target="_blank" rel="noopener">Privacy Policy</a></span>
<span><a href="http://beian.miit.gov.cn/" target="_blank" rel="noopener">浙ICP备15016890号</a></span>
      </div>
    </div>
  </div>
</footer>

    </div>
    <script src="/js/main.min.248655eb216150e39da254c2f7aa5357805d0ec66bdb741b591cd35fb5f629ab.js" integrity="sha256-JIZV6yFhUOOdolTC96pTV4BdDsZr23QbWRzTX7X2Kas=" crossorigin="anonymous"></script>
<script defer src="/js/click-to-copy.min.f724d3de49218995223b7316aa2e53e2b34bf42026bf399ebb21bb02212402d1.js" integrity="sha256-9yTT3kkhiZUiO3MWqi5T4rNL9CAmvzmeuyG7AiEkAtE=" crossorigin="anonymous"></script>
<script src='/js/tabpane-persist.js'></script>

  </body>
</html>
