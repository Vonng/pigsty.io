<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Pigsty – MONGO</title>
    <link>/zh/module/mongo/</link>
    <description>Recent content in MONGO on Pigsty</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    
	  <atom:link href="/zh/module/mongo/index.xml" rel="self" type="application/rss+xml" />
    
    
      
        
      
    
    
    <item>
      <title>Docs: 指标列表</title>
      <link>/zh/docs/ferret/metric/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/zh/docs/ferret/metric/</guid>
      <description>
        
        
        &lt;p&gt;&lt;a href=&#34;/zh/docs/ferret&#34;&gt;&lt;strong&gt;&lt;code&gt;MONGO&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 模块包含有 54 类可用监控指标。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Metric Name&lt;/th&gt;
&lt;th&gt;Type&lt;/th&gt;
&lt;th&gt;Labels&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;ferretdb_client_accepts_total&lt;/td&gt;
&lt;td&gt;Unknown&lt;/td&gt;
&lt;td&gt;&lt;code&gt;error&lt;/code&gt;, &lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;N/A&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ferretdb_client_duration_seconds_bucket&lt;/td&gt;
&lt;td&gt;Unknown&lt;/td&gt;
&lt;td&gt;&lt;code&gt;error&lt;/code&gt;, &lt;code&gt;le&lt;/code&gt;, &lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;N/A&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ferretdb_client_duration_seconds_count&lt;/td&gt;
&lt;td&gt;Unknown&lt;/td&gt;
&lt;td&gt;&lt;code&gt;error&lt;/code&gt;, &lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;N/A&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ferretdb_client_duration_seconds_sum&lt;/td&gt;
&lt;td&gt;Unknown&lt;/td&gt;
&lt;td&gt;&lt;code&gt;error&lt;/code&gt;, &lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;N/A&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ferretdb_client_requests_total&lt;/td&gt;
&lt;td&gt;Unknown&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;opcode&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;command&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;N/A&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ferretdb_client_responses_total&lt;/td&gt;
&lt;td&gt;Unknown&lt;/td&gt;
&lt;td&gt;&lt;code&gt;result&lt;/code&gt;, &lt;code&gt;argument&lt;/code&gt;, &lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;opcode&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;command&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;N/A&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ferretdb_postgresql_metadata_databases&lt;/td&gt;
&lt;td&gt;gauge&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;The current number of database in the registry.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ferretdb_postgresql_pool_size&lt;/td&gt;
&lt;td&gt;gauge&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;The current number of pools.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ferretdb_up&lt;/td&gt;
&lt;td&gt;gauge&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;version&lt;/code&gt;, &lt;code&gt;commit&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;dirty&lt;/code&gt;, &lt;code&gt;telemetry&lt;/code&gt;, &lt;code&gt;package&lt;/code&gt;, &lt;code&gt;update_available&lt;/code&gt;, &lt;code&gt;uuid&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;, &lt;code&gt;branch&lt;/code&gt;, &lt;code&gt;debug&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;FerretDB instance state.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;go_gc_duration_seconds&lt;/td&gt;
&lt;td&gt;summary&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;quantile&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;A summary of the pause duration of garbage collection cycles.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;go_gc_duration_seconds_count&lt;/td&gt;
&lt;td&gt;Unknown&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;N/A&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;go_gc_duration_seconds_sum&lt;/td&gt;
&lt;td&gt;Unknown&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;N/A&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;go_goroutines&lt;/td&gt;
&lt;td&gt;gauge&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Number of goroutines that currently exist.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;go_info&lt;/td&gt;
&lt;td&gt;gauge&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;version&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Information about the Go environment.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;go_memstats_alloc_bytes&lt;/td&gt;
&lt;td&gt;gauge&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Number of bytes allocated and still in use.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;go_memstats_alloc_bytes_total&lt;/td&gt;
&lt;td&gt;counter&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Total number of bytes allocated, even if freed.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;go_memstats_buck_hash_sys_bytes&lt;/td&gt;
&lt;td&gt;gauge&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Number of bytes used by the profiling bucket hash table.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;go_memstats_frees_total&lt;/td&gt;
&lt;td&gt;counter&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Total number of frees.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;go_memstats_gc_sys_bytes&lt;/td&gt;
&lt;td&gt;gauge&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Number of bytes used for garbage collection system metadata.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;go_memstats_heap_alloc_bytes&lt;/td&gt;
&lt;td&gt;gauge&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Number of heap bytes allocated and still in use.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;go_memstats_heap_idle_bytes&lt;/td&gt;
&lt;td&gt;gauge&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Number of heap bytes waiting to be used.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;go_memstats_heap_inuse_bytes&lt;/td&gt;
&lt;td&gt;gauge&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Number of heap bytes that are in use.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;go_memstats_heap_objects&lt;/td&gt;
&lt;td&gt;gauge&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Number of allocated objects.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;go_memstats_heap_released_bytes&lt;/td&gt;
&lt;td&gt;gauge&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Number of heap bytes released to OS.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;go_memstats_heap_sys_bytes&lt;/td&gt;
&lt;td&gt;gauge&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Number of heap bytes obtained from system.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;go_memstats_last_gc_time_seconds&lt;/td&gt;
&lt;td&gt;gauge&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Number of seconds since 1970 of last garbage collection.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;go_memstats_lookups_total&lt;/td&gt;
&lt;td&gt;counter&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Total number of pointer lookups.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;go_memstats_mallocs_total&lt;/td&gt;
&lt;td&gt;counter&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Total number of mallocs.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;go_memstats_mcache_inuse_bytes&lt;/td&gt;
&lt;td&gt;gauge&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Number of bytes in use by mcache structures.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;go_memstats_mcache_sys_bytes&lt;/td&gt;
&lt;td&gt;gauge&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Number of bytes used for mcache structures obtained from system.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;go_memstats_mspan_inuse_bytes&lt;/td&gt;
&lt;td&gt;gauge&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Number of bytes in use by mspan structures.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;go_memstats_mspan_sys_bytes&lt;/td&gt;
&lt;td&gt;gauge&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Number of bytes used for mspan structures obtained from system.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;go_memstats_next_gc_bytes&lt;/td&gt;
&lt;td&gt;gauge&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Number of heap bytes when next garbage collection will take place.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;go_memstats_other_sys_bytes&lt;/td&gt;
&lt;td&gt;gauge&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Number of bytes used for other system allocations.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;go_memstats_stack_inuse_bytes&lt;/td&gt;
&lt;td&gt;gauge&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Number of bytes in use by the stack allocator.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;go_memstats_stack_sys_bytes&lt;/td&gt;
&lt;td&gt;gauge&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Number of bytes obtained from system for stack allocator.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;go_memstats_sys_bytes&lt;/td&gt;
&lt;td&gt;gauge&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Number of bytes obtained from system.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;go_threads&lt;/td&gt;
&lt;td&gt;gauge&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Number of OS threads created.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;mongo_up&lt;/td&gt;
&lt;td&gt;Unknown&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;N/A&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;process_cpu_seconds_total&lt;/td&gt;
&lt;td&gt;counter&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Total user and system CPU time spent in seconds.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;process_max_fds&lt;/td&gt;
&lt;td&gt;gauge&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Maximum number of open file descriptors.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;process_open_fds&lt;/td&gt;
&lt;td&gt;gauge&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Number of open file descriptors.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;process_resident_memory_bytes&lt;/td&gt;
&lt;td&gt;gauge&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Resident memory size in bytes.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;process_start_time_seconds&lt;/td&gt;
&lt;td&gt;gauge&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Start time of the process since unix epoch in seconds.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;process_virtual_memory_bytes&lt;/td&gt;
&lt;td&gt;gauge&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Virtual memory size in bytes.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;process_virtual_memory_max_bytes&lt;/td&gt;
&lt;td&gt;gauge&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Maximum amount of virtual memory available in bytes.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;promhttp_metric_handler_errors_total&lt;/td&gt;
&lt;td&gt;counter&lt;/td&gt;
&lt;td&gt;&lt;code&gt;job&lt;/code&gt;, &lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;cause&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Total number of internal errors encountered by the promhttp metric handler.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;promhttp_metric_handler_requests_in_flight&lt;/td&gt;
&lt;td&gt;gauge&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Current number of scrapes being served.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;promhttp_metric_handler_requests_total&lt;/td&gt;
&lt;td&gt;counter&lt;/td&gt;
&lt;td&gt;&lt;code&gt;job&lt;/code&gt;, &lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;code&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Total number of scrapes by HTTP status code.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;scrape_duration_seconds&lt;/td&gt;
&lt;td&gt;Unknown&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;N/A&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;scrape_samples_post_metric_relabeling&lt;/td&gt;
&lt;td&gt;Unknown&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;N/A&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;scrape_samples_scraped&lt;/td&gt;
&lt;td&gt;Unknown&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;N/A&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;scrape_series_added&lt;/td&gt;
&lt;td&gt;Unknown&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;N/A&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;up&lt;/td&gt;
&lt;td&gt;Unknown&lt;/td&gt;
&lt;td&gt;&lt;code&gt;cls&lt;/code&gt;, &lt;code&gt;ip&lt;/code&gt;, &lt;code&gt;ins&lt;/code&gt;, &lt;code&gt;instance&lt;/code&gt;, &lt;code&gt;job&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;N/A&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

      </description>
    </item>
    
    <item>
      <title>Docs: 模块：FERRET</title>
      <link>/zh/docs/ferret/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/zh/docs/ferret/</guid>
      <description>
        
        
        &lt;blockquote&gt;
&lt;p&gt;使用 &lt;a href=&#34;https://ferretdb.io&#34;&gt;FerretDB&lt;/a&gt; 为 PostgreSQL 添加 MongoDB 兼容的协议支持！ &lt;a href=&#34;/zh/docs/ferret/#配置&#34;&gt;配置&lt;/a&gt; | &lt;a href=&#34;/zh/docs/ferret/#管理&#34;&gt;管理&lt;/a&gt; | &lt;a href=&#34;/zh/docs/ferret/#剧本&#34;&gt;剧本&lt;/a&gt; | &lt;a href=&#34;/zh/docs/ferret/#监控&#34;&gt;监控&lt;/a&gt; | &lt;a href=&#34;/zh/docs/ferret/#参数&#34;&gt;参数&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2 id=&#34;概览&#34;&gt;概览&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://www.mongodb.com/licensing/server-side-public-license/faq&#34;&gt;MongoDB&lt;/a&gt; 曾经是一项令人惊叹的技术，让开发者能够抛开关系型数据库的“模式束缚”，快速构建应用程序。然而随着时间推移，MongoDB 放弃了它的开源本质，将许可证更改为 SSPL，这使得许多开源项目和早期商业项目无法使用它。大多数 MongoDB 用户其实并不需要 MongoDB 提供的高级功能，但他们确实需要一个易于使用的开源文档数据库解决方案。为了填补这个空白，&lt;a href=&#34;https://ferretdb.io&#34;&gt;FerretDB&lt;/a&gt;  应运而生。&lt;/p&gt;
&lt;p&gt;PostgreSQL 的 JSON 功能支持已经足够完善了：二进制存储 JSONB，GIN 任意字段索引 ，各种 JSON 处理函数，JSON PATH 和 JSON Schema，它早已是一个功能完备，性能强大的文档数据库了。但是提供替代的功能，和&lt;strong&gt;直接仿真&lt;/strong&gt;还是不一样的。FerretDB 可以为使用 MongoDB 驱动的应用程序提供一个丝滑迁移到 PostgreSQL 的过渡方案。&lt;/p&gt;
&lt;p&gt;Pigsty 在 1.x 中就提供了基于 &lt;a href=&#34;https://github.com/Vonng/pigsty/tree/master/app&#34;&gt;Docker&lt;/a&gt; 的 FerretDB 模板，在 v2.3 中更是提供了&lt;a href=&#34;https://doc.pigsty.cc/#/MONGO&#34;&gt;原生&lt;/a&gt;部署支持。它作为一个选装项，对丰富 PostgreSQL 生态大有裨益。Pigsty 社区已经与 FerretDB 社区成为了合作伙伴，后续将进行深度的合作与适配支持。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;配置&#34;&gt;配置&lt;/h2&gt;
&lt;p&gt;在部署 Mongo (FerretDB) 集群前，你需要先在配置清单中使用相关&lt;a href=&#34;/zh/docs/ferret/#参数&#34;&gt;参数&lt;/a&gt;定义好它。&lt;/p&gt;
&lt;p&gt;下面的例子将默认的单节点 &lt;code&gt;pg-meta&lt;/code&gt; 集群的 &lt;code&gt;meta&lt;/code&gt; 数据库作为 FerretDB 的底层存储：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;ferret&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;hosts&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;10.10.10.10&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;mongo_seq&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;vars&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;mongo_cluster&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;ferret&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;mongo_pgurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;postgres://dbuser_meta:DBUser.Meta@10.10.10.10:5432/meta&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;这里 &lt;code&gt;mongo_cluster&lt;/code&gt; 与 &lt;code&gt;mongo_seq&lt;/code&gt; 属于不可或缺的身份参数，对于 FerretDB 来说，还有一个必须提供的参数是 &lt;code&gt;mongo_pgurl&lt;/code&gt;，指定了底层 PG 的位置。&lt;/p&gt;
&lt;p&gt;您可以使用 &lt;a href=&#34;/zh/docs/pgsql/svc&#34;&gt;服务&lt;/a&gt; 来接入高可用的 PostgreSQL 集群，并部署多个 FerretDB 实例副本并绑定 L2 VIP 以实现 FerretDB 层本身的高可用。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;ferret&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;hosts&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;10.10.10.45&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;mongo_seq&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;10.10.10.46&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;mongo_seq&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;10.10.10.47&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;mongo_seq&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;3&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;vars&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;mongo_cluster&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;ferret&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;mongo_pgurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;postgres://test:test@10.10.10.3:5436/test&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;vip_enabled&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;true&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;vip_vrid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;128&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;vip_address&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;10.10.10.99&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;vip_interface&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;eth1&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;管理&#34;&gt;管理&lt;/h2&gt;
&lt;h3 id=&#34;创建mongo集群&#34;&gt;创建Mongo集群&lt;/h3&gt;
&lt;p&gt;在&lt;a href=&#34;/zh/docs/setup/config&#34;&gt;配置清单&lt;/a&gt;中&lt;a href=&#34;/zh/docs/ferret/#配置&#34;&gt;定义&lt;/a&gt;好MONGO集群后，您可以使用以下命令完成安装。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./mongo.yml -l ferret   &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 在 ferret 分组上安装“MongoDB/FerretDB”&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;因为 FerretDB 使用了 PostgreSQL 作为底层存储，所以重复运行此剧本通常并无大碍。&lt;/p&gt;
&lt;h3 id=&#34;移除mongo集群&#34;&gt;移除Mongo集群&lt;/h3&gt;
&lt;p&gt;要移除 Mongo/FerretDB 集群，运行 &lt;a href=&#34;/zh/docs/ferret/#mongoyml&#34;&gt;&lt;code&gt;mongo.yml&lt;/code&gt;&lt;/a&gt; 剧本的子任务：&lt;code&gt;mongo_purge&lt;/code&gt;，并使用 &lt;code&gt;mongo_purge&lt;/code&gt; 命令行参数即可：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./mongo.yml -e &lt;span style=&#34;color:#000&#34;&gt;mongo_purge&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#204a87&#34;&gt;true&lt;/span&gt; -t mongo_purge
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;连接到ferretdb&#34;&gt;连接到FerretDB&lt;/h3&gt;
&lt;p&gt;你可以使用 MongoDB 连接串，用任何语言的 MongoDB 驱动访问 FerretDB，这里以上面安装的 &lt;code&gt;mongosh&lt;/code&gt; 命令行工具为例：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;mongosh &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;mongodb://dbuser_meta:DBUser.Meta@10.10.10.10:27017?authMechanism=PLAIN&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;mongosh &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;mongodb://test:test@10.10.10.11:27017/test?authMechanism=PLAIN&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Pigsty 管理的 PostgreSQL 集群默认使用 &lt;code&gt;scram-sha-256&lt;/code&gt; 作为默认的认证方式，因此，您必须使用 &lt;code&gt;PLAIN&lt;/code&gt; 认证方式连接至 FerretDB。 参阅 &lt;a href=&#34;https://docs.ferretdb.io/security/authentication/&#34;&gt;FerretDB：认证&lt;/a&gt; 获取详细信息。&lt;/p&gt;
&lt;p&gt;你也可以使用其他 PostgreSQL 用户来访问 FerretDB，只要在连接串中指定即可：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;mongosh &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;mongodb://dbuser_dba:DBUser.DBA@10.10.10.10:27017?authMechanism=PLAIN&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;快速上手&#34;&gt;快速上手&lt;/h2&gt;
&lt;p&gt;你可以连接到 FerretDB 并假装它是一个 MongoDB 集群。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ mongosh &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;mongodb://dbuser_meta:DBUser.Meta@10.10.10.10:27017?authMechanism=PLAIN&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;MongoDB 的命令会被翻译为&lt;code&gt;SQL&lt;/code&gt;命令，在底下的 PostgreSQL 中执行：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;use &lt;span style=&#34;color:#204a87&#34;&gt;test&lt;/span&gt;                            &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# CREATE SCHEMA test;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;db.dropDatabase&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;()&lt;/span&gt;                   &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# DROP SCHEMA test;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;db.createCollection&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;posts&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;)&lt;/span&gt;        &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# CREATE TABLE posts(_data JSONB,...)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;db.posts.insert&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;({&lt;/span&gt;                   &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# INSERT INTO posts VALUES(...);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    title: &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;Post One&amp;#39;&lt;/span&gt;,body: &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;Body of post one&amp;#39;&lt;/span&gt;,category: &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;News&amp;#39;&lt;/span&gt;,tags: &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;news&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;events&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    user: &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;{&lt;/span&gt;name: &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;John Doe&amp;#39;&lt;/span&gt;,status: &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;author&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;}&lt;/span&gt;,date: Date&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;()}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;db.posts.find&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;()&lt;/span&gt;.limit&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;(&lt;/span&gt;2&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;)&lt;/span&gt;.pretty&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;()&lt;/span&gt;   &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# SELECT * FROM posts LIMIT 2;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;db.posts.createIndex&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;({&lt;/span&gt; title: &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;})&lt;/span&gt;  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# CREATE INDEX ON posts(_data-&amp;gt;&amp;gt;&amp;#39;title&amp;#39;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;如果你不是很熟悉 MongoDB，这里有一个快速上手教程，同样适用于 FerretDB： &lt;a href=&#34;https://www.mongodb.com/docs/ferretdb-shell/crud/&#34;&gt;Perform CRUD Operations with MongoDB Shell&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;如果你希望生成一些样例负载，可以使用 &lt;code&gt;mongosh&lt;/code&gt; 执行以下的简易测试剧本：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cat &amp;gt; benchmark.js &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;lt;&amp;lt;&amp;#39;EOF&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;const coll = &amp;#34;testColl&amp;#34;;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;const numDocs = 10000;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;for (let i = 0; i &amp;lt; numDocs; i++) {  // insert
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;  db.getCollection(coll).insert({ num: i, name: &amp;#34;MongoDB Benchmark Test&amp;#34; });
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;for (let i = 0; i &amp;lt; numDocs; i++) {  // select
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;  db.getCollection(coll).find({ num: i });
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;for (let i = 0; i &amp;lt; numDocs; i++) {  // update
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;  db.getCollection(coll).update({ num: i }, { $set: { name: &amp;#34;Updated&amp;#34; } });
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;for (let i = 0; i &amp;lt; numDocs; i++) {  // delete
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;  db.getCollection(coll).deleteOne({ num: i });
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;EOF&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;mongosh &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;mongodb://dbuser_meta:DBUser.Meta@10.10.10.10:27017?authMechanism=PLAIN&amp;#39;&lt;/span&gt; benchmark.js
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;你可以查阅 FerretDB 支持的 &lt;a href=&#34;https://docs.ferretdb.io/reference/supported-commands/&#34;&gt;MongoDB命令&lt;/a&gt;，同时还有一些&lt;a href=&#34;https://docs.ferretdb.io/diff/&#34;&gt;已知的区别&lt;/a&gt;，对于基本的使用来说，通常不是什么大问题。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;剧本&#34;&gt;剧本&lt;/h2&gt;
&lt;p&gt;Pigsty 提供了一个内置的剧本： &lt;a href=&#34;/zh/docs/ferret/#mongoyml&#34;&gt;&lt;code&gt;mongo.yml&lt;/code&gt;&lt;/a&gt;，用于在节点上安装 FerretDB 集群。&lt;/p&gt;
&lt;h3 id=&#34;mongoyml&#34;&gt;&lt;code&gt;mongo.yml&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;该剧本由以下子任务组成：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;mongo_check&lt;/code&gt;   ：检查 mongo 身份参数&lt;/li&gt;
&lt;li&gt;&lt;code&gt;mongo_dbsu&lt;/code&gt;    ：创建操作系统用户 mongod&lt;/li&gt;
&lt;li&gt;&lt;code&gt;mongo_install&lt;/code&gt; ：安装 mongo/ferretdb RPM包&lt;/li&gt;
&lt;li&gt;&lt;code&gt;mongo_purge&lt;/code&gt;   ：清理现有 mongo/ferretdb 集群（默认不执行）&lt;/li&gt;
&lt;li&gt;&lt;code&gt;mongo_config&lt;/code&gt;  ：配置 mongo/ferretdb
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;mongo_cert&lt;/code&gt;    ：签发 mongo/ferretdb SSL证书&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;mongo_launch&lt;/code&gt;  ：启动 mongo/ferretdb 服务&lt;/li&gt;
&lt;li&gt;&lt;code&gt;mongo_register&lt;/code&gt;：将 mongo/ferretdb 注册到 Prometheus 监控中&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;监控&#34;&gt;监控&lt;/h2&gt;
&lt;p&gt;MONGO 模块提供了一个简单的监控面板：Mongo Overview&lt;/p&gt;
&lt;h3 id=&#34;mongo-overview&#34;&gt;Mongo Overview&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://demo.pigsty.cc/d/mongo-overview&#34;&gt;Mongo Overview&lt;/a&gt;: Mongo/FerretDB 集群概览&lt;/p&gt;
&lt;p&gt;这个监控面板提供了关于 FerretDB 的基本监控指标，因为 FerretDB 底层使用了 PostgreSQL，所以更多的监控指标，还请参考 PostgreSQL 监控。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://demo.pigsty.cc/d/mongo-overview&#34;&gt;&lt;img alt=&#34;mongo-overview.jpg&#34; src=&#34;/img/dashboard/mongo-overview.jpg&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;参数&#34;&gt;参数&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;/zh/docs/ferret&#34;&gt;&lt;code&gt;MONGO&lt;/code&gt;&lt;/a&gt; 模块中提供了9个相关的配置参数，如下表所示：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;参数&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;类型&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;级别&lt;/th&gt;
&lt;th&gt;注释&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;mongo_seq&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;int&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;I&lt;/td&gt;
&lt;td&gt;mongo 实例号，必选身份参数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;mongo_cluster&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;string&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;C&lt;/td&gt;
&lt;td&gt;mongo 集群名，必选身份参数&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;mongo_pgurl&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;pgurl&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;C/I&lt;/td&gt;
&lt;td&gt;mongo/ferretdb 底层使用的 PGURL 连接串，必选&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;mongo_ssl_enabled&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;bool&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;C&lt;/td&gt;
&lt;td&gt;mongo/ferretdb 是否启用SSL？默认为 &lt;code&gt;false&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;mongo_listen&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;ip&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;C&lt;/td&gt;
&lt;td&gt;mongo 监听地址，默认留控则监听所有地址&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;mongo_port&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;port&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;C&lt;/td&gt;
&lt;td&gt;mongo 服务端口，默认使用 27017&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;mongo_ssl_port&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;port&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;C&lt;/td&gt;
&lt;td&gt;mongo TLS 监听端口，默认使用 27018&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;mongo_exporter_port&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;port&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;C&lt;/td&gt;
&lt;td&gt;mongo exporter 端口，默认使用 9216&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;mongo_extra_vars&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;string&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;C&lt;/td&gt;
&lt;td&gt;MONGO 服务器额外环境变量，默认为空白字符串&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# mongo_cluster:        #CLUSTER  # mongo cluster name, required identity parameter&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# mongo_seq: 0          #INSTANCE # mongo instance seq number, required identity parameter&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# mongo_pgurl: &amp;#39;postgres:///&amp;#39;     # mongo/ferretdb underlying postgresql url, required&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;mongo_ssl_enabled&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;false&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;          &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# mongo/ferretdb ssl enabled, false by default&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;mongo_listen&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;                  &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# mongo/ferretdb listen address, &amp;#39;&amp;#39; for all addr&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;mongo_port&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;27017&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;                 &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# mongo/ferretdb listen port, 27017 by default&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;mongo_ssl_port&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;27018&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;             &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# mongo/ferretdb tls listen port, 27018 by default&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;mongo_exporter_port&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;9216&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;         &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# mongo/ferretdb exporter port, 9216 by default&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;mongo_extra_vars&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;              &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# extra environment variables for mongo/ferretdb&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
      </description>
    </item>
    
  </channel>
</rss>
