<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="zh" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="canonical" type="text/html" href="/zh/docs/pro/">
<link rel="alternate" type="application/rss&#43;xml" href="/zh/docs/pro/index.xml">
<meta name="robots" content="noindex, nofollow">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>模块：专业/试点 | Pigsty</title>
<meta name="description" content="仅在专业版本中提供的功能模块">
<meta property="og:title" content="模块：专业/试点" />
<meta property="og:description" content="仅在专业版本中提供的功能模块" />
<meta property="og:type" content="website" />
<meta property="og:url" content="/zh/docs/pro/" />

<meta itemprop="name" content="模块：专业/试点">
<meta itemprop="description" content="仅在专业版本中提供的功能模块"><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="模块：专业/试点"/>
<meta name="twitter:description" content="仅在专业版本中提供的功能模块"/>




<link rel="preload" href="/scss/main.min.194607c777ee31a481a26dfc3d1c65134dfc8eb296a0aae9d353b3bd5be6a683.css" as="style">
<link href="/scss/main.min.194607c777ee31a481a26dfc3d1c65134dfc8eb296a0aae9d353b3bd5be6a683.css" rel="stylesheet" integrity="">

<script
  src="/js/jquery-3.6.3.min.js"
  integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ=="
  crossorigin="anonymous"></script>
<script defer
  src="/js/lunr.min.js"
  integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli"
  crossorigin="anonymous"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LG1V9WTKGE"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-LG1V9WTKGE');
}
</script>
  </head>
  <body class="td-section">
    <header>
      <nav class="td-navbar navbar-dark js-navbar-scroll">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/zh/"><span class="navbar-brand__logo navbar-logo"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xl="http://www.w3.org/1999/xlink" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 24 24" width="24" height="24"><defs/><g id="32" fill="none" stroke-dasharray="none" fill-opacity="1" stroke-opacity="1" stroke="none"><title>32</title><g id="32_图层_2"><title>图层 2</title><g id="Group_17"><g id="Graphic_16"/><g id="Graphic_15"><path d="M7.666187 11.971335l2.165064-3.75H14.16138l2.165065 3.75-2.165065 3.75H9.831251z" fill="#bbb" fill-opacity=".9526367"/><path d="M7.666187 11.971335l2.165064-3.75H14.16138l2.165065 3.75-2.165065 3.75H9.831251z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_14"><path d="M7.666187 19.474806l2.165064-3.75H14.16138l2.165065 3.75-2.165065 3.75H9.831251z" fill="#de372c" fill-opacity=".8545852"/><path d="M7.666187 19.474806l2.165064-3.75H14.16138l2.165065 3.75-2.165065 3.75H9.831251z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_13"><path d="M14.161476 15.751202l2.165064-3.75h4.33013l2.165064 3.75-2.165064 3.75H16.32654z" fill="#424242" fill-opacity=".9016462"/><path d="M14.161476 15.751202l2.165064-3.75h4.33013l2.165064 3.75-2.165064 3.75H16.32654z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_12"><path d="M14.161476 8.226008 16.32654 4.4760076h4.33013L22.821734 8.226008l-2.165064 3.75H16.32654z" fill="#ffa269" fill-opacity=".8975772"/><path d="M14.161476 8.226008 16.32654 4.4760076h4.33013L22.821734 8.226008l-2.165064 3.75H16.32654z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_11"><path d="M7.666187 4.5 9.831251.75H14.16138L16.326445 4.5 14.16138 8.25H9.831251z" fill="#419edb" fill-opacity=".8979957"/><path d="M7.666187 4.5 9.831251.75H14.16138L16.326445 4.5 14.16138 8.25H9.831251z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_10"><path d="M1.1491742 8.226008 3.3142388 4.4760076H7.644368L9.809432 8.226008l-2.165064 3.75H3.3142388z" fill="#2f6793" fill-opacity=".9002511"/><path d="M1.1491742 8.226008 3.3142388 4.4760076H7.644368L9.809432 8.226008l-2.165064 3.75H3.3142388z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_9"><path d="M1.182071 15.741036l2.1650645-3.75h4.330129l2.1650645 3.75-2.1650645 3.75H3.3471355z" fill="#53ac79" fill-opacity=".9"/><path d="M1.182071 15.741036l2.1650645-3.75h4.330129l2.1650645 3.75-2.1650645 3.75H3.3471355z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g></g></g></g></svg></span><span class="navbar-brand__name">Pigsty</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link active" href="/zh/docs/"><i class='fa-solid fa-book'></i><span>文档</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/zh/blog/"><i class="fas fa-blog"></i><span>博客</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="https://github.com/Vonng/pigsty/" target="_blank" rel="noopener"><i class='fab fa-github'></i><span>GitHub</span></a>
      </li>
      <li class="nav-item dropdown d-none d-lg-block">
        <div class="dropdown">
  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <i class="fa-solid fa-language"></i>中文</a>
  <ul class="dropdown-menu">
    <li><a class="dropdown-item" href="/docs/pro/">English</a></li>
    </ul>
</div>
</li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/offline-search-index.7f52716eed5c00c4ea3a67d5969ab944.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This is the multi-page printable view of this section.
<a href="#" onclick="print();return false;">Click here to print</a>.
</p><p>
<a href="/zh/docs/pro/">Return to the regular view of this page</a>.
</p>
</div>



<h1 class="title">模块：专业/试点</h1>
<div class="lead">仅在专业版本中提供的功能模块</div>




    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-d4e376db3dab032716f59a614a6943f2">模块：MySQL</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2: <a href="#pg-cbdf66994bf7e3529fb70b0baaaab194">模块：Kafka</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>3: <a href="#pg-093364b86e0d5cfc2fb345296ef803f7">模块：DuckDB</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>4: <a href="#pg-04be65d69c579a181c9ef89ab3d98511">模块：TigerBeetle</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>5: <a href="#pg-f5ba60f3b72df90eeebc1e61990264a1">模块：Kubernetes</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>6: <a href="#pg-d2737a4524ed5b8363b58f3926548df0">模块：Consul</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>7: <a href="#pg-377104ba18e11d3e5c3773edc35be067">模块：Victoria</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>8: <a href="#pg-bfe36ba059ef1cc146fec37ded42bd11">模块：Jupyter</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  

    </ul>


<div class="content">
      
</div>
</div>


  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-d4e376db3dab032716f59a614a6943f2">1 - 模块：MySQL</h1>
    <div class="lead">使用 Pigsty 拉起过气的 MySQL 集群，用于测试，迁移，性能评估等目的。</div>
	<blockquote>
<p><a href="https://mysql.apache.org/">MySQL</a> 曾经是“世界上最流行的开源关系型数据库”。 <a href="/zh/docs/pro/mysql/#安装">安装</a> | <a href="/zh/docs/pro/mysql/#配置">配置</a> | <a href="/zh/docs/pro/mysql/#管理">管理</a> | <a href="/zh/docs/pro/mysql/#剧本">剧本</a> | <a href="/zh/docs/pro/mysql/#监控">监控</a> | <a href="/zh/docs/pro/mysql/#参数">参数</a></p>
</blockquote>
<hr>
<h2 id="概览">概览</h2>
<p>MySQL 模块本身目前仅在 Pigsty 专业版中提供 Beta 试用预览，注意，请不要将这里的 MySQL 用于生产环境。</p>
<hr>
<h2 id="安装">安装</h2>
<p>您可以直接使用以下命令，在 Pigsty 管理的节点上，直接从官方软件源安装 MySQL 8.0 (EL系统)</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># el 7,8,9</span>
</span></span><span style="display:flex;"><span>./node.yml -t node_install -e <span style="color:#4e9a06">&#39;{&#34;node_repo_modules&#34;:&#34;node,mysql&#34;,&#34;node_packages&#34;:[&#34;mysql-community-server,mysql-community-client&#34;]}&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># debian / ubuntu</span>
</span></span><span style="display:flex;"><span>./node.yml -t node_install -e <span style="color:#4e9a06">&#39;{&#34;node_repo_modules&#34;:&#34;node,mysql&#34;,&#34;node_packages&#34;:[&#34;mysql-server&#34;]}&#39;</span>
</span></span></code></pre></div><p>您也可以将 MySQL 软件包加入本地软件源后，使用 MySQL 剧本 <code>mysql.yml</code> 进行生产环境部署。</p>
<hr>
<h2 id="配置">配置</h2>
<p>以下配置片段定义了一个单节点的 MySQL 实例，以及其中的 Database 与 User。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">my-test</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">hosts</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">10.10.10.10</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">mysql_seq: 1, mysql_role</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">primary } }</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">vars</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">mysql_cluster</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">my-test</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">mysql_databases</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">meta }</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">mysql_users</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">name: dbuser_meta    ,host: &#39;%&#39; ,password: &#39;dbuesr_meta&#39;    ,priv</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">&#34;*.*&#34;: </span><span style="color:#4e9a06">&#34;SELECT, UPDATE, DELETE, INSERT&#34;</span><span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">name: dbuser_dba     ,host: &#39;%&#39; ,password: &#39;DBUser.DBA&#39;     ,priv</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">&#34;*.*&#34;: </span><span style="color:#4e9a06">&#34;ALL PRIVILEGES&#34;</span><span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- {<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">name: dbuser_monitor ,host: &#39;%&#39; ,password: &#39;DBUser.Monitor&#39; ,priv</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">&#34;*.*&#34;: </span><span style="color:#4e9a06">&#34;SELECT, PROCESS, REPLICATION CLIENT&#34;</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">} ,connlimit</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">3</span><span style="color:#f8f8f8;text-decoration:underline"> </span>}<span style="color:#f8f8f8;text-decoration:underline">  
</span></span></span></code></pre></div><hr>
<h2 id="管理">管理</h2>
<p>以下是基本的 MySQL 集群基本管理操作：</p>
<p>使用 <code>mysql.yml</code> 创建 MySQL 集群：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>./mysql.yml -l my-test
</span></span></code></pre></div><hr>
<h2 id="剧本">剧本</h2>
<p>Pigsty 提供了一个与 MYSQL 模块相关的剧本，用于部署 MySQL 集群</p>
<ul>
<li><a href="/zh/docs/pro/mysql/#mysqlyml"><code>mysql.yml</code></a>： 根据配置清单部署 MySQL</li>
</ul>
<hr>
<h3 id="mysqlyml"><code>mysql.yml</code></h3>
<p>用于部署 MySQL 模式集群的 <a href="https://github.com/vonng/pigsty/blob/main/mysql.yml"><code>mysql.yml</code></a> 剧本包含以下子任务：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mysql-id       : generate mysql instance identity
</span></span><span style="display:flex;"><span>mysql_clean    : remove existing mysql instance <span style="color:#ce5c00;font-weight:bold">(</span>DANGEROUS<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>mysql_dbsu     : create os user mysql
</span></span><span style="display:flex;"><span>mysql_install  : install mysql rpm/deb packages
</span></span><span style="display:flex;"><span>mysql_dir      : create mysql data <span style="color:#000;font-weight:bold">&amp;</span> conf dir
</span></span><span style="display:flex;"><span>mysql_config   : generate mysql config file
</span></span><span style="display:flex;"><span>mysql_boot     : bootstrap mysql cluster
</span></span><span style="display:flex;"><span>mysql_launch   : launch mysql service
</span></span><span style="display:flex;"><span>mysql_pass     : write mysql password
</span></span><span style="display:flex;"><span>mysql_db       : create mysql biz database
</span></span><span style="display:flex;"><span>mysql_user     : create mysql biz user
</span></span><span style="display:flex;"><span>mysql_exporter : launch mysql exporter
</span></span><span style="display:flex;"><span>mysql_register : register mysql service to prometheus
</span></span></code></pre></div><hr>
<h2 id="监控">监控</h2>
<p>Pigsty 提供了两个与 <a href="/zh/docs/pro/mysql"><code>MYSQL</code></a> 模块有关的监控面板：</p>
<p><a href="https://demo.pigsty.cc/d/mysql-overview">MYSQL Overview</a> 展示了 MySQL 集群的整体监控指标。</p>
<p><a href="https://demo.pigsty.cc/d/mysql-instance">MYSQL Instance</a> 展示了单个 MySQL 实例的监控指标详情</p>
<hr>
<h2 id="参数">参数</h2>
<p>MySQL 的可用配置项：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#-----------------------------------------------------------------</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># MYSQL_IDENTITY</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic">#-----------------------------------------------------------------</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># mysql_cluster:           #CLUSTER  # mysql cluster name, required identity parameter</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># mysql_role: replica      #INSTANCE # mysql role, required, could be primary,replica</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># mysql_seq: 0             #INSTANCE # mysql instance seq number, required identity parameter</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic">#-----------------------------------------------------------------</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># MYSQL_BUSINESS</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic">#-----------------------------------------------------------------</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># mysql business object definition, overwrite in group vars</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">mysql_users</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[]</span><span style="color:#f8f8f8;text-decoration:underline">                      </span><span style="color:#8f5902;font-style:italic"># mysql business users</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">mysql_databases</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[]</span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># mysql business databases</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">mysql_services</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">[]</span><span style="color:#f8f8f8;text-decoration:underline">                   </span><span style="color:#8f5902;font-style:italic"># mysql business services</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># global credentials, overwrite in global vars</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">mysql_root_username</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">root</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">mysql_root_password</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">DBUser.Root</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">mysql_replication_username</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">replicator</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">mysql_replication_password</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">DBUser.Replicator</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">mysql_admin_username</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">dbuser_dba</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">mysql_admin_password</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">DBUser.DBA</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">mysql_monitor_username</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">dbuser_monitor</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">mysql_monitor_password</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">DBUser.Monitor</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic">#-----------------------------------------------------------------</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># MYSQL_INSTALL</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic">#-----------------------------------------------------------------</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># - install - #</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">mysql_dbsu</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">mysql                   </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># os dbsu name, mysql by default, better not change it</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">mysql_dbsu_uid</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">27</span><span style="color:#f8f8f8;text-decoration:underline">                   </span><span style="color:#8f5902;font-style:italic"># os dbsu uid and gid, 306 for default mysql users and groups</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">mysql_dbsu_home</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/var/lib/mysql     </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># mysql home directory, `/var/lib/mysql` by default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">mysql_dbsu_ssh_exchange</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic"># exchange mysql dbsu ssh key among same mysql cluster</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">mysql_packages</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                      </span><span style="color:#8f5902;font-style:italic"># mysql packages to be installed, `mysql-community*` by default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#000">mysql-community*</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#000">mysqld_exporter</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># - bootstrap - #</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">mysql_data</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/data/mysql             </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># mysql data directory, `/data/mysql` by default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">mysql_listen</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;0.0.0.0&#39;</span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#8f5902;font-style:italic"># mysql listen addresses, comma separated IP list</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">mysql_port</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">3306</span><span style="color:#f8f8f8;text-decoration:underline">                     </span><span style="color:#8f5902;font-style:italic"># mysql listen port, 3306 by default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">mysql_sock</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/var/lib/mysql/mysql.sock</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># mysql socket dir, `/var/lib/mysql/mysql.sock` by default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">mysql_pid</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/var/run/mysqld/mysqld.pid</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># mysql pid file, `/var/run/mysqld/mysqld.pid` by default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">mysql_conf</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/etc/my.cnf             </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># mysql config file, `/etc/my.cnf` by default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">mysql_log_dir</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/var/log             </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># mysql log dir, `/var/log/mysql` by default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">mysql_exporter_port</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">9104</span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#8f5902;font-style:italic"># mysqld_exporter listen port, 9104 by default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">mysql_parameters</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{}<span style="color:#f8f8f8;text-decoration:underline">                 </span><span style="color:#8f5902;font-style:italic"># extra parameters for mysqld</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">mysql_default_parameters</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#8f5902;font-style:italic"># default parameters for mysqld</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div>
</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-cbdf66994bf7e3529fb70b0baaaab194">2 - 模块：Kafka</h1>
    <div class="lead">使用 Pigsty 拉起 Kafka Kraft 集群，一个开源的分布式流处理平台。</div>
	<blockquote>
<p><a href="https://kafka.apache.org/">Kafka</a> 是一个开源的分布式流处理平台：<a href="/zh/docs/pro/kafka/#安装">安装</a> | <a href="/zh/docs/pro/kafka/#配置">配置</a> | <a href="/zh/docs/pro/kafka/#管理">管理</a> | <a href="/zh/docs/pro/kafka/#剧本">剧本</a> | <a href="/zh/docs/pro/kafka/#监控">监控</a> | <a href="/zh/docs/pro/kafka/#参数">参数</a> | <a href="/zh/docs/pro/kafka/#资源">资源</a></p>
</blockquote>
<hr>
<h2 id="概览">概览</h2>
<p>Kafka 模块本身目前仅在 Pigsty 专业版中提供 Beta 试用预览。</p>
<hr>
<h2 id="安装">安装</h2>
<p>如果您使用开源版 Pigsty，可以使用以下命令，在指定节点上安装 Kafka 及其 Java 依赖。</p>
<p>Pigsty 在官方 Infra 仓库中提供了 Kafka 3.8.0 的 RPM 与 DEB 安装包，如果需要使用，可以直接下载安装。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>./node.yml -t node_install  -e <span style="color:#4e9a06">&#39;{&#34;node_repo_modules&#34;:&#34;infra&#34;,&#34;node_packages&#34;:[&#34;kafka&#34;]}&#39;</span>
</span></span></code></pre></div><p>Kafka 依赖 Java 运行环境，因此在安装 Kafka 时，需要安装可用的 JDK （默认使用 OpenJDK 17，但其他 JDK 与版本，例如 8，11 都可以使用）</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># EL7 (没有 JDK 17 支持)</span>
</span></span><span style="display:flex;"><span>./node.yml -t node_install  -e <span style="color:#4e9a06">&#39;{&#34;node_repo_modules&#34;:&#34;node&#34;,&#34;node_packages&#34;:[&#34;java-11-openjdk-headless&#34;]}&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># EL8 / EL9 (使用 OpenJDK 17 )</span>
</span></span><span style="display:flex;"><span>./node.yml -t node_install  -e <span style="color:#4e9a06">&#39;{&#34;node_repo_modules&#34;:&#34;node&#34;,&#34;node_packages&#34;:[&#34;java-17-openjdk-headless&#34;]}&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># Debian / Ubuntu (使用 OpenJDK 17)</span>
</span></span><span style="display:flex;"><span>./node.yml -t node_install  -e <span style="color:#4e9a06">&#39;{&#34;node_repo_modules&#34;:&#34;node&#34;,&#34;node_packages&#34;:[&#34;openjdk-17-jdk&#34;]}&#39;</span>
</span></span></code></pre></div><hr>
<h2 id="配置">配置</h2>
<p>单节点 Kafka 配置样例，请注意，在 Pigsty 单机部署模式下，管理节点上的 9093 端口默认已经被 AlertManager 占用。</p>
<p>建议在管理节点上安装 Kafka 时，Peer Poort 使用其他端口，例如（9095）。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">kf-main</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">hosts</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">10.10.10.10</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">kafka_seq: 1, kafka_role</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">controller }</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">vars</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">kafka_cluster</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">kf-main</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">kafka_data</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/data/kafka</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">kafka_peer_port</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">9095</span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#8f5902;font-style:italic"># 9093 is already hold by alertmanager</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>三节点 Kraft 模式 Kafka 集群配置样例：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">kf-test</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">hosts</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">10.10.10.11</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">kafka_seq: 1, kafka_role</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">controller   }</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">10.10.10.12</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">kafka_seq: 2, kafka_role</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">controller   }</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">10.10.10.13</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span>{<span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">kafka_seq: 3, kafka_role</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">controller   }</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">vars</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">kafka_cluster</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">kf-test</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><hr>
<h2 id="管理">管理</h2>
<p>以下是基本的 Kafka 集群基本管理操作：</p>
<p>使用 <code>kafka.yml</code> 创建 Kafka 集群：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>./kafka.yml -l kf-main
</span></span><span style="display:flex;"><span>./kafka.yml -l kf-test
</span></span></code></pre></div><p>创建一个名为 <code>test</code> 的 Topic：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kafka-topics.sh --create --topic <span style="color:#204a87">test</span> --partitions <span style="color:#0000cf;font-weight:bold">1</span> --replication-factor <span style="color:#0000cf;font-weight:bold">1</span> --bootstrap-server localhost:9092
</span></span></code></pre></div><p>这里 <code>--replication-factor 1</code> 表示每个数据只会复制一次，<code>--partitions 1</code> 表示只创建一个分区。</p>
<p>使用以下命令，查看 Kafka 中的 Topic 列表：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kafka-topics.sh --bootstrap-server localhost:9092 --list
</span></span></code></pre></div><p>使用 Kafka 自带的消息生产者，向 <code>test</code> Topic 发送消息：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kafka-console-producer.sh --topic <span style="color:#204a87">test</span> --bootstrap-server localhost:9092
</span></span><span style="display:flex;"><span>&gt;haha
</span></span><span style="display:flex;"><span>&gt;xixi
</span></span><span style="display:flex;"><span>&gt;hoho
</span></span><span style="display:flex;"><span>&gt;hello
</span></span><span style="display:flex;"><span>&gt;world
</span></span><span style="display:flex;"><span>&gt; ^D
</span></span></code></pre></div><p>使用 Kafka 自带的消费者，从 <code>test</code> Topic 中读取消息：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kafka-console-consumer.sh --topic <span style="color:#204a87">test</span> --from-beginning --bootstrap-server localhost:9092
</span></span></code></pre></div><hr>
<h2 id="剧本">剧本</h2>
<p>Pigsty 提供了两个与 KAFKA 模块相关的剧本，分别用于纳管与移除节点。</p>
<ul>
<li><a href="/zh/docs/pro/kafka/#nodeyml"><code>node.yml</code></a>：纳管节点，并调整节点到期望的状态</li>
<li><a href="/zh/docs/pro/kafka/#node-rmyml"><code>node-rm.yml</code></a>：从 pigsty 中移除纳管节点</li>
</ul>
<p>此外， Pigsty 还提供了两个包装命令工具：<code>node-add</code> 与 <code>node-rm</code>，用于快速调用剧本。</p>
<hr>
<h3 id="kafkayml"><code>kafka.yml</code></h3>
<p>用于部署 Kafka KRaft 模式集群的 <a href="https://github.com/Vonng/pigsty/blob/main/node.yml"><code>kafka.yml</code></a> 剧本包含以下子任务：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kafka-id       : generate kafka instance identity
</span></span><span style="display:flex;"><span>kafka_clean    : remove existing kafka instance <span style="color:#ce5c00;font-weight:bold">(</span>DANGEROUS<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>kafka_user     : create os user kafka
</span></span><span style="display:flex;"><span>kafka_pkg      : install kafka rpm/deb packages
</span></span><span style="display:flex;"><span>kafka_link     : create symlink to /usr/kafka
</span></span><span style="display:flex;"><span>kafka_path     : add kafka bin path to /etc/profile.d
</span></span><span style="display:flex;"><span>kafka_svc      : install kafka systemd service
</span></span><span style="display:flex;"><span>kafka_dir      : create kafka data <span style="color:#000;font-weight:bold">&amp;</span> conf dir
</span></span><span style="display:flex;"><span>kafka_config   : generate kafka config file
</span></span><span style="display:flex;"><span>kafka_boot     : bootstrap kafka cluster
</span></span><span style="display:flex;"><span>kafka_launch   : launch kafka service
</span></span><span style="display:flex;"><span>kafka_exporter : launch kafka exporter
</span></span><span style="display:flex;"><span>kafka_register : register kafka service to prometheus
</span></span></code></pre></div><hr>
<h2 id="监控">监控</h2>
<p>Pigsty 提供了两个与 <a href="/zh/docs/pro/kafka"><code>KAFKA</code></a> 模块有关的监控面板：</p>
<p><a href="https://demo.pigsty.cc/d/kafka-overview">KAFKA Overview</a> 展示了 Kafka 集群的整体监控指标。</p>
<p><a href="https://demo.pigsty.cc/d/kafka-instance">KAFKA Instance</a> 展示了单个 Kafka 实例的监控指标详情</p>
<hr>
<h2 id="参数">参数</h2>
<p>Kafka 的可用配置项：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#kafka_cluster:           #CLUSTER  # kafka cluster name, required identity parameter</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic">#kafka_role: controller   #INSTANCE # kafka role, controller, broker, or controller-only</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic">#kafka_seq: 0             #INSTANCE # kafka instance seq number, required identity parameter</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">kafka_clean</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># cleanup kafka during init? false by default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">kafka_data</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/data/kafka            </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># kafka data directory, `/data/kafka` by default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">kafka_version</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">3.8.0</span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#8f5902;font-style:italic"># kafka version string</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">scala_version</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">2.13</span><span style="color:#f8f8f8;text-decoration:underline">                 </span><span style="color:#8f5902;font-style:italic"># kafka binary scala version</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">kafka_port</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">9092</span><span style="color:#f8f8f8;text-decoration:underline">                    </span><span style="color:#8f5902;font-style:italic"># kafka broker listen port</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">kafka_peer_port</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">9093</span><span style="color:#f8f8f8;text-decoration:underline">               </span><span style="color:#8f5902;font-style:italic"># kafka broker peer listen port, 9093 by default (conflict with alertmanager)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">kafka_exporter_port</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">9308</span><span style="color:#f8f8f8;text-decoration:underline">           </span><span style="color:#8f5902;font-style:italic"># kafka exporter listen port, 9308 by default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">kafka_parameters</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                   </span><span style="color:#8f5902;font-style:italic"># kafka parameters to be added to server.properties</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">num.network.threads</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">3</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">num.io.threads</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">8</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">socket.send.buffer.bytes</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">102400</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">socket.receive.buffer.bytes</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">102400</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">socket.request.max.bytes</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">104857600</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">num.partitions</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">num.recovery.threads.per.data.dir</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">offsets.topic.replication.factor</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">transaction.state.log.replication.factor</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">transaction.state.log.min.isr</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">log.retention.hours</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">168</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">log.segment.bytes</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">1073741824</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">log.retention.check.interval.ms</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">300000</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic">#log.retention.bytes: 1073741824</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic">#log.flush.interval.ms: 1000</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic">#log.flush.interval.messages: 10000</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><hr>
<h2 id="资源">资源</h2>
<p>Pigsty 为 PostgreSQL 提供了一些 Kafka 相关的扩展插件：</p>
<ul>
<li><a href="/zh/docs/pgext/fdw/kafka_fdw"><strong><code>kafka_fdw</code></strong></a>，一个有趣的 FDW，允许用户直接从 PostgreSQL 中读写 Kafka Topic 数据</li>
<li><a href="/zh/docs/pgext/etl/wal2json"><strong><code>wal2json</code></strong></a>，用于从 PostgreSQL 中逻辑解码 WAL 日志，生成 JSON 格式的变更数据</li>
<li><a href="/zh/docs/pgext/etl/wal2mongo"><strong><code>wal2mongo</code></strong></a>，用于从 PostgreSQL 中逻辑解码 WAL 日志，生成 BSON 格式的变更数据</li>
<li><a href="/zh/docs/pgext/etl/decoder_raw"><strong><code>decoder_raw</code></strong></a>，用于从 PostgreSQL 中逻辑解码 WAL 日志，生成 SQL 格式的变更数据</li>
<li><a href="/zh/docs/pgext/etl/test_decoding"><strong><code>test_decoding</code></strong></a>，用于从 PostgreSQL 中逻辑解码 WAL 日志，生成 RAW 格式的变更数据</li>
</ul>
<br>
<hr>
<br>
</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-093364b86e0d5cfc2fb345296ef803f7">3 - 模块：DuckDB</h1>
    <div class="lead">使用 Pigsty 安装 DuckDB，一个高性能，嵌入式的分析数据库组件。</div>
	<blockquote>
<p><a href="https://github.com/duckdb/duckdb/">DuckDB</a> 是一个高性能，嵌入式的分析数据库：<a href="/zh/docs/pro/duckdb/#安装">安装</a> | <a href="/zh/docs/pro/duckdb/#资源">资源</a></p>
</blockquote>
<hr>
<h2 id="概览">概览</h2>
<p>DuckDB 是一个嵌入式数据库，所以不需要部署与服务化，只需要在节点上安装 DuckDB 软件包即可使用。</p>
<hr>
<h2 id="安装">安装</h2>
<p>Pigsty 在 Infra 软件仓库中已经提供了 DuckDB 软件包 （RPM / DEB），使用以下命令即可完成安装：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>./node.yml -t node_install  -e <span style="color:#4e9a06">&#39;{&#34;node_repo_modules&#34;:&#34;infra&#34;,&#34;node_packages&#34;:[&#34;duckdb&#34;]}&#39;</span>
</span></span></code></pre></div><hr>
<h2 id="相关资源">相关资源</h2>
<p>Pigsty 为 PostgreSQL 提供了一些 DuckDB 相关的扩展插件：</p>
<ul>
<li><a href="/docs/pgext/olap/pg_analytics"><strong><code>pg_analytics</code></strong></a>，旨在基于 DuckDB 提供高性能 OLAP 分析能力</li>
<li><a href="/zh/docs/pgext/olap/pg_lakehouse"><strong><code>pg_lakehouse</code></strong></a>，由 ParadeDB 出品的数据湖仓插件，封装了 DuckDB。（目前计划重命名回 <code>pg_analytics</code> ）</li>
<li><a href="/zh/docs/pgext/fdw/duckdb_fdw"><strong><code>duckdb_fdw</code></strong></a>，DuckDB 外部数据源包装器，允许从PG中读写 DuckDB 数据文件</li>
<li><a href="/zh/docs/pgext/olap/pg_duckdb"><strong><code>pg_duckdb</code></strong></a>，由 DuckDB 官方 MotherDuck 和 Hydra 出品的扩展插件，WIP （仅在 EL 系统中提供试点）</li>
</ul>
<br>
<hr>
<br>
</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-04be65d69c579a181c9ef89ab3d98511">4 - 模块：TigerBeetle</h1>
    <div class="lead">使用 Pigsty 部署 TigerBeetle，金融会计事务专用数据库。</div>
	<blockquote>
<p><a href="https://tigerbeetle.com/">TigerBeetle</a> 是一个金融会计事务专用数据库，提供了极致性能与可靠性。</p>
</blockquote>
<hr>
<h2 id="概览">概览</h2>
<p>TigerBeetle 模块目前仅在 Pigsty 专业版中提供 <strong>Beta</strong> 试用预览。</p>
<hr>
<h2 id="安装">安装</h2>
<p>Pigsty Infra 仓库中提供了 TigerBeetle 的 RPM / DEB 软件包，使用以下命令即可完成安装：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>./node.yml -t node_install -e <span style="color:#4e9a06">&#39;{&#34;node_repo_modules&#34;:&#34;infra&#34;,&#34;node_packages&#34;:[&#34;tigerbeetle&#34;]}&#39;</span>
</span></span></code></pre></div><p>即可安装，然后请参考官方文档进行配置：https://github.com/tigerbeetle/tigerbeetle</p>


<div class="alert alert-danger" role="alert">
<h4 class="alert-heading">TigerBeetle需要Linux内核5.5以上版本！</h4>

    <p>请注意，TigerBeetle 仅支持 Linux 内核 5.5 或更高版本，因此默认在 EL7 (3.10) / EL8 (4.18) 系统上无法使用。</p>
<p>请使用 EL9 （5.14）， Ubuntu 22.04 (5.15)，或 Debian 12 (6.1) 与 Debian 11 (5.10)，或其他支持的系统来安装 Tiger Beetle</p>


</div>


</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-f5ba60f3b72df90eeebc1e61990264a1">5 - 模块：Kubernetes</h1>
    <div class="lead">使用 Pigsty 安装 Kubernetes，生产级无状态容器调度编排私有云平台</div>
	<p><a href="https://kubernetes.io/">Kubernetes</a> 是生产级无状态容器调度编排私有云平台。</p>
<p>Pigsty 提供了原生的 [<strong><code>ETCD</code></strong>] 集群支持，可以供 Kubernetes 使用，因此也在专业版中提供了 <strong><code>KUBE</code></strong> 模块，用于部署生产级 Kubernetes 集群。</p>
<p>Kubernetes 模块目前仅在 Pigsty Pro 专业版本中提供 Beta 预览，在开源版本中不可用。</p>
<p>但您可以直接在 Pigsty 中指定节点仓库，安装 Kubernetes 软件包，并使用 Pigsty 调整环境配置，置备节点供 K8S 部署使用，解决交付的最后一公里问题。</p>
<hr>
<h2 id="sealos">SealOS</h2>
<p><a href="https://sealos.io/">SealOS</a> 是一个 Kubernetes 发行版，可以用于将整个 Kubernetes 集群打包制作为一个镜像在其他地方使用</p>
<p>Pigsty 在 Infra 仓库中提供了 SealOS 5.0 的 RPM 与 DEB 安装包，可以直接下载安装，并使用 SealOS 管理集群。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>./node.yml -t node_install -e <span style="color:#4e9a06">&#39;{&#34;node_repo_modules&#34;:&#34;infra&#34;,&#34;node_packages&#34;:[&#34;sealos&#34;]}&#39;</span>
</span></span></code></pre></div><hr>
<h2 id="kubernetes">Kubernetes</h2>
<p>如果您更喜欢使用经典的 Kubeadm 来部署 Kubernetes，请参考下面的 KUBE 模块参考。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>./node.yml -t node_install -e <span style="color:#4e9a06">&#39;{&#34;node_repo_modules&#34;:&#34;kube&#34;,&#34;node_packages&#34;:[&#34;kubeadm,kubelet,kubectl&#34;]}&#39;</span>
</span></span></code></pre></div><p>Kubernetes 支持多种容器运行时，要是用 Containerd 容器运行时，请确保节点上已经安装了 Containerd 软件包。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>./node.yml -t node_install -e <span style="color:#4e9a06">&#39;{&#34;node_repo_modules&#34;:&#34;node,docker&#34;,&#34;node_packages&#34;:[&#34;containerd.io&#34;]}&#39;</span>
</span></span></code></pre></div><p>若要使用 Docker 作为容器运行时，您需要安装 Docker ，并使用 <code>cri-dockerd</code> 项目桥接（EL9 / D11 / U20 尚不可用）：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>./node.yml -t node_install -e <span style="color:#4e9a06">&#39;{&#34;node_repo_modules&#34;:&#34;node,infra,docker&#34;,&#34;node_packages&#34;:[&#34;docker-ce,docker-compose-plugin,cri-dockerd&#34;]}&#39;</span>
</span></span></code></pre></div><hr>
<h2 id="剧本">剧本</h2>
<p><code>kube.yml</code> 剧本</p>
<hr>
<h2 id="监控">监控</h2>
<p>TBD</p>
<hr>
<h2 id="参数">参数</h2>
<p>Kubernetes 模块支持以下配置参数</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#kube_cluster:                                          #IDENTITY# # define kubernetes cluster name </span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">kube_role</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">node                                                   </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># default kubernetes role (master|node)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">kube_version</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">1.31.0</span><span style="color:#f8f8f8;text-decoration:underline">                                               </span><span style="color:#8f5902;font-style:italic"># kubernetes version</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">kube_registry</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">registry.aliyuncs.com/google_containers            </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># kubernetes version aliyun k8s miiror repository</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">kube_pod_cidr</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;10.11.0.0/16&#34;</span><span style="color:#f8f8f8;text-decoration:underline">                                      </span><span style="color:#8f5902;font-style:italic"># kubernetes pod network cidr</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">kube_service_cidr</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;10.12.0.0/16&#34;</span><span style="color:#f8f8f8;text-decoration:underline">                                  </span><span style="color:#8f5902;font-style:italic"># kubernetes service network cidr</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">kube_dashboard_admin_user</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">dashboard-admin-sa                     </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># kubernetes dashboard admin user name</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div>
</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-d2737a4524ed5b8363b58f3926548df0">6 - 模块：Consul</h1>
    <div class="lead">使用 Pigsty 安装部署 Consul —— Etcd 的替代品。</div>
	<p>Consul 是一个分布式 DCS + KV + DNS + 服务注册/发现的组件。</p>
<p>在旧版本 （1.x） 的 Pigsty 里，默认使用 Consul 作为高可用的 DCS，现在该支持已经移除，但会在后续重新作为独立模块提供。</p>
<hr>
<h2 id="配置">配置</h2>
<p>要部署 Consul，您需要将所有节点的 IP 地址和主机名添加到 <code>consul</code> 分组中。</p>
<p>您至少需要指定一个节点的 <code>consul_role</code> 为 <code>server</code>，其他节点的 <code>consul_role</code> 默认为 <code>node</code>。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>consul:
</span></span><span style="display:flex;"><span>  hosts:
</span></span><span style="display:flex;"><span>    10.10.10.10: <span style="color:#ce5c00;font-weight:bold">{</span> nodename: meta , consul_role: server <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    10.10.10.11: <span style="color:#ce5c00;font-weight:bold">{</span> nodename: node-1 <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    10.10.10.12: <span style="color:#ce5c00;font-weight:bold">{</span> nodename: node-2 <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    10.10.10.13: <span style="color:#ce5c00;font-weight:bold">{</span> nodename: node-3 <span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>我们建议在严肃生产部署中使用奇数个 Consul Server，三个为宜。</p>
<hr>
<h2 id="参数">参数</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#-----------------------------------------------------------------</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic"># CONSUL</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic">#-----------------------------------------------------------------</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">consul_role</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">node                </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># consul role, node or server, node by default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">consul_dc</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">pigsty                </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># consul data center name, `pigsty` by default</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">consul_data</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/data/consul        </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># consul data dir, `/data/consul`</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">consul_clean</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#8f5902;font-style:italic"># consul purge flag, if true, clean consul during init</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">consul_ui</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># enable consul ui, the default value for consul server is true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div>
</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-377104ba18e11d3e5c3773edc35be067">7 - 模块：Victoria</h1>
    <div class="lead">使用 Pigsty 拉起 VictoriaMetrics 与 VictoriaLogs，Prometheus 与 Loki 的原位上位替代组件。</div>
	<blockquote>
<p><a href="https://victoriametrics.com/">VictoriaMetrics</a> 是 Prometheus 的原地上位替代，提供更好的性能，压缩比。</p>
</blockquote>
<hr>
<h2 id="概览">概览</h2>
<p>Victoria 模块目前仅在 Pigsty 专业版中提供 <strong>Beta</strong> 试用预览。包含了 VictoriaMetrics 与 VictoriaLogs 组件的部署与管理。</p>
<hr>
<h2 id="安装">安装</h2>
<p>Pigsty Infra 仓库中提供了 VictoriaMetrics 的 RPM / DEB 软件包，使用以下命令即可完成安装：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>./node.yml -t node_install -e <span style="color:#4e9a06">&#39;{&#34;node_repo_modules&#34;:&#34;infra&#34;,&#34;node_packages&#34;:[&#34;victoria-metrics&#34;]}&#39;</span>
</span></span><span style="display:flex;"><span>./node.yml -t node_install -e <span style="color:#4e9a06">&#39;{&#34;node_repo_modules&#34;:&#34;infra&#34;,&#34;node_packages&#34;:[&#34;victoria-metrics-cluster&#34;]}&#39;</span>
</span></span><span style="display:flex;"><span>./node.yml -t node_install -e <span style="color:#4e9a06">&#39;{&#34;node_repo_modules&#34;:&#34;infra&#34;,&#34;node_packages&#34;:[&#34;victoria-metrics-utils&#34;]}&#39;</span>
</span></span><span style="display:flex;"><span>./node.yml -t node_install -e <span style="color:#4e9a06">&#39;{&#34;node_repo_modules&#34;:&#34;infra&#34;,&#34;node_packages&#34;:[&#34;victoria-logs&#34;]}&#39;</span>
</span></span></code></pre></div><p>通常普通用户安装单机版 VictoriaMetrics 即可，如果需要集群部署，可以安装 <code>victoria-metrics-cluster</code> 软件包。</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-bfe36ba059ef1cc146fec37ded42bd11">8 - 模块：Jupyter</h1>
    <div class="lead">使用 Pigsty 拉起 JupyterNotebook，搭建开箱即用的数据分析环境。</div>
	<p>Run jupyter notebook with docker, you have to:</p>
<ul>
<li>
<ol>
<li>change the default password in <a href=".env"><code>.env</code></a>: <code>JUPYTER_TOKEN</code></li>
</ol>
</li>
<li>
<ol start="2">
<li>create data dir with proper permission: <code>make dir</code>, owned by <code>1000:100</code></li>
</ol>
</li>
<li>
<ol start="3">
<li><code>make up</code> to pull up jupyter with docker compose</li>
</ol>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#204a87">cd</span> ~/pigsty/app/jupyter <span style="color:#000;font-weight:bold">;</span> make dir up
</span></span></code></pre></div><p>Visit <a href="http://lab.pigsty">http://lab.pigsty</a> or http://10.10.10.10:8888, the default password is <code>pigsty</code></p>
<ul>
<li><a href="http://lab.pigsty?token=pigsty"><code>http://lab.pigsty?token=pigsty</code></a></li>
</ul>
<h2 id="prepare">Prepare</h2>
<p>Create a data directory <code>/data/jupyter</code>, with the default uid &amp; gid <code>1000:100</code>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>make dir   <span style="color:#8f5902;font-style:italic"># mkdir -p /data/jupyter; chown -R 1000:100 /data/jupyter</span>
</span></span></code></pre></div><h2 id="connect-to-postgres">Connect to Postgres</h2>
<p>Use the jupyter terminal to install <code>psycopg2-binary</code> &amp; <code>psycopg2</code> package.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>pip install psycopg2-binary psycopg2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># install with a mirror</span>
</span></span><span style="display:flex;"><span>pip install -i https://pypi.tuna.tsinghua.edu.cn/simple psycopg2-binary psycopg2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>pip install --upgrade pip
</span></span><span style="display:flex;"><span>pip config <span style="color:#204a87">set</span> global.index-url https://pypi.tuna.tsinghua.edu.cn/simple
</span></span></code></pre></div><p>Or installation with <code>conda</code>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/
</span></span><span style="display:flex;"><span>conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/
</span></span><span style="display:flex;"><span>conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge/
</span></span></code></pre></div><p>then use the driver in your notebook</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">psycopg2</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">conn</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">psycopg2</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">connect</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;postgres://dbuser_dba:DBUser.DBA@10.10.10.10:5432/meta&#39;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#000">cursor</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">conn</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">cursor</span><span style="color:#000;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span><span style="color:#000">cursor</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">execute</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;SELECT * FROM pg_stat_activity&#39;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">for</span> <span style="color:#000">i</span> <span style="color:#204a87;font-weight:bold">in</span> <span style="color:#000">cursor</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">fetchall</span><span style="color:#000;font-weight:bold">():</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87">print</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">i</span><span style="color:#000;font-weight:bold">)</span>
</span></span></code></pre></div><h2 id="alias">Alias</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>make up         <span style="color:#8f5902;font-style:italic"># pull up jupyter with docker compose</span>
</span></span><span style="display:flex;"><span>make dir        <span style="color:#8f5902;font-style:italic"># create required /data/jupyter and set owner</span>
</span></span><span style="display:flex;"><span>make run        <span style="color:#8f5902;font-style:italic"># launch jupyter with docker</span>
</span></span><span style="display:flex;"><span>make view       <span style="color:#8f5902;font-style:italic"># print jupyter access point</span>
</span></span><span style="display:flex;"><span>make log        <span style="color:#8f5902;font-style:italic"># tail -f jupyter logs</span>
</span></span><span style="display:flex;"><span>make info       <span style="color:#8f5902;font-style:italic"># introspect jupyter with jq</span>
</span></span><span style="display:flex;"><span>make stop       <span style="color:#8f5902;font-style:italic"># stop jupyter container</span>
</span></span><span style="display:flex;"><span>make clean      <span style="color:#8f5902;font-style:italic"># remove jupyter container</span>
</span></span><span style="display:flex;"><span>make pull       <span style="color:#8f5902;font-style:italic"># pull latest jupyter image</span>
</span></span><span style="display:flex;"><span>make rmi        <span style="color:#8f5902;font-style:italic"># remove jupyter image</span>
</span></span><span style="display:flex;"><span>make save       <span style="color:#8f5902;font-style:italic"># save jupyter image to /tmp/docker/jupyter.tgz</span>
</span></span><span style="display:flex;"><span>make load       <span style="color:#8f5902;font-style:italic"># load jupyter image from /tmp/docker/jupyter.tgz</span>
</span></span></code></pre></div>
</div>



    
      
  
  
  
  

  
  

  

    
	
  



          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Mail" aria-label="Mail">
    <a target="_blank" rel="noopener" href="mailto:rh@vonng.com" aria-label="Mail">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="GitHub" aria-label="GitHub">
    <a target="_blank" rel="noopener" href="https://github.com/Vonng/pigsty" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Twitter" aria-label="Twitter">
    <a target="_blank" rel="noopener" href="https://twitter.com/GobeUncleWang" aria-label="Twitter">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="WeChat" aria-label="WeChat">
    <a target="_blank" rel="noopener" href="/img/pigsty/pigsty-cc.jpg" aria-label="WeChat">
      <i class="fa fa-comment"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Discord" aria-label="Discord">
    <a target="_blank" rel="noopener" href="https://discord.gg/wDzt5VyWEz" aria-label="Discord">
      <i class="fab fa-discord"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Telegram" aria-label="Telegram">
    <a target="_blank" rel="noopener" href="https://t.me/joinchat/gV9zfZraNPM3YjFh" aria-label="Telegram">
      <i class="fab fa-telegram"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        <span class="td-footer__copyright">&copy;
    2018&ndash;2024
    <span class="td-footer__authors">Ruohang Feng</span></span><span class="td-footer__all_rights_reserved">All Rights Reserved</span></span><span class="ms-2"><a href="https://vonng.com/en/" target="_blank" rel="noopener">@Vonng</a></span>
<br><span>Pigsty® distributed under <a href="/docs/about/license" target="_blank" rel="noopener">AGPLv3</a></span>
<br><span class="ms-2"><a href="/docs/about/privacy" target="_blank" rel="noopener">Privacy Policy</a></span>
<span><a href="http://beian.miit.gov.cn/" target="_blank" rel="noopener">浙ICP备15016890号</a></span>
      </div>
    </div>
  </div>
</footer>

    </div>
    <script src="/js/main.min.248655eb216150e39da254c2f7aa5357805d0ec66bdb741b591cd35fb5f629ab.js" integrity="sha256-JIZV6yFhUOOdolTC96pTV4BdDsZr23QbWRzTX7X2Kas=" crossorigin="anonymous"></script>
<script defer src="/js/click-to-copy.min.f724d3de49218995223b7316aa2e53e2b34bf42026bf399ebb21bb02212402d1.js" integrity="sha256-9yTT3kkhiZUiO3MWqi5T4rNL9CAmvzmeuyG7AiEkAtE=" crossorigin="anonymous"></script>
<script src='/js/tabpane-persist.js'></script>

  </body>
</html>
