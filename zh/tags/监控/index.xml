<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Pigsty â€“ ç›‘æ§</title>
    <link>/zh/tags/%E7%9B%91%E6%8E%A7/</link>
    <description>Recent content in ç›‘æ§ on Pigsty</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    <lastBuildDate>Fri, 06 Nov 2020 00:00:00 +0000</lastBuildDate>
    
	  <atom:link href="/zh/tags/%E7%9B%91%E6%8E%A7/index.xml" rel="self" type="application/rss+xml" />
    
    
      
        
      
    
    
    <item>
      <title>Blog: é»„é‡‘ç›‘æ§æŒ‡æ ‡ï¼šé”™è¯¯å»¶è¿Ÿååé¥±å’Œ</title>
      <link>/zh/blog/admin/golden-metrics/</link>
      <pubDate>Fri, 06 Nov 2020 00:00:00 +0000</pubDate>
      
      <guid>/zh/blog/admin/golden-metrics/</guid>
      <description>
        
        
        &lt;hr&gt;
&lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;ç©æ•°æ®åº“å’Œç©è½¦æœ‰ä¸€ä¸ªå…±é€šä¹‹å¤„ï¼Œå°±æ˜¯éƒ½éœ€è¦ç»å¸¸çœ‹ä»ªè¡¨ç›˜ã€‚&lt;/p&gt;
&lt;p&gt;ç›¯ç€ä»ªè¡¨ç›˜å¹²ä»€ä¹ˆï¼Œçœ‹æŒ‡æ ‡ã€‚ä¸ºä»€ä¹ˆçœ‹æŒ‡æ ‡ï¼ŒæŒæ¡å½“å‰è¿è¡ŒçŠ¶æ€æ‰èƒ½æœ‰æ•ˆæ–½åŠ æ§åˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/img/blog/golden-metrics-car.jpeg&#34;&gt;&lt;/p&gt;
&lt;p&gt;è½¦æœ‰å¾ˆå¤šæŒ‡æ ‡ï¼šè½¦é€Ÿï¼Œèƒå‹ï¼Œæ‰­çŸ©ï¼Œåˆ¹è½¦ç‰‡ç£¨æŸï¼Œå„ç§æ¸©åº¦ï¼Œç­‰ç­‰ç­‰ç­‰ï¼Œå„å¼å„æ ·ã€‚&lt;/p&gt;
&lt;p&gt;ä½†äººçš„æ³¨æ„åŠ›ç©ºé—´æœ‰é™ï¼Œä»ªè¡¨ç›˜ä¹Ÿå°±é‚£ä¹ˆå¤§ï¼Œ&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ï¼ŒæŒ‡æ ‡å¯ä»¥åˆ†ä¸¤ç±»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½ ä¼šå»çœ‹çš„&lt;/strong&gt;ï¼š&lt;strong&gt;é»„é‡‘æŒ‡æ ‡ / å…³é”®æŒ‡æ ‡ / æ ¸å¿ƒæŒ‡æ ‡&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½ ä¸ä¼šçœ‹çš„&lt;/strong&gt;ï¼šé»‘åŒ£å­æŒ‡æ ‡ / å†·æŒ‡æ ‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é»„é‡‘æŒ‡æ ‡å°±æ˜¯é‚£å‡ ä¸ªå…³é”®æ€§çš„æ ¸å¿ƒæ•°æ®ï¼Œéœ€è¦æ—¶åˆ»ä¿æŒå…³æ³¨ï¼ˆæˆ–è€…è®©è‡ªåŠ¨é©¾é©¶ç³»ç»Ÿ/æŠ¥è­¦ç³»ç»Ÿæ›¿ä½ æ—¶åˆ»ä¿æŒå…³æ³¨ï¼‰ï¼Œè€Œå†·æŒ‡æ ‡é€šå¸¸åªæœ‰æ•…éšœæ’æŸ¥æ—¶æ‰ä¼šå»çœ‹ï¼Œæ•…éšœæ’æŸ¥ä¸éªŒå°¸è¦æ±‚å°½å¯èƒ½è¿˜åŸç°åœºï¼Œé»‘åŒ£å­æŒ‡æ ‡å¤šå¤šç›Šå–„ã€‚éœ€è¦æ—¶æ²¡æœ‰å°±å¾ˆè®©äººæŠ“ç‹‚&lt;/p&gt;
&lt;p&gt;ä»Šå¤©æˆ‘ä»¬æ¥è¯´è¯´PostgreSQLçš„æ ¸å¿ƒæŒ‡æ ‡ï¼Œæ•°æ®åº“çš„æ ¸å¿ƒæŒ‡æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;æ•°æ®åº“çš„æŒ‡æ ‡&#34;&gt;æ•°æ®åº“çš„æŒ‡æ ‡&lt;/h2&gt;
&lt;p&gt;åœ¨è®²æ•°æ®åº“çš„æ ¸å¿ƒæŒ‡æ ‡ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥ç„ä¸€çœ¼æœ‰å“ªäº›æŒ‡æ ‡ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;avg(count by (ins) ({__name__=~&amp;#34;pg.*&amp;#34;}))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;avg(count by (ins) ({__name__=~&amp;#34;node.*&amp;#34;}))
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;1000å¤šä¸ªpgçš„æŒ‡æ ‡ï¼Œ2000å¤šä¸ªæœºå™¨çš„æŒ‡æ ‡ã€‚&lt;/p&gt;
&lt;p&gt;è¿™äº›æŒ‡æ ‡éƒ½æ˜¯æ•°æ®å®è—ï¼ŒæŒ–æ˜ä¸å¯è§†åŒ–å¯ä»¥æå–å‡ºå…¶ä¸­çš„ä»·å€¼ã€‚&lt;/p&gt;
&lt;p&gt;ä½†å¯¹äºæ—¥å¸¸ç®¡ç†ï¼Œåªéœ€è¦å°‘æ•°å‡ ä¸ªæ ¸å¿ƒæŒ‡æ ‡å°±å¯ä»¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;å¯ç”¨æŒ‡æ ‡åƒåƒä¸‡ï¼Œå“ªäº›æ‰æ˜¯æ ¸å¿ƒæŒ‡æ ‡ï¼Ÿ&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;æ ¸å¿ƒæŒ‡æ ‡&#34;&gt;æ ¸å¿ƒæŒ‡æ ‡&lt;/h2&gt;
&lt;p&gt;æ ¹æ®ç»éªŒå’Œä½¿ç”¨é¢‘åº¦ï¼Œä¸æ–­åœ°åšå‡æ³•ï¼Œå¯ä»¥ç­›é€‰å‡ºä¸€äº›æ ¸å¿ƒæŒ‡æ ‡ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æŒ‡æ ‡&lt;/th&gt;
&lt;th&gt;ç¼©å†™&lt;/th&gt;
&lt;th&gt;å±‚æ¬¡&lt;/th&gt;
&lt;th&gt;æ¥æº&lt;/th&gt;
&lt;th&gt;ç§ç±»&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;é”™è¯¯æ—¥å¿—æ¡æ•°&lt;/td&gt;
&lt;td&gt;Error Count&lt;/td&gt;
&lt;td&gt;SYS/DB/APP&lt;/td&gt;
&lt;td&gt;æ—¥å¿—ç³»ç»Ÿ&lt;/td&gt;
&lt;td&gt;é”™è¯¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¿æ¥æ± æ’é˜Ÿæ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Queue Clients&lt;/td&gt;
&lt;td&gt;DB&lt;/td&gt;
&lt;td&gt;è¿æ¥æ± &lt;/td&gt;
&lt;td&gt;é”™è¯¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®åº“è´Ÿè½½&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;PG Load&lt;/td&gt;
&lt;td&gt;DB&lt;/td&gt;
&lt;td&gt;è¿æ¥æ± &lt;/td&gt;
&lt;td&gt;é¥±å’Œåº¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®åº“é¥±å’Œåº¦&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;PG Saturation&lt;/td&gt;
&lt;td&gt;DB&lt;/td&gt;
&lt;td&gt;è¿æ¥æ± &amp;amp;èŠ‚ç‚¹&lt;/td&gt;
&lt;td&gt;é¥±å’Œåº¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¸»ä»å¤åˆ¶å»¶è¿Ÿ&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Repl Lag&lt;/td&gt;
&lt;td&gt;DB&lt;/td&gt;
&lt;td&gt;æ•°æ®åº“&lt;/td&gt;
&lt;td&gt;å»¶è¿Ÿ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¹³å‡æŸ¥è¯¢å“åº”æ—¶é—´&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Query RT&lt;/td&gt;
&lt;td&gt;DB&lt;/td&gt;
&lt;td&gt;è¿æ¥æ± &lt;/td&gt;
&lt;td&gt;å»¶è¿Ÿ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ´»è·ƒåç«¯è¿›ç¨‹æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Backends&lt;/td&gt;
&lt;td&gt;DB&lt;/td&gt;
&lt;td&gt;æ•°æ®åº“&lt;/td&gt;
&lt;td&gt;é¥±å’Œåº¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ•°æ®åº“å¹´é¾„&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Age&lt;/td&gt;
&lt;td&gt;DB&lt;/td&gt;
&lt;td&gt;æ•°æ®åº“&lt;/td&gt;
&lt;td&gt;é¥±å’Œåº¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ¯ç§’æŸ¥è¯¢æ•°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;QPS&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;APP&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿æ¥æ± &lt;/td&gt;
&lt;td&gt;æµé‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;CPUä½¿ç”¨ç‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;CPU Usage&lt;/td&gt;
&lt;td&gt;SYS&lt;/td&gt;
&lt;td&gt;æœºå™¨èŠ‚ç‚¹&lt;/td&gt;
&lt;td&gt;é¥±å’Œåº¦&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ç´§æ€¥æƒ…å†µä¸‹ï¼šé”™è¯¯æ˜¯å§‹ç»ˆæ˜¯ç¬¬ä¸€ä¼˜å…ˆçº§çš„é»„é‡‘æŒ‡æ ‡ã€‚&lt;/p&gt;
&lt;p&gt;å¸¸è§„æƒ…å†µä¸‹ï¼šåº”ç”¨è§†è§’çš„é»„é‡‘æŒ‡æ ‡ï¼šQPSä¸RT&lt;/p&gt;
&lt;p&gt;å¸¸è§„æƒ…å†µä¸‹ï¼šDBAè§†è§’çš„é»„é‡‘æŒ‡æ ‡ï¼šDBé¥±å’Œåº¦ï¼ˆæ°´ä½ï¼‰&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;ä¸ºä»€ä¹ˆæ˜¯å®ƒä»¬&#34;&gt;ä¸ºä»€ä¹ˆæ˜¯å®ƒä»¬ï¼Ÿ&lt;/h2&gt;
&lt;h3 id=&#34;é”™è¯¯æŒ‡æ ‡&#34;&gt;&lt;strong&gt;é”™è¯¯æŒ‡æ ‡&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;ç¬¬ä¸€ä¼˜å…ˆçº§çš„æŒ‡æ ‡æ°¸è¿œæ˜¯&lt;strong&gt;é”™è¯¯&lt;/strong&gt;ï¼Œé”™è¯¯å¾€å¾€æ˜¯ç›´æ¥é¢å‘ç»ˆç«¯ç”¨æˆ·çš„ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœåªèƒ½é€‰ä¸€ä¸ªæŒ‡æ ‡è¿›è¡Œç›‘æ§ï¼Œé‚£ä¹ˆé€‰&lt;strong&gt;é”™è¯¯æŒ‡æ ‡&lt;/strong&gt;ï¼Œæ¯”å¦‚åº”ç”¨ï¼Œç³»ç»Ÿï¼ŒDBå±‚çš„æ¯ç§’é”™è¯¯æ—¥å¿—æ¡æ•°å¯èƒ½æœ€åˆé€‚ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€è¾†è½¦ï¼Œåªèƒ½é€‰ä¸€ä¸ªä»ªè¡¨ç›˜ä¸Šçš„åŠŸèƒ½ï¼Œä½ ä¼šé€‰ä»€ä¹ˆï¼Ÿ&lt;/p&gt;
&lt;p&gt;é€‰&lt;strong&gt;é”™è¯¯æŒ‡æ ‡&lt;/strong&gt;ï¼Œå°è½¦ä¸åœåªç®¡æ¨ã€‚&lt;/p&gt;
&lt;p&gt;é”™è¯¯ç±»æŒ‡æ ‡éå¸¸é‡è¦ï¼Œç›´æ¥åæ˜ å‡ºç³»ç»Ÿçš„å¼‚å¸¸ï¼Œè­¬å¦‚è¿æ¥æ± æ’é˜Ÿã€‚ä½†é”™è¯¯ç±»æŒ‡æ ‡æœ€å¤§çš„é—®é¢˜å°±æ˜¯ï¼Œå®ƒåªåœ¨å‘Šè­¦æ—¶æœ‰æ„ä¹‰ï¼Œéš¾ä»¥ç”¨äºæ—¥å¸¸çš„æ°´ä½è¯„ä¼°ä¸æ€§èƒ½åˆ†æï¼Œæ­¤å¤–ï¼Œé”™è¯¯ç±»æŒ‡æ ‡ä¹Ÿå¾€å¾€éš¾ä»¥ç²¾ç¡®é‡åŒ–ï¼Œå¾€å¾€åªèƒ½ç»™å‡ºå®šæ€§çš„ç»“æœï¼šæœ‰é—®é¢˜ vs æ²¡é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼Œé”™è¯¯ç±»æŒ‡æ ‡éš¾ä»¥ç²¾ç¡®é‡åŒ–ã€‚æˆ‘ä»¬åªèƒ½è¯´ï¼šå½“è¿æ¥æ± å‡ºç°æ’é˜Ÿæ—¶ï¼Œæ•°æ®åº“è´Ÿè½½æ¯”è¾ƒå¤§ï¼›é˜Ÿåˆ—è¶Šé•¿ï¼Œè´Ÿè½½è¶Šå¤§ï¼›æ²¡æœ‰æ’é˜Ÿæ—¶ï¼Œæ•°æ®åº“è´Ÿè½½ä¸æ€ä¹ˆå¤§ï¼Œä»…æ­¤è€Œå·²ã€‚å¯¹äºæ—¥å¸¸ä½¿ç”¨ç®¡ç†æ¥è¯´ï¼Œè¿™æ ·çš„èƒ½åŠ›è‚¯å®šä¹Ÿæ˜¯ä¸å¤Ÿçš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å®šæŒ‡æ ‡ï¼Œåšç›‘æ§æŠ¥è­¦ç³»ç»Ÿçš„ä¸€ä¸ªé‡è¦åŸå› å°±æ˜¯ç”¨äºé¢„é˜²ç³»ç»Ÿè¿‡è½½ï¼Œå¦‚æœç³»ç»Ÿå·²ç»è¿‡è½½å¤§é‡æŠ¥é”™ï¼Œé‚£ä¹ˆä½¿ç”¨é”™è¯¯ç°è±¡åè¿‡æ¥å®šä¹‰é¥±å’Œåº¦æ˜¯æ²¡æœ‰æ„ä¹‰çš„&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æŒ‡æ ‡çš„ç›®çš„ï¼Œæ˜¯ä¸ºäº†è¡¡é‡ç³»ç»Ÿçš„è¿è¡ŒçŠ¶æ€ã€‚ï¼Œæˆ‘ä»¬è¿˜ä¼šå…³æ³¨ç³»ç»Ÿå…¶ä»–æ–¹é¢çš„èƒ½åŠ›ï¼šååé‡/æµé‡ï¼Œå“åº”æ—¶é—´/å»¶è¿Ÿï¼Œé¥±å’Œåº¦/åˆ©ç”¨ç‡/æ°´ä½çº¿ã€‚è¿™ä¸‰è€…åˆ†åˆ«ä»£è¡¨ç³»ç»Ÿçš„èƒ½åŠ›ï¼ŒæœåŠ¡è´¨é‡ï¼Œè´Ÿè½½æ°´å¹³ã€‚&lt;/p&gt;
&lt;p&gt;å…³æ³¨ç‚¹ä¸åŒï¼Œåç«¯ï¼ˆæ•°æ®åº“ç”¨æˆ·ï¼‰å…³æ³¨ç³»ç»Ÿèƒ½åŠ›ä¸æœåŠ¡è´¨é‡ï¼ŒDBAï¼ˆæ•°æ®åº“ç®¡ç†è€…ï¼‰æ›´å…³æ³¨ç³»ç»Ÿçš„è´Ÿè½½æ°´å¹³ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æµé‡æŒ‡æ ‡&#34;&gt;&lt;strong&gt;æµé‡æŒ‡æ ‡&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;æµé‡ç±»çš„æŒ‡æ ‡å¾ˆæœ‰æ½œåŠ›ï¼Œç‰¹åˆ«æ˜¯QPSï¼ŒTPSè¿™æ ·çš„æŒ‡æ ‡ç›¸å½“å…·æœ‰ä»£è¡¨æ€§ã€‚&lt;/p&gt;
&lt;p&gt;æµé‡æŒ‡æ ‡å¯ä»¥ç›´æ¥è¡¡é‡ç³»ç»Ÿçš„èƒ½åŠ›ï¼Œè­¬å¦‚æ¯ç§’å¤„ç†å¤šå°‘ç¬”è®¢å•ï¼Œæ¯ç§’å¤„ç†çš„å¤šå°‘ä¸ªè¯·æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è½¦é€Ÿè®¡æœ‰å¼‚æ›²åŒå·¥ä¹‹å¦™ï¼Œé«˜é€Ÿé™é€Ÿï¼ŒåŸå¸‚é™é€Ÿã€‚ç¯å¢ƒï¼Œè´Ÿè½½ã€‚&lt;/p&gt;
&lt;p&gt;ä½†åƒTPS QPSè¿™æ ·æµé‡ä¹Ÿå­˜åœ¨é—®é¢˜ã€‚ä¸€ä¸ªæ•°æ®åº“å®ä¾‹ä¸Šçš„æŸ¥è¯¢å¾€å¾€æ˜¯äº”èŠ±å…«é—¨å„å¼å„æ ·çš„ï¼Œä¸€ä¸ªè€—æ—¶10å¾®ç§’çš„æŸ¥è¯¢å’Œä¸€ä¸ª10ç§’çš„æŸ¥è¯¢åœ¨ç»Ÿè®¡æ—¶éƒ½è¢«ç®—ä¸ºä¸€ä¸ªQï¼Œ&lt;strong&gt;ç±»ä¼¼äºQPSè¿™æ ·çš„æŒ‡æ ‡æ— æ³•è¿›è¡Œæ¨ªå‘æ¯”è¾ƒï¼Œåªæœ‰æ¯”è¾ƒç²—ç•¥çš„å‚è€ƒæ„ä¹‰&lt;/strong&gt;ï¼Œç”šè‡³å½“æŸ¥è¯¢ç±»å‹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œéƒ½æ— æ³•å’Œè‡ªå·±çš„å†å²æ•°æ®è¿›è¡Œçºµå‘æ¯”è¾ƒã€‚æ­¤å¤–ä¹Ÿå¾ˆéš¾é’ˆå¯¹QPSã€TPSè¿™æ ·çš„æŒ‡æ ‡è®¾ç½®åˆ©ç”¨ç‡ç›®æ ‡ï¼ŒåŒä¸€ä¸ªæ•°æ®åº“æ‰§è¡Œ&lt;code&gt;SELECT 1&lt;/code&gt;å¯ä»¥æ‰“åˆ°å‡ åä¸‡çš„QPSï¼Œä½†æ‰§è¡Œå¤æ‚SQLæ—¶å¯èƒ½å°±åªèƒ½æ‰“åˆ°å‡ åƒçš„QPSã€‚ä¸åŒè´Ÿè½½ç±»å‹å’Œæœºå™¨ç¡¬ä»¶ä¼šå¯¹æ•°æ®åº“çš„QPSä¸Šé™äº§ç”Ÿæ˜¾è‘—å½±å“ï¼Œåªæœ‰å½“ä¸€ä¸ªæ•°æ®åº“ä¸Šçš„æŸ¥è¯¢éƒ½æ˜¯é«˜åº¦å•ä¸€åŒè´¨ä¸”æ²¡æœ‰å¤æ‚å˜åŒ–çš„æ¡ä»¶ä¸‹ï¼ŒQPSæ‰æœ‰å‚è€ƒæ„ä¹‰ï¼Œåœ¨è¿™ç§è‹›åˆ»æ¡ä»¶ä¸‹å€’æ˜¯å¯ä»¥é€šè¿‡å‹åŠ›æµ‹è¯•è®¾å®šä¸€ä¸ªQPSçš„æ°´ä½ç›®æ ‡ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å»¶è¿ŸæŒ‡æ ‡&#34;&gt;&lt;strong&gt;å»¶è¿ŸæŒ‡æ ‡&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;ä¸æ¡£ä½ç±»ä¼¼ï¼ŒæŸ¥è¯¢æ…¢ï¼Œæ¡£ä½ä½ï¼Œè½¦é€Ÿæ…¢ã€‚æŸ¥è¯¢æ¡£æ¬¡ä½ï¼ŒTPSæ°´ä½ä½ã€‚æŸ¥è¯¢æ¡£æ¬¡é«˜ï¼ŒTPSæ°´ä½é«˜&lt;/p&gt;
&lt;p&gt;å»¶è¿Ÿé€‚åˆè¡¡é‡ç³»ç»Ÿçš„æœåŠ¡è´¨é‡ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”èµ·QPS/TPSï¼ŒRTï¼ˆå“åº”æ—¶é—´ Response Timeï¼‰è¿™æ ·çš„æŒ‡æ ‡åè€Œæ›´å…·æœ‰å‚è€ƒä»·å€¼ã€‚å› ä¸ºå“åº”æ—¶é—´å¢åŠ å¾€å¾€æ˜¯ç³»ç»Ÿé¥±å’Œçš„å‰å…†ã€‚æ ¹æ®ç»éªŒæ³•åˆ™ï¼Œæ•°æ®åº“çš„è´Ÿè½½è¶Šå¤§ï¼ŒæŸ¥è¯¢ä¸äº‹åŠ¡çš„å¹³å‡å“åº”æ—¶é—´ä¹Ÿä¼šè¶Šé«˜ã€‚RTç›¸æ¯”QPSçš„ä¸€ä¸ªä¼˜åŠ¿æ˜¯**ï¼ŒRTæ˜¯å¯ä»¥è®¾ç½®ä¸€ä¸ªåˆ©ç”¨ç‡ç›®æ ‡çš„**ï¼Œæ¯”å¦‚å¯ä»¥ä¸ºRTè®¾å®šä¸€ä¸ªç»å¯¹é˜ˆå€¼ï¼šä¸å…è®¸ç”Ÿäº§OLTPåº“ä¸Šå‡ºç°RTè¶…è¿‡1msçš„æ…¢æŸ¥è¯¢ã€‚ä½†QPSè¿™æ ·çš„æŒ‡æ ‡å°±å¾ˆéš¾ç”»å‡ºçº¢çº¿æ¥ã€‚ä¸è¿‡ï¼ŒRTä¹Ÿæœ‰è‡ªå·±çš„é—®é¢˜ã€‚ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯å®ƒä¾ç„¶æ˜¯å®šæ€§è€Œéå®šé‡çš„ï¼Œå»¶è¿Ÿå¢åŠ åªæ˜¯ç³»ç»Ÿé¥±å’Œçš„é¢„è­¦ï¼Œä½†æ²¡æ³•ç”¨æ¥ç²¾ç¡®è¡¡é‡ç³»ç»Ÿçš„é¥±å’Œåº¦ã€‚ç¬¬äºŒä¸ªé—®é¢˜é€šå¸¸èƒ½ä»æ•°æ®åº“ä¸ä¸­é—´ä»¶è·å–åˆ°çš„RTç»Ÿè®¡æŒ‡æ ‡éƒ½æ˜¯å¹³å‡å€¼ï¼Œä½†çœŸæ­£èµ·åˆ°é¢„è­¦æ•ˆæœçš„æœ‰å¯èƒ½æ˜¯è¯¸å¦‚P99ï¼ŒP999è¿™æ ·çš„ç»Ÿè®¡é‡ã€‚&lt;/p&gt;
&lt;h3 id=&#34;é¥±å’Œåº¦æŒ‡æ ‡&#34;&gt;&lt;strong&gt;é¥±å’Œåº¦æŒ‡æ ‡&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;é¥±å’Œåº¦æŒ‡æ ‡ç±»ä¼¼æ±½è½¦çš„å‘åŠ¨æœºè½¬é€Ÿè¡¨ï¼Œæ²¹é‡è¡¨ï¼Œæ°´æ¸©è¡¨ã€‚&lt;/p&gt;
&lt;p&gt;é¥±å’Œåº¦æŒ‡æ ‡é€‚åˆè¡¡é‡ç³»ç»Ÿçš„è´Ÿè½½&lt;/p&gt;
&lt;p&gt;å³ç”¨æˆ·æœŸå¾…çš„è´Ÿè½½æŒ‡æ ‡æ˜¯ä¸€ä¸ª&lt;strong&gt;é¥±å’Œåº¦ï¼ˆSaturationï¼‰&lt;strong&gt;æŒ‡æ ‡ï¼Œæ‰€è°“é¥±å’Œåº¦ï¼Œå³æœåŠ¡å®¹é‡æœ‰å¤šâ€æ»¡â€œï¼Œé€šå¸¸æ˜¯ç³»ç»Ÿä¸­ç›®å‰æœ€ä¸ºå—é™çš„æŸç§èµ„æºçš„æŸä¸ªå…·ä½“æŒ‡æ ‡çš„åº¦é‡ã€‚é€šå¸¸æ¥è¯´ï¼Œ0%çš„é¥±å’Œåº¦æ„å‘³ç€ç³»ç»Ÿå®Œå…¨ç©ºé—²ï¼Œ100%çš„é¥±å’Œåº¦æ„å‘³ç€æ»¡è½½ï¼Œç³»ç»Ÿåœ¨è¾¾åˆ°100%åˆ©ç”¨ç‡å‰å°±ä¼šå‡ºç°æ€§èƒ½çš„ä¸¥é‡ä¸‹é™ï¼Œå› æ­¤è®¾å®šæŒ‡æ ‡æ—¶è¿˜éœ€è¦åŒ…æ‹¬ä¸€ä¸ª&lt;/strong&gt;åˆ©ç”¨ç‡ç›®æ ‡&lt;/strong&gt;ï¼Œæˆ–è€…è¯´&lt;strong&gt;æ°´ä½çº¢çº¿ã€é»„çº¿&lt;/strong&gt;ï¼Œå½“ç³»ç»Ÿç¬æ—¶è´Ÿè½½è¶…è¿‡çº¢çº¿æ—¶åº”å½“è§¦å‘å‘Šè­¦ï¼Œé•¿æœŸè´Ÿè½½è¶…è¿‡é»„çº¿æ—¶åº”å½“è¿›è¡Œæ‰©å®¹ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;å…¶ä»–å¯é€‰æŒ‡æ ‡&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;æ¯ç§’äº‹åŠ¡æ•°&lt;/td&gt;
&lt;td&gt;TPS&lt;/td&gt;
&lt;td&gt;APP&lt;/td&gt;
&lt;td&gt;è¿æ¥æ± &lt;/td&gt;
&lt;td&gt;æµé‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ç£ç›˜IOä½¿ç”¨ç‡&lt;/td&gt;
&lt;td&gt;Disk Usage&lt;/td&gt;
&lt;td&gt;SYS&lt;/td&gt;
&lt;td&gt;æœºå™¨èŠ‚ç‚¹&lt;/td&gt;
&lt;td&gt;é¥±å’Œåº¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å†…å­˜ä½¿ç”¨ç‡&lt;/td&gt;
&lt;td&gt;Mem Usage&lt;/td&gt;
&lt;td&gt;SYS&lt;/td&gt;
&lt;td&gt;æœºå™¨èŠ‚ç‚¹&lt;/td&gt;
&lt;td&gt;é¥±å’Œåº¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ç½‘å¡å¸¦å®½ä½¿ç”¨ç‡&lt;/td&gt;
&lt;td&gt;Net Usage&lt;/td&gt;
&lt;td&gt;SYS&lt;/td&gt;
&lt;td&gt;æœºå™¨èŠ‚ç‚¹&lt;/td&gt;
&lt;td&gt;é¥±å’Œåº¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;TCPé”™è¯¯ï¼šæº¢å‡ºé‡ä¼ ç­‰&lt;/td&gt;
&lt;td&gt;TCP ERROR&lt;/td&gt;
&lt;td&gt;SYS&lt;/td&gt;
&lt;td&gt;æœºå™¨èŠ‚ç‚¹&lt;/td&gt;
&lt;td&gt;é”™è¯¯&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

      </description>
    </item>
    
    <item>
      <title>Blog: PostgreSQLçš„KPI</title>
      <link>/zh/blog/admin/pg-load/</link>
      <pubDate>Fri, 29 May 2020 00:00:00 +0000</pubDate>
      
      <guid>/zh/blog/admin/pg-load/</guid>
      <description>
        
        
        &lt;p&gt;ç®¡æ•°æ®åº“å’Œç®¡äººå·®ä¸å¤šï¼Œéƒ½éœ€è¦å®šKPIï¼ˆå…³é”®æ€§èƒ½æŒ‡æ ‡ï¼‰ã€‚é‚£ä¹ˆæ•°æ®åº“çš„KPIæ˜¯ä»€ä¹ˆï¼Ÿæœ¬æ–‡ä»‹ç»äº†ä¸€ç§è¡¡é‡PostgreSQLè´Ÿè½½çš„æ–¹å¼ï¼šä½¿ç”¨ä¸€ç§å•ä¸€æ¨ªå‘å¯æ¯”ï¼Œä¸è´Ÿè½½ç±»å‹å’Œæœºå™¨ç±»å‹åŸºæœ¬æ— å…³çš„æŒ‡æ ‡ï¼Œåæ›°&lt;strong&gt;PG Loadï¼ˆPGè´Ÿè½½ï¼‰&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;0x01-introduction&#34;&gt;0x01 Introduction&lt;/h2&gt;
&lt;p&gt;åœ¨ç°å®ç”Ÿäº§ä¸­ï¼Œç»å¸¸ä¼šæœ‰è¡¡é‡æ•°æ®åº“æ€§èƒ½ä¸è´Ÿè½½ï¼Œè¯„ä¼°æ•°æ®åº“æ°´ä½çš„éœ€æ±‚ã€‚ä¸€ç§æœ€æœ´ç´ çš„å½¢å¼å°±æ˜¯ï¼Œèƒ½ä¸èƒ½æœ‰ä¸€ä¸ªç±»ä¼¼äºKPIçš„å•ä¸€æŒ‡æ ‡ï¼Œèƒ½ç›´æ¥äº†å½“åœ°å‘Šè¯‰ç”¨æˆ·ä»–å¿ƒçˆ±çš„æ•°æ®åº“è´Ÿè½½æœ‰æ²¡æœ‰è¶…è¿‡è­¦æˆ’çº¿ï¼Ÿå·¥ä½œé‡åˆ°åº•é¥±å’Œä¸é¥±å’Œï¼Ÿ&lt;/p&gt;
&lt;p&gt;å½“ç„¶è¿™é‡Œå…¶å®éšå«ç€ä¸€ä¸ªé‡è¦ä¿¡æ¯ï¼Œå³ç”¨æˆ·æœŸå¾…çš„è´Ÿè½½æŒ‡æ ‡æ˜¯ä¸€ä¸ª&lt;strong&gt;é¥±å’Œåº¦ï¼ˆSaturationï¼‰&lt;strong&gt;æŒ‡æ ‡ï¼Œæ‰€è°“é¥±å’Œåº¦ï¼Œå³æœåŠ¡å®¹é‡æœ‰å¤šâ€æ»¡â€œï¼Œé€šå¸¸æ˜¯ç³»ç»Ÿä¸­ç›®å‰æœ€ä¸ºå—é™çš„æŸç§èµ„æºçš„æŸä¸ªå…·ä½“æŒ‡æ ‡çš„åº¦é‡ã€‚é€šå¸¸æ¥è¯´ï¼Œ0%çš„é¥±å’Œåº¦æ„å‘³ç€ç³»ç»Ÿå®Œå…¨ç©ºé—²ï¼Œ100%çš„é¥±å’Œåº¦æ„å‘³ç€æ»¡è½½ï¼Œç³»ç»Ÿåœ¨è¾¾åˆ°100%åˆ©ç”¨ç‡å‰å°±ä¼šå‡ºç°æ€§èƒ½çš„ä¸¥é‡ä¸‹é™ï¼Œå› æ­¤è®¾å®šæŒ‡æ ‡æ—¶è¿˜éœ€è¦åŒ…æ‹¬ä¸€ä¸ª&lt;/strong&gt;åˆ©ç”¨ç‡ç›®æ ‡&lt;/strong&gt;ï¼Œæˆ–è€…è¯´&lt;strong&gt;æ°´ä½çº¢çº¿ã€é»„çº¿&lt;/strong&gt;ï¼Œå½“ç³»ç»Ÿç¬æ—¶è´Ÿè½½è¶…è¿‡çº¢çº¿æ—¶åº”å½“è§¦å‘å‘Šè­¦ï¼Œé•¿æœŸè´Ÿè½½è¶…è¿‡é»„çº¿æ—¶åº”å½“è¿›è¡Œæ‰©å®¹ã€‚&lt;/p&gt;
&lt;p&gt;ä¸å¹¸çš„æ˜¯ï¼Œå®šä¹‰ç³»ç»Ÿæœ‰å¤šâ€é¥±å’Œâ€œå¹¶ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹æƒ…ï¼Œå¾€å¾€éœ€è¦å€ŸåŠ©æŸäº›é—´æ¥æŒ‡æ ‡ã€‚è¯„ä¼°ä¸€ä¸ªæ•°æ®åº“çš„è´Ÿè½½ç¨‹åº¦ï¼Œä¼ ç»Ÿä¸Šé€šå¸¸ä¼šåŸºäºè¿™æ ·å‡ ç±»æŒ‡æ ‡è¿›è¡Œç»¼åˆè¯„ä¼°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æµé‡ï¼šæ¯ç§’æŸ¥è¯¢æ•°é‡QPSï¼Œæˆ–æ¯ç§’äº‹åŠ¡æ•°é‡TPSã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å»¶è¿Ÿï¼šæŸ¥è¯¢å¹³å‡å“åº”æ—¶é—´ Query RTï¼Œæˆ–äº‹åŠ¡å¹³å‡å“åº”æ—¶é—´Xact RT&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é¥±å’Œåº¦ï¼šæœºå™¨è´Ÿè½½ï¼ˆLoadï¼‰ï¼ŒCPUä½¿ç”¨ç‡ï¼Œç£ç›˜è¯»å†™å¸¦å®½é¥±å’Œåº¦ï¼Œç½‘å¡IOå¸¦å®½é¥±å’Œåº¦&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é”™è¯¯ï¼šæ•°æ®åº“å®¢æˆ·ç«¯è¿æ¥æ’é˜Ÿ&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™äº›æŒ‡æ ‡å¯¹äºæ•°æ®åº“æ€§èƒ½è¯„ä¼°éƒ½å¾ˆæœ‰å‚è€ƒæ„ä¹‰ï¼Œä½†å®ƒä»¬ä¹Ÿéƒ½å­˜åœ¨å„å¼å„æ ·çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;0x02-å¸¸ç”¨è¯„ä¼°æŒ‡æ ‡çš„é—®é¢˜&#34;&gt;0x02 å¸¸ç”¨è¯„ä¼°æŒ‡æ ‡çš„é—®é¢˜&lt;/h2&gt;
&lt;p&gt;è®©æˆ‘ä»¬æ¥çœ‹ä¸€çœ‹ï¼Œè¿™äº›ç°æœ‰çš„å¸¸ç”¨æŒ‡æ ‡éƒ½æœ‰å“ªäº›é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€ä¸ªPassçš„å½“ç„¶æ˜¯é”™è¯¯ç±»æŒ‡æ ‡ï¼Œè­¬å¦‚è¿æ¥æ± æ’é˜Ÿã€‚é”™è¯¯ç±»æŒ‡æ ‡æœ€å¤§çš„é—®é¢˜å°±æ˜¯ï¼Œå½“é”™è¯¯å‡ºç°æ—¶ï¼Œé¥±å’Œåº¦å¯èƒ½å·²ç»æ²¡æœ‰æ„ä¹‰äº†ã€‚&lt;strong&gt;è¯„ä¼°é¥±å’Œåº¦çš„ä¸€ä¸ªé‡è¦åŸå› å°±æ˜¯ç”¨äºé¢„é˜²ç³»ç»Ÿè¿‡è½½ï¼Œå¦‚æœç³»ç»Ÿå·²ç»è¿‡è½½å¤§é‡æŠ¥é”™ï¼Œé‚£ä¹ˆä½¿ç”¨é”™è¯¯ç°è±¡åè¿‡æ¥å®šä¹‰é¥±å’Œåº¦æ˜¯æ²¡æœ‰æ„ä¹‰çš„&lt;/strong&gt;ã€‚æ­¤å¤–ï¼Œé”™è¯¯ç±»æŒ‡æ ‡éš¾ä»¥ç²¾ç¡®é‡åŒ–ã€‚æˆ‘ä»¬åªèƒ½è¯´ï¼šå½“è¿æ¥æ± å‡ºç°æ’é˜Ÿæ—¶ï¼Œæ•°æ®åº“è´Ÿè½½æ¯”è¾ƒå¤§ï¼›é˜Ÿåˆ—è¶Šé•¿ï¼Œè´Ÿè½½è¶Šå¤§ï¼›æ²¡æœ‰æ’é˜Ÿæ—¶ï¼Œæ•°æ®åº“è´Ÿè½½ä¸æ€ä¹ˆå¤§ï¼Œä»…æ­¤è€Œå·²ã€‚è¿™æ ·çš„å®šä¹‰å½“ç„¶ä¹Ÿæ— æ³•è®©äººæ»¡æ„ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬äºŒä¸ªPassçš„åˆ™æ˜¯ç³»ç»Ÿå±‚ï¼ˆæœºå™¨çº§åˆ«ï¼‰æŒ‡æ ‡ï¼Œæ•°æ®åº“è¿è¡Œåœ¨æœºå™¨ä¸Šï¼ŒCPUä½¿ç”¨ç‡ï¼ŒIOä½¿ç”¨ç‡è¿™æ ·çš„æŒ‡æ ‡ä¸æ•°æ®åº“è´Ÿè½½ç¨‹åº¦å¯†åˆ‡ç›¸å…³ï¼Œ&lt;strong&gt;å¦‚æœCPUå’ŒIOæ˜¯ç“¶é¢ˆï¼Œç†è®ºä¸Šå½“ç„¶æ˜¯å¯ä»¥ç›´æ¥ä½¿ç”¨ç“¶é¢ˆèµ„æºçš„é¥±å’Œåº¦æŒ‡æ ‡&lt;/strong&gt;ä½œä¸ºæ•°æ®åº“çš„é¥±å’ŒæŒ‡æ ‡ï¼Œä½†è¿™ä¸€ç‚¹å¹¶éæ€»æ˜¯æˆç«‹çš„ï¼Œæœ‰å¯èƒ½ç³»ç»Ÿç“¶é¢ˆåœ¨äºæ•°æ®åº“æœ¬èº«ã€‚è€Œä¸”ä¸¥æ ¼æ¥è¯´å®ƒä»¬æ˜¯æœºå™¨çš„KPIè€Œä¸æ˜¯DBçš„KPIï¼Œ&lt;strong&gt;è¯„ä¼°æ•°æ®åº“è´Ÿè½½æ—¶å½“ç„¶å¯ä»¥å‚ç…§ç³»ç»Ÿå±‚çš„æŒ‡æ ‡ï¼Œä½†DBå±‚ä¹Ÿåº”è¯¥æœ‰æœ¬å±‚çš„è¯„ä¼°æŒ‡æ ‡&lt;/strong&gt;ã€‚è¦å…ˆæœ‰æ•°æ®åº“æœ¬èº«çš„é¥±å’Œåº¦æŒ‡æ ‡ï¼Œæ‰å¯ä»¥å»æ¯”è¾ƒåº•å±‚èµ„æºå’Œæ•°æ®åº“æœ¬èº«åˆ°åº•è°å…ˆé¥±å’Œè°æ˜¯ç“¶é¢ˆã€‚è¿™æ¡åŸåˆ™åŒæ ·é€‚ç”¨äºåº”ç”¨å±‚è§‚å¯Ÿåˆ°çš„æŒ‡æ ‡ã€‚&lt;/p&gt;
&lt;p&gt;æµé‡ç±»çš„æŒ‡æ ‡å¾ˆæœ‰æ½œåŠ›ï¼Œç‰¹åˆ«æ˜¯QPSï¼ŒTPSè¿™æ ·çš„æŒ‡æ ‡ç›¸å½“å…·æœ‰ä»£è¡¨æ€§ã€‚ä½†è¿™äº›æŒ‡æ ‡ä¹Ÿå­˜åœ¨é—®é¢˜ã€‚ä¸€ä¸ªæ•°æ®åº“å®ä¾‹ä¸Šçš„æŸ¥è¯¢å¾€å¾€æ˜¯äº”èŠ±å…«é—¨å„å¼å„æ ·çš„ï¼Œä¸€ä¸ªè€—æ—¶10å¾®ç§’çš„æŸ¥è¯¢å’Œä¸€ä¸ª10ç§’çš„æŸ¥è¯¢åœ¨ç»Ÿè®¡æ—¶éƒ½è¢«ç®—ä¸ºä¸€ä¸ªQï¼Œ&lt;strong&gt;ç±»ä¼¼äºQPSè¿™æ ·çš„æŒ‡æ ‡æ— æ³•è¿›è¡Œæ¨ªå‘æ¯”è¾ƒï¼Œåªæœ‰æ¯”è¾ƒç²—ç•¥çš„å‚è€ƒæ„ä¹‰&lt;/strong&gt;ï¼Œç”šè‡³å½“æŸ¥è¯¢ç±»å‹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œéƒ½æ— æ³•å’Œè‡ªå·±çš„å†å²æ•°æ®è¿›è¡Œçºµå‘æ¯”è¾ƒã€‚æ­¤å¤–ä¹Ÿå¾ˆéš¾é’ˆå¯¹QPSã€TPSè¿™æ ·çš„æŒ‡æ ‡è®¾ç½®åˆ©ç”¨ç‡ç›®æ ‡ï¼ŒåŒä¸€ä¸ªæ•°æ®åº“æ‰§è¡Œ&lt;code&gt;SELECT 1&lt;/code&gt;å¯ä»¥æ‰“åˆ°å‡ åä¸‡çš„QPSï¼Œä½†æ‰§è¡Œå¤æ‚SQLæ—¶å¯èƒ½å°±åªèƒ½æ‰“åˆ°å‡ åƒçš„QPSã€‚ä¸åŒè´Ÿè½½ç±»å‹å’Œæœºå™¨ç¡¬ä»¶ä¼šå¯¹æ•°æ®åº“çš„QPSä¸Šé™äº§ç”Ÿæ˜¾è‘—å½±å“ï¼Œåªæœ‰å½“ä¸€ä¸ªæ•°æ®åº“ä¸Šçš„æŸ¥è¯¢éƒ½æ˜¯é«˜åº¦å•ä¸€åŒè´¨ä¸”æ²¡æœ‰å¤æ‚å˜åŒ–çš„æ¡ä»¶ä¸‹ï¼ŒQPSæ‰æœ‰å‚è€ƒæ„ä¹‰ï¼Œåœ¨è¿™ç§è‹›åˆ»æ¡ä»¶ä¸‹å€’æ˜¯å¯ä»¥é€šè¿‡å‹åŠ›æµ‹è¯•è®¾å®šä¸€ä¸ªQPSçš„æ°´ä½ç›®æ ‡ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”èµ·QPS/TPSï¼ŒRTï¼ˆå“åº”æ—¶é—´ Response Timeï¼‰è¿™æ ·çš„æŒ‡æ ‡åè€Œæ›´å…·æœ‰å‚è€ƒä»·å€¼ã€‚å› ä¸ºå“åº”æ—¶é—´å¢åŠ å¾€å¾€æ˜¯ç³»ç»Ÿé¥±å’Œçš„å‰å…†ã€‚æ ¹æ®ç»éªŒæ³•åˆ™ï¼Œæ•°æ®åº“çš„è´Ÿè½½è¶Šå¤§ï¼ŒæŸ¥è¯¢ä¸äº‹åŠ¡çš„å¹³å‡å“åº”æ—¶é—´ä¹Ÿä¼šè¶Šé«˜ã€‚RTç›¸æ¯”QPSçš„ä¸€ä¸ªä¼˜åŠ¿æ˜¯**ï¼ŒRTæ˜¯å¯ä»¥è®¾ç½®ä¸€ä¸ªåˆ©ç”¨ç‡ç›®æ ‡çš„**ï¼Œæ¯”å¦‚å¯ä»¥ä¸ºRTè®¾å®šä¸€ä¸ªç»å¯¹é˜ˆå€¼ï¼šä¸å…è®¸ç”Ÿäº§OLTPåº“ä¸Šå‡ºç°RTè¶…è¿‡1msçš„æ…¢æŸ¥è¯¢ã€‚ä½†QPSè¿™æ ·çš„æŒ‡æ ‡å°±å¾ˆéš¾ç”»å‡ºçº¢çº¿æ¥ã€‚ä¸è¿‡ï¼ŒRTä¹Ÿæœ‰è‡ªå·±çš„é—®é¢˜ã€‚ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯å®ƒä¾ç„¶æ˜¯å®šæ€§è€Œéå®šé‡çš„ï¼Œå»¶è¿Ÿå¢åŠ åªæ˜¯ç³»ç»Ÿé¥±å’Œçš„é¢„è­¦ï¼Œä½†æ²¡æ³•ç”¨æ¥ç²¾ç¡®è¡¡é‡ç³»ç»Ÿçš„é¥±å’Œåº¦ã€‚ç¬¬äºŒä¸ªé—®é¢˜é€šå¸¸èƒ½ä»æ•°æ®åº“ä¸ä¸­é—´ä»¶è·å–åˆ°çš„RTç»Ÿè®¡æŒ‡æ ‡éƒ½æ˜¯å¹³å‡å€¼ï¼Œä½†çœŸæ­£èµ·åˆ°é¢„è­¦æ•ˆæœçš„æœ‰å¯èƒ½æ˜¯è¯¸å¦‚P99ï¼ŒP999è¿™æ ·çš„ç»Ÿè®¡é‡ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡ŒæŠŠå¸¸ç”¨æŒ‡æ ‡éƒ½æ‰¹åˆ¤äº†ä¸€ç•ªï¼Œåˆ°åº•ä»€ä¹ˆæ ·çš„æŒ‡æ ‡é€‚åˆä½œä¸ºæ•°æ®åº“æœ¬èº«çš„é¥±å’Œåº¦å‘¢ï¼Ÿ&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;0x03-è¡¡é‡pgçš„è´Ÿè½½&#34;&gt;0x03 è¡¡é‡PGçš„è´Ÿè½½&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬ä¸å¦¨å‚è€ƒä¸€ä¸‹**æœºå™¨è´Ÿè½½ï¼ˆNode Loadï¼‰&lt;strong&gt;å’Œ&lt;/strong&gt;CPUåˆ©ç”¨ç‡ï¼ˆCPU Utilizationï¼‰**çš„è¯„ä¼°æŒ‡æ ‡æ˜¯å¦‚ä½•è®¾è®¡çš„ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æœºå™¨è´Ÿè½½node-load&#34;&gt;æœºå™¨è´Ÿè½½ï¼ˆNode Loadï¼‰&lt;/h3&gt;
&lt;p&gt;æƒ³è¦çœ‹åˆ°æœºå™¨çš„è´Ÿè½½æ°´å¹³ï¼Œå¯ä»¥åœ¨Linuxç³»ç»Ÿä¸­ä½¿ç”¨&lt;code&gt;top&lt;/code&gt;å‘½ä»¤ã€‚&lt;code&gt;top&lt;/code&gt;å‘½ä»¤çš„ç¬¬ä¸€è¡Œè¾“å‡ºå°±é†’ç›®åœ°æ‰“å°å‡ºå½“å‰æœºå™¨1åˆ†é’Ÿï¼Œ5åˆ†é’Ÿï¼Œ15åˆ†é’Ÿçš„&lt;strong&gt;å¹³å‡è´Ÿè½½æ°´å¹³&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ top -b1
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;top - 19:27:38 up 18:49,  &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;1&lt;/span&gt; user,  load average: 1.15, 0.72, 0.71
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™é‡Œ&lt;code&gt;load average&lt;/code&gt;åé¢çš„ä¸‰ä¸ªæ•°å­—åˆ†åˆ«è¡¨ç¤ºæœ€è¿‘1åˆ†é’Ÿï¼Œ5åˆ†é’Ÿï¼Œ15åˆ†é’Ÿç³»ç»Ÿçš„å¹³å‡è´Ÿè½½æ°´å¹³ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆè¿™ä¸ªæ•°å­—åˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿç®€å•çš„è§£é‡Šæ˜¯ï¼Œè¿™ä¸ªæ•°å­—è¶Šå¤§æœºå™¨è¶Šå¿™ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å•æ ¸CPUçš„åœºæ™¯ä¸‹ï¼ŒNode Loadï¼ˆä»¥ä¸‹ç®€ç§°è´Ÿè½½ï¼‰æ˜¯ä¸€ä¸ªéå¸¸æ ‡å‡†çš„é¥±å’Œåº¦æŒ‡æ ‡ã€‚å¯¹äºå•æ ¸CPUï¼Œè´Ÿè½½ä¸º0æ—¶CPUå¤„äºå®Œå…¨ç©ºé—²çš„çŠ¶æ€ï¼Œè´Ÿè½½ä¸º1ï¼ˆ100%ï¼‰æ—¶ï¼ŒCPUæ­£å¥½å¤„äºæ»¡è½½å·¥ä½œçš„çŠ¶æ€ã€‚è´Ÿè½½å¤§äº100%æ—¶ï¼Œè¶…å‡º100%éƒ¨åˆ†æ¯”ä¾‹çš„ä»»åŠ¡æ­£åœ¨æ’é˜Ÿã€‚&lt;/p&gt;
&lt;p&gt;Node Loadä¹Ÿæœ‰è‡ªå·±çš„&lt;strong&gt;åˆ©ç”¨ç‡ç›®æ ‡&lt;/strong&gt;ï¼Œé€šå¸¸çš„ç»éªŒæ˜¯åœ¨å•æ ¸æƒ…å†µä¸‹ï¼š0.7ï¼ˆ70%ï¼‰æ˜¯é»„çº¿ï¼Œæ„å‘³ç€ç³»ç»Ÿæœ‰é—®é¢˜ï¼Œéœ€è¦å°½å¿«æ£€æŸ¥ï¼›1.0ï¼ˆ100%ï¼‰æ˜¯çº¢çº¿ï¼Œè´Ÿè½½å¤§äº1æ„å‘³ç€è¿›ç¨‹å¼€å§‹å †ç§¯ï¼Œéœ€è¦ç«‹å³ç€æ‰‹å¤„ç†ã€‚5.0ï¼ˆ500%ï¼‰æ˜¯æ­»çº¿ï¼Œæ„å‘³ç€ç³»ç»ŸåŸºæœ¬ä¸Šå·²ç»å µæ­»äº†ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºå¤šæ ¸CPUï¼Œäº‹æƒ…ç¨å¾®æœ‰ç‚¹ä¸ä¸€æ ·ã€‚å‡è®¾æœ‰nä¸ªæ ¸ï¼Œé‚£ä¹ˆå½“ç³»ç»Ÿè´Ÿè½½ä¸ºnæ—¶ï¼Œæ‰€æœ‰CPUéƒ½å¤„äºæ»¡è½½å·¥ä½œçš„çŠ¶æ€ï¼›è€Œå½“ç³»ç»Ÿè´Ÿè½½ä¸ºn/2æ—¶ï¼Œå§‘ä¸”å¯ä»¥è®¤ä¸ºä¸€åŠCPUæ ¸æ­£åœ¨æ»¡è½½è¿è¡Œã€‚å› è€Œ48æ ¸CPUçš„æœºå™¨æ»¡è½½æ—¶çš„è´Ÿè½½ä¸º48ã€‚æ€»çš„æ¥è¯´ï¼Œå¦‚æœæˆ‘ä»¬æŠŠæœºå™¨è´Ÿè½½é™¤ä»¥æœºå™¨çš„CPUæ ¸æ•°ï¼Œå¾—åˆ°çš„æŒ‡æ ‡å°±ä¸å•æ ¸åœºæ™¯ä¸‹ä¿æŒä¸€è‡´äº†ï¼ˆ0%ç©ºè½½ï¼Œ100%æ»¡è½½ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id=&#34;cpuåˆ©ç”¨ç‡cpu-utilization&#34;&gt;CPUåˆ©ç”¨ç‡ï¼ˆCPU Utilizationï¼‰&lt;/h3&gt;
&lt;p&gt;å¦ä¸€ä¸ªå¾ˆæœ‰å€Ÿé‰´æ„ä¹‰çš„æŒ‡æ ‡æ˜¯&lt;strong&gt;CPUåˆ©ç”¨ç‡ï¼ˆCPU Utilizationï¼‰&lt;/strong&gt;ã€‚CPUåˆ©ç”¨ç‡å…¶å®æ˜¯é€šè¿‡ä¸€ä¸ªç®€å•çš„å…¬å¼è®¡ç®—å‡ºæ¥çš„ï¼Œå¯¹äºå•æ ¸CPUï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;- &lt;span style=&#34;color:#000&#34;&gt;irate(node_cpu_seconds_total{mode=&amp;#34;idle&amp;#34;}[1m]&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™é‡Œ&lt;code&gt;node_cpu_seconds_total{mode=&amp;quot;idle&amp;quot;}&lt;/code&gt;æ˜¯ä¸€ä¸ªè®¡æ•°å™¨æŒ‡æ ‡ï¼Œè¡¨ç¤ºCPUå¤„äºç©ºé—²çŠ¶æ€çš„æ€»æ—¶é•¿ã€‚&lt;code&gt;irate&lt;/code&gt;å‡½æ•°ä¼šç”¨è¯¥æŒ‡æ ‡å¯¹æ—¶é—´è¿›è¡Œæ±‚å¯¼ï¼Œå¾—å‡ºçš„ç»“æœæ˜¯ï¼Œæ¯ç§’CPUå¤„äºç©ºé—²çŠ¶æ€çš„æ—¶é•¿ï¼Œæ¢å¥è¯è¯´ä¹Ÿå°±æ˜¯CPUç©ºé—²ç‡ã€‚ç”¨1å‡å»è¯¥å€¼å°±å¾—åˆ°äº†CPUçš„åˆ©ç”¨ç‡ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºå¤šæ ¸CPUæ¥è¯´ï¼Œåªéœ€è¦æŠŠæ¯ä¸ªCPUæ ¸çš„åˆ©ç”¨ç‡åŠ èµ·æ¥ï¼Œé™¤ä»¥CPUçš„æ ¸æ•°ï¼Œå°±å¯ä»¥å¾—åˆ°CPUçš„æ•´ä½“åˆ©ç”¨ç‡ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆè¿™ä¸¤ä¸ªæŒ‡æ ‡å¯¹äºPGçš„è´Ÿè½½åˆæœ‰ä»€ä¹ˆå€Ÿé‰´æ„ä¹‰å‘¢ï¼Ÿ&lt;/p&gt;
&lt;h3 id=&#34;æ•°æ®åº“è´Ÿè½½pg-load&#34;&gt;æ•°æ®åº“è´Ÿè½½ï¼ˆPG Loadï¼‰&lt;/h3&gt;
&lt;p&gt;PGçš„è´Ÿè½½æ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥é‡‡ç”¨ç±»ä¼¼äºCPUåˆ©ç”¨ç‡å’Œæœºå™¨è´Ÿè½½çš„æ–¹å¼æ¥å®šä¹‰ï¼Ÿå½“ç„¶å¯ä»¥ï¼Œè€Œä¸”è¿™æ˜¯ä¸€ä¸ªææ£’çš„ä¸»æ„ã€‚&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬å…ˆæ¥è€ƒè™‘å•è¿›ç¨‹æƒ…å†µä¸‹çš„PGè´Ÿè½½ï¼Œå‡è®¾æˆ‘ä»¬éœ€è¦è¿™æ ·ä¸€ä¸ªæŒ‡æ ‡ï¼Œå½“è¯¥PGè¿›ç¨‹å®Œå…¨ç©ºé—²æ—¶è´Ÿè½½å› å­ä¸º0ï¼Œå½“è¯¥è¿›ç¨‹å¤„äºæ»¡è½½çŠ¶æ€æ—¶è´Ÿè½½ä¸º1ï¼ˆ100%ï¼‰ã€‚ç±»æ¯”CPUåˆ©ç”¨ç‡çš„å®šä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨â€œ&lt;em&gt;&lt;strong&gt;å•ä¸ªPGè¿›ç¨‹å¤„äºæ´»è·ƒçŠ¶æ€çš„æ—¶é•¿å æ¯”&lt;/strong&gt;&lt;/em&gt;â€æ¥è¡¨ç¤ºâ€œå•ä¸ªPGåç«¯è¿›ç¨‹çš„åˆ©ç”¨ç‡â€ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚å›¾1æ‰€ç¤ºï¼Œåœ¨ä¸€ç§’çš„ç»Ÿè®¡å‘¨æœŸå†…ï¼ŒPGå¤„äºæ´»è·ƒï¼ˆæ‰§è¡ŒæŸ¥è¯¢æˆ–è€…æ‰§è¡Œäº‹åŠ¡ï¼‰çŠ¶æ€çš„æ—¶é•¿ä¸º0.6ç§’ï¼Œé‚£ä¹ˆè¿™ä¸€ç§’å†…çš„PGè´Ÿè½½å°±æ˜¯60%ã€‚å¦‚æœè¿™ä¸ªå”¯ä¸€çš„PGè¿›ç¨‹åœ¨æ•´ä¸ªç»Ÿè®¡å‘¨æœŸä¸­éƒ½å¤„äºå¿™ç¢ŒçŠ¶æ€ï¼Œè€Œä¸”è¿˜æœ‰0.4ç§’çš„ä»»åŠ¡åœ¨æ’é˜Ÿï¼Œå¦‚é‚£ä¹ˆå°±å¯ä»¥è®¤ä¸ºPGçš„è´Ÿè½½ä¸º140%ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;../img/pg-load-fig.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;å¯¹äºå¹¶è¡Œåœºæ™¯ï¼Œè®¡ç®—æ–¹æ³•ä¸å¤šæ ¸CPUçš„åˆ©ç”¨ç‡ç±»ä¼¼ï¼Œé¦–å…ˆæŠŠæ‰€æœ‰PGè¿›ç¨‹åœ¨ç»Ÿè®¡å‘¨æœŸï¼ˆ1sï¼‰å†…å¤„äºæ´»è·ƒçŠ¶æ€çš„æ—¶é•¿ç´¯åŠ ï¼Œç„¶åé™¤ä»¥â€œ&lt;strong&gt;å¯ç”¨çš„PGè¿›ç¨‹/è¿æ¥æ•°&lt;/strong&gt;â€ï¼Œæˆ–è€…è¯´â€œ&lt;strong&gt;å¯ç”¨å¹¶è¡Œæ•°&lt;/strong&gt;â€ï¼Œå³å¯å¾—åˆ°PGæœ¬èº«çš„åˆ©ç”¨ç‡æŒ‡æ ‡ï¼Œå¦‚å›¾3æ‰€ç¤ºã€‚ä¸¤ä¸ªPGåç«¯è¿›ç¨‹åˆ†åˆ«æœ‰200ms+400msä¸800msçš„æ´»è·ƒæ—¶é•¿ï¼Œé‚£ä¹ˆæ•´ä½“çš„è´Ÿè½½æ°´å¹³ä¸ºï¼š&lt;code&gt;(0.2s + 0.4s + 0.8s) / 1s / 2 = 70%&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æ€»ç»“ä¸€ä¸‹ï¼ŒæŸä¸€æ®µæ—¶é—´å†…PGçš„è´Ÿè½½å¯ä»¥å®šä¹‰ä¸ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;pg_load = pg_active_seconds / time_peroid / parallel  &lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;pg_active_seconds&lt;/code&gt;æ˜¯è¯¥æ—¶é—´æ®µå†…æ‰€æœ‰PGè¿›ç¨‹å¤„äºæ´»è·ƒçŠ¶æ€çš„æ—¶é•¿ä¹‹å’Œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;time_peroid&lt;/code&gt;æ˜¯è´Ÿè½½è®¡ç®—çš„ç»Ÿè®¡å‘¨æœŸï¼Œé€šå¸¸ä¸º1åˆ†é’Ÿï¼Œ5åˆ†é’Ÿï¼Œ15åˆ†é’Ÿï¼Œä»¥åŠå®æ—¶ï¼ˆå°äº10ç§’ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;parallel &lt;/code&gt;æ˜¯PostgreSQLçš„å¯ç”¨å¹¶è¡Œæ•°ï¼Œåé¢ä¼šè¯¦ç»†è§£é‡Šã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å› ä¸ºå‰ä¸¤é¡¹ä¹‹å•†å®é™…ä¸Šå°±æ˜¯ä¸€æ®µæ—¶é—´å†…çš„æ¯ç§’æ´»è·ƒæ—¶é•¿æ€»æ•°ï¼Œå› æ­¤è¿™ä¸ªå…¬å¼è¿›ä¸€æ­¥å¯ä»¥ç®€åŒ–ä¸ºæ´»è·ƒæ—¶é•¿å¯¹æ—¶é—´çš„å¯¼æ•°é™¤ä»¥å¯ç”¨å¹¶è¡Œæ•°ï¼Œå³ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;rate(pg_active_seconds[time_peroid]) / parallel &lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;time_peroid&lt;/code&gt;é€šå¸¸æ˜¯å›ºå®šçš„å¸¸é‡ï¼ˆ1ï¼Œ5ï¼Œ15åˆ†é’Ÿï¼‰ï¼Œæ‰€ä»¥é—®é¢˜å°±æ˜¯å¦‚ä½•è·å–PGè¿›ç¨‹æ´»è·ƒæ€»æ—¶é•¿&lt;code&gt;pg_active_seconds&lt;/code&gt;è¿™ä¸ªæŒ‡æ ‡ï¼Œä»¥åŠå¦‚ä½•è¯„ä¼°è®¡ç®—æ•°æ®åº“å¯ç”¨å¹¶è¡Œæ•°&lt;code&gt;max_parallel &lt;/code&gt;äº†ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;0x04-è®¡ç®—pgçš„è´Ÿè½½é¥±å’Œåº¦&#34;&gt;0x04 è®¡ç®—PGçš„è´Ÿè½½é¥±å’Œåº¦&lt;/h2&gt;
&lt;h3 id=&#34;äº‹åŠ¡è¿˜æ˜¯æŸ¥è¯¢&#34;&gt;&lt;strong&gt;äº‹åŠ¡è¿˜æ˜¯æŸ¥è¯¢ï¼Ÿ&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;å½“æˆ‘ä»¬è¯´æ•°æ®åº“è¿›ç¨‹ æ´»è·ƒ/ç©ºé—² æ—¶ï¼Œç©¶ç«Ÿåœ¨è¯´ä»€ä¹ˆï¼Ÿ &lt;strong&gt;PGå¤„äºæ´»è·ƒçŠ¶æ€ï¼Œåˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€&lt;/strong&gt;ï¼Ÿå¦‚æœPGåç«¯è¿›ç¨‹æ­£åœ¨æ‰§è¡ŒæŸ¥è¯¢ï¼Œé‚£ä¹ˆå½“ç„¶å¯ä»¥è®¤ä¸ºPGæ­£å¤„äºå¿™ç¢ŒçŠ¶æ€ã€‚ä½†å¦‚æœå¦‚ä¸Šå›¾4æ‰€ç¤ºï¼ŒPGè¿›ç¨‹æ­£åœ¨æ‰§è¡Œä¸€ä¸ªäº¤äº’å¼äº‹åŠ¡ï¼Œä½†æ²¡æœ‰å®é™…æ‰§è¡ŒæŸ¥è¯¢ï¼Œå³æ‰€è°“çš„â€œIdle in Transactionâ€çŠ¶æ€ï¼Œåˆåº”è¯¥æ€ä¹ˆè®¡ç®—â€œæ´»è·ƒæ—¶é•¿â€å‘¢ï¼Ÿå›¾4ä¸­ä¸¤ä¸ªæŸ¥è¯¢ä¸­ç©ºé—²çš„é‚£200msæ—¶é—´ã€‚é‚£ä¹ˆè¿™æ®µæ—¶é—´åº”è¯¥ç®—ä½œâ€œæ´»è·ƒâ€ï¼Œè¿˜æ˜¯ç®—ä½œâ€œç©ºé—²â€å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è¿™é‡Œçš„æ ¸å¿ƒé—®é¢˜æ˜¯æ€ä¹ˆå®šä¹‰æ´»è·ƒçŠ¶æ€&lt;/strong&gt;ï¼šæ•°æ®åº“è¿›ç¨‹ä½äºäº‹åŠ¡ä¸­ç®—æ´»è·ƒï¼Œè¿˜æ˜¯åªæœ‰å½“å®é™…æ‰§è¡ŒæŸ¥è¯¢æ—¶æ‰ç®—æ´»è·ƒã€‚å¯¹äºæ²¡æœ‰äº¤äº’å¼äº‹åŠ¡çš„åœºæ™¯ï¼Œä¸€ä¸ªæŸ¥è¯¢å°±æ˜¯ä¸€ä¸ªäº‹åŠ¡ï¼Œç”¨å“ªç§æ–¹å¼éƒ½ä¸€æ ·ï¼Œä½†å¯¹äºå¤šè¯­å¥ï¼Œç‰¹åˆ«æ˜¯äº¤äº’å¼çš„å¤šè¯­å¥äº‹åŠ¡ï¼Œè¿™ä¸¤è€…å°±æœ‰æ¯”è¾ƒæ˜æ˜¾çš„åŒºåˆ«äº†ã€‚ä»èµ„æºä½¿ç”¨çš„è§’åº¦çœ‹ï¼Œæ²¡æœ‰æ‰§è¡ŒæŸ¥è¯¢ä¹Ÿå°±æ„å‘³ç€æ²¡æœ‰æ¶ˆè€—æ•°æ®åº“æœ¬èº«çš„èµ„æºã€‚ä½†ç©ºé—²ç€çš„äº‹åŠ¡æœ¬èº«ä¼šå ç”¨è¿æ¥å¯¼è‡´è¿æ¥æ— æ³•å¤ç”¨ï¼ŒIdle In Transactionæœ¬èº«ä¹Ÿåº”å½“æ˜¯ä¸€ç§æåŠ›é¿å…çš„æƒ…å†µã€‚æ€»çš„æ¥è¯´ï¼Œè¿™ä¸¤ç§å®šä¹‰æ–¹å¼éƒ½å¯ä»¥ï¼Œä½¿ç”¨äº‹åŠ¡çš„æ–¹å¼ä¼šç•¥å¾®é«˜ä¼°åº”ç”¨è´Ÿè½½ï¼Œä½†ä»è´Ÿè½½è¯„ä¼°çš„è§’åº¦å¯èƒ½ä¼šæ›´ä¸ºåˆé€‚ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å¦‚ä½•è·å–æ´»è·ƒæ—¶é•¿&#34;&gt;&lt;strong&gt;å¦‚ä½•è·å–æ´»è·ƒæ—¶é•¿&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;å†³å®šäº†æ•°æ®åº“åç«¯è¿›ç¨‹çš„æ´»è·ƒå®šä¹‰åï¼Œç¬¬äºŒä¸ªé—®é¢˜å°±æ˜¯ï¼Œå¦‚ä½•è·å–ä¸€æ®µæ—¶é—´çš„æ•°æ®åº“æ´»è·ƒæ—¶é•¿ï¼Ÿä¸å¹¸çš„æ˜¯åœ¨PGä¸­ï¼Œç”¨æˆ·å¾ˆéš¾é€šè¿‡æ•°æ®åº“æœ¬èº«è·å–è¿™ä¸€æ€§èƒ½æŒ‡æ ‡ã€‚PGæä¾›äº†ä¸€ä¸ªç³»ç»Ÿè§†å›¾ï¼š&lt;code&gt;pg_stat_activity&lt;/code&gt;ï¼Œå¯ä»¥çœ‹åˆ°å½“å‰è¿è¡Œç€çš„Postgresè¿›ç¨‹é‡Œåˆ—è¡¨ï¼Œä½†è¿™æ˜¯ä¸€ä¸ªæ—¶é—´ç‚¹å¿«ç…§ï¼Œåªèƒ½å¤§è‡´å‘Šè¯‰åœ¨å½“å‰æ—¶åˆ»ï¼Œæ•°æ®åº“çš„åç«¯è¿›ç¨‹ä¸­æœ‰å¤šå°‘ä¸ªå¤„äºæ´»è·ƒçŠ¶æ€ï¼Œæœ‰å¤šå°‘ä¸ªå¤„äºç©ºé—²çŠ¶æ€ã€‚ç»Ÿè®¡ä¸€æ®µæ—¶é—´å†…æ•°æ®åº“å¤„äºæ´»è·ƒçŠ¶æ€çš„æ—¶é•¿ï¼Œå°±æˆäº†ä¸€ä¸ªéš¾é¢˜ã€‚ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨ç±»ä¼¼äºLoadçš„è®¡ç®—æ–¹å¼ï¼Œé€šè¿‡å‘¨æœŸæ€§åœ°é‡‡æ ·PGä¸­æ´»è·ƒè¿›ç¨‹çš„æ•°é‡ï¼Œè®¡ç®—å‡ºä¸€ä¸ªè´Ÿè½½æŒ‡æ ‡æ¥ã€‚ä¸è¿‡ï¼Œè¿™é‡Œæœ‰æ›´å¥½çš„åŠæ³•ï¼Œä½†æ˜¯éœ€è¦ä¸­é—´ä»¶çš„ååŠ©å‚ä¸ã€‚&lt;/p&gt;
&lt;p&gt;æ•°æ®åº“ä¸­é—´ä»¶å¯¹äºæ€§èƒ½ç›‘æ§éå¸¸é‡è¦ï¼Œå› ä¸ºå¾ˆå¤šæŒ‡æ ‡æ•°æ®åº“æœ¬èº«å¹¶æ²¡æœ‰æä¾›ï¼Œåªæœ‰é€šè¿‡ä¸­é—´ä»¶æ‰èƒ½æš´éœ²å‡ºæ¥ã€‚ä»¥Pgbouncerä¸ºä¾‹ï¼ŒPgbounceråœ¨å†…éƒ¨ç»´æŠ¤äº†ä¸€ç³»åˆ—ç»Ÿè®¡è®¡æ•°å™¨ï¼Œä½¿ç”¨&lt;code&gt;SHOW STATS&lt;/code&gt;å¯ä»¥æ‰“å°å‡ºè¿™äº›æŒ‡æ ‡ï¼Œè¯¸å¦‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;total_xact_countï¼šæ€»å…±æ‰§è¡Œäº†å¤šå°‘ä¸ªäº‹åŠ¡&lt;/li&gt;
&lt;li&gt;total_query_countï¼šæ€»å…±æ‰§è¡Œäº†å¤šå°‘ä¸ªæŸ¥è¯¢&lt;/li&gt;
&lt;li&gt;total_xact_timeï¼šæ€»å…±èŠ±è´¹åœ¨äº‹åŠ¡æ‰§è¡Œçš„æ—¶é•¿&lt;/li&gt;
&lt;li&gt;total_query_timeï¼šæ€»å…±èŠ±è´¹åœ¨æŸ¥è¯¢æ‰§è¡Œä¸Šçš„æ—¶é•¿&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™é‡Œ&lt;code&gt;total_xact_time&lt;/code&gt;å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„æ•°æ®ï¼Œå®ƒè®°å½•äº†Pgbouncerä¸­é—´ä»¶ä¸­èŠ±è´¹åœ¨æŸä¸ªæ•°æ®åº“ä¸Šçš„äº‹åŠ¡æ€»è€—æ—¶ã€‚æˆ‘ä»¬åªéœ€è¦ç”¨è¿™ä¸ªæŒ‡æ ‡å¯¹æ—¶é—´æ±‚å¯¼ï¼Œå°±å¯ä»¥å¾—åˆ°æƒ³è¦çš„æ•°æ®ï¼šæ¯ç§’æ´»è·ƒæ—¶é•¿å æ¯”ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œä½¿ç”¨Prometheusçš„PromQLè¡¨è¾¾è®¡ç®—é€»è¾‘ï¼Œé¦–å…ˆå¯¹äº‹åŠ¡è€—æ—¶è®¡æ•°å™¨æ±‚å¯¼ï¼Œåˆ†åˆ«ç®—å‡ºå…¶1åˆ†é’Ÿï¼Œ5åˆ†é’Ÿï¼Œ15åˆ†é’Ÿï¼Œä»¥åŠå®æ—¶ç²’åº¦ï¼ˆæœ€è¿‘ä¸¤æ¬¡é‡‡æ ·ç‚¹ä¹‹é—´ï¼‰ä¸Šçš„&lt;strong&gt;æ¯ç§’æ´»è·ƒæ—¶é•¿&lt;/strong&gt;ã€‚å†ä¸Šå·æ±‚å’Œï¼Œå°†æ•°æ®åº“å±‚æ¬¡çš„æŒ‡æ ‡ä¸Šå·ä¸ºå®ä¾‹çº§åˆ«çš„æŒ‡æ ‡ã€‚ï¼ˆè¿æ¥æ± &lt;code&gt;SHOW STATS&lt;/code&gt;è¿™é‡Œçš„ç»Ÿè®¡æŒ‡æ ‡æ˜¯ä»¥æ•°æ®åº“ä¸ºå•ä½çš„ï¼Œå› æ­¤åœ¨è®¡ç®—å®ä¾‹çº§åˆ«çš„æ€»æ´»è·ƒæ—¶é•¿æ—¶ï¼Œåº”å½“ä¸Šå·æ±‚å’Œï¼Œæ¶ˆé™¤æ•°æ®åº“ç»´åº¦çš„æ ‡ç­¾ï¼š&lt;code&gt;sum without(datname)&lt;/code&gt;ï¼‰&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;- &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;record&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg:ins:xact_time_realtime&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;expr&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;sum without (datname) (irate(pgbouncer_stat_total_xact_time{}[1m]))&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;- &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;record&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg:ins:xact_time_rate1m&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;expr&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;sum without (datname) (rate(pgbouncer_stat_total_xact_time{}[1m]))&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;- &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;record&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg:ins:xact_time_rate5m&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;expr&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;sum without (datname) (rate(pgbouncer_stat_total_xact_time{}[5m]))&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;- &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;record&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg:ins:xact_time_rate15m&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;expr&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;sum without (datname) (rate(pgbouncer_stat_total_xact_time{}[15m]))&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™æ ·è®¡ç®—å¾—åˆ°çš„ç»“æœæŒ‡æ ‡å·²ç»å¯ä»¥ç›¸å¯¹æœ¬èº«è¿›è¡Œçºµå‘æ¯”è¾ƒï¼Œå¹¶åœ¨åŒæ ·è§„æ ¼çš„å®ä¾‹é—´è¿›è¡Œæ¨ªå‘æ¯”è¾ƒäº†ã€‚è€Œä¸”æ— è®ºæ•°æ®åº“çš„è´Ÿè½½ç±»å‹æ€æ ·ï¼Œéƒ½å¯ä»¥ä½¿ç”¨è¿™ä¸ªæŒ‡æ ‡ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡&lt;strong&gt;ä¸åŒè§„æ ¼çš„å®ä¾‹ï¼Œä»ç„¶æ²¡æ³•ä½¿ç”¨è¿™ä¸ªæŒ‡æ ‡è¿›è¡Œå¯¹æ¯”&lt;/strong&gt;ã€‚æ¯”å¦‚å¯¹äºå•æ ¸å•è¿æ¥PGï¼Œæ»¡è½½æ—¶æ¯ç§’æ´»è·ƒæ—¶é•¿å¯èƒ½æ˜¯1ç§’ï¼Œä¹Ÿå°±æ˜¯100%åˆ©ç”¨ç‡ã€‚è€Œå¯¹äº64æ ¸64è¿æ¥çš„PGï¼Œæ»¡è½½æ—¶æ¯ç§’æ´»è·ƒæ—¶é•¿æ˜¯64ç§’ï¼Œé‚£ä¹ˆå°±æ˜¯6400%çš„åˆ©ç”¨ç‡ã€‚å› æ­¤ï¼Œè¿˜éœ€è¦ä¸€ä¸ªå½’ä¸€åŒ–çš„å¤„ç†ï¼Œé‚£ä¹ˆé—®é¢˜åˆæ¥äº†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å¯ç”¨å¹¶è¡Œæ•°å¦‚ä½•å®šä¹‰&#34;&gt;å¯ç”¨å¹¶è¡Œæ•°å¦‚ä½•å®šä¹‰ï¼Ÿ&lt;/h3&gt;
&lt;p&gt;ä¸åŒäºCPUåˆ©ç”¨ç‡ï¼ŒPGçš„å¯ç”¨å¹¶è¡Œæ•°å¹¶æ²¡æœ‰ä¸€ä¸ªæ¸…æ™°çš„å®šä¹‰ï¼Œè€Œä¸”è·Ÿè´Ÿè½½ç±»å‹æœ‰ä¸€äº›å¾®å¦™çš„å…³ç³»ã€‚ä½†èƒ½å¤Ÿç¡®å®šçš„æ˜¯ï¼Œåœ¨ä¸€å®šèŒƒå›´å†…ï¼Œ&lt;strong&gt;æœ€å¤§å¯ç”¨å¹¶è¡Œä¸CPUçš„æ ¸æ•°å‘ˆç²—ç•¥çš„çº¿æ€§å…³ç³»&lt;/strong&gt;ã€‚å½“ç„¶è¿™ä¸ªç»“è®ºçš„å‰ææ˜¯æ•°æ®åº“æœ€å¤§è¿æ¥æ•°æ˜¾è‘—è¶…è¿‡CPUæ ¸æ•°ï¼Œå¦‚æœåœ¨64æ ¸çš„CPUä¸Šåªå…è®¸æ•°æ®åº“å»ºç«‹30æ¡è¿æ¥ï¼Œé‚£ä¹ˆå¯ä»¥è‚¯å®šæœ€å¤§å¯ç”¨å¹¶è¡Œå°±æ˜¯30è€Œä¸æ˜¯CPUæ ¸æ•°64ã€‚è½¯ä»¶çš„å¹¶è¡Œæœ€ç»ˆè¿˜æ˜¯è¦ç”±ç¡¬ä»¶çš„å¹¶è¡Œåº¦æ¥æ”¯æ’‘ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç®€å•çš„ä½¿ç”¨å®ä¾‹çš„CPUæ ¸æ•°ä½œä¸ºå¯ç”¨å¹¶è¡Œæ•°ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨64æ ¸çš„CPUä¸Šè¿è¡Œ64ä¸ªæ´»è·ƒPGè¿›ç¨‹ï¼Œåˆ™å…¶è´Ÿè½½ä¸ºï¼ˆ6400% / 64 = 100%ï¼‰ã€‚åŒç†è¿è¡Œ128ä¸ªæ´»è·ƒPGè¿›ç¨‹ï¼Œè´Ÿè½½å°±æ˜¯ï¼ˆ12800% / 64 = 200%ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆåˆ©ç”¨ä¸Šé¢è®¡ç®—å¾—åˆ°çš„æ¯ç§’æ´»è·ƒæ—¶é•¿æŒ‡æ ‡ï¼Œå°±å¯ä»¥è®¡ç®—å‡ºå®ä¾‹çº§åˆ«çš„PGè´Ÿè½½æŒ‡æ•°äº†ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;- &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;record&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg:ins:load0&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;expr&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg:ins:xact_time_realtime / on (ip) group_left()  node:ins:cpu_count&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;- &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;record&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg:ins:load1&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;expr&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg:ins:xact_time_rate1m  / on (ip) group_left()  node:ins:cpu_count&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;- &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;record&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg:ins:load5&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;expr&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg:ins:xact_time_rate5m  / on (ip) group_left()  node:ins:cpu_count&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;- &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;record&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg:ins:load15&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;expr&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg:ins:xact_time_rate15m  / on (ip) group_left()  node:ins:cpu_count&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;pg-loadçš„å¦ä¸€ç§è§£é‡Š&#34;&gt;PG LOADçš„å¦ä¸€ç§è§£é‡Š&lt;/h3&gt;
&lt;p&gt;å¦‚æœæˆ‘ä»¬ä»”ç»†å®¡è§†PG Loadçš„å®šä¹‰ï¼Œå…¶å®å¯ä»¥å‘ç°æ¯ç§’æ´»è·ƒæ—¶é•¿è¿™ä¸ªæŒ‡æ ‡ï¼Œå…¶å®å¯ä»¥ç²—ç•¥ç­‰ä»·äºï¼šTPS x XactRTï¼Œæˆ–è€…QPS x Query RTã€‚è¿™ä¸ªä¹Ÿå¾ˆå¥½ç†è§£ï¼Œå‡è®¾æˆ‘QPSä¸º1000ï¼Œæ¯ä¸ªæŸ¥è¯¢RTä¸º1msï¼Œåˆ™æ¯ç§’èŠ±è´¹åœ¨æŸ¥è¯¢ä¸Šçš„æ—¶é—´ä¸º 1000 * 1ms = 1sã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼ŒPG Loadå¯ä»¥è§†ä¸ºä¸€ä¸ªç”±ä¸‰ä¸ªæ ¸å¿ƒæŒ‡æ ‡å¤åˆè€Œæˆçš„è¡ç”ŸæŒ‡æ ‡ï¼š&lt;code&gt;tps * xact_rt /  cpu_count&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;TPSï¼ŒRTç”¨äºè´Ÿè½½è¯„ä¼°éƒ½æœ‰å„è‡ªçš„é—®é¢˜ï¼Œä½†å®ƒä»¬é€šè¿‡ç®€å•çš„ä¹˜æ³•ç»“åˆæˆä¸€ä¸ªæ–°çš„å¤åˆæŒ‡æ ‡ï¼Œä¸€ä¸‹å­å°±æ˜¾ç¤ºå‡ºäº†ç¥å¥‡çš„åŠ›é‡ã€‚ï¼ˆå°½ç®¡å®é™…ä¸Šæ˜¯é€šè¿‡å…¶ä»–æ›´å‡†ç¡®çš„æ–¹å¼è®¡ç®—å‡ºæ¥çš„ï¼‰&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;0x05-pg-loadçš„å®é™…æ•ˆæœ&#34;&gt;0x05 PG Loadçš„å®é™…æ•ˆæœ&lt;/h2&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹PG Loadç”¨äºå®é™…ç”Ÿäº§ç¯å¢ƒçš„è¡¨ç°ã€‚&lt;/p&gt;
&lt;p&gt;PG Loadæœ€ç›´æ¥çš„ä½œç”¨æœ‰ä¸¤ä¸ªï¼Œå‘Šè­¦ä»¥åŠå®¹é‡è¯„ä¼°ã€‚&lt;/p&gt;
&lt;h3 id=&#34;case-1-ç”¨äºæŠ¥è­¦æ…¢æŸ¥è¯¢å †ç§¯å¯¼è‡´çš„æœåŠ¡ä¸å¯ç”¨&#34;&gt;Case 1: ç”¨äºæŠ¥è­¦ï¼šæ…¢æŸ¥è¯¢å †ç§¯å¯¼è‡´çš„æœåŠ¡ä¸å¯ç”¨&lt;/h3&gt;
&lt;p&gt;ä¸‹å›¾æ˜¯ä¸€æ¬¡ç”Ÿäº§äº‹æ•…çš„ç°åœºï¼Œç”±äºæŸä¸šåŠ¡ä¸Šçº¿äº†ä¸€ä¸ªæ…¢æŸ¥è¯¢ï¼Œç¬é—´å¯¼è‡´è¿æ¥æ± è¢«æ…¢æŸ¥è¯¢å æ®ï¼Œå‘ç”Ÿå †ç§¯ã€‚å¯ä»¥çœ‹å‡ºPG Loadå’ŒRTéƒ½å¾ˆåŠæ—¶åœ°åæ˜ å‡ºäº†æ•…éšœçš„æƒ…å†µï¼Œè€ŒTPSçœ‹ä¸Šå»åˆ™æ˜¯æ‰äº†ä¸€ä¸ªå‘ï¼Œå¹¶ä¸æ˜¯ç‰¹åˆ«æ˜¾çœ¼ã€‚&lt;/p&gt;
&lt;p&gt;ä»æ•ˆæœä¸Šçœ‹ï¼ŒPG Load1ä¸PG Load0ï¼ˆå®æ—¶è´Ÿè½½ï¼‰æ˜¯ä¸€ä¸ªç›¸å½“çµæ•çš„æŒ‡æ ‡ï¼Œå¯¹äºå¤§å¤šæ•°ä¸å‹åŠ›è´Ÿè½½æœ‰å…³çš„æ•…éšœéƒ½èƒ½åŠæ—¶å‡†ç¡®ä½œå‡ºååº”ã€‚æ‰€ä»¥è¢«æˆ‘ä»¬é‡‡çº³ä¸ºæ ¸å¿ƒæŠ¥è­¦æŒ‡æ ‡ã€‚&lt;/p&gt;
&lt;p&gt;PG Loadçš„åˆ©ç”¨ç‡ç›®æ ‡æœ‰ä¸€äº›ç»éªŒå€¼ï¼šé»„çº¿é€šå¸¸ä¸º50%ï¼Œå³éœ€è¦å¼•èµ·å…³æ³¨çš„é˜ˆå€¼ï¼›çº¢çº¿é€šå¸¸ä¸º70%ï¼Œå³æŠ¥è­¦çº¿ï¼Œéœ€è¦ç«‹åˆ»é‡‡å–è¡ŒåŠ¨çš„é˜ˆå€¼ï¼›500%æˆ–æ›´é«˜é€šå¸¸æ„å‘³ç€è¿™ä¸ªå®ä¾‹å·²ç»è¢«æ‰“å´©äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/img/blog/pg/pg-load-compare.png&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;case-2ç”¨äºæ°´ä½è¯„ä¼°ä¸å®¹é‡è§„åˆ’&#34;&gt;Case 2ï¼šç”¨äºæ°´ä½è¯„ä¼°ä¸å®¹é‡è§„åˆ’&lt;/h3&gt;
&lt;p&gt;æ¯”èµ·æŠ¥è­¦ï¼Œæ°´ä½è¯„ä¼°ä¸å®¹é‡è§„åˆ’æ›´åƒæ˜¯PG Loadçš„æ ¸å¿ƒç”¨é€”ã€‚æ¯•ç«ŸæŠ¥è­¦ä¹‹ç±»çš„çš„éœ€æ±‚è¿˜æ˜¯å¯ä»¥é€šè¿‡å»¶è¿Ÿï¼Œæ’é˜Ÿè¿æ¥ç­‰æŒ‡æ ‡æ¥æ»¡è¶³çš„ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œï¼ŒPGé›†ç¾¤çš„15åˆ†é’Ÿè´Ÿè½½æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å‚è€ƒå€¼ã€‚é€šè¿‡è¿™ä¸ªæŒ‡æ ‡çš„å†å²å‡å€¼ï¼Œå³°å€¼ï¼Œä»¥åŠå…¶ä»–ä¸€äº›ç»Ÿè®¡é‡ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆè½»æ¾åœ°çœ‹å‡ºå“ªäº›é›†ç¾¤å¤„äºé«˜è´Ÿè½½çŠ¶æ€éœ€è¦æ‰©å®¹ï¼Œå“ªäº›é›†ç¾¤å¤„äºä½èµ„æºåˆ©ç”¨ç‡çŠ¶æ€éœ€è¦ç¼©å®¹ã€‚&lt;/p&gt;
&lt;p&gt;CPUåˆ©ç”¨ç‡æ˜¯å¦ä¸€ä¸ªå¾ˆé‡è¦çš„å®¹é‡è¯„ä¼°æŒ‡æ ‡ã€‚æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒPG Loadä¸CPU Usageæœ‰ç€å¾ˆå¯†åˆ‡çš„å…³ç³»ã€‚ä¸è¿‡ç›¸æ¯”CPUä½¿ç”¨ç‡ï¼ŒPG Loadæ›´ä¸ºçº¯ç²¹åœ°åæ˜ äº†æ•°æ®åº“æœ¬èº«çš„è´Ÿè½½æ°´å¹³ï¼Œæ»¤é™¤äº†æœºå™¨ä¸Šçš„æ— å…³è´Ÿè½½ï¼Œä¹Ÿå¯ä»¥æ»¤é™¤æ‰æ•°æ®åº“ç»´æŠ¤å·¥ä½œï¼ˆå¤‡ä»½ï¼Œæ¸…ç†ï¼Œåƒåœ¾å›æ”¶ï¼‰äº§ç”Ÿçš„æ‚éŸ³ï¼Œæ›´ä¸ºä¸æ»‘å¹³é¡ºã€‚å› æ­¤éå¸¸é€‚åˆç”¨äºå®¹é‡è¯„ä¼°ã€‚&lt;/p&gt;
&lt;p&gt;å½“ç³»ç»Ÿè´Ÿè½½é•¿æœŸä½äº30%~50%æ—¶ï¼Œå°±åº”è¯¥è€ƒè™‘è¿›è¡Œæ‰©å®¹äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/img/blog/pg/pg-load-cluster.png&#34;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;0x06-ç»“è®º&#34;&gt;0x06 ç»“è®º&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡ä»‹ç»äº†ä¸€ç§å®šé‡è¡¡é‡PGè´Ÿè½½çš„æ–¹å¼ï¼Œå³PG LoadæŒ‡æ ‡&lt;/p&gt;
&lt;p&gt;è¯¥æŒ‡æ ‡å¯ä»¥ç®€å•ç›´è§‚åœ°åæ˜ æ•°æ®åº“å®ä¾‹çš„è´Ÿè½½æ°´å¹³&lt;/p&gt;
&lt;p&gt;è¯¥æŒ‡æ ‡éå¸¸é€‚åˆä½œå®¹é‡è¯„ä¼°ä¹‹ç”¨ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºæ ¸å¿ƒæŠ¥è­¦æŒ‡æ ‡ã€‚&lt;/p&gt;
&lt;p&gt;è¯¥æŒ‡æ ‡å¯ä»¥åŸºæœ¬æ— è§†è´Ÿè½½ç±»å‹ä¸æœºå™¨ç±»å‹ï¼Œè¿›è¡Œçºµå‘å†å²æ¯”è¾ƒä¸æ¨ªå‘æ°´ä½æ¯”è¾ƒã€‚&lt;/p&gt;
&lt;p&gt;è¯¥æŒ‡æ ‡å¯ä»¥é€šè¿‡ç®€å•çš„æ–¹å¼è®¡ç®—å¾—å‡ºï¼Œå³æ¯ç§’åç«¯è¿›ç¨‹æ´»è·ƒæ€»æ—¶é•¿é™¤ä»¥å¯ç”¨å¹¶å‘æ•°ã€‚&lt;/p&gt;
&lt;p&gt;è¯¥æŒ‡æ ‡æ‰€éœ€æ•°æ®éœ€è¦ä»æ•°æ®åº“ä¸­é—´ä»¶è·å–&lt;/p&gt;
&lt;p&gt;PG Loadçš„0ä»£è¡¨ç©ºè½½ï¼Œ100%ä»£è¡¨æ»¡è½½ã€‚é»„çº¿ç»éªŒå€¼ä¸º50%ï¼Œçº¢çº¿ç»éªŒå€¼ä¸º70%ï¼Œ&lt;/p&gt;
&lt;p&gt;PG Loadæ˜¯ä¸€ä¸ªå¥½æŒ‡æ ‡ğŸ‘&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&#34;https://mp.weixin.qq.com/s/bG6KG7mmu4K7JMYMI34zCQ&#34;&gt;WeChat Column&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

      </description>
    </item>
    
    <item>
      <title>Blog: ç›‘æ§PGä¸­çš„è¡¨å¤§å°</title>
      <link>/zh/blog/admin/mon-table-size/</link>
      <pubDate>Mon, 14 May 2018 00:00:00 +0000</pubDate>
      
      <guid>/zh/blog/admin/mon-table-size/</guid>
      <description>
        
        
        &lt;h3 id=&#34;è¡¨çš„ç©ºé—´å¸ƒå±€&#34;&gt;è¡¨çš„ç©ºé—´å¸ƒå±€&lt;/h3&gt;
&lt;p&gt;å®½æ³›æ„ä¹‰ä¸Šçš„&lt;strong&gt;è¡¨ï¼ˆTableï¼‰&lt;/strong&gt;ï¼ŒåŒ…å«äº†&lt;strong&gt;æœ¬ä½“è¡¨&lt;/strong&gt;ä¸&lt;strong&gt;TOASTè¡¨&lt;/strong&gt;ä¸¤ä¸ªéƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æœ¬ä½“è¡¨ï¼Œå­˜å‚¨å…³ç³»æœ¬èº«çš„æ•°æ®ï¼Œå³ç‹­ä¹‰çš„å…³ç³»ï¼Œ&lt;code&gt;relkind=&#39;r&#39;&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;TOASTè¡¨ï¼Œä¸æœ¬ä½“è¡¨ä¸€ä¸€å¯¹åº”ï¼Œå­˜å‚¨è¿‡å¤§çš„å­—æ®µï¼Œ&lt;code&gt;relinkd=&#39;t&#39;&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è€Œæ¯ä¸ªè¡¨ï¼Œåˆç”±&lt;strong&gt;ä¸»ä½“&lt;/strong&gt;ä¸&lt;strong&gt;ç´¢å¼•&lt;/strong&gt;ä¸¤ä¸ª**å…³ç³»ï¼ˆRelationï¼‰**ç»„æˆï¼ˆå¯¹æœ¬ä½“è¡¨è€Œè¨€ï¼Œå¯ä»¥æ²¡æœ‰ç´¢å¼•å…³ç³»ï¼‰&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸»ä½“å…³ç³»ï¼šå­˜å‚¨å…ƒç»„ã€‚&lt;/li&gt;
&lt;li&gt;ç´¢å¼•å…³ç³»ï¼šå­˜å‚¨ç´¢å¼•å…ƒç»„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ¯ä¸ª&lt;strong&gt;å…³ç³»&lt;/strong&gt;åˆå¯èƒ½ä¼šæœ‰&lt;strong&gt;å››ç§åˆ†æ”¯&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;main: å…³ç³»çš„ä¸»æ–‡ä»¶ï¼Œç¼–å·ä¸º0&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;fsmï¼šä¿å­˜å…³äºmainåˆ†æ”¯ä¸­ç©ºé—²ç©ºé—´çš„ä¿¡æ¯ï¼Œç¼–å·ä¸º1&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;vmï¼šä¿å­˜å…³äºmainåˆ†æ”¯ä¸­å¯è§æ€§çš„ä¿¡æ¯ï¼Œç¼–å·ä¸º2&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;initï¼šç”¨äºä¸è¢«æ—¥å¿—è®°å½•ï¼ˆunloggedï¼‰çš„çš„è¡¨å’Œç´¢å¼•ï¼Œå¾ˆå°‘è§çš„ç‰¹æ®Šåˆ†æ”¯ï¼Œç¼–å·ä¸º3&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ¯ä¸ªåˆ†æ”¯å­˜å‚¨ä¸ºç£ç›˜ä¸Šçš„ä¸€åˆ°å¤šä¸ªæ–‡ä»¶ï¼šè¶…è¿‡1GBçš„æ–‡ä»¶ä¼šè¢«åˆ’åˆ†ä¸ºæœ€å¤§1GBçš„å¤šä¸ªæ®µã€‚&lt;/p&gt;
&lt;p&gt;ç»¼ä¸Šæ‰€è¿°ï¼Œä¸€ä¸ªè¡¨å¹¶ä¸æ˜¯çœ‹ä¸Šå»é‚£ä¹ˆç®€å•ï¼Œå®ƒç”±å‡ ä¸ªå…³ç³»ç»„æˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æœ¬ä½“è¡¨çš„ä¸»ä½“å…³ç³»ï¼ˆå•ä¸ªï¼‰&lt;/li&gt;
&lt;li&gt;æœ¬ä½“è¡¨çš„ç´¢å¼•ï¼ˆå¤šä¸ªï¼‰&lt;/li&gt;
&lt;li&gt;TOASTè¡¨çš„ä¸»ä½“å…³ç³»ï¼ˆå•ä¸ªï¼‰&lt;/li&gt;
&lt;li&gt;TOASTè¡¨çš„ç´¢å¼•ï¼ˆå•ä¸ªï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è€Œæ¯ä¸ªå…³ç³»å®é™…ä¸Šå¯èƒ½åˆåŒ…å«äº†1~3ä¸ªåˆ†æ”¯ï¼š&lt;code&gt;main&lt;/code&gt;ï¼ˆå¿…å®šå­˜åœ¨ï¼‰ï¼Œ&lt;code&gt;fsm&lt;/code&gt;ï¼Œ&lt;code&gt;vm&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&#34;è·å–è¡¨çš„é™„å±å…³ç³»&#34;&gt;è·å–è¡¨çš„é™„å±å…³ç³»&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨ä¸‹åˆ—æŸ¥è¯¢ï¼Œåˆ—å‡ºæ‰€æœ‰çš„åˆ†æ”¯oidã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;select&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;nsp&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;nspname&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rel&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;relname&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rel&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;relnamespace&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;as&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;nspid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rel&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;oid&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;             &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;as&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;relid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rel&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;reltoastrelid&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;   &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;as&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;toastid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;toastind&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;indexrelid&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;as&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;toastindexid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;ind&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;indexes&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;from&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg_namespace&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;nsp&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;join&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg_class&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rel&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;on&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;nsp&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;oid&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rel&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;relnamespace&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;LATERAL&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;select&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;array_agg&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;indexrelid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;as&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;indexes&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;from&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg_index&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;where&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;indrelid&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rel&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;oid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;ind&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;LATERAL&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;select&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;indexrelid&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;from&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg_index&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;where&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;indrelid&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rel&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;reltoastrelid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;toastind&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;where&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;nspname&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;not&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;in&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;pg_catalog&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;information_schema&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;and&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rel&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;relkind&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;r&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; nspname |  relname   |  nspid  |  relid  | toastid | toastindexid |      indexes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;---------+------------+---------+---------+---------+--------------+--------------------
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; public  | aoi        | 4310872 | 4320271 | 4320274 |      4320276 | {4325606,4325605}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; public  | poi        | 4310872 | 4332324 | 4332327 |      4332329 | {4368886}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;ç»Ÿè®¡å‡½æ•°&#34;&gt;ç»Ÿè®¡å‡½æ•°&lt;/h3&gt;
&lt;p&gt;PGæä¾›äº†ä¸€ç³»åˆ—å‡½æ•°ç”¨äºç¡®å®šå„ä¸ªéƒ¨åˆ†å ç”¨çš„ç©ºé—´å¤§å°ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‡½æ•°&lt;/th&gt;
&lt;th&gt;ç»Ÿè®¡å£å¾„&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;pg_total_relation_size(oid) &lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ•´ä¸ªå…³ç³»ï¼ŒåŒ…æ‹¬è¡¨ï¼Œç´¢å¼•ï¼ŒTOASTç­‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;pg_indexes_size(oid) &lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å…³ç³»ç´¢å¼•éƒ¨åˆ†æ‰€å ç©ºé—´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;pg_table_size(oid)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å…³ç³»ä¸­é™¤ç´¢å¼•å¤–éƒ¨åˆ†æ‰€å ç©ºé—´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;pg_relation_size(oid) &lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è·å–ä¸€ä¸ªå…³ç³»ä¸»æ–‡ä»¶éƒ¨åˆ†çš„å¤§å°ï¼ˆmainåˆ†æ”¯ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;pg_relation_size(oid, &#39;main&#39;)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è·å–å…³ç³»&lt;code&gt;main&lt;/code&gt;åˆ†æ”¯å¤§å°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;pg_relation_size(oid, &#39;fsm&#39;)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è·å–å…³ç³»&lt;code&gt;fsm&lt;/code&gt;åˆ†æ”¯å¤§å°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;pg_relation_size(oid, &#39;vm&#39;)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è·å–å…³ç³»&lt;code&gt;vm&lt;/code&gt;åˆ†æ”¯å¤§å°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;pg_relation_size(oid, &#39;init&#39;)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è·å–å…³ç³»&lt;code&gt;init&lt;/code&gt;åˆ†æ”¯å¤§å°&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;è™½ç„¶åœ¨ç‰©ç†ä¸Šä¸€å¼ è¡¨ç”±è¿™ä¹ˆå¤šæ–‡ä»¶ç»„æˆï¼Œä½†ä»é€»è¾‘ä¸Šæˆ‘ä»¬é€šå¸¸åªå…³å¿ƒä¸¤ä¸ªä¸œè¥¿çš„å¤§å°ï¼šè¡¨ä¸ç´¢å¼•ã€‚å› æ­¤è¿™é‡Œè¦ç”¨åˆ°çš„ä¸»è¦å°±æ˜¯ä¸¤ä¸ªå‡½æ•°ï¼š&lt;code&gt;pg_indexes_size&lt;/code&gt;ä¸&lt;code&gt;pg_table_size&lt;/code&gt;ï¼Œå¯¹æ™®é€šè¡¨å…¶å’Œä¸º&lt;code&gt;pg_total_relation_size&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è€Œé€šå¸¸è¡¨å¤§å°çš„éƒ¨åˆ†å¯ä»¥è¿™æ ·è®¡ç®—ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg_table_size&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;relid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; 	&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg_relation_size&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;relid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;main&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; 	&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg_relation_size&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;relid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;fsm&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; 	&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg_relation_size&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;relid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;vm&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; 	&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg_total_relation_size&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;reltoastrelid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; 	
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg_indexes_size&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;relid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; 	&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;select&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;sum&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg_total_relation_size&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;indexrelid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;where&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;indrelid&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;relid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ³¨æ„ï¼ŒTOASTè¡¨ä¹Ÿæœ‰è‡ªå·±çš„ç´¢å¼•ï¼Œä½†æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªï¼Œå› æ­¤ä½¿ç”¨&lt;code&gt;pg_total_relation_size(reltoastrelid)&lt;/code&gt;å¯è®¡ç®—TOASTè¡¨çš„æ•´ä½“å¤§å°ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä¾‹ç»Ÿè®¡æŸä¸€å¼ è¡¨åŠå…¶ç›¸å…³å…³ç³»udtf&#34;&gt;ä¾‹ï¼šç»Ÿè®¡æŸä¸€å¼ è¡¨åŠå…¶ç›¸å…³å…³ç³»UDTF&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;SELECT&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;oid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;relname&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;relnamespace&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;RegNamespace&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#204a87&#34;&gt;Text&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;               &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;as&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;nspname&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;relkind&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;                                        &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;as&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;relkind&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;reltuples&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;                                      &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;as&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;tuples&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;relpages&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;                                       &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;as&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pages&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg_total_relation_size&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;oid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;                    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;as&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;size&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;FROM&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg_class&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;WHERE&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;oid&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;ANY&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#204a87&#34;&gt;array&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;SELECT&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;16418&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;as&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;id&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;-- main
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;UNION&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;ALL&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;SELECT&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;indexrelid&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;FROM&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg_index&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;WHERE&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;indrelid&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;16418&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;-- index
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;UNION&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;ALL&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;SELECT&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;reltoastrelid&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;FROM&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg_class&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;WHERE&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;oid&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;16418&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;));&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;-- toast
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯ä»¥å°†å…¶åŒ…è£…ä¸ºUDTFï¼š&lt;code&gt;pg_table_size_detail&lt;/code&gt;ï¼Œä¾¿äºä½¿ç”¨ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;CREATE&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;OR&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;REPLACE&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;FUNCTION&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg_table_size_detail&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;relation&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;RegClass&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;RETURNS&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;TABLE&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;id&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;oid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pid&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;     &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;oid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;relname&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;name&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;nspname&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87&#34;&gt;text&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;relkind&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;char&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;tuples&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87&#34;&gt;bigint&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pages&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;   &lt;/span&gt;&lt;span style=&#34;color:#204a87&#34;&gt;integer&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;size&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87&#34;&gt;bigint&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;AS&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#a40000&#34;&gt;$$&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;BEGIN&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;RETURN&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;QUERY&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;SELECT&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rel&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;oid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;relation&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;oid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rel&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;relname&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rel&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;relnamespace&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;RegNamespace&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87&#34;&gt;Text&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;as&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;nspname&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rel&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;relkind&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;                              &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;as&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;relkind&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rel&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;reltuples&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#204a87&#34;&gt;bigint&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;                    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;as&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;tuples&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rel&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;relpages&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;                             &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;as&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pages&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg_total_relation_size&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;oid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;              &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;as&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;size&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;FROM&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg_class&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rel&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;WHERE&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;oid&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;ANY&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#204a87&#34;&gt;array&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;SELECT&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;relation&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;as&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;id&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;-- main
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;UNION&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;ALL&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;SELECT&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;indexrelid&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;FROM&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg_index&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;WHERE&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;indrelid&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;relation&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;-- index
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;      &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;UNION&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;ALL&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;SELECT&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;reltoastrelid&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;FROM&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg_class&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;WHERE&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;oid&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;relation&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;));&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;-- toast
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;END&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a40000&#34;&gt;$$&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;LANGUAGE&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;PlPgSQL&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;SELECT&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;FROM&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg_table_size_detail&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;16418&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;);&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿”å›ç»“æœæ ·ä¾‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;geo=# select * from  pg_table_size_detail(4325625);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   id    |   pid   |        relname        | nspname  | relkind |  tuples  |  pages  |    size
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;---------+---------+-----------------------+----------+---------+----------+---------+-------------
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 4325628 | 4325625 | pg_toast_4325625      | pg_toast | t       |   154336 |   23012 |   192077824
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 4419940 | 4325625 | idx_poi_adcode_btree  | gaode    | i       | 62685464 |  172058 |  1409499136
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 4419941 | 4325625 | idx_poi_cate_id_btree | gaode    | i       | 62685464 |  172318 |  1411629056
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 4419942 | 4325625 | idx_poi_lat_btree     | gaode    | i       | 62685464 |  172058 |  1409499136
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 4419943 | 4325625 | idx_poi_lon_btree     | gaode    | i       | 62685464 |  172058 |  1409499136
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 4419944 | 4325625 | idx_poi_name_btree    | gaode    | i       | 62685464 |  335624 |  2749431808
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 4325625 | 4325625 | gaode_poi             | gaode    | r       | 62685464 | 2441923 | 33714962432
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 4420005 | 4325625 | idx_poi_position_gist | gaode    | i       | 62685464 |  453374 |  3714039808
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 4420044 | 4325625 | poi_position_geohash6 | gaode    | i       | 62685464 |  172058 |  1409499136
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;ä¾‹å…³ç³»å¤§å°è¯¦æƒ…æ±‡æ€»&#34;&gt;ä¾‹ï¼šå…³ç³»å¤§å°è¯¦æƒ…æ±‡æ€»&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;select&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;nsp&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;nspname&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rel&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;relname&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rel&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;relnamespace&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;as&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;nspid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rel&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;oid&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;             &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;as&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;relid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rel&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;reltoastrelid&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;   &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;as&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;toastid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;toastind&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;indexrelid&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;as&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;toastindexid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg_total_relation_size&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rel&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;oid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;as&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;size&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg_relation_size&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rel&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;oid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg_relation_size&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rel&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;oid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;fsm&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg_relation_size&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rel&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;oid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;vm&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;as&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;relsize&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg_indexes_size&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rel&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;oid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;         &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;as&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;indexsize&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg_total_relation_size&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;reltoastrelid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;as&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;toastsize&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;ind&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;indexids&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;ind&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;indexnames&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;ind&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;indexsizes&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;from&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg_namespace&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;nsp&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;join&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg_class&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rel&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;on&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;nsp&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;oid&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rel&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;relnamespace&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;LATERAL&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;select&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;indexrelid&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;from&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg_index&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;where&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;indrelid&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rel&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;reltoastrelid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;toastind&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;LATERAL&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;select&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;array_agg&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;indexrelid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;as&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;indexids&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;                      &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;array_agg&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;indexrelid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;RegClass&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;as&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;indexnames&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;                      &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;array_agg&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg_total_relation_size&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;indexrelid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;))&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;as&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;indexsizes&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;              &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;from&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;pg_index&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;where&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;indrelid&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rel&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;oid&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;ind&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;where&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;nspname&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;not&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;in&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;pg_catalog&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;information_schema&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;and&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;rel&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;relkind&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;r&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
      </description>
    </item>
    
  </channel>
</rss>
