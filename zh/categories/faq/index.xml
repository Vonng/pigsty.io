<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Pigsty – FAQ</title>
    <link>/zh/categories/faq/</link>
    <description>Recent content in FAQ on Pigsty</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    
	  <atom:link href="/zh/categories/faq/index.xml" rel="self" type="application/rss+xml" />
    
    
      
        
      
    
    
    <item>
      <title>Docs: 常见问题</title>
      <link>/zh/docs/docker/faq/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/zh/docs/docker/faq/</guid>
      <description>
        
        
        &lt;hr&gt;
&lt;h2 id=&#34;使用代理服务器&#34;&gt;使用代理服务器&lt;/h2&gt;
&lt;p&gt;在 Docker 安装过程中，如果 &lt;a href=&#34;/zh/docs/reference/param#proxy_env&#34;&gt;&lt;code&gt;proxy_env&lt;/code&gt;&lt;/a&gt; 参数存在，
这里的 HTTP 代理服务器配置会被写入到 &lt;code&gt;/etc/docker/daemon.json&lt;/code&gt; 配置文件中。&lt;/p&gt;
&lt;p&gt;Docker 在从上游 Registry 拉取镜像时，会使用此代理服务器。&lt;/p&gt;
&lt;p&gt;小提示，在执行 &lt;code&gt;configure&lt;/code&gt; 过程中使用 &lt;code&gt;-x&lt;/code&gt; 参数会将当前环境中的代理服务器配置写入到 &lt;code&gt;proxy_env&lt;/code&gt; 中。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;使用镜像站点&#34;&gt;使用镜像站点&lt;/h2&gt;
&lt;p&gt;如果您在中国大陆受到功夫网影响，可以考虑使用墙内可用的 Docker 镜像站点，例如 quay.io：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;docker login quay.io    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 输入用户名密码，完成登陆&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;2024-06 更新，国内所有可用 Docker 镜像站点均已被墙，请使用代理服务器访问并拉取。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;将docker纳入监控&#34;&gt;将Docker纳入监控&lt;/h2&gt;
&lt;p&gt;在 Docker 模块安装过程中&lt;/p&gt;
&lt;p&gt;针对节点单独执行监控目标注册子任务 &lt;code&gt;docker_register&lt;/code&gt; 或 &lt;code&gt;register_prometheus&lt;/code&gt; 即可：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./docker.yml -l &amp;lt;your-node-selector&amp;gt; -t register_prometheus
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;使用软件模板&#34;&gt;使用软件模板&lt;/h2&gt;
&lt;p&gt;Pigsty 提供了一系列使用 Docker Compose 拉起的软件&lt;a href=&#34;/zh/docs/app/docker/&#34;&gt;工具模板&lt;/a&gt;，可以开箱即用。&lt;/p&gt;
&lt;p&gt;但需要首先安装 Docker 模块。&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>Docs: 常见问题</title>
      <link>/zh/docs/etcd/faq/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/zh/docs/etcd/faq/</guid>
      <description>
        
        
        &lt;hr&gt;
&lt;h2 id=&#34;etcd集群起什么作用&#34;&gt;etcd集群起什么作用？&lt;/h2&gt;
&lt;p&gt;etcd 是一个分布式的、可靠的键-值存储，用于存放系统中最为关键的数据，Pigsty 使用 etcd 作为 Patroni 的 DCS（分布式配置存储）服务，用于存储 PostgreSQL 集群的高可用状态信息。&lt;/p&gt;
&lt;p&gt;Patroni 将通过 etcd，实现集群故障检测、自动故障转移、主从切换，集群配置管理等功能。&lt;/p&gt;
&lt;p&gt;etcd 对于 PostgreSQL 集群的高可用至关重要，而 etcd 本身的可用性与容灾，是通过使用多个分布式的节点来保证的。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;etcd集群使用多大规模合适&#34;&gt;etcd集群使用多大规模合适？&lt;/h2&gt;
&lt;p&gt;如果超过集群成员数一半（包括正好一半）的 etcd 实例不可用，那么 etcd 集群将进入不可用状态，拒绝对外提供服务。&lt;/p&gt;
&lt;p&gt;例如：使用 3 节点的 etcd 集群允许最多一个节点宕机，而其他两个节点仍然可以正常工作；而使用 5 节点的 etcd 集群则可以容忍 2 节点失效。&lt;/p&gt;
&lt;p&gt;请注意，etcd 集群中的 &lt;strong&gt;学习者&lt;/strong&gt;（Learner）实例不计入成员数，因此在 3 节点 etcd 集群中，如果有一个学习者实例，那么实际上成员数量为 2，不能容忍任一节点失效。&lt;/p&gt;
&lt;p&gt;在生产环境中，我们建议使用奇数个 etcd 实例，对于生产环境，建议使用 3 节点或 5 节点的 etcd 集群部署以确保足够的可靠性。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;etcd集群不可用会有什么影响&#34;&gt;etcd集群不可用会有什么影响？&lt;/h2&gt;
&lt;p&gt;如果 etcd 集群不可用，那么会影响 PostgreSQL 的管控平面，但不会影响数据平面 —— 现有的 PostgreSQL 集群将继续运行，但通过 Patroni 进行的管理操作将无法执行。&lt;/p&gt;
&lt;p&gt;etcd 故障期间，PostgreSQL 高可用将无法实现自动故障转移，您也无法使用 &lt;code&gt;patronictl&lt;/code&gt; 对 PostgreSQL 集群发起管理操作，例如修改配置，执行手动故障转移等。
通过 Ansible 发起的管理命令不受 etcd 故障影响：例如创建数据库，创建用户，刷新 HBA 与 Service 配置等，etcd 故障期间，您依然可以直接操作 PostgreSQL 集群来实现这些功能。&lt;/p&gt;
&lt;p&gt;请注意，以上描述的行为仅适用于较新版本的 Patroni (&amp;gt;=3.0，对应 Pigsty &amp;gt;= 2.0)。如果您使用的是较老版本的 Patroni (&amp;lt;3.0，对应 Pigsty 版本为 1.x)，则 etcd / consul 故障会引发极为严重的全局性影响：
所有 PostgreSQL 集群将发生降级：主库将降级为从库，拒绝写请求，etcd 故障将放大为全局性 PostgreSQL 故障。在 Patroni 3.0 引入 DCS Failsafe 功能后，这种情况得到了显著改善。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;etcd集群中存储着什么数据&#34;&gt;etcd集群中存储着什么数据？&lt;/h2&gt;
&lt;p&gt;在 Pigsty 中，etcd 仅用于 PostgreSQL 高可用，并不会用于存储任何其他配置或状态数据。&lt;/p&gt;
&lt;p&gt;而 PG 高可用组件 Patroni 会自动生成并管理 etcd 中的数据，当这些数据在 etcd 中丢失时，Patroni 会自动重建。&lt;/p&gt;
&lt;p&gt;因此默认情况下，Pigsty 中的 &lt;strong&gt;etcd&lt;/strong&gt; 可以视作 “无状态服务”，可以进行销毁与重建，这为维护工作带来了极大的便利。&lt;/p&gt;
&lt;p&gt;如果您将 etcd 用于其他目的，例如作为 Kubernetes 的元数据存储，或自行存储其他数据，那么您需要自行备份 etcd 数据，并在 etcd 集群恢复后进行数据恢复。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;如何从etcd故障中恢复&#34;&gt;如何从etcd故障中恢复？&lt;/h2&gt;
&lt;p&gt;因为 Pigsty 中的 etcd 只用于 PostgreSQL 高可用，本质上是可销毁、可重建的 “无状态服务”，因此在出现故障时，您可以通过 “重启” / “重置” 来进行快速止血。&lt;/p&gt;
&lt;p&gt;要 &lt;strong&gt;重启&lt;/strong&gt; etcd 集群，您可以使用以下 Ansible 命令：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./etcd.yml -t etcd_launch
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;要 &lt;strong&gt;重置&lt;/strong&gt; etcd 集群，您可以直接执行以下剧本，实现覆盖抹除式重装：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./etcd.yml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;如果您自行使用 etcd 存储了其他数据，那么通常需要备份 etcd 数据，并在 etcd 集群恢复后进行数据恢复。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;维护etcd有什么注意事项&#34;&gt;维护etcd有什么注意事项？&lt;/h2&gt;
&lt;p&gt;简单的版本是：&lt;strong&gt;不要写爆 etcd 就好&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;etcd 默认设置了一个 2GB 的数据库容量上限，如果您的 etcd 数据库容量超过了这个限制，etcd 将会拒绝写入请求，这可能导致依赖 etcd 的 PostgreSQL 高可用机制无法正常工作。
与此同时，etcd 的&lt;a href=&#34;https://etcd.io/docs/v3.5/learning/data_model/&#34;&gt;数据模型&lt;/a&gt; 使得每一次写入都会产生一个新的版本，因此如果您的 etcd 集群频繁写入，即使只有极个别的 Key， etcd 数据库的大小也可能会不断增长，并在达到容量上限时出现故障。&lt;/p&gt;
&lt;p&gt;您可以通过 &lt;strong&gt;启动自动压实&lt;/strong&gt;，&lt;strong&gt;手工压实&lt;/strong&gt;，&lt;strong&gt;碎片整理&lt;/strong&gt;与&lt;strong&gt;提高配额&lt;/strong&gt;等方式实现这一点，详情请阅读 etcd &lt;a href=&#34;https://etcd.io/docs/v3.5/op-guide/maintenance/&#34;&gt;官方文档维护指南&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;Pigsty 在 v2.6 之后默认启用了 etcd 自动压实（Auto Compact），通常无需担心写满 etcd 的问题。对于 v2.6 之前的版本，我们 &lt;strong&gt;强烈建议您&lt;/strong&gt; 在生产环境中启用 etcd 的自动压实功能&lt;/p&gt;


&lt;div class=&#34;alert alert-danger&#34; role=&#34;alert&#34;&gt;
&lt;h4 class=&#34;alert-heading&#34;&gt;写爆 etcd 可能导致 etcd 集群不可用与 PostgreSQL 高可用故障！&lt;/h4&gt;

    请 Pigsty v2.0 - v2.5 用户尽快升级到较新版本，或参照下面的说明启用 etcd 自动垃圾回收

&lt;/div&gt;

&lt;hr&gt;
&lt;h2 id=&#34;如何启动etcd自动垃圾回收&#34;&gt;如何启动etcd自动垃圾回收？&lt;/h2&gt;
&lt;p&gt;如果您使用的早先版本的 Pigsty （v2.0 - v2.5），我们强烈建议您通过以下步骤，在生产环境中启用 etcd 的自动压实功能，从而避免 etcd 容量配额写满导致的 etcd 不可用故障。&lt;/p&gt;
&lt;p&gt;在 Pigsty 源码目录中，编辑 etcd 配置文件模板：&lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/roles/etcd/templates/etcd.conf.j2#L30&#34;&gt;&lt;code&gt;roles/etcd/templates/etcd.conf.j2&lt;/code&gt;&lt;/a&gt;，添加以下三条配置项：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;auto-compaction-mode&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;periodic&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;auto-compaction-retention&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;24h&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;quota-backend-bytes&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;17179869184&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;然后将所有相关 PostgreSQL 集群设置为 &lt;a href=&#34;/zh/docs/pgsql/admin&#34;&gt;&lt;strong&gt;维护模式&lt;/strong&gt;&lt;/a&gt; 后，重新使用 &lt;code&gt;./etcd.yml&lt;/code&gt; 覆盖部署 etcd 集群即可。&lt;/p&gt;
&lt;p&gt;该配置会将 etcd 默认的容量配额从 2 GiB 提高到 16 GiB，并确保只保留最近一天的写入历史版本，从而避免了 etcd 数据库大小的无限增长。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;etcd中的postgresql高可用数据存储在哪里&#34;&gt;etcd中的PostgreSQL高可用数据存储在哪里？&lt;/h2&gt;
&lt;p&gt;默认情况下，Patroni 使用 &lt;a href=&#34;/zh/docs/reference/param#pg_namespace&#34;&gt;&lt;strong&gt;&lt;code&gt;pg_namespace&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 指定的前缀（默认为 &lt;code&gt;/pg&lt;/code&gt;）作为所有元数据键的前缀，随后是 PostgreSQL 集群名称，例如，名为 &lt;code&gt;pg-meta&lt;/code&gt; 的 PG 集群，其元数据键将存储在 &lt;code&gt;/pg/pg-meta&lt;/code&gt; 下。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;etcdctl get /pg/pg-meta --prefix
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;其中的数据样本如下所示：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/pg/pg-meta/config
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;ttl&amp;#34;&lt;/span&gt;:30,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;loop_wait&amp;#34;&lt;/span&gt;:10,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;retry_timeout&amp;#34;&lt;/span&gt;:10,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;primary_start_timeout&amp;#34;&lt;/span&gt;:10,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;maximum_lag_on_failover&amp;#34;&lt;/span&gt;:1048576,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;maximum_lag_on_syncnode&amp;#34;&lt;/span&gt;:-1,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;primary_stop_timeout&amp;#34;&lt;/span&gt;:30,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;synchronous_mode&amp;#34;&lt;/span&gt;:false,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;synchronous_mode_strict&amp;#34;&lt;/span&gt;:false,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;failsafe_mode&amp;#34;&lt;/span&gt;:true,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;pg_version&amp;#34;&lt;/span&gt;:16,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;pg_cluster&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;pg-meta&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;pg_shard&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;pg-meta&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;pg_group&amp;#34;&lt;/span&gt;:0,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;postgresql&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;use_slots&amp;#34;&lt;/span&gt;:true,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;use_pg_rewind&amp;#34;&lt;/span&gt;:true,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;remove_data_directory_on_rewind_failure&amp;#34;&lt;/span&gt;:true,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;parameters&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;max_connections&amp;#34;&lt;/span&gt;:100,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;superuser_reserved_connections&amp;#34;&lt;/span&gt;:10,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;max_locks_per_transaction&amp;#34;&lt;/span&gt;:200,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;max_prepared_transactions&amp;#34;&lt;/span&gt;:0,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;track_commit_timestamp&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;on&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;wal_level&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;logical&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;wal_log_hints&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;on&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;max_worker_processes&amp;#34;&lt;/span&gt;:16,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;max_wal_senders&amp;#34;&lt;/span&gt;:50,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;max_replication_slots&amp;#34;&lt;/span&gt;:50,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;password_encryption&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;scram-sha-256&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;ssl&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;on&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;ssl_cert_file&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;/pg/cert/server.crt&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;ssl_key_file&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;/pg/cert/server.key&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;ssl_ca_file&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;/pg/cert/ca.crt&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;shared_buffers&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;7969MB&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;maintenance_work_mem&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;1993MB&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;work_mem&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;79MB&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;max_parallel_workers&amp;#34;&lt;/span&gt;:8,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;max_parallel_maintenance_workers&amp;#34;&lt;/span&gt;:2,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;max_parallel_workers_per_gather&amp;#34;&lt;/span&gt;:0,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;hash_mem_multiplier&amp;#34;&lt;/span&gt;:8.0,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;huge_pages&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;try&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;temp_file_limit&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;7GB&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;vacuum_cost_delay&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;20ms&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;vacuum_cost_limit&amp;#34;&lt;/span&gt;:2000,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;bgwriter_delay&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;10ms&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;bgwriter_lru_maxpages&amp;#34;&lt;/span&gt;:800,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;bgwriter_lru_multiplier&amp;#34;&lt;/span&gt;:5.0,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;min_wal_size&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;7GB&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;max_wal_size&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;28GB&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;max_slot_wal_keep_size&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;42GB&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;wal_buffers&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;16MB&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;wal_writer_delay&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;20ms&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;wal_writer_flush_after&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;1MB&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;commit_delay&amp;#34;&lt;/span&gt;:20,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;commit_siblings&amp;#34;&lt;/span&gt;:10,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;checkpoint_timeout&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;15min&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;checkpoint_completion_target&amp;#34;&lt;/span&gt;:0.8,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;archive_mode&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;on&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;archive_timeout&amp;#34;&lt;/span&gt;:300,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;archive_command&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;pgbackrest --stanza=pg-meta archive-push %p&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;max_standby_archive_delay&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;10min&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;max_standby_streaming_delay&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;3min&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;wal_receiver_status_interval&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;1s&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;hot_standby_feedback&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;on&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;wal_receiver_timeout&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;60s&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;max_logical_replication_workers&amp;#34;&lt;/span&gt;:8,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;max_sync_workers_per_subscription&amp;#34;&lt;/span&gt;:6,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;random_page_cost&amp;#34;&lt;/span&gt;:1.1,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;effective_io_concurrency&amp;#34;&lt;/span&gt;:1000,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;effective_cache_size&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;23907MB&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;default_statistics_target&amp;#34;&lt;/span&gt;:200,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;log_destination&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;csvlog&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;logging_collector&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;on&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;log_directory&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;/pg/log/postgres&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;log_filename&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;postgresql-%Y-%m-%d.log&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;log_checkpoints&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;on&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;log_lock_waits&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;on&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;log_replication_commands&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;on&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;log_statement&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;ddl&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;log_min_duration_statement&amp;#34;&lt;/span&gt;:100,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;track_io_timing&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;on&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;track_functions&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;all&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;track_activity_query_size&amp;#34;&lt;/span&gt;:8192,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;log_autovacuum_min_duration&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;1s&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;autovacuum_max_workers&amp;#34;&lt;/span&gt;:2,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;autovacuum_naptime&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;1min&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;autovacuum_vacuum_cost_delay&amp;#34;&lt;/span&gt;:-1,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;autovacuum_vacuum_cost_limit&amp;#34;&lt;/span&gt;:-1,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;autovacuum_freeze_max_age&amp;#34;&lt;/span&gt;:1000000000,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;deadlock_timeout&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;50ms&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;idle_in_transaction_session_timeout&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;10min&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;shared_preload_libraries&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;timescaledb, pg_stat_statements, auto_explain&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;auto_explain.log_min_duration&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;1s&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;auto_explain.log_analyze&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;on&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;auto_explain.log_verbose&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;on&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;auto_explain.log_timing&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;on&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;auto_explain.log_nested_statements&amp;#34;&lt;/span&gt;:true,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;pg_stat_statements.max&amp;#34;&lt;/span&gt;:5000,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;pg_stat_statements.track&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;all&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;pg_stat_statements.track_utility&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;off&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;pg_stat_statements.track_planning&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;off&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;timescaledb.telemetry_level&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;off&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;timescaledb.max_background_workers&amp;#34;&lt;/span&gt;:8,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;citus.node_conninfo&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;sslm
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;ode=prefer&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;}}}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/pg/pg-meta/failsafe
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;pg-meta-2&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;http://10.10.10.11:8008/patroni&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;pg-meta-1&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;http://10.10.10.10:8008/patroni&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/pg/pg-meta/initialize
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;7418384210787662172&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/pg/pg-meta/leader
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;pg-meta-1
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/pg/pg-meta/members/pg-meta-1
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;conn_url&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;postgres://10.10.10.10:5432/postgres&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;api_url&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;http://10.10.10.10:8008/patroni&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;state&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;running&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;role&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;primary&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;version&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;4.0.1&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;tags&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;clonefrom&amp;#34;&lt;/span&gt;:true,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;version&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;16&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;spec&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;8C.32G.125G&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;conf&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;tiny.yml&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;}&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;xlog_location&amp;#34;&lt;/span&gt;:184549376,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;timeline&amp;#34;&lt;/span&gt;:1&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/pg/pg-meta/members/pg-meta-2
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;conn_url&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;postgres://10.10.10.11:5432/postgres&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;api_url&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;http://10.10.10.11:8008/patroni&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;state&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;running&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;role&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;replica&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;version&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;4.0.1&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;tags&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;clonefrom&amp;#34;&lt;/span&gt;:true,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;version&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;16&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;spec&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;8C.32G.125G&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;conf&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;tiny.yml&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;}&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;xlog_location&amp;#34;&lt;/span&gt;:184549376,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;replication_state&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;streaming&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;timeline&amp;#34;&lt;/span&gt;:1&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/pg/pg-meta/status
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;optime&amp;#34;&lt;/span&gt;:184549376,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;slots&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;{&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;pg_meta_2&amp;#34;&lt;/span&gt;:184549376,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;pg_meta_1&amp;#34;&lt;/span&gt;:184549376&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;}&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;retain_slots&amp;#34;&lt;/span&gt;:&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;pg_meta_1&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;pg_meta_2&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;如何使用一个外部的已经存在的-etcd-集群&#34;&gt;如何使用一个外部的已经存在的 etcd 集群？&lt;/h2&gt;
&lt;p&gt;配置清单中硬编码了所使用 etcd 的分组名为 &lt;code&gt;etcd&lt;/code&gt;，这个分组里的成员将被用作 PGSQL 的 DCS 服务器。您可以使用 &lt;code&gt;etcd.yml&lt;/code&gt; 对它们进行初始化，或直接假设它是一个已存在的外部 etcd 集群。&lt;/p&gt;
&lt;p&gt;要使用现有的外部 etcd 集群，只要像往常一样定义它们即可，您可以跳过 &lt;code&gt;etcd.yml&lt;/code&gt; 剧本的执行，因为集群已经存在，不需要部署。&lt;/p&gt;
&lt;p&gt;但用户必须确保 &lt;strong&gt;现有 etcd 集群证书是由 Pigsty 使用的相同 CA 签名颁发的&lt;/strong&gt;。否则客户端无法使用 Pigsty 自签名 CA 颁发的证书来访问外部的 etcd 集群。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;如何向现有etcd集群添加新的成员&#34;&gt;如何向现有etcd集群添加新的成员？&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;详细过程，请参考&lt;a href=&#34;/zh/docs/etcd#%E6%B7%BB%E5%8A%A0%E6%88%90%E5%91%98&#34;&gt;向 etcd 集群添加成员&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;etcdctl member add &amp;lt;etcd-?&amp;gt; --learner&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#204a87&#34;&gt;true&lt;/span&gt; --peer-urls&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;https://&amp;lt;new_ins_ip&amp;gt;:2380 &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 在管理节点上宣告新成员加入&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./etcd.yml -l &amp;lt;new_ins_ip&amp;gt; -e &lt;span style=&#34;color:#000&#34;&gt;etcd_init&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;existing                                 &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 真正初始化新 etcd 成员&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;etcdctl member promote &amp;lt;new_ins_server_id&amp;gt;                                       &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 在管理节点上提升新成员为正式成员&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;如何从现有etcd集群中移除成员&#34;&gt;如何从现有etcd集群中移除成员？&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;详细过程，请参考&lt;a href=&#34;/zh/docs/etcd#%E7%A7%BB%E9%99%A4%E6%88%90%E5%91%98&#34;&gt;从 etcd 集群中移除成员&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;etcdctl member remove &amp;lt;etcd_server_id&amp;gt;   &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 在管理节点上从集群中踢出成员&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./etcd.yml -l &amp;lt;ins_ip&amp;gt; -t etcd_purge     &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 真正清除下线 etcd 实例&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
      </description>
    </item>
    
    <item>
      <title>Docs: 常见问题</title>
      <link>/zh/docs/ferret/faq/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/zh/docs/ferret/faq/</guid>
      <description>
        
        
        &lt;hr&gt;
&lt;h2 id=&#34;安装mongosh&#34;&gt;安装MongoSH&lt;/h2&gt;
&lt;p&gt;您可以使用 &lt;a href=&#34;https://www.mongodb.com/docs/mongodb-shell/&#34;&gt;MongoSH&lt;/a&gt; 作为客户端工具访问 FerretDB 集群&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cat &amp;gt; /etc/yum.repos.d/mongo.repo &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;lt;&amp;lt;EOF
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;[mongodb-org-6.0]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;name=MongoDB Repository
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;baseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/6.0/$basearch/
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;gpgcheck=1
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;enabled=1
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;gpgkey=https://www.mongodb.org/static/pgp/server-6.0.asc
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;EOF&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;yum install -y mongodb-mongosh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;当然，您也可以直接安装 &lt;code&gt;mongosh&lt;/code&gt; 的 RPM 包：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;rpm -ivh https://mirrors.tuna.tsinghua.edu.cn/mongodb/yum/el7/RPMS/mongodb-mongosh-1.9.1.x86_64.rpm
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
      </description>
    </item>
    
    <item>
      <title>Docs: 常见问题</title>
      <link>/zh/docs/infra/faq/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/zh/docs/infra/faq/</guid>
      <description>
        
        
        &lt;hr&gt;
&lt;h2 id=&#34;infra模块中包含了哪些组件&#34;&gt;INFRA模块中包含了哪些组件？&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Ansible 用于自动化、部署和管理；&lt;/li&gt;
&lt;li&gt;Nginx 用于公开对外暴露各种 WebUI 服务，并为提供一个本地软件源&lt;/li&gt;
&lt;li&gt;自签名 CA 用于 SSL/TLS 证书；&lt;/li&gt;
&lt;li&gt;Prometheus 用于收集存储监控指标；&lt;/li&gt;
&lt;li&gt;Grafana 用于监控/可视化；&lt;/li&gt;
&lt;li&gt;Loki 用于收集存储查询日志；&lt;/li&gt;
&lt;li&gt;AlertManager 用于告警聚合；&lt;/li&gt;
&lt;li&gt;Chronyd 用于 NTP 时间同步；&lt;/li&gt;
&lt;li&gt;DNSMasq 用于 DNS 注册和解析；&lt;/li&gt;
&lt;li&gt;ETCD 作为 PGSQL HA 的 DCS；（可以部署到别的专用节点集群上）&lt;/li&gt;
&lt;li&gt;在管理节点上的 PostgreSQL 作为 CMDB；（可选）&lt;/li&gt;
&lt;li&gt;Docker 用于无状态的应用程序和工具（可选）。&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;如何重新向-prometheus-注册监控目标&#34;&gt;如何重新向 Prometheus 注册监控目标？&lt;/h2&gt;
&lt;p&gt;如果你不小心删除了基础设施节点上 Prometheus 的目标目录（&lt;code&gt;/etc/prometheus/target&lt;/code&gt;），你可以使用以下命令再次向 Prometheus 注册监控目标：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./infra.yml -t register_prometheus  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 在 infra 节点上向 prometheus 注册所有 infra 目标&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./node.yml  -t register_prometheus  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 在 infra 节点上向 prometheus 注册所有 node  目标&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./etcd.yml  -t register_prometheus  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 在 infra 节点上向 prometheus 注册所有 etcd  目标&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./minio.yml -t register_prometheus  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 在 infra 节点上向 prometheus 注册所有 minio 目标&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql.yml -t register_prometheus  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 在 infra 节点上向 prometheus 注册所有 pgsql 目标&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;如何重新向-grafana-注册-postgresql-数据源&#34;&gt;如何重新向 Grafana 注册 PostgreSQL 数据源？&lt;/h2&gt;
&lt;p&gt;在 &lt;a href=&#34;/zh/docs/reference/param#pg_databases&#34;&gt;&lt;code&gt;pg_databases&lt;/code&gt;&lt;/a&gt; 中定义的 PGSQL 数据库默认会被注册为 Grafana 数据源（以供 PGCAT 应用使用）。&lt;/p&gt;
&lt;p&gt;如果你不小心删除了在 Grafana 中注册的 postgres 数据源，你可以使用以下命令再次注册它们：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 将所有（在 pg_databases 中定义的） pgsql 数据库注册为 grafana 数据源&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql.yml -t register_grafana
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;如何重新向-nginx-注册节点的-haproxy-管控界面&#34;&gt;如何重新向 Nginx 注册节点的 Haproxy 管控界面？&lt;/h2&gt;
&lt;p&gt;如果你不小心删除了 &lt;code&gt;/etc/nginx/conf.d/haproxy&lt;/code&gt; 中的已注册 haproxy 代理设置，你可以使用以下命令再次恢复它们：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./node.yml -t register_nginx     &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 在 infra 节点上向 nginx 注册所有 haproxy 管理页面的代理设置&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;如何恢复-dnsmasq-中的域名注册记录&#34;&gt;如何恢复 DNSMASQ 中的域名注册记录？&lt;/h2&gt;
&lt;p&gt;PGSQL 集群/实例域名默认注册到 infra 节点的 &lt;code&gt;/etc/hosts.d/&amp;lt;name&amp;gt;&lt;/code&gt;。你可以使用以下命令再次恢复它们：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql.yml -t pg_dns    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 在 infra 节点上向 dnsmasq 注册 pg 的 DNS 名称&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;如何使用nginx对外暴露新的上游服务&#34;&gt;如何使用Nginx对外暴露新的上游服务？&lt;/h2&gt;
&lt;p&gt;尽管您可以直接通过 IP:Port 的方式访问服务，但我们依然建议收敛访问入口，使用域名并统一从 Nginx 代理访问各类带有 Web 界面的服务。
这样有利于统一收口访问，减少暴露的端口，便于进行访问控制与审计。&lt;/p&gt;
&lt;p&gt;如果你希望通过 Nginx 门户公开新的 WebUI 服务，你可以将服务定义添加到 &lt;a href=&#34;/zh/docs/reference/param#infra_portal&#34;&gt;&lt;code&gt;infra_portal&lt;/code&gt;&lt;/a&gt; 参数中。
例如，下面是 Pigsty 官方 Demo 使用的 Infra 门户配置，对外暴露了几种额外的服务：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;infra_portal&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;home         &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;domain&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;home.pigsty.cc }&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;grafana      &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;domain: demo.pigsty.cc ,endpoint&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;${admin_ip}:3000&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;,websocket&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;true&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;prometheus   &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;domain: p.pigsty.cc ,endpoint&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;${admin_ip}:9090&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;alertmanager &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;domain: a.pigsty.cc ,endpoint&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;${admin_ip}:9093&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;blackbox     &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;endpoint&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;${admin_ip}:9115&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;loki         &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;endpoint&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;${admin_ip}:3100&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 新增的 Web 门户&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;minio        &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;domain: sss.pigsty  ,endpoint&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;${admin_ip}:9001&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;,scheme: https ,websocket&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;true&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;postgrest    &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;domain: api.pigsty.cc  ,endpoint&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;127.0.0.1:8884&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;   &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;pgadmin      &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;domain: adm.pigsty.cc  ,endpoint&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;127.0.0.1:8885&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;   &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;pgweb        &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;domain: cli.pigsty.cc  ,endpoint&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;127.0.0.1:8886&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;   &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;bytebase     &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;domain: ddl.pigsty.cc  ,endpoint&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;127.0.0.1:8887&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;   &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;gitea        &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;domain: git.pigsty.cc  ,endpoint&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;127.0.0.1:8889&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;   &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;wiki         &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;domain: wiki.pigsty.cc ,endpoint&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;127.0.0.1:9002&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;   &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;noco         &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;domain: noco.pigsty.cc ,endpoint&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;127.0.0.1:9003&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;   &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;supa         &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;domain: supa.pigsty.cc ,endpoint&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;127.0.0.1:8000&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;, websocket&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;true&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;完成 Nginx 上游服务定义后，使用以下配置与命令，向 Nginx 注册新的服务。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./infra.yml -t nginx_config           &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 重新生成 Nginx 配置文件&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./infra.yml -t nginx_launch           &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 更新并应用 Nginx 配置。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 您也可以使用 Ansible 手工重载 Nginx 配置&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ansible infra -b -a &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;nginx -s reload&amp;#39;&lt;/span&gt;  &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 重载Nginx配置&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;如果你希望通过 HTTPS 访问，你必须删除 &lt;code&gt;files/pki/csr/pigsty.csr&lt;/code&gt; 和 &lt;code&gt;files/pki/nginx/pigsty.{key,crt}&lt;/code&gt; 以强制重新生成 Nginx SSL/TLS 证书以包括新上游的域名。
如果您希望使用权威机构签发的 SSL 证书，而不是 Pigsty 自签名 CA 颁发的证书，可以将其放置于 &lt;code&gt;/etc/nginx/conf.d/cert/&lt;/code&gt; 目录中并修改相应配置：&lt;code&gt;/etc/nginx/conf.d/&amp;lt;name&amp;gt;.conf&lt;/code&gt;。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;如何手动向节点添加上游仓库的repo文件&#34;&gt;如何手动向节点添加上游仓库的Repo文件？&lt;/h2&gt;
&lt;p&gt;Pigsty 有一个内置的包装脚本 &lt;code&gt;bin/repo-add&lt;/code&gt;，它将调用 ansible 剧本 &lt;code&gt;node.yml&lt;/code&gt; 来将 repo 文件添加到相应的节点。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;bin/repo-add &amp;lt;selector&amp;gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;[&lt;/span&gt;modules&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;bin/repo-add 10.10.10.10           &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 为节点 10.10.10.10 添加 node 源&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;bin/repo-add infra   node,infra    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 为 infra 分组添加 node 和 infra 源&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;bin/repo-add infra   node,local    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 为 infra 分组添加节点仓库和本地pigsty源&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;bin/repo-add pg-test node,pgsql    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 为 pg-test 分组添加 node 和 pgsql 源&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
      </description>
    </item>
    
    <item>
      <title>Docs: 常见问题</title>
      <link>/zh/docs/minio/faq/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/zh/docs/minio/faq/</guid>
      <description>
        
        
        &lt;hr&gt;
&lt;h2 id=&#34;启动多节点多盘minio集群失败怎么办&#34;&gt;启动多节点/多盘MinIO集群失败怎么办？&lt;/h2&gt;
&lt;p&gt;在&lt;a href=&#34;/zh/docs/minio/config#%E5%8D%95%E6%9C%BA%E5%A4%9A%E7%9B%98&#34;&gt;单机多盘&lt;/a&gt;或&lt;a href=&#34;/zh/docs/minio/config#%E5%A4%9A%E6%9C%BA%E5%A4%9A%E7%9B%98&#34;&gt;多机多盘&lt;/a&gt;模式下，如果数据目录不是有效的磁盘挂载点，MinIO会拒绝启动。&lt;/p&gt;
&lt;p&gt;请使用已挂载的磁盘作为MinIO的数据目录，而不是普通目录。您只能在&lt;a href=&#34;/zh/docs/minio/config#%E5%8D%95%E6%9C%BA%E5%8D%95%E7%9B%98&#34;&gt;单机单盘&lt;/a&gt;模式下使用普通目录作为 MinIO 的数据目录，作为开发测试之用。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;如何向已有的minio集群中添加新的成员&#34;&gt;如何向已有的MinIO集群中添加新的成员？&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;在部署之前，您最好规划MinIO集群容量，因为新增成员需要全局重启。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;您可以通过向现有集群中添加新的服务器节点，打造一个新的存储池的方式，实现 MinIO 扩容。&lt;/p&gt;
&lt;p&gt;请注意，MinIO 一旦部署，你无法修改现有集群的节点数量与磁盘数量！&lt;/p&gt;
&lt;p&gt;请参考这里：&lt;a href=&#34;https://min.io/docs/minio/linux/operations/install-deploy-manage/expand-minio-deployment.html&#34;&gt;扩展MinIO部署&lt;/a&gt;&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>Docs: 常见问题</title>
      <link>/zh/docs/node/faq/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/zh/docs/node/faq/</guid>
      <description>
        
        
        &lt;hr&gt;
&lt;h2 id=&#34;如何配置主机节点上的ntp服务&#34;&gt;如何配置主机节点上的NTP服务？&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;NTP对于生产环境各项服务非常重要，如果没有配置 NTP，您可以使用公共 NTP 服务，或管理节点上的 Chronyd 作为标准时间。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;如果您的节点已经配置了 NTP，可以通过设置 &lt;code&gt;node_ntp_enabled&lt;/code&gt; 为 &lt;code&gt;false&lt;/code&gt; 来保留现有配置，不进行任何变更。&lt;/p&gt;
&lt;p&gt;否则，如果您有互联网访问权限，可以使用公共 NTP 服务，例如 &lt;code&gt;pool.ntp.org&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;如果您没有互联网访问权限，可以使用以下方式，确保所有环境内的节点与管理节点时间是同步的，或者使用其他内网环境的 NTP 授时服务。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;node_ntp_servers:                 &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# /etc/chrony.conf 中的 ntp 服务器列表&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - pool cn.pool.ntp.org iburst
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  - pool &lt;span style=&#34;color:#4e9a06&#34;&gt;${&lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;admin_ip&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;}&lt;/span&gt; iburst       &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 假设其他节点都没有互联网访问，那么至少与 Admin 节点保持时间同步。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;如何在节点上强制同步时间&#34;&gt;如何在节点上强制同步时间？&lt;/h2&gt;
&lt;p&gt;为了使用 &lt;code&gt;chronyc&lt;/code&gt; 来同步时间。您首先需要配置 NTP 服务。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ansible all -b -a &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;chronyc -a makestep&amp;#39;&lt;/span&gt;     &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 同步时间&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;您可以用任何组或主机 IP 地址替换 &lt;code&gt;all&lt;/code&gt;，以限制执行范围。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;远程节点无法通过ssh访问怎么办&#34;&gt;远程节点无法通过SSH访问怎么办？&lt;/h2&gt;
&lt;p&gt;如果目标机器隐藏在SSH跳板机后面， 或者进行了一些无法直接使用&lt;code&gt;ssh ip&lt;/code&gt;访问的自定义操作， 可以使用诸如 &lt;code&gt;ansible_port&lt;/code&gt;
或 &lt;code&gt;ansible_host&lt;/code&gt; 这一类&lt;a href=&#34;https://docs.ansible.com/ansible/latest/inventory_guide/connection_details.html&#34;&gt;Ansible连接参数&lt;/a&gt;来指定各种 SSH 连接信息，如下所示：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;pg-test:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  vars: &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;{&lt;/span&gt; pg_cluster: pg-test &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  hosts:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    10.10.10.11: &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;{&lt;/span&gt;pg_seq: 1, pg_role: primary, ansible_host: node-1 &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    10.10.10.12: &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;{&lt;/span&gt;pg_seq: 2, pg_role: replica, ansible_port: 22223, ansible_user: admin &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    10.10.10.13: &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;{&lt;/span&gt;pg_seq: 3, pg_role: offline, ansible_port: &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;22224&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;远程节点ssh与sudo需要密码怎么办&#34;&gt;远程节点SSH与SUDO需要密码怎么办？&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;执行部署和更改时&lt;/strong&gt;，使用的管理员用户&lt;strong&gt;必须&lt;/strong&gt;对所有节点拥有&lt;code&gt;ssh&lt;/code&gt;和&lt;code&gt;sudo&lt;/code&gt;权限。无需密码免密登录。&lt;/p&gt;
&lt;p&gt;您可以在执行剧本时通过&lt;code&gt;-k|-K&lt;/code&gt;
参数传入ssh和sudo密码，甚至可以通过&lt;code&gt;-e&lt;/code&gt;&lt;a href=&#34;/zh/docs/reference/param#connect&#34;&gt;&lt;code&gt;ansible_host&lt;/code&gt;&lt;/a&gt;&lt;code&gt;=&amp;lt;another_user&amp;gt;&lt;/code&gt;使用另一个用户来运行剧本。&lt;/p&gt;
&lt;p&gt;但是，Pigsty强烈建议为管理员用户配置SSH&lt;strong&gt;无密码登录&lt;/strong&gt;以及无密码的&lt;code&gt;sudo&lt;/code&gt;。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;如何使用现有管理员创建专用管理员用户&#34;&gt;如何使用现有管理员创建专用管理员用户？&lt;/h2&gt;
&lt;p&gt;使用以下命令，使用该节点上现有的管理员用户，创建由&lt;a href=&#34;/zh/docs/reference/param#node_admin_username&#34;&gt;&lt;code&gt;node_admin_username&lt;/code&gt;&lt;/a&gt;
定义的新的标准的管理员用户。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./node.yml -k -K -e &lt;span style=&#34;color:#000&#34;&gt;ansible_user&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&amp;lt;another_admin&amp;gt; -t node_admin
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;如何使用节点上的haproxy对外暴露服务&#34;&gt;如何使用节点上的HAProxy对外暴露服务？&lt;/h2&gt;
&lt;p&gt;您可以在配置中中使用&lt;a href=&#34;/zh/docs/reference/param#haproxy_services&#34;&gt;&lt;code&gt;haproxy_services&lt;/code&gt;&lt;/a&gt;
来暴露服务，并使用 &lt;code&gt;node.yml -t haproxy_config,haproxy_reload&lt;/code&gt; 来更新配置。&lt;/p&gt;
&lt;p&gt;以下是使用它暴露MinIO服务的示例：&lt;a href=&#34;/zh/docs/minio#%E6%9A%B4%E9%9C%B2%E6%9C%8D%E5%8A%A1&#34;&gt;暴露MinIO服务&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;为什么我的-etcyumreposd-全没了&#34;&gt;为什么我的 &lt;code&gt;/etc/yum.repos.d/*&lt;/code&gt; 全没了？&lt;/h2&gt;
&lt;p&gt;Pigsty会在infra节点上构建的本地软件仓库源中包含所有依赖项。而所有普通节点会根据 &lt;a href=&#34;/zh/docs/reference/param#node_repo_modules&#34;&gt;&lt;code&gt;node_repo_modules&lt;/code&gt;&lt;/a&gt; 的默认配置 &lt;code&gt;local&lt;/code&gt; 来引用并使用 Infra 节点上的本地软件源。&lt;/p&gt;
&lt;p&gt;这一设计从而避免了互联网访问，增强了安装过程的稳定性与可靠性。所有原有的源定义文件会被移动到 &lt;code&gt;/etc/yum.repos.d/backup&lt;/code&gt; 目录中，您只要按需复制回来即可。&lt;/p&gt;
&lt;p&gt;如果您想在普通节点安装过程中保留原有的源定义文件，将 &lt;a href=&#34;/zh/docs/reference/param#node_repo_remove&#34;&gt;&lt;code&gt;node_repo_remove&lt;/code&gt;&lt;/a&gt; 设置为&lt;code&gt;false&lt;/code&gt;即可。&lt;/p&gt;
&lt;p&gt;如果您想在 Infra 节点构建本地源的过程中保留原有的源定义文件，将 &lt;a href=&#34;/zh/docs/reference/param#repo_remove&#34;&gt;&lt;code&gt;repo_remove&lt;/code&gt;&lt;/a&gt; 设置为&lt;code&gt;false&lt;/code&gt;即可。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;为什么我的命令行提示符变样了怎么恢复&#34;&gt;为什么我的命令行提示符变样了？怎么恢复？&lt;/h2&gt;
&lt;p&gt;Pigsty 使用的 Shell 命令行提示符是由环境变量 &lt;code&gt;PS1&lt;/code&gt; 指定，定义在 &lt;code&gt;/etc/profile.d/node.sh&lt;/code&gt; 文件中。&lt;/p&gt;
&lt;p&gt;如果您不喜欢，想要修改或恢复原样，可以将这个文件移除，重新登陆即可。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;为什么我的主机名变了&#34;&gt;为什么我的主机名变了？&lt;/h2&gt;
&lt;p&gt;在两种情况下，Pigsty 会修改您的节点主机名：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;显式定义了 &lt;a href=&#34;/zh/docs/reference/param#nodename_overwrite&#34;&gt;&lt;code&gt;nodename&lt;/code&gt;&lt;/a&gt; 的值（默认为空）&lt;/li&gt;
&lt;li&gt;节点上声明了 &lt;a href=&#34;/zh/docs/pgsql&#34;&gt;&lt;strong&gt;&lt;code&gt;PGSQL&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 模块，且启用了 &lt;a href=&#34;/zh/docs/reference/param#node_id_from_pg&#34;&gt;&lt;strong&gt;&lt;code&gt;node_id_from_pg&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 参数（默认为 &lt;code&gt;true&lt;/code&gt;）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如果您不希望修改主机名，可以在全局/集群/实例层面修改 &lt;a href=&#34;/zh/docs/reference/param#nodename_overwrite&#34;&gt;&lt;strong&gt;&lt;code&gt;nodename_overwrite&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 参数为 &lt;code&gt;false&lt;/code&gt; （默认值为 &lt;code&gt;true&lt;/code&gt;）。&lt;/p&gt;
&lt;p&gt;详情请参考 &lt;a href=&#34;/zh/docs/reference/param#node_id&#34;&gt;&lt;strong&gt;&lt;code&gt;NODE_ID&lt;/code&gt;&lt;/strong&gt;&lt;/a&gt; 一节。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;腾讯云的-opencloudos-有什么兼容性问题&#34;&gt;腾讯云的 OpenCloudOS 有什么兼容性问题？&lt;/h2&gt;
&lt;p&gt;OpenCloudOS 上的 &lt;code&gt;softdog&lt;/code&gt; 内核模块不可用，需要从 &lt;code&gt;node_kernel_modules&lt;/code&gt; 中移除。在配置文件全局变量中添加以下配置项以覆盖：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;node_kernel_modules&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000&#34;&gt;br_netfilter, ip_vs, ip_vs_rr, ip_vs_wrr, ip_vs_sh ]&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
      </description>
    </item>
    
    <item>
      <title>Docs: 常见问题</title>
      <link>/zh/docs/pgsql/faq/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/zh/docs/pgsql/faq/</guid>
      <description>
        
        
        &lt;hr&gt;
&lt;h2 id=&#34;pgsql初始化失败abort-due-to-postgres-exists&#34;&gt;PGSQL初始化失败：ABORT due to postgres exists&lt;/h2&gt;
&lt;p&gt;这意味着正在初始化的 PostgreSQL 实例已经存在了， 将 &lt;code&gt;pg_clean&lt;/code&gt; 设置为 &lt;code&gt;true&lt;/code&gt;，并将 &lt;code&gt;pg_safeguard&lt;/code&gt; 设置为 &lt;code&gt;false&lt;/code&gt;，就可以在执行 &lt;code&gt;pgsql.yml&lt;/code&gt; 期间强制清理现存实例。&lt;/p&gt;
&lt;p&gt;如果 &lt;code&gt;pg_clean&lt;/code&gt; 为 &lt;code&gt;true&lt;/code&gt; (并且 &lt;code&gt;pg_safeguard&lt;/code&gt; 也为 &lt;code&gt;false&lt;/code&gt;)，&lt;code&gt;pgsql.yml&lt;/code&gt; 剧本将会移除现有的 pgsql 数据并重新初始化为新的，这使得这个剧本真正幂等。&lt;/p&gt;
&lt;p&gt;你可以通过使用一个特殊的任务标签 &lt;code&gt;pg_purge&lt;/code&gt; 来强制清除现有的 PostgreSQL 数据，这个标签任务会忽略 &lt;code&gt;pg_clean&lt;/code&gt; 和 &lt;code&gt;pg_safeguard&lt;/code&gt; 的设置，所以非常危险。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql.yml -t pg_clean      &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 优先考虑 pg_clean 和 pg_safeguard&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql.yml -t pg_purge      &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 忽略 pg_clean 和 pg_safeguard&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;pgsql初始化失败abort-due-to-pg_safeguard-enabled&#34;&gt;PGSQL初始化失败：ABORT due to pg_safeguard enabled&lt;/h2&gt;
&lt;p&gt;这意味着正准备清理的 PostgreSQL 实例打开了防误删保险， 禁用 &lt;code&gt;pg_safeguard&lt;/code&gt; 以移除 Postgres 实例。&lt;/p&gt;
&lt;p&gt;如果防误删保险 &lt;a href=&#34;/zh/docs/reference/param#pg_safeguard&#34;&gt;&lt;code&gt;pg_safeguard&lt;/code&gt;&lt;/a&gt; 打开，那么你就不能使用 &lt;code&gt;bin/pgsql-rm&lt;/code&gt; 和 &lt;code&gt;pgsql-rm.yml&lt;/code&gt; 剧本移除正在运行的 PGSQL 实例了。&lt;/p&gt;
&lt;p&gt;要禁用 &lt;code&gt;pg_safeguard&lt;/code&gt;，你可以在配置清单中将 &lt;code&gt;pg_safeguard&lt;/code&gt; 设置为 &lt;code&gt;false&lt;/code&gt;，或者在执行剧本时使用命令参数 &lt;code&gt;-e pg_safeguard=false&lt;/code&gt;。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql-rm.yml -e &lt;span style=&#34;color:#000&#34;&gt;pg_safeguard&lt;/span&gt;&lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#204a87&#34;&gt;false&lt;/span&gt; -l &amp;lt;cls_to_remove&amp;gt;    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 强制覆盖 pg_safeguard&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;`&lt;/p&gt;
&lt;h2 id=&#34;pgsql初始化失败fail-to-wait-for-postgrespatroni-primary&#34;&gt;PGSQL初始化失败：Fail to wait for postgres/patroni primary&lt;/h2&gt;
&lt;p&gt;这种错误信息存在多种可能，需要你 &lt;a href=&#34;https://github.com/Vonng/pigsty/discussions/338&#34;&gt;检查&lt;/a&gt; Ansible，Systemd / Patroni / PostgreSQL 日志，找出真正的原因。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;可能性1：集群配置错误，找出错误的配置项修改并应用。&lt;/li&gt;
&lt;li&gt;可能性2：在部署中存在同名集群，或者之前的同名集群主节点被不正确地移除&lt;/li&gt;
&lt;li&gt;可能性3：在DCS中有同名集群残留的垃圾元数据：没有正确完成下线，你可以使用 &lt;code&gt;etcdctl del --prefix /pg/&amp;lt;cls&amp;gt;&lt;/code&gt; 来手工删除残留数据（请小心）&lt;/li&gt;
&lt;li&gt;可能性4：你的 PostgreSQL 或节点相关 RPM 包没有被成功安装&lt;/li&gt;
&lt;li&gt;可能性5：你的 Watchdog 内核模块没有正确启用加载&lt;/li&gt;
&lt;li&gt;可能性6：你在初始化数据库时指定的语言 Locale 不存在（例如，使用了 en_US.UTF8，但没有安装英文语言包或 Locale 支持）&lt;/li&gt;
&lt;li&gt;如果你遇到了其他的原因，欢迎提交 Issue 或向社区求助。&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;pgsql初始化失败fail-to-wait-for-postgrespatroni-replica&#34;&gt;PGSQL初始化失败：Fail to wait for postgres/patroni replica&lt;/h2&gt;
&lt;p&gt;存在几种可能的原因：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;立即失败&lt;/strong&gt;：通常是由于配置错误、网络问题、损坏的DCS元数据等原因。你必须检查 &lt;code&gt;/pg/log&lt;/code&gt; 找出实际原因。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;过了一会儿失败&lt;/strong&gt;：这可能是由于源实例数据损坏。查看 PGSQL FAQ：如何在数据损坏时创建副本？&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;过了很长时间再超时&lt;/strong&gt;：如果 &lt;code&gt;wait for postgres replica&lt;/code&gt; 任务耗时 30 分钟或更长时间并由于超时而失败，这对于大型集群（例如，1TB+，可能需要几小时创建一个副本）是很常见的。&lt;/p&gt;
&lt;p&gt;在这种情况下，底层创建副本的过程仍在进行。你可以使用 &lt;code&gt;pg list &amp;lt;cls&amp;gt;&lt;/code&gt; 检查集群状态并等待副本赶上主节点。然后使用以下命令继续以下任务，完成完整的从库初始化：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql.yml -t pg_hba,pg_reload,pg_backup,pgbouncer,pg_vip,pg_dns,pg_service,pg_exporter,pg_register -l &amp;lt;problematic_replica&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;如何安装其他的postgresql大版本12---14以及-16beta&#34;&gt;如何安装其他的PostgreSQL大版本：12 - 14，以及 16beta&lt;/h2&gt;
&lt;p&gt;要安装 PostgreSQL 12 - 15，你必须在配置清单中设置 &lt;code&gt;pg_version&lt;/code&gt; 为 &lt;code&gt;12&lt;/code&gt;、&lt;code&gt;13&lt;/code&gt;、&lt;code&gt;14&lt;/code&gt; 或 &lt;code&gt;15&lt;/code&gt;，通常在集群级别配置这个参数。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;pg_version&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;16&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;                    &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 在此模板中安装 pg 16&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;pg_libs&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;pg_stat_statements, auto_explain&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 从 pg 16 beta 中移除 timescaledb，因为它不可用&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;pg_extensions&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;[]&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;                 &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 目前缺少 pg16 扩展&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;在 &lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/conf/prod.yml#L110&#34;&gt;prod.yml&lt;/a&gt; 43 节点生产环境仿真模板中提供了安装 12 - 16 大版本集群的示例。&lt;/p&gt;
&lt;p&gt;详情请参考 &lt;a href=&#34;/zh/docs/pgsql/config#%E5%A4%A7%E7%89%88%E6%9C%AC%E5%88%87%E6%8D%A2&#34;&gt;PGSQL配置：切换大版本&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;如何为-postgresql-启用大页hugepage&#34;&gt;如何为 PostgreSQL 启用大页/HugePage？&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;使用 &lt;code&gt;node_hugepage_count&lt;/code&gt; 和 &lt;code&gt;node_hugepage_ratio&lt;/code&gt; 或 &lt;code&gt;/pg/bin/pg-tune-hugepage&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;如果你计划启用大页（HugePage），请考虑使用 &lt;a href=&#34;/zh/docs/reference/param#node_hugepage_count&#34;&gt;&lt;code&gt;node_hugepage_count&lt;/code&gt;&lt;/a&gt; 和 &lt;a href=&#34;/zh/docs/reference/param#node_hugepage_ratio&#34;&gt;&lt;code&gt;node_hugepage_ratio&lt;/code&gt;&lt;/a&gt;，并配合 &lt;code&gt;./node.yml -t node_tune&lt;/code&gt; 进行应用。&lt;/p&gt;
&lt;p&gt;大页对于数据库来说有利有弊，利是内存是专门管理的，不用担心被挪用，降低数据库 OOM 风险。缺点是某些场景下可能对性能由负面影响。&lt;/p&gt;
&lt;p&gt;在 PostgreSQL 启动前，您需要分配 &lt;strong&gt;足够多的&lt;/strong&gt; 大页，浪费的部分可以使用 &lt;code&gt;pg-tune-hugepage&lt;/code&gt; 脚本对其进行回收，不过此脚本仅 PostgreSQL 15+ 可用。&lt;/p&gt;
&lt;p&gt;如果你的 PostgreSQL 已经在运行，你可以使用下面的办法启动大页（仅 PG15+ 可用）：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sync&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;;&lt;/span&gt; &lt;span style=&#34;color:#204a87&#34;&gt;echo&lt;/span&gt; &lt;span style=&#34;color:#0000cf;font-weight:bold&#34;&gt;3&lt;/span&gt; &amp;gt; /proc/sys/vm/drop_caches   &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 刷盘，释放系统缓存（请做好数据库性能受到冲击的准备）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo /pg/bin/pg-tune-hugepage             &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 将 nr_hugepages 写入 /etc/sysctl.d/hugepage.conf&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;pg restart &amp;lt;cls&amp;gt;                          &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 重启 postgres 以使用 hugepage&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;如何确保故障转移中数据不丢失&#34;&gt;如何确保故障转移中数据不丢失？&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;使用 &lt;code&gt;crit.yml&lt;/code&gt; 参数模板，设置 &lt;code&gt;pg_rpo&lt;/code&gt; 为 &lt;code&gt;0&lt;/code&gt;，或&lt;a href=&#34;/zh/docs/pgsql/admin#%E9%85%8D%E7%BD%AE%E9%9B%86%E7%BE%A4&#34;&gt;配置集群&lt;/a&gt;为同步提交模式。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;考虑使用 &lt;a href=&#34;/zh/docs/pgsql/config#%E5%90%8C%E6%AD%A5%E5%A4%87%E5%BA%93&#34;&gt;同步备库&lt;/a&gt; 和 &lt;a href=&#34;/zh/docs/pgsql/config#%E6%B3%95%E5%AE%9A%E4%BA%BA%E6%95%B0%E6%8F%90%E4%BA%A4&#34;&gt;法定多数提交&lt;/a&gt; 来确保故障转移过程中的零数据丢失。&lt;/p&gt;
&lt;p&gt;更多细节，可以参考 &lt;a href=&#34;/zh/docs/setup/security#%E5%8F%AF%E7%94%A8%E6%80%A7&#34;&gt;安全考量 - 可用性&lt;/a&gt; 的相关介绍。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;磁盘写满了如何抢救&#34;&gt;磁盘写满了如何抢救？&lt;/h2&gt;
&lt;p&gt;如果磁盘写满了，连 Shell 命令都无法执行，&lt;code&gt;rm -rf /pg/dummy&lt;/code&gt; 可以释放一些救命空间。&lt;/p&gt;
&lt;p&gt;默认情况下，&lt;a href=&#34;/zh/docs/reference/param#pg_dummy_filesize&#34;&gt;&lt;code&gt;pg_dummy_filesize&lt;/code&gt;&lt;/a&gt; 设置为 &lt;code&gt;64MB&lt;/code&gt;。在生产环境中，建议将其增加到 &lt;code&gt;8GB&lt;/code&gt; 或更大。&lt;/p&gt;
&lt;p&gt;它将被放置在 PGSQL 主数据磁盘上的 &lt;code&gt;/pg/dummy&lt;/code&gt; 路径下。你可以删除该文件以释放一些紧急空间：至少可以让你在该节点上运行一些 shell 脚本来进一步回收其他空间。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;当集群数据已经损坏时如何创建副本&#34;&gt;当集群数据已经损坏时如何创建副本？&lt;/h2&gt;
&lt;p&gt;Pigsty 在所有实例的 patroni 配置中设置了 &lt;code&gt;cloneform: true&lt;/code&gt; 标签，标记该实例可用于创建副本。&lt;/p&gt;
&lt;p&gt;如果某个实例有损坏的数据文件，导致创建新副本的时候出错中断，那么你可以设置 &lt;code&gt;clonefrom: false&lt;/code&gt; 来避免从损坏的实例中拉取数据。具体操作如下&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ vi /pg/bin/patroni.yml
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;tags:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  nofailover: &lt;span style=&#34;color:#204a87&#34;&gt;false&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  clonefrom: &lt;span style=&#34;color:#204a87&#34;&gt;true&lt;/span&gt;      &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# ----------&amp;gt; change to false&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  noloadbalance: &lt;span style=&#34;color:#204a87&#34;&gt;false&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  nosync: &lt;span style=&#34;color:#204a87&#34;&gt;false&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  version:  &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;15&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  spec: &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;4C.8G.50G&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  conf: &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;oltp.yml&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ systemctl reload patroni    &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 重新加载 Patroni 配置&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;postgresql-监控的性能损耗如何&#34;&gt;PostgreSQL 监控的性能损耗如何？&lt;/h2&gt;
&lt;p&gt;一个常规 PostgreSQL 实例抓取耗时大约 200ms。抓取间隔默认为 10 秒，对于一个生产多核数据库实例来说几乎微不足道。&lt;/p&gt;
&lt;p&gt;请注意，Pigsty 默认开启了库内对象监控，所以如果您的数据库内有数以十万计的表/索引对象，抓取可能耗时会增加到几秒。&lt;/p&gt;
&lt;p&gt;您可以修改 Prometheus 的抓取频率，请确保一点：抓取周期应当显著高于一次抓取的时长。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;如何监控一个现存的-postgresql-实例&#34;&gt;如何监控一个现存的 PostgreSQL 实例？&lt;/h2&gt;
&lt;p&gt;在 &lt;a href=&#34;/zh/docs/pgsql/monitor&#34;&gt;PGSQL Monitor&lt;/a&gt; 中提供了详细的监控配置说明。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;如何手工从-prometheus-中移除-postgresql-监控对象&#34;&gt;如何手工从 Prometheus 中移除 PostgreSQL 监控对象？&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./pgsql-rm.yml -t prometheus -l &amp;lt;cls&amp;gt;     &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 将集群 &amp;#39;cls&amp;#39; 的所有实例从 prometheus 中移除&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;bin/pgmon-rm &amp;lt;ins&amp;gt;     &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# 用于从 Prometheus 中移除单个实例 &amp;#39;ins&amp;#39; 的监控对象，特别适合移除添加的外部实例&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
      </description>
    </item>
    
    <item>
      <title>Docs: 常见问题</title>
      <link>/zh/docs/redis/faq/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/zh/docs/redis/faq/</guid>
      <description>
        
        
        &lt;hr&gt;
&lt;h2 id=&#34;redis初始化失败abort-due-to-existing-redis-instance&#34;&gt;Redis初始化失败：ABORT due to existing redis instance&lt;/h2&gt;
&lt;p&gt;这意味着正在初始化的 Redis 实例已经存在了，使用 &lt;code&gt;redis_clean = true&lt;/code&gt; 和 &lt;code&gt;redis_safeguard = false&lt;/code&gt; 来强制清除redis数据&lt;/p&gt;
&lt;p&gt;当您运行&lt;code&gt;redis.yml&lt;/code&gt;来初始化一个已经在运行的redis实例，并且&lt;a href=&#34;/zh/docs/reference/param#redis_clean&#34;&gt;&lt;code&gt;redis_clean&lt;/code&gt;&lt;/a&gt;设置为&lt;code&gt;false&lt;/code&gt;时，就会出现这种情况。&lt;/p&gt;
&lt;p&gt;如果&lt;code&gt;redis_clean&lt;/code&gt;设置为&lt;code&gt;true&lt;/code&gt;（并且 &lt;a href=&#34;/zh/docs/reference/param#redis_safeguard&#34;&gt;&lt;code&gt;redis_safeguard&lt;/code&gt;&lt;/a&gt; 也设置为&lt;code&gt;false&lt;/code&gt;），&lt;code&gt;redis.yml&lt;/code&gt;剧本将删除现有的redis实例并将其重新初始化为一个新的实例，这使得&lt;code&gt;redis.yml&lt;/code&gt;剧本完全具有幂等性。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;redis初始化失败abort-due-to-redis_safeguard-enabled&#34;&gt;Redis初始化失败：ABORT due to redis_safeguard enabled&lt;/h2&gt;
&lt;p&gt;这意味着正准备清理的 Redis 实例打开了防误删保险：当 &lt;a href=&#34;/zh/docs/reference/param#redis_safeguard&#34;&gt;&lt;code&gt;redis_safeguard&lt;/code&gt;&lt;/a&gt; 设置为 &lt;code&gt;true&lt;/code&gt; 时，尝试移除一个redis实例时就会出现这种情况。&lt;/p&gt;
&lt;p&gt;您可以关闭 &lt;a href=&#34;/zh/docs/reference/param#redis_safeguard&#34;&gt;&lt;code&gt;redis_safeguard&lt;/code&gt;&lt;/a&gt; 来移除Redis实例。这就是 &lt;code&gt;redis_safeguard&lt;/code&gt; 的作用。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;如何在某个节点上添加一个新的redis实例&#34;&gt;如何在某个节点上添加一个新的Redis实例？&lt;/h2&gt;
&lt;p&gt;使用 &lt;code&gt;bin/redis-add &amp;lt;ip&amp;gt; &amp;lt;port&amp;gt;&lt;/code&gt; 在节点上部署一个新的redis实例。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;如何从节点上移除一个特定实例&#34;&gt;如何从节点上移除一个特定实例？&lt;/h2&gt;
&lt;p&gt;使用 &lt;code&gt;bin/redis-rm &amp;lt;ip&amp;gt; &amp;lt;port&amp;gt;&lt;/code&gt; 从节点上移除一个单独的redis实例。&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>Docs: 常见问题</title>
      <link>/zh/docs/setup/faq/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/zh/docs/setup/faq/</guid>
      <description>
        
        
        &lt;blockquote&gt;
&lt;p&gt;这里列出了Pigsty用户在下载、安装、部署时常遇到的问题，如果您遇到了难以解决的问题，可以提交 &lt;a href=&#34;https://github.com/Vonng/pigsty/issues/new&#34;&gt;Issue&lt;/a&gt; 或者&lt;a href=&#34;/zh/docs/about/community&#34;&gt;联系我们&lt;/a&gt;。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2 id=&#34;如何获取pigsty软件源码包&#34;&gt;如何获取Pigsty软件源码包？&lt;/h2&gt;
&lt;p&gt;使用以下命令一键安装 Pigsty： &lt;code&gt;curl -fsSL https://repo.pigsty.cc/get | bash&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;上述命令会自动下载最新的稳定版本 &lt;code&gt;pigsty.tgz&lt;/code&gt; 并解压到 &lt;code&gt;~/pigsty&lt;/code&gt; 目录。您也可以从以下位置手动下载 Pigsty 源代码的特定版本。&lt;/p&gt;
&lt;p&gt;如果您需要在没有互联网的环境中安装，可以提前在有网络的环境中下载好，并通过 scp/sftp 或者 CDROM/USB 传输至生产服务器。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;如何加速从上游仓库下载-rpm-&#34;&gt;如何加速从上游仓库下载 RPM ?&lt;/h2&gt;
&lt;p&gt;考虑使用本地仓库镜像，仓库镜像在&lt;a href=&#34;/zh/docs/reference/param#repo_upstream&#34;&gt;&lt;code&gt;repo_upstream&lt;/code&gt;&lt;/a&gt; 参数中配置，你可以选择 &lt;a href=&#34;/zh/docs/reference/param#region&#34;&gt;&lt;code&gt;region&lt;/code&gt;&lt;/a&gt; 来使用不同镜像站。&lt;/p&gt;
&lt;p&gt;例如，您可以设置 &lt;code&gt;region&lt;/code&gt; = &lt;code&gt;china&lt;/code&gt;，这样将使用 &lt;code&gt;baseurl&lt;/code&gt; 中键为 &lt;code&gt;china&lt;/code&gt; 的 URL 而不是 &lt;code&gt;default&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;如果防火墙或GFW屏蔽了某些仓库，考虑使用&lt;a href=&#34;/zh/docs/reference/param#proxy_env&#34;&gt;&lt;code&gt;proxy_env&lt;/code&gt;&lt;/a&gt; 来绕过。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;安装失败应该如何解决&#34;&gt;安装失败应该如何解决？&lt;/h2&gt;
&lt;p&gt;Pigsty 不依赖 Docker，所以期待的环境是一个全新安装操作系统后的状态，如果您使用已经跑了千奇百怪服务的系统，更容易遇到疑难杂症，我们建议不要这么做。
出现安装失败时，可以按照以下思路进行排查：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;您应当确认当前失败的位置在哪个模块，不同模块失败有不同的原因。您应当保留 Ansible 剧本输出结果备用，并找到所有标红的 Failed 任务。&lt;/li&gt;
&lt;li&gt;如果出现无法识别配置，剧本直接无法开始，请检查您的配置文件是否是合法的 YAML，缩进，括号等是否有问题。&lt;/li&gt;
&lt;li&gt;如果错误与本地软件源，Nginx 有关，请检查你的系统是不是全新系统，是否已经运行了 Nginx 或其他组件？或者是否有特殊的防火墙与安全策略在运作？&lt;/li&gt;
&lt;li&gt;如果是安装节点软件包时出现错误，您是否使用了OS小版本精确匹配的离线软件包？上游是否出现依赖错漏？请参考下面的内容解决&lt;/li&gt;
&lt;li&gt;如果是系统配置出现错误，您的操作系统是否是全新安装的状态？或者 —— 精简安装到了 Locale 都没有配置的状态？&lt;/li&gt;
&lt;li&gt;如果是 MinIO 出现问题，您是否使用了 SNMD，MNMD 部署却没有提供真实的磁盘挂载点？您的 &lt;code&gt;sss.pigsty&lt;/code&gt; 静态域名是否指向了任意 MinIO 节点或 LB 集群？&lt;/li&gt;
&lt;li&gt;如果是 PGSQL 安装出现了问题，您在 pg_extension 中指定安装的扩展，是否还没有添加到 repo_packages 中，或者还没有被覆盖？&lt;/li&gt;
&lt;li&gt;如果是 PGSQL 启动出现了问题，例如 wait for patroni primary，请参考 &lt;a href=&#34;/zh/docs/pgsql/faq&#34;&gt;PGSQL FAQ&lt;/a&gt; 解决。&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id=&#34;软件包安装失败如何解决&#34;&gt;软件包安装失败如何解决？&lt;/h2&gt;
&lt;p&gt;请注意，Pigsty 的预制 &lt;a href=&#34;/zh/docs/setup/offline#%E7%A6%BB%E7%BA%BF%E8%BD%AF%E4%BB%B6%E5%8C%85&#34;&gt;&lt;strong&gt;离线软件包&lt;/strong&gt;&lt;/a&gt; 是针对 &lt;a href=&#34;/zh/docs/reference/compatibility/#vagrant-%E9%95%9C%E5%83%8F%E5%8F%82%E8%80%83&#34;&gt;&lt;strong&gt;特定操作系统发行版小版本&lt;/strong&gt;&lt;/a&gt; 打包的，
因此如果您使用的操作系统版本没有精确对齐，我们不建议使用离线软件安装包，而是直接从上游下载符合当前操作系统实际情况的软件包版本。&lt;/p&gt;
&lt;p&gt;如果在线安装无法解决包冲突问题，您首先可以尝试修改 Pigsty 使用的上游软件源。例如在 EL 系操作系统中， Pigsty 默认的上游软件源中使用 &lt;code&gt;$releasever&lt;/code&gt; 这样的大版本占位符，它将被解析为具体的 7，8，9 大版本号，但是许多操作系统发行版都提供了 Vault，允许您使用特定某一个版本的软件包镜像。
因此，您可以将 &lt;code&gt;repo_upstream&lt;/code&gt; 参数中的 BaseURL 前段替换为具体的 Vault 小版本仓库，例如：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;https://mirrors.aliyun.com/rockylinux/$releasever/&lt;/code&gt; （原始 BaseURL 前缀，不带 &lt;code&gt;vault&lt;/code&gt; ）&lt;/li&gt;
&lt;li&gt;&lt;code&gt;https://mirrors.tuna.tsinghua.edu.cn/centos-vault/7.6.1810/&lt;/code&gt; （使用 7.6 而不是默认的 7.9）&lt;/li&gt;
&lt;li&gt;&lt;code&gt;https://mirrors.aliyun.com/rockylinux-vault/8.6/&lt;/code&gt; （使用 8.6 而不是默认的 8.9）&lt;/li&gt;
&lt;li&gt;&lt;code&gt;https://mirrors.aliyun.com/rockylinux-vault/9.2/&lt;/code&gt; （使用 9.2 而不是默认的 9.3）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在替换前请注意目标软件源的路径是否真实存在，例如 EPEL 不提供小版本特定的软件源。支持这种方式的上游源包括：&lt;code&gt;base&lt;/code&gt;, &lt;code&gt;updates&lt;/code&gt;, &lt;code&gt;extras&lt;/code&gt;, &lt;code&gt;centos-sclo&lt;/code&gt;, &lt;code&gt;centos-sclo-rh&lt;/code&gt;, &lt;code&gt;baseos&lt;/code&gt;, &lt;code&gt;appstream&lt;/code&gt;, &lt;code&gt;extras&lt;/code&gt;, &lt;code&gt;crb&lt;/code&gt;, &lt;code&gt;powertools&lt;/code&gt;, &lt;code&gt;pgdg-common&lt;/code&gt;, &lt;code&gt;pgdg1*&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;repo_upstream&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: pigsty-local   ,description: &amp;#39;Pigsty Local&amp;#39;      ,module: local ,releases: [7,8,9] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;http://${admin_ip}/pigsty&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# used by intranet nodes&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: pigsty-infra   ,description: &amp;#39;Pigsty INFRA&amp;#39;      ,module: infra ,releases: [7,8,9] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;https://repo.pigsty.io/rpm/infra/$basearch&amp;#39; ,china&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://repo.pigsty.cc/rpm/infra/$basearch&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: pigsty-pgsql   ,description: &amp;#39;Pigsty PGSQL&amp;#39;      ,module: pgsql ,releases: [7,8,9] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;https://repo.pigsty.io/rpm/pgsql/el$releasever.$basearch&amp;#39; ,china&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://repo.pigsty.cc/rpm/pgsql/el$releasever.$basearch&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: nginx          ,description: &amp;#39;Nginx Repo&amp;#39;        ,module: infra ,releases: [7,8,9] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://nginx.org/packages/centos/$releasever/$basearch/&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: docker-ce      ,description: &amp;#39;Docker CE&amp;#39;         ,module: infra ,releases: [7,8,9] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;https://download.docker.com/linux/centos/$releasever/$basearch/stable&amp;#39;        ,china: &amp;#39;https://mirrors.aliyun.com/docker-ce/linux/centos/$releasever/$basearch/stable&amp;#39;  ,europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/docker-ce/linux/centos/$releasever/$basearch/stable&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: base           ,description: &amp;#39;EL 7 Base&amp;#39;         ,module: node  ,releases: [7    ] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;http://mirror.centos.org/centos/$releasever/os/$basearch/&amp;#39;                    ,china: &amp;#39;https://mirrors.tuna.tsinghua.edu.cn/centos/$releasever/os/$basearch/&amp;#39;           ,europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/centos/$releasever/os/$basearch/&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;           &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: updates        ,description: &amp;#39;EL 7 Updates&amp;#39;      ,module: node  ,releases: [7    ] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;http://mirror.centos.org/centos/$releasever/updates/$basearch/&amp;#39;               ,china: &amp;#39;https://mirrors.tuna.tsinghua.edu.cn/centos/$releasever/updates/$basearch/&amp;#39;      ,europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/centos/$releasever/updates/$basearch/&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;      &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: extras         ,description: &amp;#39;EL 7 Extras&amp;#39;       ,module: node  ,releases: [7    ] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;http://mirror.centos.org/centos/$releasever/extras/$basearch/&amp;#39;                ,china: &amp;#39;https://mirrors.tuna.tsinghua.edu.cn/centos/$releasever/extras/$basearch/&amp;#39;       ,europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/centos/$releasever/extras/$basearch/&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;       &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: epel           ,description: &amp;#39;EL 7 EPEL&amp;#39;         ,module: node  ,releases: [7    ] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;http://download.fedoraproject.org/pub/epel/$releasever/$basearch/&amp;#39;            ,china: &amp;#39;https://mirrors.tuna.tsinghua.edu.cn/epel/$releasever/$basearch/&amp;#39;                ,europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/epel/$releasever/$basearch/&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;                &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: centos-sclo    ,description: &amp;#39;EL 7 SCLo&amp;#39;         ,module: node  ,releases: [7    ] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;http://mirror.centos.org/centos/$releasever/sclo/$basearch/sclo/&amp;#39;             ,china: &amp;#39;https://mirrors.aliyun.com/centos/$releasever/sclo/$basearch/sclo/&amp;#39;              ,europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/centos/$releasever/sclo/$basearch/sclo/&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;    &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: centos-sclo-rh ,description: &amp;#39;EL 7 SCLo rh&amp;#39;      ,module: node  ,releases: [7    ] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;http://mirror.centos.org/centos/$releasever/sclo/$basearch/rh/&amp;#39;               ,china: &amp;#39;https://mirrors.aliyun.com/centos/$releasever/sclo/$basearch/rh/&amp;#39;                ,europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/centos/$releasever/sclo/$basearch/rh/&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;      &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: baseos         ,description: &amp;#39;EL 8+ BaseOS&amp;#39;      ,module: node  ,releases: [  8,9] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;https://dl.rockylinux.org/pub/rocky/$releasever/BaseOS/$basearch/os/&amp;#39;         ,china: &amp;#39;https://mirrors.aliyun.com/rockylinux/$releasever/BaseOS/$basearch/os/&amp;#39;          ,europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/rocky/$releasever/BaseOS/$basearch/os/&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;     &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: appstream      ,description: &amp;#39;EL 8+ AppStream&amp;#39;   ,module: node  ,releases: [  8,9] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;https://dl.rockylinux.org/pub/rocky/$releasever/AppStream/$basearch/os/&amp;#39;      ,china: &amp;#39;https://mirrors.aliyun.com/rockylinux/$releasever/AppStream/$basearch/os/&amp;#39;       ,europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/rocky/$releasever/AppStream/$basearch/os/&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: extras         ,description: &amp;#39;EL 8+ Extras&amp;#39;      ,module: node  ,releases: [  8,9] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;https://dl.rockylinux.org/pub/rocky/$releasever/extras/$basearch/os/&amp;#39;         ,china: &amp;#39;https://mirrors.aliyun.com/rockylinux/$releasever/extras/$basearch/os/&amp;#39;          ,europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/rocky/$releasever/extras/$basearch/os/&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;     &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: crb            ,description: &amp;#39;EL 9 CRB&amp;#39;          ,module: node  ,releases: [    9] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;https://dl.rockylinux.org/pub/rocky/$releasever/CRB/$basearch/os/&amp;#39;            ,china: &amp;#39;https://mirrors.aliyun.com/rockylinux/$releasever/CRB/$basearch/os/&amp;#39;             ,europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/rocky/$releasever/CRB/$basearch/os/&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;        &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: powertools     ,description: &amp;#39;EL 8 PowerTools&amp;#39;   ,module: node  ,releases: [  8  ] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;https://dl.rockylinux.org/pub/rocky/$releasever/PowerTools/$basearch/os/&amp;#39;     ,china: &amp;#39;https://mirrors.aliyun.com/rockylinux/$releasever/PowerTools/$basearch/os/&amp;#39;      ,europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/rocky/$releasever/PowerTools/$basearch/os/&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: epel           ,description: &amp;#39;EL 8+ EPEL&amp;#39;        ,module: node  ,releases: [  8,9] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;http://download.fedoraproject.org/pub/epel/$releasever/Everything/$basearch/&amp;#39; ,china: &amp;#39;https://mirrors.tuna.tsinghua.edu.cn/epel/$releasever/Everything/$basearch/&amp;#39;     ,europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/epel/$releasever/Everything/$basearch/&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;     &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: pgdg-common    ,description: &amp;#39;PostgreSQL Common&amp;#39; ,module: pgsql ,releases: [7,8,9] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;https://download.postgresql.org/pub/repos/yum/common/redhat/rhel-$releasever-$basearch&amp;#39; ,china: &amp;#39;https://mirrors.tuna.tsinghua.edu.cn/postgresql/repos/yum/common/redhat/rhel-$releasever-$basearch&amp;#39; , europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/postgresql/repos/yum/common/redhat/rhel-$releasever-$basearch&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: pgdg-extras    ,description: &amp;#39;PostgreSQL Extra&amp;#39;  ,module: pgsql ,releases: [7,8,9] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;https://download.postgresql.org/pub/repos/yum/common/pgdg-rhel$releasever-extras/redhat/rhel-$releasever-$basearch&amp;#39; ,china: &amp;#39;https://mirrors.tuna.tsinghua.edu.cn/postgresql/repos/yum/common/pgdg-rhel$releasever-extras/redhat/rhel-$releasever-$basearch&amp;#39; , europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/postgresql/repos/yum/common/pgdg-rhel$releasever-extras/redhat/rhel-$releasever-$basearch&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: pgdg-el8fix    ,description: &amp;#39;PostgreSQL EL8FIX&amp;#39; ,module: pgsql ,releases: [  8  ] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;https://download.postgresql.org/pub/repos/yum/common/pgdg-centos8-sysupdates/redhat/rhel-8-x86_64/&amp;#39; ,china: &amp;#39;https://mirrors.tuna.tsinghua.edu.cn/postgresql/repos/yum/common/pgdg-centos8-sysupdates/redhat/rhel-8-x86_64/&amp;#39; , europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/postgresql/repos/yum/common/pgdg-centos8-sysupdates/redhat/rhel-8-x86_64/&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: pgdg-el9fix    ,description: &amp;#39;PostgreSQL EL9FIX&amp;#39; ,module: pgsql ,releases: [    9] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;https://download.postgresql.org/pub/repos/yum/common/pgdg-rocky9-sysupdates/redhat/rhel-9-x86_64/&amp;#39;  ,china: &amp;#39;https://mirrors.tuna.tsinghua.edu.cn/postgresql/repos/yum/common/pgdg-rocky9-sysupdates/redhat/rhel-9-x86_64/&amp;#39; , europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/postgresql/repos/yum/common/pgdg-rocky9-sysupdates/redhat/rhel-9-x86_64/&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: pgdg15         ,description: &amp;#39;PostgreSQL 15&amp;#39;     ,module: pgsql ,releases: [7    ] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;https://download.postgresql.org/pub/repos/yum/15/redhat/rhel-$releasever-$basearch&amp;#39; ,china: &amp;#39;https://mirrors.tuna.tsinghua.edu.cn/postgresql/repos/yum/15/redhat/rhel-$releasever-$basearch&amp;#39; ,europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/postgresql/repos/yum/15/redhat/rhel-$releasever-$basearch&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: pgdg16         ,description: &amp;#39;PostgreSQL 16&amp;#39;     ,module: pgsql ,releases: [  8,9] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default: &amp;#39;https://download.postgresql.org/pub/repos/yum/16/redhat/rhel-$releasever-$basearch&amp;#39; ,china: &amp;#39;https://mirrors.tuna.tsinghua.edu.cn/postgresql/repos/yum/16/redhat/rhel-$releasever-$basearch&amp;#39; ,europe&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://mirrors.xtom.de/postgresql/repos/yum/16/redhat/rhel-$releasever-$basearch&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;- {&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;name: timescaledb    ,description: &amp;#39;TimescaleDB&amp;#39;       ,module: pgsql ,releases: [7,8,9] ,baseurl&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;{&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;default&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt; &lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;https://packagecloud.io/timescale/timescaledb/el/$releasever/$basearch&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;  &lt;/span&gt;}}&lt;span style=&#34;color:#f8f8f8;text-decoration:underline&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;在 Pigsty 配置文件中显式定义并覆盖 &lt;code&gt;repo_upstream&lt;/code&gt; 后，（可清除 &lt;code&gt;/www/pigsty/repo_complete&lt;/code&gt; 标记后）再次尝试安装。如果上游软件源与镜像源的软件没有解决问题，你可以考虑将上面的源替换为操作系统自带的软件源，再次尝试从上游直接安装。&lt;/p&gt;
&lt;p&gt;最后如果以上手段都没有解决问题，你可以考虑移除 &lt;code&gt;node_packages&lt;/code&gt;， &lt;code&gt;infra_packages&lt;/code&gt;， &lt;code&gt;pg_packages&lt;/code&gt;，&lt;code&gt;pg_extensions&lt;/code&gt; 中出现冲突的软件包。或者移除、升级现有系统上的冲突软件包。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;准备--bootstrap-过程是干什么的&#34;&gt;准备 / bootstrap 过程是干什么的？&lt;/h2&gt;
&lt;p&gt;检测环境是否就绪、用各种手段确保后续安装所必需的工具 &lt;code&gt;ansible&lt;/code&gt; 被正确安装。&lt;/p&gt;
&lt;p&gt;当你下载 Pigsty 源码后，可以进入目录并执行 &lt;a href=&#34;/zh/docs/setup/install#%E5%87%86%E5%A4%87&#34;&gt;&lt;code&gt;bootstrap&lt;/code&gt;&lt;/a&gt; 脚本。它会检测你的节点环境，如果没有发现离线软件包，它会询问你要不要从互联网下载。&lt;/p&gt;
&lt;p&gt;你可以选择 “是”（&lt;code&gt;y&lt;/code&gt;），直接使用离线软件包安装又快又稳定。你也可以选“否” (&lt;code&gt;n&lt;/code&gt;) 跳过，在安装时直接从互联网上游下载最新的软件包，这样会极大减少出现 RPM/DEB 包冲突的概率。&lt;/p&gt;
&lt;p&gt;如果使用了离线软件包，bootstrap 会直接从离线软件包中安装 ansible，否则会从上游下载 ansible 并安装，如果你没有互联网访问，又没有 DVD，或者内网软件源，那就只能用离线软件包来安装了。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;配置--configure-过程是干什么的&#34;&gt;配置 / configure 过程是干什么的？&lt;/h2&gt;
&lt;p&gt;配置 / &lt;a href=&#34;/zh/docs/setup/install#%E9%85%8D%E7%BD%AE&#34;&gt;&lt;strong&gt;configure&lt;/strong&gt;&lt;/a&gt; 过程会检测你的节点环境并为你生成一个 pigsty 配置文件：&lt;code&gt;pigsty.yml&lt;/code&gt;，默认根据你的操作系统（EL 7/8/9）选用相应的单机安装模板。&lt;/p&gt;
&lt;p&gt;所有默认的配置模板都在 &lt;code&gt;files/pigsty&lt;/code&gt;中，你可以使用 &lt;code&gt;-c&lt;/code&gt; 直接指定想要使用的配置模板。如果您已经知道如何配置 Pigsty 了，那么完全可以跳过这一步，直接编辑 Pigsty 配置文件。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;pigsty配置文件是干什么的&#34;&gt;Pigsty配置文件是干什么的？&lt;/h2&gt;
&lt;p&gt;Pigsty主目录下的 &lt;code&gt;pigsty.yml&lt;/code&gt; 是默认的配置文件，可以用来描述整套部署的环境，在 &lt;a href=&#34;https://github.com/Vonng/pigsty/tree/main/conf&#34;&gt;&lt;code&gt;conf/&lt;/code&gt;&lt;/a&gt; 目录中有许多配置示例供你参考。在 &lt;a href=&#34;/zh/docs/conf&#34;&gt;文档站：配置模板&lt;/a&gt; 中相关说明。&lt;/p&gt;
&lt;p&gt;当执行剧本时，你可以使用 &lt;code&gt;-i &amp;lt;path&amp;gt;&lt;/code&gt; 参数，选用其他位置的配置文件。例如，你想根据另一个专门的配置文件 &lt;code&gt;redis.yml&lt;/code&gt; 来安装 redis，可以这样做：&lt;code&gt;./redis.yml -i files/pigsty/redis.yml&lt;/code&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;如何使用-cmdb-作为配置清单&#34;&gt;如何使用 CMDB 作为配置清单？&lt;/h2&gt;
&lt;p&gt;Ansible 默认使用的配置清单在 &lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/ansible.cfg&#34;&gt;&lt;code&gt;ansible.cfg&lt;/code&gt;&lt;/a&gt; 中指定为：&lt;code&gt;inventory = pigsty.yml&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;你可以使用 &lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/bin/inventory_cmdb&#34;&gt;&lt;code&gt;bin/inventory_cmdb&lt;/code&gt;&lt;/a&gt; 切换到动态的 CMDB 清单，
使用 &lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/bin/inventory_conf&#34;&gt;&lt;code&gt;bin/inventory_conf&lt;/code&gt;&lt;/a&gt; 返回到本地配置文件。
你还需要使用 &lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/bin/inventory_load&#34;&gt;&lt;code&gt;bin/inventory_load&lt;/code&gt;&lt;/a&gt; 将当前的配置文件清单加载到 CMDB。&lt;/p&gt;
&lt;p&gt;如果使用 CMDB，你必须从数据库而不是配置文件中编辑清单配置，这种方式适合将 Pigsty 与外部系统相集成。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;配置文件中的ip地址占位符是干什么的&#34;&gt;配置文件中的IP地址占位符是干什么的？&lt;/h2&gt;
&lt;p&gt;Pigsty 使用 &lt;code&gt;10.10.10.10&lt;/code&gt; 作为当前节点 IP 的占位符，配置过程中会用当前节点的主 IP 地址替换它。&lt;/p&gt;
&lt;p&gt;当 &lt;code&gt;configure&lt;/code&gt; 检测到当前节点有多个 NIC 带有多个 IP 时，配置向导会提示使用哪个&lt;strong&gt;主要&lt;/strong&gt; IP，即 &lt;strong&gt;用户用于从内部网络访问节点的 IP&lt;/strong&gt;，此 IP 将用于在配置文件模板中替换占位符 &lt;code&gt;10.10.10.10&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;请注意，您应当使用静态 IP 地址，而不是 DHCP 分配的动态 IP 地址，因为 Pigsty 使用静态 IPv4 地址唯一标识节点。&lt;/p&gt;
&lt;p&gt;请注意：不要使用公共 IP 作为主 IP，因为 Pigsty 会使用主 IP 来配置内部服务，例如 Nginx，Prometheus，Grafana，Loki，AlertManager，Chronyd，DNSMasq 等，除了 Nginx 之外的服务不应该对外界暴露端口。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;我没有静态ip可以安装pigsty吗&#34;&gt;我没有静态IP，可以安装Pigsty吗？&lt;/h2&gt;
&lt;p&gt;如果您的服务器没有静态IP，在 &lt;strong&gt;单机部署&lt;/strong&gt; 的情况下，可以使用本地环回地址 &lt;code&gt;127.0.0.1&lt;/code&gt; 作为这个唯一节点的 IP 地址标识。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;配置文件中的哪些参数需要用户特殊关注&#34;&gt;配置文件中的哪些参数需要用户特殊关注？&lt;/h2&gt;
&lt;p&gt;Pigsty 提供了 280+ 配置参数，可以对整个环境与各个模块 infra / node / etcd / minio / pgsql 进行细致入微的定制。&lt;/p&gt;
&lt;p&gt;通常在单节点安装中，你不需要对默认生成的配置文件进行任何调整。但如果需要，可以关注以下这些参数：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;当访问 web 服务组件时，域名由 &lt;a href=&#34;/zh/docs/reference/param#infra_portal&#34;&gt;&lt;code&gt;infra_portal&lt;/code&gt;&lt;/a&gt; 指定，有些服务只能通过 Nginx 代理使用域名访问。&lt;/li&gt;
&lt;li&gt;Pigsty 假定存在一个 &lt;code&gt;/data&lt;/code&gt; 目录用于存放所有数据；如果数据磁盘的挂载点与此不同，你可以使用 &lt;a href=&#34;/zh/docs/reference/param#node_data&#34;&gt;&lt;code&gt;node_data&lt;/code&gt;&lt;/a&gt; 调整这些路径。&lt;/li&gt;
&lt;li&gt;进行生产部署时，不要忘记在配置文件中更改&lt;strong&gt;密码&lt;/strong&gt;，更多细节请参考 &lt;a href=&#34;/zh/docs/setup/security&#34;&gt;安全考量&lt;/a&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;在默认单机安装时到底都安装了什么东西&#34;&gt;在默认单机安装时，到底都安装了什么东西？&lt;/h2&gt;
&lt;p&gt;当您执行 &lt;code&gt;make install&lt;/code&gt; 时，实际上是调用 Ansible 剧本 &lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/install.yml&#34;&gt;&lt;code&gt;install.yml&lt;/code&gt;&lt;/a&gt;，根据配置文件中的参数，安装以下内容：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;/zh/docs/infra&#34;&gt;&lt;code&gt;INFRA&lt;/code&gt;&lt;/a&gt; 模块：提供本地软件源，Nginx Web接入点，DNS服务器，NTP服务器，Prometheus与Grafana可观测性技术栈。&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;/zh/docs/node&#34;&gt;&lt;code&gt;NODE&lt;/code&gt;&lt;/a&gt;  模块，将当前节点纳入 Pigsty 管理，部署 HAProxy 与 监控。&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;/zh/docs/etcd&#34;&gt;&lt;code&gt;ETCD&lt;/code&gt;&lt;/a&gt;  模块，部署一个单机 etcd 集群，作为 PG 高可用的 DCS&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;/zh/docs/minio&#34;&gt;&lt;code&gt;MINIO&lt;/code&gt;&lt;/a&gt; 模块如果定义，则会安装，它可以作为 PG 的可选备份仓库。&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;/zh/docs/pgsql&#34;&gt;&lt;code&gt;PGSQL&lt;/code&gt;&lt;/a&gt; 模块，一个单机 PostgreSQL 数据库实例。&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;安装遇到软件包冲突怎么办&#34;&gt;安装遇到软件包冲突怎么办？&lt;/h2&gt;
&lt;p&gt;在安装 node / infra / pgsql 软件包期间，可能有微小的几率出现软件包依赖错漏冲突。这里有几种常见原因：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;上游软件源发布了不匹配的软件包版本或缺失了依赖，您可能要等待上游修复此问题，时间以周计。事先在依赖完备时制作的离线安装包可以预防这个问题。&lt;/li&gt;
&lt;li&gt;您制作离线安装包操作系统小版本与当前操作系统的小版本不匹配，您可以使用在线安装，或重新使用相同系统下制作的离线软件包的方式解决此问题&lt;/li&gt;
&lt;li&gt;个别不重要，非必选的软件包，可以直接将其从安装列表，或本地软件源中剔除的方式快速绕过。&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id=&#34;如何重建本地软件仓库&#34;&gt;如何重建本地软件仓库？&lt;/h2&gt;
&lt;p&gt;我想要从上游仓库重新下载软件包，但是执行 &lt;code&gt;./infra.yml&lt;/code&gt; 和 &lt;code&gt;repo&lt;/code&gt; 子任务都跳过下载了，怎么办？&lt;/p&gt;
&lt;p&gt;您可以使用以下快捷命令和剧本任务，强制重建本地软件源。 Pigsty 会重新检查上游仓库并下载软件包。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;make repo-build      &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# ./infra.yml -t repo_build  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;如何在安装后下载最新版本的软件包&#34;&gt;如何在安装后下载最新版本的软件包？&lt;/h2&gt;
&lt;p&gt;如果您想要下载最新的软件包版本（RPM/DEB），你可以选择在 &lt;code&gt;/www/pigsty&lt;/code&gt; 中手工使用 &lt;code&gt;apt/dnf&lt;/code&gt; 下载特定版本的软件包。
在这种情况下，您可以使用以下命令，只更新本地软件仓库的元数据库，而不是整个重建：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./infra.yml -t repo_create
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;或者移除 &lt;code&gt;/www/pigsty&lt;/code&gt; 中的旧版本软件包后重新执行仓库重建命令：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;make repo-build      &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# ./infra.yml -t repo_build  &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;如何使用-vagrant-创建本地虚拟机&#34;&gt;如何使用 Vagrant 创建本地虚拟机？&lt;/h2&gt;
&lt;p&gt;当你第一次使用 Vagrant 启动某个特定的操作系统仓库时，它会下载相应的 Box/Img 镜像文件，Pigsty 沙箱默认使用 &lt;code&gt;generic/rocky9&lt;/code&gt; 镜像。&lt;/p&gt;
&lt;p&gt;使用代理可能会增加下载速度。Box/Image 只需下载一次，在重建沙箱时会被重复使用。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;阿里云上-centos-79-特有的-rpm-冲突问题&#34;&gt;阿里云上 CentOS 7.9 特有的 RPM 冲突问题&lt;/h2&gt;
&lt;p&gt;阿里云的 CentOS 7.9 额外安装的 &lt;code&gt;nscd&lt;/code&gt; 可能会导致 RPM 冲突问题：&lt;code&gt;&amp;quot;Error: Package: nscd-2.17-307.el7.1.x86_64 (@base)&amp;quot;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;遇见安装失败，RPM冲突报错不要慌，这是一个DNS缓存工具，把这个包卸载了就可以了：&lt;code&gt;sudo yum remove nscd&lt;/code&gt;，或者使用 ansible 命令批量删除所有节点上的 &lt;code&gt;nscd&lt;/code&gt;：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ansible all -b -a &lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#39;yum remove -y nscd&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;腾讯云上-rocky-9x-特有的-rpm-冲突问题&#34;&gt;腾讯云上 Rocky 9.x 特有的 RPM 冲突问题&lt;/h2&gt;
&lt;p&gt;腾讯云的 Rocky 9.x 需要额外的 &lt;code&gt;annobin&lt;/code&gt; 软件包才可以正常完成 Pigsty 安装。&lt;/p&gt;
&lt;p&gt;遇见安装失败，RPM冲突报错不要慌，进入 &lt;code&gt;/www/pigsty&lt;/code&gt; 把这几个包手动下载下来就好了。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./infra.yml -t repo_upstream      &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# add upstream repos&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87&#34;&gt;cd&lt;/span&gt; /www/pigsty&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;;&lt;/span&gt;                   &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# download missing packages&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;repotrack annobin gcc-plugin-annobin libuser
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;./infra.yml -t repo_create        &lt;span style=&#34;color:#8f5902;font-style:italic&#34;&gt;# create repo&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;ansible命令超时timeout-waiting-for-xxx&#34;&gt;Ansible命令超时（Timeout waiting for xxx）&lt;/h2&gt;
&lt;p&gt;Ansible 命令的默认 ssh 超时时间是10秒。由于网络延迟或其他原因，某些命令可能需要超过这个时间。&lt;/p&gt;
&lt;p&gt;你可以在 ansible 配置文件 &lt;a href=&#34;https://github.com/Vonng/pigsty/blob/main/ansible.cfg&#34;&gt;&lt;code&gt;ansible.cfg&lt;/code&gt;&lt;/a&gt; 中增加超时参数：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-ini&#34; data-lang=&#34;ini&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;[defaults]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#c4a000&#34;&gt;timeout&lt;/span&gt; &lt;span style=&#34;color:#ce5c00;font-weight:bold&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#4e9a06&#34;&gt;10 # 将其修改为 60，120 或更高。&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;如果你的SSH连接非常慢，通常会是 DNS的问题，请检查sshd配置确保 &lt;code&gt;UseDNS no&lt;/code&gt;。&lt;/p&gt;
&lt;br&gt;
&lt;hr&gt;
&lt;br&gt;
      </description>
    </item>
    
  </channel>
</rss>
